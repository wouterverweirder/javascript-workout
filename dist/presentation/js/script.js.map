{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/browserify/lib/_empty.js","node_modules/es6-promise/dist/es6-promise.js","node_modules/events/events.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/process/browser.js","node_modules/whatwg-fetch/dist/fetch.umd.js","src/presentation/js/classes/HeartRateCanvas.js","src/presentation/js/classes/MobileServerBridge.js","src/presentation/js/classes/NodeAppRunner.js","src/presentation/js/classes/Presentation.js","src/presentation/js/classes/SlideBridge.js","src/presentation/js/classes/Webcam.js","src/presentation/js/classes/highest-heartrate-game-slide/game/Game.js","src/presentation/js/classes/highest-heartrate-game-slide/game/SparkHeartRatesPlugin.js","src/presentation/js/classes/highest-heartrate-game-slide/game/objects/Button.js","src/presentation/js/classes/highest-heartrate-game-slide/game/objects/Flagpole.js","src/presentation/js/classes/highest-heartrate-game-slide/game/objects/GameCharacter.js","src/presentation/js/classes/highest-heartrate-game-slide/game/states/Play.js","src/presentation/js/classes/highest-heartrate-game-slide/game/states/Preload.js","src/presentation/js/classes/live-code/CodeElement.js","src/presentation/js/classes/live-code/ConsoleElement.js","src/presentation/js/classes/live-code/TerminalElement.js","src/presentation/js/classes/live-code/WebPreviewElement.js","src/presentation/js/classes/live-code/WebcamElement.js","src/presentation/js/classes/live-code/index.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/objects/Beam.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/objects/GameCharacter.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/states/Play.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/states/Preload.js","src/presentation/js/classes/sensors/PolarH7.js","src/presentation/js/script.js","src/server/classes/SlidesFolderParser.js","src/shared/js/Constants.js","src/shared/js/classes/MobileServerBridge.js","src/shared/js/classes/Presentation.js","src/shared/js/classes/SlideBridge.js","src/shared/js/classes/ContentBase.js","src/presentation/js/classes/heart-rate-slide/index.js","src/presentation/js/classes/highest-heartrate-game-slide/index.js","src/presentation/js/classes/live-code-slide/index.js","src/presentation/js/classes/lowest-heartrate-game-slide/index.js","src/presentation/js/classes/react-phones-slide/index.js","src/presentation/js/classes/shake-your-phones-slide/index.js","src/presentation/js/classes/video-slide/index.js","src/presentation/js/classes/webview-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/pCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.5+7f2b526d\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar TRY_CATCH_ERROR = { error: null };\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    TRY_CATCH_ERROR.error = error;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === TRY_CATCH_ERROR) {\n      reject(promise, TRY_CATCH_ERROR.error);\n      TRY_CATCH_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = void 0,\n      failed = void 0;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (failed) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = getThen(entry);\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        handleMaybeThenable(promise, entry, _then);\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.WHATWGFetch = {})));\n}(this, (function (exports) { 'use strict';\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","export default class HeartRateCanvas {\n  constructor(canvas) {\n    this.pixelsPerBeatAt60BPM = 100;\n    this.frameNr = 0;\n    this.fps = 60;\n    this.numValues = 0;\n    this.numValuesMargin = 9;\n    this.numValuesWithMargin = 9;\n    this.heartRate = 0;\n    this.backgroundColor = `#fff`;\n    this.strokeColor = `#00f`;\n\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext(`2d`);\n    this.width = this.canvas.width;\n    this.height = this.canvas.height;\n    this._initSizeDependedVariables();\n\n    this.heartRateTickInterval = Math.round(this.fps * 60 / this.heartRate);\n  }\n\n  resize(w, h) {\n    this.width = this.canvas.width = w;\n    this.height = this.canvas.height = h;\n    this._initSizeDependedVariables();\n  }\n\n  _initSizeDependedVariables() {\n    this.numValues = Math.round(this.width * 0.80);\n    this.numValuesWithMargin = this.numValues + this.numValuesMargin;\n    if(!this.values) {\n      this.values = [];\n    }\n    this.values.length = this.numValuesWithMargin;\n    this.canvasVerticalCenter = this.height / 2;\n  }\n\n  tick() {\n    this.frameNr++;\n\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[0]));\n    for(let i = 1; i < this.numValues; i++) {\n      this.ctx.lineTo(i, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[i]));\n    }\n    this.ctx.strokeStyle = this.strokeColor;\n    this.ctx.stroke();\n    this.ctx.closePath();\n\n    this.ctx.beginPath();\n    this.ctx.arc(this.numValues - 1, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[this.numValues - 1]), 2, 0, Math.PI * 2);\n    this.ctx.fillStyle = this.strokeColor;\n    this.ctx.fill();\n    this.ctx.closePath();\n\n    //does the tick align with a beat?\n    if(this.heartRate > 0 && this.frameNr % this.heartRateTickInterval === 0) {\n      this.frameNr = 0;//reset to zero\n      const strength = 0.7 + Math.random() * 0.3;\n      this.values[this.numValuesWithMargin - this.numValuesMargin - 1] = 0.05 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 0] = 0.1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 1] = 0.3 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 2] = 1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 3] = 0 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 4] = -1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 5] = -0.3 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 6] = -0.1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 7] = -0.05 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 8] = 0 * strength;\n    }\n\n    this.values.shift();\n    this.values.shift();\n    this.values.push(Math.random() * 0.05 - 0.1);\n    this.values.push(Math.random() * 0.05 - 0.1);\n  }\n\n  updateHeartRate(heartRate) {\n    this.heartRate = heartRate;\n    if(this.heartRate > 0) {\n      this.heartRateTickInterval = Math.round(this.fps * 60 / this.heartRate);\n    }\n  }\n}\n","import MobileServerBridgeBase from '../../../shared/js/classes/MobileServerBridge';\nimport {Constants} from '../../../shared/js/Constants';\n\nexport default class MobileServerBridge extends MobileServerBridgeBase{\n\n  constructor(presentation, settings) {\n    super(presentation, settings);\n    bean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n  }\n\n  socketConnectHandler() {\n    super.socketConnectHandler();\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: `mobile`,\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: this.presentation.currentSlideIndex\n      }\n    });\n  }\n\n  currentSlideIndexChanged(currentSlideIndex) {\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: `mobile`,\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: currentSlideIndex\n      }\n    });\n  }\n\n}\n","const childProcess = requireNode(`child_process`);\nconst EventEmitter = requireNode(`events`).EventEmitter;\nconst path = requireNode(`path`);\n\nconst platform = requireNode(`electron`).remote.process.platform;\nconst isWin = /^win/.test(platform);\n\n//kill entire process tree\n//http://krasimirtsonev.com/blog/article/Nodejs-managing-child-processes-starting-stopping-exec-spawn\nconst kill = (pid, signal) => {\n  signal = signal || `SIGKILL`;\n  return new Promise(resolve => {\n    if(!isWin) {\n      const psTree = requireNode(`ps-tree`);\n      const killTree = true;\n      if(killTree) {\n        psTree(pid, (err, children) => {\n          [pid].concat(children.map(p => p.PID)).forEach(tpid => {\n            try { process.kill(tpid, signal); }\n            catch (ex) { console.error(ex); }\n          });\n        });\n      } else {\n        try { process.kill(pid, signal); }\n        catch (ex) { console.error(ex); }\n      }\n      resolve();\n    } else {\n      childProcess.exec(`taskkill /PID ${  pid  } /T /F`, () => {\n        resolve();\n      });\n    }\n  });\n};\n\nexport default class NodeAppRunner extends EventEmitter {\n  constructor() {\n    super();\n  }\n  run(applicationPath) {\n    return this.stop()\n    .then(() => {\n      this.cwd = path.dirname(applicationPath);\n      this.numDataEventsReceived = 0;\n      this.ignoreFirstEventsAmount = 0;\n      if(isWin) {\n        this.ignoreFirstEventsAmount = 2;\n        this.runner = childProcess.spawn(`cmd`, [`nvmw`, `use`, `iojs-v2.3.1`], {cwd: this.cwd});\n        setTimeout(() => {\n          this.runner.stdin.write(`node ${  applicationPath  }\\n`);\n        }, 500);\n      } else {\n        console.log(`node ${  applicationPath}`);\n        this.runner = childProcess.spawn(`node`, [applicationPath], {cwd: this.cwd});\n      }\n      this.runner.stdout.on(`data`, data => this.onRunnerData(data));\n      this.runner.stderr.on(`data`, error => this.onRunnerError(error));\n      this.runner.on(`disconnect`, () => this.onDisconnect());\n      this.runner.on(`close`, () => this.onClose());\n      this.runner.on(`exit`, () => this.onExit());\n    });\n  }\n  onRunnerData(data) {\n    this.numDataEventsReceived++;\n    if(this.numDataEventsReceived <= this.ignoreFirstEventsAmount) {\n      //ignore the first x-messages\n      return;\n    }\n    data = data.toString().trim();\n    if(data.indexOf(this.cwd) === 0) {\n      data = data.substr(this.cwd.length);\n      if(data.length === 1) {\n        return;\n      }\n    }\n    this.emit(`stdout-data`, data);\n  }\n\n  onRunnerError(error) {\n    this.emit(`stderr-data`, error.toString().trim());\n  }\n\n  onDisconnect() {\n    console.log(`[ChildApp] runner disconnected`);\n    this.runner = false;\n  }\n\n  onClose() {\n    console.log(`[ChildApp] runner closed`);\n    this.runner = false;\n  }\n\n  onExit() {\n    console.log(`[ChildApp] runner exited`);\n    this.runner = false;\n  }\n\n  stop() {\n    return new Promise(resolve => {\n      if(!this.runner) {\n        resolve();\n      }\n      this.runner.stdout.removeAllListeners();\n      this.runner.stderr.removeAllListeners();\n      this.runner.stdin.end();\n      //listen for runner events and resolve on the one that occurs\n      // const cbCalled = false;\n      // this.runner.on('disconnect', () => {\n      //   console.log('disconnect');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('close', () => {\n      //   console.log('close');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('exit', () => {\n      //   console.log('exit');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      kill(this.runner.pid).then(() => {\n        resolve();\n      });\n      this.runner = false;\n    });\n  }\n  destroy() {\n    return this.stop()\n    .then(() => {\n    });\n  }\n}\n","import {Constants} from '../../../shared/js/Constants';\nimport PresentationBase from '../../../shared/js/classes/Presentation';\nimport SlideBridge from './SlideBridge';\nimport MobileServerBridge from './MobileServerBridge';\n\nimport PolarH7 from './sensors/PolarH7';\nimport Webcam from './Webcam';\n\nconst path = requireNode(`path`);\n\nconst KEYCODE_LEFT = 37;\nconst KEYCODE_RIGHT = 39;\nconst KEYCODE_SPACE = 32;\n\nexport default class Presentation extends PresentationBase {\n  constructor(data, role, settings) {\n    super(data, role, settings);\n\n    console.log(`[Presentation] constructor`);\n\n    this.polarH7 = new PolarH7();\n    this.polarH7.on(PolarH7.HEART_RATE, this.heartRatePolarHandler.bind(this));\n\n    this.webcam = new Webcam(document.getElementById(`webcam-video`));\n\n    window.onbeforeunload = event => this.closeHandler(event);\n    $(window).on(`keydown`, event => this.keydownHandler(event));\n    bean.on(this, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChangedHandler.bind(this));\n\n    $(`body`).on(Constants.GO_TO_PREVIOUS_SLIDE, this.goToPreviousSlide.bind(this));\n    $(`body`).on(Constants.GO_TO_NEXT_SLIDE, this.goToNextSlide.bind(this));\n    $(`body`).on(Constants.OPEN_COMMAND_LINE, this.openCommandLine.bind(this));\n    $(`body`).on(Constants.OPEN_CAMERA, this.openCamera.bind(this));\n  }\n\n  closeHandler(event) { // eslint-disable-line no-unused-vars\n  }\n\n  currentSlideIndexChangedHandler(slideIndex) { // eslint-disable-line no-unused-vars\n  }\n\n  createMobileServerBridge() {\n    return new MobileServerBridge(this, this.settings);\n  }\n\n  toggleElevatorMusic() {\n    this.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n    if(this.elevatorMusicPlaying) {\n      this.elevatorMusic.play();\n    } else {\n      this.elevatorMusic.pause();\n    }\n  }\n\n  //prepend urls with file:/// (faster?)\n  processSlideSrc(src) {\n    src = `file:///${  path.resolve(this.settings.presentationPath, src)}`;\n    src = src.replace(/\\\\/g, `/`);\n    return src;\n  }\n\n  createSlideBridges(data) {\n    PresentationBase.prototype.createSlideBridges.call(this, data);\n    const that = this;\n    const $slideMenu = $(`#slideMenu`);\n    const numSlideBridges = this.slideBridges.length;\n    for(let i = 0; i < numSlideBridges; i++) {\n      const slideBridge = this.slideBridges[i];\n      $slideMenu.append(`<button type=\"button\" data-slidenr=\"${  i  }\" class=\"dropdown-item\">${  i + 1  } ${  slideBridge.name  }</button>`);\n    }\n    $slideMenu.find(`button`).on(`click`, function(event){\n      event.preventDefault();\n      that.setCurrentSlideIndex(parseInt($(this).data(`slidenr`)));\n    });\n  }\n\n  createSlideBridge(slide) {\n    //use our own bridge which doesn't use fetch\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    PresentationBase.prototype.slideMessageHandler.call(this, event);\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.GO_TO_PREVIOUS_SLIDE:\n      this.goToPreviousSlide();\n      break;\n    case Constants.GO_TO_NEXT_SLIDE:\n      this.goToNextSlide();\n      break;\n    case Constants.OPEN_COMMAND_LINE:\n      this.openCommandLine();\n      break;\n    case Constants.OPEN_CAMERA:\n      this.openCamera();\n      break;\n    }\n  }\n\n  keydownHandler(event) {\n    //one frame delay\n    window.requestAnimationFrame(() => {\n      if(event.isImmediatePropagationStopped()) {\n        return;\n      }\n      switch(event.keyCode) {\n      case KEYCODE_LEFT:\n        this.goToPreviousSlide();\n        break;\n      case KEYCODE_RIGHT:\n        this.goToNextSlide();\n        break;\n      case KEYCODE_SPACE:\n        $(`#presentation-controls`).toggle();\n        break;\n      }\n    });\n  }\n\n  childAppDataHandler(data) {\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDOUT_DATA,\n        data: data\n      });\n    }\n  }\n\n  childAppErrorHandler(data) {\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDERR_DATA,\n        data: data\n      });\n    }\n  }\n\n  heartRatePolarHandler(heartRate) {\n    $(`#global-heart-rate`).text(heartRate);\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.HEART_RATE_POLAR,\n        heartRate: heartRate\n      });\n    }\n  }\n\n  openCommandLine() {\n    $(`#consoleModal`).modal(`show`);\n  }\n\n  openCamera() {\n    $(`#webcamModal`).modal(`show`);\n  }\n\n  handleMobileServerMessage(message) {\n    if(message.content) {\n      if(message.content.action === `goToNextSlide`) {\n        this.goToNextSlide();\n      } else if(message.content.action === `goToPreviousSlide`) {\n        this.goToPreviousSlide();\n      }\n    }\n  }\n}\n","import SlideBridgeBase from '../../../shared/js/classes/SlideBridge';\n\nexport default class SlideBridge extends SlideBridgeBase {\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    // console.log('attachToSlideHolder', src);\n    // console.log(slideHolder);\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if (src !== $(slideHolder).attr(`data-src`)) {\n      //create html import\n      const $importEl = $(`<link rel=\"import\">`);\n      const importEl = $importEl[0];\n      $importEl.on(`load`, () => {\n        const template = importEl.import.querySelector(`template`);\n        if(template) {\n          const clone = document.importNode(template.content, true);\n          this.slideHolder.appendChild(clone);\n        }\n        $importEl.remove();\n        $(slideHolder).removeClass(`loading`);\n        cb();\n      });\n      $importEl.attr(`href`, src);\n      $(slideHolder).attr(`data-src`, src);\n      $(slideHolder).html($importEl);\n    }\n  }\n}\n","const getCameraConfig = videoWidth => {\n  let sourceId = false;\n  return window.navigator.mediaDevices.enumerateDevices()\n    .then(devices => devices.filter(device => device.kind === `video`))\n    .then(devices => {\n      devices.forEach(device => {\n        console.log(device);\n        if(!sourceId || device.label.toLowerCase().indexOf(`facetime`) === -1) {\n          sourceId = device.deviceId;\n        }\n      });\n    })\n    .then(() => {\n      return {\n        video: {\n          optional: [\n            { sourceId },\n            { minWidth: videoWidth}\n          ]\n        }\n      };\n    });\n};\n\nexport default class Webcam {\n  constructor(video) {\n    this.video = video;\n    getCameraConfig(1280)\n      .then(config => window.navigator.mediaDevices.getUserMedia(config))\n      .then(stream => {\n        this.video.src = window.URL.createObjectURL(stream);\n        this.video.onloadedmetadata = () => {\n          this.video.width = this.video.videoWidth;\n          this.video.height = this.video.videoHeight;\n          this.video.play();\n        };\n      });\n  }\n}\n","import HeartRateCanvas from '../../HeartRateCanvas';\n\nimport SparkHeartRatesPlugin from './SparkHeartRatesPlugin';\n\nimport Preload from './states/Preload';\nimport Play from './states/Play';\n\nexport default class Game extends Phaser.Game {\n  constructor(slideHolder, width, height, renderMode, container) {\n    super(width, height, renderMode, container, { preload: () => this.preload()});\n    this.slideHolder = slideHolder;\n    this.state.add(`Preload`, Preload);\n    this.state.add(`Play`, Play);\n\n    this.player1HeartRateCanvas = new HeartRateCanvas(this.slideHolder.querySelector(`.player1-container canvas`));\n    this.player1HeartRateText = this.slideHolder.querySelector(`.player1-container .heartRate`);\n    this.player2HeartRateCanvas = new HeartRateCanvas(this.slideHolder.querySelector(`.player2-container canvas`));\n    this.player2HeartRateText = this.slideHolder.querySelector(`.player2-container .heartRate`);\n  }\n  preload() {\n    this.sparkHeartRatesPlugin = this.plugins.add(SparkHeartRatesPlugin);\n    this.onPause.add(() => this.manageSparkHeartRatesPluginConnection());\n    this.onResume.add(() => this.manageSparkHeartRatesPluginConnection());\n    this.manageSparkHeartRatesPluginConnection();\n    this.state.start(`Preload`);\n  }\n  update(time) {\n    super.update(time);\n    if(!this.sparkHeartRatesPlugin) {\n      return;\n    }\n    this.player1HeartRateCanvas.tick();\n    this.player1HeartRateCanvas.updateHeartRate(this.sparkHeartRatesPlugin.player1.heartRate);\n    this.player1HeartRateText.innerHTML = this.sparkHeartRatesPlugin.player1.heartRate;\n    this.player2HeartRateCanvas.tick();\n    this.player2HeartRateCanvas.updateHeartRate(this.sparkHeartRatesPlugin.player2.heartRate);\n    this.player2HeartRateText.innerHTML = this.sparkHeartRatesPlugin.player2.heartRate;\n  }\n  manageSparkHeartRatesPluginConnection() {\n    console.log(`[Game] manageSparkHeartRatesPluginConnection`);\n    if(this.paused) {\n      this.sparkHeartRatesPlugin.close();\n    } else {\n      this.sparkHeartRatesPlugin.connect();\n    }\n  }\n}\n","const PLAYER_1_SPARK_ID = `55ff70065075555332171787`; //red one\nconst PLAYER_2_SPARK_ID = `53ff73065075535143191387`; //blue one\n\nexport default class SparkHeartRatesPlugin extends Phaser.Plugin {\n  constructor(game, parent) {\n    super(game, parent);\n    this.connected = false;\n  }\n  init() {\n    console.log(`SparkHeartRatesPlugin Plugin init`);\n    this.player1 = {\n      sparkId: PLAYER_1_SPARK_ID,\n      heartRate: 0\n    };\n    this.player2 = {\n      sparkId: PLAYER_2_SPARK_ID,\n      heartRate: 0\n    };\n    this._udpErrorHandler = error => this.udpErrorHandler(error);\n    this._udpMessageHandler = (message, remoteInfo) => this.udpMessageHandler(message, remoteInfo);\n    this._udpListeningHandler = () => this.udpListeningHandler();\n  }\n  connect() {\n    if(this.connected) {\n      return;\n    }\n    console.log(`SparkHeartRatesPlugin connect`);\n    this.connected = true;\n    let dgram;\n    try {\n      dgram = (requireNode !== null) ? requireNode(`dgram`) : require(`dgram`);\n    } catch (e) {\n      console.error(e);\n    }\n    if(!dgram) {\n      return;\n    }\n    this.udpSocket = dgram.createSocket(`udp4`);\n    this.udpSocket.on(`error`, this._udpErrorHandler);\n    this.udpSocket.on(`message`, this._udpMessageHandler);\n    this.udpSocket.on(`listening`, this._udpListeningHandler);\n    this.udpSocket.bind(1234);\n  }\n  close() {\n    if(!this.connected) {\n      return;\n    }\n    console.log(`SparkHeartRatesPlugin close`);\n    this.connected = false;\n    if(!this.udpSocket) {\n      return;\n    }\n    this.udpSocket.removeListener(`error`, this._udpErrorHandler);\n    this.udpSocket.removeListener(`message`, this._udpMessageHandler);\n    this.udpSocket.removeListener(`listening`, this._udpListeningHandler);\n    this.udpSocket.close();\n    this.udpSocket = null;\n  }\n  udpErrorHandler(error) {\n    console.log(`[SparkHeartRatesPlugin] udpErrorHandler`, error);\n    this.udpSocket.close();\n  }\n  udpMessageHandler(message, remoteInfo) { // eslint-disable-line no-unused-vars\n    const str = message.toString();\n    const split = str.split(`;`);\n    if(split.length > 2) {\n      this.setHeartRate(split[0], split[2]);\n    }\n  }\n  udpListeningHandler() {\n    console.log(`[SparkHeartRatesPlugin] udpListening`);\n  }\n  setHeartRate(sparkId, heartRate) {\n    heartRate = parseInt(heartRate);\n    if(this.player1.sparkId === sparkId) {\n      this.player1.heartRate = heartRate;\n      return;\n    }\n    if(this.player2.sparkId === sparkId) {\n      this.player2.heartRate = heartRate;\n      return;\n    }\n  }\n  destroy() {\n    this.close();\n    super.destroy();\n  }\n}\n","export default class Button extends Phaser.Button {\n  constructor(game, x, y, callback, callbackContext, colorName, label) {\n    super(game, x, y, `components`, callback, callbackContext, `${colorName}-over`, `${colorName}-normal`, `${colorName}-down`);\n    this.labelField = new Phaser.Text(game, 0, 0, ``, {\n      font: `36px Arial`,\n      fill: `#ffffff`\n    });\n    this.labelField.anchor.setTo(0.5, 0.5);\n    this.addChild(this.labelField);\n    this.label = label;\n  }\n  set label(value) {\n    this.labelField.text = value;\n  }\n  get label() {\n    return this.labelField.text;\n  }\n}\n","export default class Flagpole extends Phaser.Group {\n  constructor(game, x, y) {\n    super(game);\n    this.x = x;\n    this.y = y;\n\n    this.pole = new Phaser.Sprite(this.game, 0, 0, `mario-graphics`, `flagpole.png`);\n    this.pole.anchor.setTo(0.5, 1);\n    this.add(this.pole);\n\n    this.flag = new Phaser.Sprite(this.game, 0, 0, `mario-graphics`, `flag-moving1.png`);\n    this.flag.anchor.setTo(0, 1);\n    this.flag.y = -this.pole.height + this.flag.height + 20;\n    this.flag.animations.add(`moving`, [\n      `flag-moving1.png`,\n      `flag-moving2.png`,\n      `flag-moving3.png`\n    ], 10, true, true);\n    this.flag.animations.play(`moving`);\n    this.add(this.flag);\n  }\n}\n","export default class GameCharacter extends Phaser.Sprite {\n  constructor(game, x, y, character) {\n    super(game, x, y, `mario-graphics`, `${character}-run-1.png`);\n    this.anchor.setTo(0.5, 1);\n    this.animations.add(`stand`, [\n      `${character}-run-1.png`,\n    ], 10, true, true);\n    this.animations.add(`run`, [\n      `${character}-run-1.png`,\n      `${character}-run-2.png`,\n      `${character}-run-3.png`,\n      `${character}-run-4.png`\n    ], 10, true, true);\n    this.animations.add(`jump`, [\n      `${character}-jump.png`\n    ], 10, true, true);\n    this.game.physics.arcade.enable(this);\n    this.body.gravity.y = 1000;\n  }\n  stand() {\n    this.animations.play(`stand`);\n    this.body.velocity.x = 0;\n  }\n  run(speed) {\n    this.body.velocity.x = speed;\n    this.animations.play(`run`);\n  }\n  jump() {\n    if(this.body.touching.down) {\n      this.animations.play(`jump`);\n      this.body.velocity.x = 100;\n      this.body.velocity.y = -750;\n    }\n  }\n}\n","import Button from '../objects/Button';\nimport GameCharacter from '../objects/GameCharacter';\nimport Flagpole from '../objects/Flagpole';\n\nconst SUBSTATE_INTRO = `intro`;\nconst SUBSTATE_PLAY = `play`;\nconst SUBSTATE_JUMP_POLE = `jump`;\nconst SUBSTATE_FINISHED = `finished`;\n\nconst WINNER_DISTANCE_POLE = 100;\n\nexport default class Play extends Phaser.State {\n  init() {\n    // if(!this.game.backgroundVideo) {\n    //   this.game.backgroundVideo = this.add.video('background-video');\n    //   this.game.backgroundVideo.play(true);\n    // }\n    // this.game.backgroundVideo.addToWorld();\n    this.cursors = this.input.keyboard.createCursorKeys();\n  }\n  create() {\n    this.createEnvironment();\n    this.createPlayers();\n    this.createButtons();\n\n    this.setSubState(SUBSTATE_INTRO);\n  }\n  createEnvironment() {\n    this.ground = this.add.tileSprite(0, this.world.height, this.world.width, 82, `mario-graphics`, `ground.png`);\n    this.ground.anchor.setTo(0, 1);\n    this.physics.arcade.enable(this.ground);\n    this.ground.body.immovable = true;\n\n    this.hills = this.add.tileSprite(0, this.world.height - 82, this.world.width, 428, `mario-graphics`, `hills.png`);\n    this.hills.anchor.setTo(0, 1);\n\n    this.flagpole = new Flagpole(this.game, this.world.width - 50, this.world.height - 82);\n    this.add.existing(this.flagpole);\n  }\n  createPlayers() {\n    this.peach = this.add.existing(new GameCharacter(this.game, 30, 10, `peach`));\n    this.mario = this.add.existing(new GameCharacter(this.game, 10, 10, `mario`));\n  }\n  createButtons() {\n    this.playButton = new Button(this.game, this.world.centerX, this.world.centerY, this.playClicked, this, `blue`, `Play`);\n    this.playButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.playButton);\n\n    this.stopButton = new Button(this.game, this.world.centerX, this.world.centerY, this.stopClicked, this, `blue`, `Stop`);\n    this.stopButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.stopButton);\n  }\n  update() {\n    this.physics.arcade.collide(this.ground, this.peach);\n    this.physics.arcade.collide(this.ground, this.mario);\n    if(this.subState === SUBSTATE_PLAY) {\n      this.updatePlayState();\n    } else if(this.subState === SUBSTATE_JUMP_POLE) {\n      this.updateJumpState();\n    } else if(this.subState === SUBSTATE_FINISHED) {\n      this.updateFinishedState();\n    }\n  }\n  updatePlayState() {\n    const distanceMario = this.flagpole.x - this.mario.x;\n    const distancePeach = this.flagpole.x - this.peach.x;\n    this.peach.run(this.game.sparkHeartRatesPlugin.player1.heartRate);\n    this.mario.run(this.game.sparkHeartRatesPlugin.player2.heartRate);\n    if(distanceMario < WINNER_DISTANCE_POLE || distancePeach < WINNER_DISTANCE_POLE) {\n      if(distanceMario < distancePeach) {\n        this.winner = this.mario;\n        this.loser = this.peach;\n      } else {\n        this.winner = this.peach;\n        this.loser = this.mario;\n      }\n      this.setSubState(SUBSTATE_JUMP_POLE);\n    }\n  }\n  updateJumpState() {\n    const distanceWinner = this.flagpole.x - this.winner.x;\n    if(distanceWinner <= 0) {\n      this.winner.body.velocity.x = 0;\n      this.setSubState(SUBSTATE_FINISHED);\n    }\n  }\n  updateFinishedState() {\n    this.flagpole.flag.y = this.winner.y - this.flagpole.y;\n  }\n  setSubState(value) {\n    this.subState = value;\n    this.playButton.visible = false;\n    this.stopButton.visible = false;\n    if(this.subState === SUBSTATE_PLAY) {\n      this.stopButton.visible = true;\n      // this.peach.run(100);\n      // this.mario.run(50);\n    } else if(this.subState === SUBSTATE_JUMP_POLE){\n      this.stopButton.visible = true;\n      this.loser.stand();\n      this.winner.jump();\n    } else if(this.subState === SUBSTATE_FINISHED){\n      this.playButton.visible = true;\n    } else {\n      this.playButton.visible = true;\n    }\n  }\n  playClicked() {\n    this.setSubState(SUBSTATE_PLAY);\n  }\n  stopClicked() {\n    this.state.start(`Play`);\n  }\n}\n","export default class Preload extends Phaser.State {\n  init() {\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.stage.backgroundColor = `#5088a0`;\n  }\n  preload() {\n    this.load.atlasJSONHash(`components`, `assets/mario/components.png`, `assets/mario/components.json`);\n    this.load.atlasJSONHash(`mario-graphics`, `assets/mario/mario-graphics.png`, `assets/mario/mario-graphics.json`);\n  }\n  create() {\n    this.state.start(`Play`);\n  }\n}\n","const fs = requireNode(`fs-extra`);\n\nexport default class CodeElement {\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options)\n    {\n      options = {};\n    }\n\n    const width = $(el).parent()[0].style.width || `100%`;\n    const height = $(el).parent()[0].style.height || `100%`;\n\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-code-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    this.file = this.$el.data(`file`);\n\n    if(!this.id && this.file)\n    {\n      this.id = this.file;\n    }\n    if(!this.id)\n    {\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n    }\n    this.$el.attr(`data-id`, this.id);\n\n    this.runtime = this.$el.data(`runtime`);\n    if(!this.runtime)\n    {\n      this.runtime = `browser`;\n    }\n\n    this.console = this.$el.data(`console`);\n    this.processor = this.$el.data(`processor`);\n\n    //language is programming language - used for injecting in html\n    this.language = this.$el.data(`language`);\n    if(!this.language)\n    {\n      //default to javascript\n      this.language = `javascript`;\n    }\n\n    //mode is mode for codemirror\n    this.mode = this.$el.data(`mode`);\n    if(!this.mode)\n    {\n      //default to the language\n      this.mode = this.language;\n    }\n\n    this.codeMirror = CodeMirror.fromTextArea(this.el, {\n      lineNumbers: true,\n      mode: this.mode,\n      extraKeys: {\"Ctrl-Space\": `autocomplete`}\n    });\n\n    this.codeMirror.setSize(width, height);\n\n    //this.$el.css('width', '100%').css('height', '100%');\n    this.layout();\n  }\n\n  pause() {\n    //no real reason to do pause / resume\n  }\n\n  resume() {\n    //no real reason to do pause / resume\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  getValue() {\n    return this.codeMirror.getValue();\n  }\n\n  setValue(value) {\n    this.codeMirror.setValue(value);\n  }\n\n  saveToFile(filePath) {\n    return fs.writeFile(filePath, this.getValue());\n  }\n\n  readFromFile(filePath) {\n    return fs.readFile(filePath, `utf8`)\n      .then(data => {\n        this.setValue(data);\n        return data;\n      })\n      .catch(e => {\n        this.setValue(``);\n        throw e;\n      });\n  }\n\n  layout() {\n    // this.$wrapperEl.find('.CodeMirror-scroll').css('max-height', this.$wrapperEl.css('height'));\n    this.codeMirror.refresh();\n  }\n}\n","import NodeAppRunner from '../NodeAppRunner';\n\nconst htmlEscape = str => {\n  return String(str).replace(/&/g, `&amp;`)\n    .replace(/\\\"/g, `&quot;`)\n    .replace(/'/g, `&#39;`)\n    .replace(/</g, `&lt;`)\n    .replace(/>/g, `&gt;`);\n};\n\nexport default class ConsoleElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    this.nodeAppRunner = new NodeAppRunner();\n    this.nodeAppRunner.on(`stdout-data`, data => this.info([data]));\n    this.nodeAppRunner.on(`stderr-data`, error => this.error([error]));\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-console-element unreset\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.file = this.$el.data(`file`);\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.logs = [];\n\n    this.isRunning = false;\n  }\n\n  pause() {\n    if(!this.isRunning) {\n      return;\n    }\n    this.isRunning = false;\n    this.nodeAppRunner.stop();\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    if(!this.applicationPath) {\n      return;\n    }\n    this.nodeAppRunner.run(this.applicationPath);\n    this.isRunning = true;\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  runNodeApp(applicationPath) {\n    this.pause();\n    this.applicationPath = applicationPath;\n    this.resume();\n  }\n\n  message(event) {\n    const str = htmlEscape(event.message);\n    let fileName = event.sourceId.split(`/`);\n    fileName = fileName[fileName.length - 1];\n    this.logs.push(`<div class=\"console-message\">\n      <pre class=\"console-message__content console-message__content--level${event.level}\">${  str  }</pre>\n      <div class=\"console-message__origin\">${fileName}:${event.line}</div>\n    </div>`);\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    const html = this.logs.join(``);\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  }\n}\n","const TERMINAL_URL = `http://localhost:3000`;\n\nexport default class TerminalElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    this._ipcMessageHandler = e => this.ipcMessageHandler(e);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-terminal-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.dir = this.$el.data(`dir`);\n    this.autorun = this.$el.data(`autorun`);\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.isRunning = false;\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n    //create a webview tag\n    if(this.webview) {\n      this.webview.removeEventListener(`ipc-message`, this._ipcMessageHandler);\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement(`webview`);\n    // this.webview.addEventListener('dom-ready', () => {\n    //   this.webview.openDevTools();\n    // });\n    this.webview.addEventListener(`ipc-message`, this._ipcMessageHandler);\n    this.webview.style.width = `100%`;\n    this.webview.style.height = `100%`;\n    this.webview.setAttribute(`nodeintegration`, ``);\n    this.webview.setAttribute(`src`, TERMINAL_URL);\n    this.el.appendChild(this.webview);\n  }\n\n  ipcMessageHandler(e) {\n    if(e.channel !== `message-from-terminal`) {\n      return;\n    }\n    if(e.args.length < 1) {\n      return;\n    }\n    const o = e.args[0];\n    if(!o.command) {\n      return;\n    }\n    switch(o.command) {\n    case `init`:\n      if(this.dir) {\n        this.executeCommand(`cd ${this.dir}`);\n        this.executeCommand(`clear`);\n      }\n      if(this.autorun) {\n        this.executeCommand(this.autorun);\n      }\n      break;\n    default:\n      console.warn(`unknow command object from terminal`);\n      console.warn(o);\n      break;\n    }\n  }\n\n  executeCommand(commandString) {\n    this.webview.send(`message-to-terminal`, {\n      command: `execute`,\n      value: commandString\n    });\n  }\n\n  destroy() {\n    this.pause();\n  }\n}\n","export default class WebPreviewElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options) {\n      options = {};\n    }\n\t\t//wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-web-preview-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n\t\t{\n\t\t\t//generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.file = this.$el.data(`file`) || this.$el.data(`url`);\n    this.autoload = this.$el.data(`autoload`) || false;\n    this.zoomfactor = this.$el.data(`zoomfactor`) || false;\n\n    this.console = this.$el.data(`console`) || false;\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.url = false;\n    this.blocks = false;\n    this.isRunning = false;\n\t\t//webview gets created by calling updateUrl or updateCode\n  }\n\n  get needsOutputPathPrefix() {\n    return !(this.$el.data(`url`));\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(this.webview) {\n      this.webview.removeEventListener(`did-get-response-details`, this._didGetResponseDetailsHandler);\n      this.webview.removeEventListener(`dom-ready`, this._domReadyHandler);\n      this.webview.removeEventListener(`did-fail-load`, this._didFailLoadHandler);\n      this.webview.removeEventListener(`ipc-message`, this._ipcMessageHandler);\n      this.webview.removeEventListener(`console-message`, this._consoleMessageHandler);\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n      clearTimeout(this.retryTimeout);\n    }\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    if(this.url === false && this.blocks === false) {\n      return;\n    }\n    this.isRunning = true;\n    this._createWebview();\n  }\n\n  _createWebview() {\n    //create a webview tag\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement(`webview`);\n    this.webview.style.width = `100%`;\n    this.webview.style.height = `100%`;\n    this.webview.preload = `js/livecode-webpreview.js`;\n    this.el.appendChild(this.webview);\n\n    const url = (this.url !== false) ? this.url : `webpreview.html`;\n    let htmlSrc = ``;\n    if(this.blocks !== false) {\n      for(let i = 0; i < this.blocks.length; i++)\n\t\t\t{\n        htmlSrc += this.blocks[i].code;\n      }\n    }\n\n\t\t//add listeners\n    this._didGetResponseDetailsHandler = e => {\n      if(e.originalURL !== this.webview.src) {\n        return;\n      }\n      if(this.$el.attr(`data-open-devtools`)) {\n        this.webview.openDevTools();\n      }\n    };\n    this.webview.addEventListener(`did-get-response-details`, this._didGetResponseDetailsHandler);\n\n    this._domReadyHandler = () => {\n      if (this.zoomfactor) {\n        const zoomfactor = parseFloat(this.zoomfactor);\n        this.webview.setZoomFactor(zoomfactor);\n      }\n    };\n    this.webview.addEventListener(`dom-ready`, this._domReadyHandler);\n\n    this._didFailLoadHandler = () => {\n      this.retryTimeout = setTimeout(() => {\n        this.pause();\n        this.resume();\n      }, 1000);\n    };\n    this.webview.addEventListener(`did-fail-load`, this._didFailLoadHandler);\n\n    this._consoleMessageHandler = e => {\n      this.$wrapperEl.trigger(`console-message`, e);\n    };\n    this.webview.addEventListener(`console-message`, this._consoleMessageHandler);\n\n    this._ipcMessageHandler = event => {\n      if(event.channel === `request-html`)\n      {\n        this.webview.send(`receive-html`, htmlSrc);\n      }\n    };\n    this.webview.addEventListener(`ipc-message`, this._ipcMessageHandler);\n\n    if(!this.$el.attr(`data-disable-nodeintegration`)) {\n      this.webview.setAttribute(`nodeintegration`, ``);\n    }\n    this.webview.setAttribute(`src`, url);\n  }\n\n  updateUrl(url) {\n    this.pause();\n    this.url = url;\n    this.blocks = false;\n    this.resume();\n  }\n\n  updateCode(blocks) {\n    this.pause();\n    this.url = false;\n    this.blocks = blocks;\n    this.resume();\n  }\n\n  openDevTools() {\n    this.webview.openDevTools();\n  }\n}\n","export default class WebcamElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `webcam-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.source = this.$el.attr(`data-source`);\n    if(this.source) {\n      this.sourceEl = document.querySelector(this.source);\n    }\n\n    this.ctx = this.el.getContext(`2d`);\n\n    this.isRunning = false;\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  pause() {\n    this.isRunning = false;\n    window.cancelAnimationFrame(this.animationFrameId);\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n    this.animationFrameId = window.requestAnimationFrame(() => this.drawLoop());\n  }\n\n  drawLoop() {\n    if(this.isRunning) {\n      window.requestAnimationFrame(() => this.drawLoop());\n    }\n    if(!this.sourceEl) {\n      return;\n    }\n    this.el.width = this.sourceEl.width;\n    this.el.height = this.sourceEl.height;\n    this.ctx.clearRect(0, 0, this.el.width, this.el.height);\n    this.ctx.drawImage(this.sourceEl, 0, 0);\n  }\n}\n","import ConsoleElement from './ConsoleElement';\nimport TerminalElement from './TerminalElement';\nimport CodeElement from './CodeElement';\nimport WebPreviewElement from './WebPreviewElement';\nimport WebcamElement from './WebcamElement';\n\nconst path = requireNode(`path`);\nconst fs = requireNode(`fs-extra`);\n\nexport default class LiveCode {\n\n  constructor($el, config, readyCallback) {\n    this.$el = $el;\n    this.el = this.$el[0];\n\n    if(this.$el.attr(`data-entry-path`)) {\n      this.entryPath = path.join(config.presentationPath, this.$el.attr(`data-entry-path`));\n    }\n    if(this.$el.attr(`data-output-path`)) {\n      this.outputPath = path.join(config.presentationPath, this.$el.attr(`data-output-path`));\n    } else {\n      if(this.entryPath) {\n        this.outputPath = this.entryPath;\n      }\n    }\n\n    const p = Promise.resolve();\n    p.then(() => {\n      if(this.entryPath && this.entryPath !== this.outputPath) {\n        return fs.copy(this.entryPath, this.outputPath);\n      }\n    })\n    .then(() => {\n      //create the consoles\n      this.consoleElements = {};\n      this.$el.find(`[data-type=\"console\"]`).each(((index, consoleEl) => this.createConsoleElement(consoleEl)));\n\n      //create the terminals\n      this.terminalElements = {};\n      this.$el.find(`[data-type=\"terminal\"]`).each(((index, terminalEl) => this.createTerminalElement(terminalEl)));\n\n      //create the previews\n      this.webPreviewElements = {};\n      this.$el.find(`[data-type=\"web-preview\"]`).each(((index, webPreviewEl) => this.createWebPreviewElement(webPreviewEl)));\n\n      //create the code editors\n      this.codeElements = {};\n      this.$el.find(`[data-type=\"code\"]`).each(((index, codeEl) => this.createCodeElement(codeEl)));\n\n      //create the webcam elements\n      this.webcamElements = {};\n      this.$el.find(`[data-type=\"webcam\"]`).each(((index, webcamEl) => this.createWebcamElement(webcamEl)));\n\n      //create run buttons\n      this.runButtonEls = [];\n      this.$el.find(`[data-type=\"run-button\"]`).each(((index, runButtonEl) => this.createRunButton(runButtonEl)));\n\n      //create save buttons\n      this.saveButtonEls = [];\n      this.$el.find(`[data-type=\"save-button\"]`).each(((index, saveButtonEl) => this.createSaveButton(saveButtonEl)));\n\n      //create reload buttons\n      this.reloadButtonEls = [];\n      this.$el.find(`[data-type=\"reload-button\"]`).each(((index, reloadButtonEl) => this.createReloadButton(reloadButtonEl)));\n\n      //create reload buttons\n      this.devToolsButtonEls = [];\n      this.$el.find(`[data-type=\"devtools-button\"]`).each(((index, devToolsButtonEl) => this.createDevToolsButton(devToolsButtonEl)));\n\n    })\n    .then(() => this.setCodeElementValuesFromFiles())\n    .then(() => {\n      this.loaded = true;\n      if(this.isRunning) {\n        this.isRunning = false;\n        this.resume();\n      }\n    })\n    .then(readyCallback).catch(err => console.log(err));\n\n    //disable keyboard bubbling up\n    $(window).on(`keydown`, event => this.keyDownHandler(event));\n  }\n\n  keyDownHandler(e) {\n    if(this.el.contains(document.activeElement)) {\n      e.stopImmediatePropagation();\n    }\n  }\n\n  /**\n   * return a previously created code element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the code element if found, otherwise returns false\n   */\n  getCodeElement(input) {\n    return this.getElement(this.codeElements, input);\n  }\n\n  /**\n   * return a previously created web preview element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the web preview element if found, otherwise returns false\n   */\n  getWebPreviewElement(input) {\n    return this.getElement(this.webPreviewElements, input);\n  }\n\n  getElement(elementsCollection, input) {\n    let propertyToCheck = `id`;\n    if(input.nodeName) {\n      propertyToCheck = `el`;\n    }\n    for(const key in elementsCollection)\n    {\n      if(elementsCollection[key][propertyToCheck] === input) {\n        return elementsCollection[key];\n      }\n    }\n    return false;\n  }\n\n  setCodeElementValueFromFile(codeElement, filePath) {\n    return codeElement.readFromFile(filePath);\n  }\n\n  saveCodeElementToFile(codeElement, filePath) {\n    return codeElement.saveToFile(filePath);\n  }\n\n  getFilePath(file) {\n    if(!file) {\n      return false;\n    }\n    if(this.outputPath) {\n      return path.join(this.outputPath, file);\n    }\n    return file;\n  }\n\n  getFilePathForCodeElement(codeElement) {\n    if(!codeElement.file) {\n      return false;\n    }\n    return this.getFilePath(codeElement.file);\n  }\n\n  setCodeElementValuesFromFiles() {\n    const tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.setCodeElementValueFromFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  autoStartWebpreviewElementsWhenNeeded() {\n    for(const key in this.webPreviewElements)\n    {\n      const webPreviewElement = this.webPreviewElements[key];\n      if(webPreviewElement.autoload) {\n        this.reloadWebPreviewElement(webPreviewElement);\n      }\n    }\n  }\n\n  saveCodeElementsToFiles() {\n    const tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.saveCodeElementToFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  destroy() {\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.destroyConsoleElement(this.consoleElements[key]);\n    }\n    for(key in this.terminalElements)\n    {\n      this.destroyTerminalElement(this.terminalElements[key]);\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.destroyWebPreviewElement(this.webPreviewElements[key]);\n    }\n    for(key in this.codeElements)\n    {\n      this.destroyCodeElement(this.codeElements[key]);\n    }\n    for(key in this.webcamElements)\n    {\n      this.destroyWebcamElement(this.webcamElements[key]);\n    }\n    this.runButtonEls.forEach(el => this.destroyRunButton(el));\n    this.saveButtonEls.forEach(el => this.destroySaveButton(el));\n    this.reloadButtonEls.forEach(el => this.destroyReloadButton(el));\n    this.devToolsButtonEls.forEach(el => this.destroyDevToolsButton(el));\n    //TODO: destroy the tmp directory for this instance\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(!this.loaded) {\n      return;\n    }\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].pause();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].pause();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].pause();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].pause();\n    }\n    for(key in this.webcamElements)\n    {\n      this.webcamElements[key].pause();\n    }\n  }\n\n  resume() {\n    this.isRunning = true;\n    if(!this.loaded) {\n      return;\n    }\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].resume();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].resume();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].resume();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].resume();\n    }\n    for(key in this.webcamElements)\n    {\n      this.webcamElements[key].resume();\n    }\n    this.autoStartWebpreviewElementsWhenNeeded();\n  }\n\n  layout() {\n    //might be triggered after split pane resize or tab switch\n    //codemirror instances need to be updated\n    for(const key in this.codeElements)\n    {\n      this.codeElements[key].layout();\n    }\n  }\n\n  createConsoleElement(consoleEl) {\n    const consoleElement = new ConsoleElement(consoleEl);\n    this.consoleElements[consoleElement.id] = consoleElement;\n  }\n\n  destroyConsoleElement(consoleElement) {\n    consoleElement.destroy();\n  }\n\n  createTerminalElement(terminalEl) {\n    const terminalElement = new TerminalElement(terminalEl);\n    this.terminalElements[terminalElement.id] = terminalElement;\n  }\n\n  destroyTerminalElement(terminalElement) {\n    terminalElement.destroy();\n  }\n\n  createWebPreviewElement(webPreviewEl) {\n    const webPreviewElement = new WebPreviewElement(webPreviewEl);\n    webPreviewElement.$wrapperEl.on(`console-message`, this.webPreviewConsoleMessageHandler.bind(this, webPreviewElement));\n    this.webPreviewElements[webPreviewElement.id] = webPreviewElement;\n  }\n\n  destroyWebPreviewElement(webPreviewElement) {\n    webPreviewElement.$wrapperEl.off(`console-message`);\n    webPreviewElement.destroy();\n  }\n\n  createCodeElement(codeEl) {\n    const codeElement = new CodeElement(codeEl);\n    this.codeElements[codeElement.id] = codeElement;\n  }\n\n  destroyCodeElement(codeElement) {\n    codeElement.destroy();\n  }\n\n  createWebcamElement(webcamEl) {\n    const webcamElement = new WebcamElement(webcamEl);\n    this.webcamElements[webcamElement.id] = webcamElement;\n  }\n\n  destroyWebcamElement(webcamElement) {\n    webcamElement.destroy();\n  }\n\n  createRunButton(runButtonEl) {\n    this.runButtonEls.push(runButtonEl);\n    $(runButtonEl).on(`click`, e => {\n      if(this.webPreviewElements[$(runButtonEl).data(`target`)]) {\n        //save the files first\n        this.saveCodeElementsToFiles()\n          .catch(err => console.log(err))\n          .then(() => {\n            //update the web preview\n            this.updateWebPreviewElement(this.webPreviewElements[$(runButtonEl).data(`target`)]);\n          });\n      } else if(this.consoleElements[$(runButtonEl).data(`target`)]) {\n        const applicationPath = this.getFilePath(this.consoleElements[$(runButtonEl).data(`target`)].file);\n        this.consoleElements[$(runButtonEl).data(`target`)].runNodeApp(applicationPath);\n      }\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    });\n  }\n\n  destroyRunButton(runButtonEl) {\n    $(runButtonEl).off(`click`);\n  }\n\n  createSaveButton(saveButtonEl) {\n    this.saveButtonEls.push(saveButtonEl);\n    $(saveButtonEl).on(`click`, e => {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      //get the target element for this button\n      const targetString = $(saveButtonEl).data(`target`);\n      if(targetString === `all`) {\n        return this.saveCodeElementsToFiles();\n      }\n      const codeElement = this.getCodeElement(targetString);\n      if(!codeElement) {\n        return;\n      }\n      const filePath = this.getFilePathForCodeElement(codeElement);\n      if(!filePath) {\n        return;\n      }\n      codeElement.saveToFile(filePath).catch(function(err) { console.log(err); });\n    });\n  }\n\n  destroySaveButton(saveButtonEl) {\n    $(saveButtonEl).off(`click`);\n  }\n\n  createReloadButton(reloadButtonEl) {\n    this.reloadButtonEls.push(reloadButtonEl);\n    $(reloadButtonEl).on(`click`, e => {\n      //get the reload button target\n      let reloadTargetElement = this.getCodeElement($(reloadButtonEl).data(`target`));\n      if(reloadTargetElement) {\n        this.reloadCodeElement(reloadTargetElement);\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n      reloadTargetElement = this.getWebPreviewElement($(reloadButtonEl).data(`target`));\n      if(reloadTargetElement) {\n        this.reloadWebPreviewElement(reloadTargetElement);\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n      // reload all elements\n      this.reloadAllCodeElements().then(() => this.reloadAllWebPreviewElements());\n    });\n  }\n\n  reloadAllCodeElements() {\n    const tasks = [];\n    for(const key in this.codeElements)\n    {\n      tasks.push(this.reloadCodeElement(this.codeElements[key]));\n    }\n    return Promise.all(tasks);\n  }\n\n  reloadCodeElement(codeElement) {\n    const filePath = this.getFilePathForCodeElement(codeElement);\n    if(!filePath) {\n      return;\n    }\n    return codeElement.readFromFile(filePath).catch(err => console.log(err));\n  }\n\n  reloadAllWebPreviewElements() {\n    const tasks = [];\n    for(const key in this.webPreviewElements)\n    {\n      tasks.push(this.reloadWebPreviewElement(this.webPreviewElements[key]));\n    }\n    return Promise.all(tasks);\n  }\n\n  reloadWebPreviewElement(webPreviewElement) {\n    return this.updateWebPreviewElement(webPreviewElement);\n  }\n\n  destroyReloadButton(reloadButtonEl) {\n    $(reloadButtonEl).off(`click`);\n  }\n\n  createDevToolsButton(devToolsButtonEl) {\n    this.devToolsButtonEls.push(devToolsButtonEl);\n    $(devToolsButtonEl).on(`click`, e => {\n      //get the target element for this button\n      const webPreviewElement = this.getWebPreviewElement($(devToolsButtonEl).data(`target`));\n      if (!webPreviewElement) {\n        return;\n      }\n      webPreviewElement.openDevTools();\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    });\n  }\n\n  destroyDevToolsButton(devToolsButtonEl) {\n    $(devToolsButtonEl).off(`click`);\n  }\n\n  webPreviewConsoleMessageHandler(webPreviewElement, jqEvent, event) {\n    //get the console element for this web preview\n    const consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.message(event);\n    }\n  }\n\n  getConsoleElementForWebPreview(webPreviewElement) {\n    return this.consoleElements[webPreviewElement.console];\n  }\n\n  getWebPreviewElementForCodeElement(codeElement) {\n    return this.webPreviewElements[codeElement.processor];\n  }\n\n  updateWebPreviewElement(webPreviewElement) {\n    //load a file or code blocks?\n    if(webPreviewElement.file) {\n      if(this.outputPath && webPreviewElement.needsOutputPathPrefix) {\n        return webPreviewElement.updateUrl(path.join(this.outputPath, webPreviewElement.file));\n      }\n      return webPreviewElement.updateUrl(webPreviewElement.file);\n    }\n\n    //gather all the code for this element\n    const blocks = [];\n    for(const key in this.codeElements)\n    {\n      const codeElement = this.codeElements[key];\n      if(codeElement.processor === webPreviewElement.id)\n      {\n        const block = {\n          language: codeElement.language,\n          code: codeElement.getValue()\n        };\n        blocks.push(block);\n      }\n    }\n    webPreviewElement.updateCode(blocks);\n  }\n\n}\n","export default class Beam extends Phaser.Group {\n  constructor(game, x, y, maxWidth) {\n    super(game);\n    this.x = x;\n    this.y = y;\n\n    this.data = {\n      maxWidth: maxWidth,\n      position: 0.5\n    };\n    this.beamEndLeft = this._createBeamEnd();\n    this.beamEndLeft.scale.setTo(-1, 1);\n    this.beamLeft = this._createBeam();\n    this.beamLeft.anchor.setTo(1, 0.5);\n\n    this.beamEndRight = this._createBeamEnd();\n    this.beamRight = this._createBeam();\n    this.beamRight.anchor.setTo(0, 0.5);\n  }\n  _createBeamEnd() {\n    const beamEnd = this.add(new Phaser.Sprite(this.game, 0, 0, `dragonball-graphics`, `beaming1.png`));\n    beamEnd.anchor.setTo(0.5, 0.5);\n    beamEnd.animations.add(`beaming`, [\n      `beaming1.png`,\n      `beaming2.png`,\n    ], 8, true, true);\n    beamEnd.animations.play(`beaming`);\n    return beamEnd;\n  }\n  _createBeam() {\n    const beam = this.add(new Phaser.TileSprite(this.game, 0, 0, 32, 32, `dragonball-graphics`, `beam.png`));\n    return beam;\n  }\n  set beamPosition(value) {\n    this.data.position = value;\n  }\n  get beamPosition() {\n    return this.data.position;\n  }\n  update() {\n    const beamCenter = this.data.maxWidth * this.data.position;\n    this.beamEndLeft.x = beamCenter - 20;\n    this.beamEndRight.x = beamCenter + 20;\n    this.beamLeft.x = this.beamEndLeft.x + 10;\n    this.beamRight.x = this.beamEndRight.x - 10;\n    this.beamLeft.width = beamCenter;\n    this.beamRight.width = this.data.maxWidth - beamCenter;\n  }\n}\n","export default class GameCharacter extends Phaser.Sprite {\n  constructor(game, x, y, character) {\n    super(game, x, y, `dragonball-graphics`, `${character}-standing1.png`);\n    this.anchor.setTo(0.5, 1);\n    if(character === `gohan`) {\n      this.scale.setTo(-1, 1);\n    }\n    this.animations.add(`stand`, [\n      `${character}-standing1.png`,\n      `${character}-standing2.png`,\n    ], 4, true, true);\n    this.animations.add(`fall`, [\n      `${character}-falling1.png`,\n      `${character}-falling2.png`,\n      `${character}-falling3.png`,\n      `${character}-falling4.png`,\n      `${character}-falling5.png`,\n      `${character}-falling6.png`,\n      `${character}-falling7.png`,\n    ], 10, false, true);\n    this.animations.add(`kameha`, [\n      `${character}-kameha1.png`\n    ], 10, true, true);\n\n    this.stand();\n  }\n  stand() {\n    this.animations.play(`stand`);\n  }\n  fall() {\n    this.animations.play(`fall`);\n  }\n  kameha() {\n    this.animations.play(`kameha`);\n  }\n}\n","import Button from '../objects/Button';\nimport GameCharacter from '../objects/GameCharacter';\nimport Beam from '../objects/Beam';\n\nconst SUBSTATE_INTRO = `intro`;\nconst SUBSTATE_PLAY = `play`;\nconst SUBSTATE_FALLING = `falling`;\nconst SUBSTATE_FINISHED = `finished`;\n\nconst BEAM_OFFSET = 143;\nconst MAX_HEARTRATE = 100;\n\nexport default class Play extends Phaser.State {\n  init() {\n    this.cursors = this.input.keyboard.createCursorKeys();\n  }\n  create() {\n    this.createEnvironment();\n    this.createPlayers();\n    this.createButtons();\n    this.createBeam();\n\n    this.setSubState(SUBSTATE_INTRO);\n  }\n  createEnvironment() {\n    this.background = this.add.sprite(this.world.centerX, this.world.height - 112, `dragonball-graphics`, `background.png`);\n    this.background.anchor.setTo(0.5, 1);\n\n    this.ground = this.add.sprite(this.world.centerX, this.world.height, `dragonball-graphics`, `floor.png`);\n    this.ground.anchor.setTo(0.5, 1);\n  }\n  createPlayers() {\n    this.goku = this.add.existing(new GameCharacter(this.game, 80, this.world.height, `goku`));\n    this.gohan = this.add.existing(new GameCharacter(this.game, this.world.width - 80, this.world.height, `gohan`));\n  }\n  createBeam() {\n    this.beam = this.add.existing(new Beam(this.game, BEAM_OFFSET, this.world.centerY + 210, this.world.width - BEAM_OFFSET * 2));\n  }\n  createButtons() {\n    this.playButton = new Button(this.game, this.world.centerX, this.world.centerY, this.playClicked, this, `blue`, `Play`);\n    this.playButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.playButton);\n\n    this.stopButton = new Button(this.game, this.world.centerX, this.world.centerY, this.stopClicked, this, `blue`, `Stop`);\n    this.stopButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.stopButton);\n  }\n  update() {\n    if(this.subState === SUBSTATE_PLAY) {\n      this.updatePlayState();\n    } else if(this.subState === SUBSTATE_FINISHED) {\n      this.updateFinishedState();\n    }\n  }\n  updatePlayState() {\n    //update beamPosition according to heart rates\n    if(this.game.sparkHeartRatesPlugin.player1.heartRate > 0 && this.game.sparkHeartRatesPlugin.player2.heartRate > 0) {\n      const heartRateDiff = Math.min(MAX_HEARTRATE, this.game.sparkHeartRatesPlugin.player2.heartRate) - Math.min(MAX_HEARTRATE, this.game.sparkHeartRatesPlugin.player1.heartRate);\n      this.beam.beamPosition = this.beam.beamPosition + (heartRateDiff * 0.0002);\n    }\n    const position = this.beam.beamPosition;\n    if (position < 0.01) {\n      this.winner = this.gohan;\n      this.loser = this.goku;\n      this.add.tween(this.beam).to({x: -this.world.width}, 350, Phaser.Easing.Linear.NONE, true);\n    } else if (position > 0.99) {\n      this.winner = this.goku;\n      this.loser = this.gohan;\n      this.add.tween(this.beam).to({x: this.world.width}, 350, Phaser.Easing.Linear.NONE, true);\n    }\n    if(this.winner) {\n      this.winner.stand();\n      this.loser.fall();\n      this.setSubState(SUBSTATE_FALLING);\n      this.time.events.add(500, () => {\n        this.setSubState(SUBSTATE_FINISHED);\n      });\n    }\n  }\n  updateFinishedState() {\n  }\n  setSubState(value) {\n    this.subState = value;\n    this.playButton.visible = false;\n    this.stopButton.visible = false;\n    this.beam.visible = false;\n    this.beam.x = BEAM_OFFSET;\n    if(this.subState === SUBSTATE_PLAY) {\n      this.stopButton.visible = true;\n      this.beam.visible = true;\n      this.winner = false;\n      this.loser = false;\n      this.beam.beamPosition = 0.5;\n      this.goku.kameha();\n      this.gohan.kameha();\n    } else if(this.subState === SUBSTATE_FALLING){\n      this.beam.visible = true;\n      this.playButton.visible = true;\n    } else if(this.subState === SUBSTATE_FINISHED){\n      this.playButton.visible = true;\n    } else {\n      this.playButton.visible = true;\n      this.winner = false;\n      this.loser = false;\n      this.goku.stand();\n      this.gohan.stand();\n    }\n  }\n  playClicked() {\n    this.setSubState(SUBSTATE_PLAY);\n  }\n  stopClicked() {\n    this.state.start(`Play`);\n  }\n}\n","export default class Preload extends Phaser.State {\n  init() {\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.stage.backgroundColor = `#d87040`;\n  }\n  preload() {\n    this.load.atlasJSONHash(`components`, `assets/dragonball/components.png`, `assets/dragonball/components.json`);\n    this.load.atlasJSONHash(`dragonball-graphics`, `assets/dragonball/dragonball-graphics.png`, `assets/dragonball/dragonball-graphics.json`);\n  }\n  create() {\n    this.state.start(`Play`);\n  }\n}\n","import events from 'events';\n\nconst POLARH7_HRM_HEART_RATE_SERVICE_UUID = `180d`;\nconst POLARH7_HRM_MEASUREMENT_CHARACTERISTIC_UUID = `2a37`;\nconst serviceUUIDs = [POLARH7_HRM_HEART_RATE_SERVICE_UUID];\n\nexport default class PolarH7 extends events.EventEmitter {\n  constructor() {\n    super();\n    console.log(`[PolarH7] constructor`);\n\n    this.polarH7Peripheral = false;\n    this._stateChangeHandler = state => this.stateChangeHandler(state);\n    this._discoverHandler = peripheral => this.discoverHandler(peripheral);\n\n    this.noble = requireNode(`noble-mac`);\n    this.noble.on(`stateChange`, this._stateChangeHandler);\n    this.noble.on(`discover`, this._discoverHandler);\n  }\n\n  stateChangeHandler(state) {\n    console.log(`[PolarH7] stateChange`, state);\n    this.emit(`stateChange`, state);\n    if(state === `poweredOn`) {\n      this.noble.startScanning(serviceUUIDs);\n    } else {\n      this.noble.stopScanning();\n    }\n  }\n\n  discoverHandler(peripheral) {\n    console.log(`[PolarH7] discoverHandler`);\n    let foundSuitablePeripheral = false;\n    for (let i = peripheral.advertisement.serviceUuids.length - 1; i >= 0; i--) {\n      if(peripheral.advertisement.serviceUuids[i] === POLARH7_HRM_HEART_RATE_SERVICE_UUID) {\n        foundSuitablePeripheral = true;\n        break;\n      }\n    }\n    if(foundSuitablePeripheral) {\n      this.onFoundSuitablePeripheral(peripheral);\n    } else {\n      console.log(`[PolarH7] no suitable peripheral`);\n    }\n  }\n\n  onFoundSuitablePeripheral(peripheral) {\n    console.log(`[PolarH7]`, peripheral.advertisement.localName);\n    this.noble.stopScanning();\n    this.polarH7Peripheral = peripheral;\n    this.polarH7Peripheral.connect(error => this.onConnect(error));\n  }\n\n  onConnect(error) {\n    if(error) {\n      console.error(error);\n      return;\n    }\n    console.log(`[PolarH7] on connect`);\n    this.emit(`connect`);\n    this.polarH7Peripheral.discoverServices([], (error, services) => this.onPeripheralDiscoverServices(error, services));\n  }\n\n  onPeripheralDiscoverServices(error, services) {\n    console.log(`[PolarH7] onPeripheralDiscoverServices`);\n    for (let i = services.length - 1; i >= 0; i--) {\n      if(services[i].name) {\n        console.log(services[i].uuid, services[i].name);\n        services[i].discoverCharacteristics([], (error, characteristics) => this.onPeripheralServiceDiscoverCharacteristics(error, characteristics));\n      }\n    }\n  }\n\n  onPeripheralServiceDiscoverCharacteristics(error, characteristics) {\n    for (let i = characteristics.length - 1; i >= 0; i--) {\n      const characteristic = characteristics[i];\n      if(characteristic.uuid === POLARH7_HRM_MEASUREMENT_CHARACTERISTIC_UUID) {\n        //console.log(\"HRM Characteristic\");\n        characteristic.on(`read`, (data, isNotification) => this.onHeartRateRead(data, isNotification));\n        characteristic.notify(true, error => (error) ? console.log(error) : true);\n      }\n    }\n  }\n\n  onHeartRateRead(data, isNotification) { // eslint-disable-line no-unused-vars\n    if((data[0] & 0x01) === 0) {\n      const heartRate = data[1];\n      if(heartRate) {\n        this.emit(PolarH7.HEART_RATE, heartRate);\n        // var filePath = Config.heartRateFilePath;\n        // fs.appendFile(filePath, new Date().getTime() + \":\" + heartRate + \"\\n\", function (err) {\n        // \tconsole.log(err);\n        // });\n      }\n    }\n  }\n}\n\nPolarH7.HEART_RATE = `heartRate`;\n","require(`es6-promise`).polyfill();\n\nimport Presentation from './classes/Presentation';\nimport SlidesFolderParser from '../../server/classes/SlidesFolderParser';\n\n(() => {\n\n  const remote = requireNode(`electron`).remote;\n  const presentationPath = remote.getGlobal(`__dirname`);\n  const path = requireNode(`path`);\n\n  const init = () => {\n    const settings = {\n      presentationPath: presentationPath,\n      mobileServerUrl: `https://jsworkout.herokuapp.com`,\n      // mobileServerUrl: `http://localhost:5000`,\n      mobileServerUsername: `wouter.verweirder@gmail.com`,\n      mobileServerPassword: `geheim`\n    };\n    const slidesFolderParser = new SlidesFolderParser();\n    slidesFolderParser.parse(presentationPath, path.resolve(presentationPath, `slides`))\n      .then(data => {\n        new Presentation(data, `presentation`, settings);\n      });\n  };\n\n  init();\n})();\n","let requireNode;\nif(!(typeof window !== `undefined` && window)) {\n  requireNode = require;\n} else {\n  requireNode = window.requireNode;\n}\n\nconst fs = requireNode(`fs-extra`);\nconst path = requireNode(`path`);\n\nconst getFileProperties = filePath => {\n  let _fd, _o;\n  return fs.open(filePath, `r`)\n    .then(fd => {\n      _fd = fd;\n      return fd;\n    })\n    .then(fd => fs.fstat(fd))\n    .then(o => {\n      _o = o;\n      return _o;\n    })\n    .then(() => fs.close(_fd))\n    .then(() => {\n      return {\n        path: filePath,\n        isDirectory: _o.isDirectory(),\n        isFile: _o.isFile()\n      };\n    });\n};\nexport default class SlidesFolderParser {\n  constructor() {\n  }\n  parse(presentationPath, slidesFolderPath) {\n    //read the contents of the slides directory\n    return fs.readdir(slidesFolderPath)\n      .then(result => result.filter(name => name.indexOf(`.`) > 0))\n      .then(result => result.map(name => path.resolve(slidesFolderPath, name)))\n      .then(result => Promise.all(result.map(filePath => getFileProperties(filePath))))\n      .then(result => {\n        const data = {\n          slides: []\n        };\n        const slidesByName = {};\n        result.forEach(props => {\n          const slide = this.createSlideObjectBasedOnFileProperties(props, presentationPath, slidesByName);\n          if(!slidesByName[slide.name]) {\n            data.slides.push(slide);\n          }\n          slidesByName[slide.name] = slide;\n        });\n        // console.log(data.slides);\n        return data;\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  }\n\n  parseSlideBaseName(slideBaseName) {\n    const parsed = {};\n    parsed.ext = path.extname(slideBaseName);\n    parsed.name = slideBaseName.substr(0, slideBaseName.length - parsed.ext.length);\n    const splitted = parsed.name.split(`.`);\n    const keywords = [`mobile`, `desktop`, `muted`, `loop`, `cover`];\n    keywords.forEach(keyword => {\n      const index = splitted.indexOf(keyword);\n      if(index > -1) {\n        parsed[keyword] = true;\n        splitted.splice(index, 1);\n      }\n    });\n    parsed.name = splitted.join(`.`);\n    return parsed;\n  }\n\n  createSlideObjectBasedOnFileProperties(fileProperties, presentationPath, slidesByName) {\n\n    const parsed = this.parseSlideBaseName(path.basename(fileProperties.path));\n    let url = path.relative(presentationPath, fileProperties.path).replace(`\\\\`, `/`);\n    if(parsed.ext === `.jpg` || parsed.ext === `.jpeg` || parsed.ext === `.gif` || parsed.ext === `.png`) {\n      url = `slides-builtin/image.html?image=${  url}`;\n    }\n    if(parsed.ext === `.mp4`) {\n      url = `slides-builtin/video.html?video=${  url}`;\n    }\n    if(slidesByName[parsed.name]) {\n      if(parsed.mobile) {\n        slidesByName[parsed.name].mobile.url = url;\n        slidesByName[parsed.name].mobile.explicit = true;\n      } else if(parsed.desktop) {\n        slidesByName[parsed.name].presentation.url = url;\n        slidesByName[parsed.name].presentation.explicit = true;\n      } else {\n        //set the one which is not set explicitly\n        if(slidesByName[parsed.name].mobile.explicit) {\n          slidesByName[parsed.name].presentation.url = url;\n        } else {\n          slidesByName[parsed.name].mobile.url = url;\n        }\n        return slidesByName[parsed.name];\n      }\n    }\n\n    return {\n      name: parsed.name,\n      presentation: {\n        url: url,\n        explicit: false\n      },\n      mobile: {\n        url: url,\n        explicit: false\n      }\n    };\n  }\n}\n","export const Constants = {\n  GO_TO_PREVIOUS_SLIDE: `goToPreviousSlide`,\n  GO_TO_NEXT_SLIDE: `goToNextSlide`,\n  SET_SLIDES: `setSlides`,\n  SET_CURRENT_SLIDE_INDEX: `setCurrentSlideIndex`,\n\n  MESSAGE: `message`,\n  SOCKET_SEND: `socketSend`,\n  SOCKET_RECEIVE: `socketReceive`,\n  JOIN_SLIDE_ROOM: `joinSlideRoom`,\n  LEAVE_SLIDE_ROOM: `leaveSlideRoom`,\n\n  ROLE_PRESENTATION: `presentation`,\n  ROLE_MOBILE: `mobile`,\n\n  STATE_ACTIVE: `active`,\n  STATE_INACTIVE: `inactive`,\n\n  SET_SUBSTATE: `setSubstate`,\n\n  CHILD_APP_SAVE_CODE: `childAppSaveCode`,\n  CHILD_APP_RUN_CODE: `childAppRunCode`,\n  CHILD_APP_STDOUT_DATA: `childAppStdoutData`,\n  CHILD_APP_STDERR_DATA: `childAppStderrData`,\n\n  OPEN_COMMAND_LINE: `openCommandLine`,\n  OPEN_CAMERA: `openCamera`,\n\n  BLINK: `blink`,\n\n  HEART_RATE_POLAR: `heartRatePolar`,\n\n  SET_TEAM: `setTeam`,\n  UPDATE_MOTION: `updateMotion`,\n\n  YOU_WIN: `youWin`,\n  YOU_LOSE: `youLose`,\n\n  SHAKE_YOUR_PHONES_INTRO: `shakeYourPhonesIntro`,\n  SHAKE_YOUR_PHONES_GAME: `shakeYourPhonesGame`,\n  SHAKE_YOUR_PHONES_FINISHED: `shakeYourPhonesFinished`,\n\n  SHAKE_YOUR_PHONES_CLIENT_ADDED: `shakeYourPhonesClientAdded`,\n  SHAKE_YOUR_PHONES_CLIENT_REMOVED: `shakeYourPhonesClientRemoved`,\n  SHAKE_YOUR_PHONES_CLIENT_LIST: `shakeYourPhonesClientList`,\n  SHAKE_YOUR_PHONES_CLIENT_UPDATE: `shakeYourPhonesClientUpdate`,\n\n  HIGHEST_HEARTRATE_GAME_INTRO: `highestHeartrateGameIntro`,\n  HIGHEST_HEARTRATE_GAME_GAME: `highestHeartrateGameGame`,\n  HIGHEST_HEARTRATE_GAME_FINISHED: `highestHeartrateGameFinished`,\n\n  LOWEST_HEARTRATE_GAME_INTRO: `lowestHeartrateGameIntro`,\n  LOWEST_HEARTRATE_GAME_GAME: `lowestHeartrateGameGame`,\n  LOWEST_HEARTRATE_GAME_FINISHED: `lowestHeartrateGameFinished`,\n\n  UPDATE_REACTION_SPEED: `updateReactionSpeed`,\n\n  REACT_PHONES_INTRO: `reactPhonesIntro`,\n  REACT_PHONES_GAME: `reactPhonesGame`,\n  REACT_PHONES_FINISHED: `reactPhonesFinished`,\n\n  DANCE_PAD_GAME_INTRO: `dancePadGameIntro`,\n  DANCE_PAD_GAME_GAME: `dancePadGameGame`,\n  DANCE_PAD_GAME_FINISHED: `dancePadGameFinished`,\n};\n","import fetch from 'isomorphic-fetch';\n\nexport default class MobileServerBridge {\n\n  constructor(presentation, settings) {\n    this.presentation = presentation;\n    this.settings = settings;\n    this.connect();\n  }\n\n  connect() {\n    console.log(`MobileServerBridge.connect`);\n    //console.warn('MobileServerBridge disabled');\n    //return;\n    //post to the api\n    fetch(`${this.settings.mobileServerUrl}/login`, {\n      method: `POST`,\n      body: JSON.stringify(this.getLoginCredentials()),\n      headers: new Headers({'Content-Type': `application/json`})\n    })\n    .then(response => response.json())\n    .then(result => this.loginHandler(result))\n    .catch(e => {\n      console.error(e);\n      setTimeout(() => this.connect(), 1000);\n    });\n  }\n\n  getLoginCredentials() {\n    return {\n      email: this.settings.mobileServerUsername,\n      password: this.settings.mobileServerPassword,\n    };\n  }\n\n  loginHandler(result) {\n    this.token = result.token;\n    this.socket = io(this.settings.mobileServerUrl, {\n      query: `token=${  this.token}`,\n      reconnection: false,\n      forceNew: true\n    });\n    this.socket.on(`connect`, this.socketConnectHandler.bind(this));\n    this.socket.on(`disconnect`, this.socketDisconnectHandler.bind(this));\n    this.socket.on(`message`, this.socketMessageHandler.bind(this));\n  }\n\n  socketConnectHandler() {\n    console.log(`MobileServerBridge.socketConnectHandler`);\n    this.presentation.mobileServerBridgeConnected();\n  }\n\n  socketDisconnectHandler() {\n    this.connect();\n  }\n\n  tryToSend() {\n    if(this.socket) {\n      this.socket.emit.apply(this.socket, arguments);\n    }\n  }\n\n  socketMessageHandler(message) {\n    this.presentation.mobileServerMessageHandler(message);\n  }\n}\n","import {Constants} from '../Constants';\nimport SlideBridge from './SlideBridge';\n\nexport default class Presentation {\n  /*\n   * data: json object with slides array property\n   * role: mobile or presentation\n   */\n  constructor(data, role, settings) {\n    this.data = data;\n    this.role = role;\n    this.settings = settings;\n    $(`#presentation`).attr(`data-presentation-settings`, JSON.stringify(settings));\n    this.currentSlideIndex = -1;\n    this.slideHolders = [];\n    this.numSlideHolders = 3;\n    this.slideBridges = [];\n    this.slideBridgesBySlideName = {};\n\n    this.createSlideHolders();\n    this.createSlideBridges(this.data);\n\n    this.mobileServerBridge = this.createMobileServerBridge();\n    this.startListeningForMessages();\n\n    this.setCurrentSlideIndex(0);\n  }\n\n  startListeningForMessages() {\n    window.addEventListener(`message`, this.slideMessageHandler.bind(this), false);\n  }\n\n  createSlideHolders() {\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      const $slideHolder = $(`<div class=\"slide-frame\" />`);\n      this.slideHolders.push($slideHolder);\n      $(`#presentation`).append($slideHolder);\n    }\n  }\n\n  createSlideBridges(data) {\n    const numSlides = data.slides.length;\n    for(let i = 0; i < numSlides; i++) {\n      const slideBridge = this.createSlideBridge(data.slides[i]);\n      this.slideBridges.push(slideBridge);\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\n    }\n  }\n\n  createSlideBridge(slide) {\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.SOCKET_SEND:\n      if(this.mobileServerBridge) {\n        this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n      }\n      break;\n    }\n  }\n\n  mobileServerBridgeConnected() {\n    //join the rooms of the slideHolders\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr(`data-name`));\n    }\n  }\n\n  mobileServerMessageHandler(message) {\n    if(message.target.slide) {\n      //slide has to handle the message\n      const slideBridge = this.getSlideBridgeByName(message.target.slide);\n      if(slideBridge) {\n        slideBridge.tryToPostMessage({\n          action: Constants.SOCKET_RECEIVE,\n          message: message\n        });\n      }\n    } else {\n      //presentation has to handle the message\n      this.handleMobileServerMessage(message);\n    }\n  }\n\n  handleMobileServerMessage(message) {\n    console.log(`[shared/Presentation] handleMobileServerMessage`, message);\n  }\n\n  getSlideBridgeByIndex(index) {\n    if(index >= 0 && index < this.slideBridges.length) {\n      return this.slideBridges[index];\n    }\n    return false;\n  }\n\n  getSlideBridgeByName(slideName) {\n    return this.slideBridgesBySlideName[slideName];\n  }\n\n  getSlideHolderForSlide(slide, slidesNotToClear) {\n    if(slide) {\n      let $slideHolder = $(`.slide-frame[data-name=\"${  slide.name  }\"]`);\n      if($slideHolder.length > 0) {\n        return $slideHolder[0];\n      }\n      //get a free slideHolder\n      const slideNamesNotToClear = [];\n      $(slidesNotToClear).each(function(index, obj){\n        slideNamesNotToClear.push(obj.name);\n      });\n      const $slideHolders = $(`.slide-frame`);\n      for (let i = $slideHolders.length - 1; i >= 0; i--) {\n        $slideHolder = $($slideHolders[i]);\n        const name = $slideHolder.attr(`data-name`);\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\n          return $slideHolder[0];\n        }\n      }\n    }\n    return false;\n  }\n\n  goToPreviousSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\n  }\n\n  goToNextSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\n  }\n\n  setCurrentSlideIndex(value) {\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\n    if(value !== this.currentSlideIndex) {\n      this.currentSlideIndex = value;\n\n      const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n      const previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\n      const nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\n\n      //remove \"used\" class from slide holders\n      $(`.slide-frame`).removeAttr(`data-used`, false);\n\n      const currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\n\n      const previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, `-100%`);\n\n      const nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, `100%`);\n\n      //clear attributes of unused slide frames\n      $(`.slide-frame`).each(function(index, slideHolder){\n        if(!$(slideHolder).attr(`data-used`)) {\n          $(slideHolder).removeAttr(`data-used`).removeAttr(`data-name`).removeAttr(`data-src`);\n        }\n      });\n\n      //all other slideHolder bridges should be unlinked from their slideHolder\n      this.slideBridges.forEach(function(slideBridge){\n        if(slideBridge === currentSlideBridge) {\n          return;\n        }\n        if(slideBridge === previousSlideBridge) {\n          return;\n        }\n        if(slideBridge === nextSlideBridge) {\n          return;\n        }\n        slideBridge.slideHolder = null;\n      });\n\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n    }\n  }\n\n  setupSlideHolder(slideHolder, slideBridge, state, left) {\n    if(slideHolder) {\n      let src = `slides/${  slideBridge.name  }.html`;\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\n        src = slideBridge.data[this.role].url;\n      }\n      src = this.processSlideSrc(src);\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\n        //console.log(slideBridge.name + ' already attached');\n      } else {\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\n      }\n      slideBridge.setState(state);\n      $(slideHolder).css(`left`, left);\n      $(slideHolder).attr(`data-used`, 1);\n    }\n  }\n\n  attachToSlideHolder(slideHolder, slideBridge, src) {\n    //listen for events on this slideHolder\n    $(slideHolder).off(`message-from-slide`);\n    $(slideHolder).on(`message-from-slide`, (event, message) =>  {\n      this.slideMessageHandler({data: message});\n    });\n    //leave previous channel of this slideHolder\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n    //add the join as a callback for the onload event\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\n  }\n\n  slideLoaded(slideHolder, slideBridge) { // eslint-disable-line no-unused-vars\n    //join new channel\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n  }\n\n  processSlideSrc(src) {\n    return src;\n  }\n\n  createMobileServerBridge() {\n    //to implement in extending classes\n  }\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class SlideBridge {\n  constructor(data) {\n    this.data = data;\n    this.name = this.data.name;\n  }\n\n  isAlreadyCorrectlyAttached(slideHolder, src) {\n    return (this.slideHolder === slideHolder && $(slideHolder).attr(`data-name`) === this.name && $(slideHolder).attr(`data-src`) === src);\n  }\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if(src !== $(slideHolder).attr(`data-src`)) {\n      //fetch the html\n      fetch(src)\n        .then(result => result.text())\n        .then(result => $(result))\n        .then($result => {\n          $(slideHolder).html($result.html());\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        })\n        .catch(err => {\n          console.error(err);\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        });\n      $(slideHolder).attr(`data-src`, src);\n    }\n  }\n\n  tryToPostMessage(message) {\n    if(!this.slideHolder)\n    {\n      console.log(`${this.name  } post fail`);\n      return;\n    }\n    //trigger with jquery\n    $(this.slideHolder).trigger(`message-to-slide`, message);\n  }\n\n  setState(state) {\n    this.state = state;\n    this.tryToPostMessage({\n      action: `setState`,\n      state: this.state\n    });\n  }\n}\n","import {Constants} from '../Constants';\n\nexport default class ContentBase{\n\n  constructor($slideHolder) {\n    this.$slideHolder = $slideHolder;\n    this.slideHolder = this.$slideHolder[0];\n    this.width = this.slideHolder.offsetWidth;\n    this.height = this.slideHolder.offsetHeight;\n    this.prevWidth = this.width;\n    this.prevHeight = this.height;\n    this.widthChanged = false;\n    this.heightChanged = false;\n    this.sizeChanged = false;\n    this.src = $slideHolder.attr(`data-src`);\n    this.name = $slideHolder.attr(`data-name`);\n    this.settings = {};\n    try {\n      this.settings = JSON.parse($(`#presentation`).attr(`data-presentation-settings`));\n    } catch (e) {\n      console.error(e);\n    }\n    this.fps = 60;\n    this._animationFrameId = false;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._interval = false;\n    this._lastTime = new Date().getTime();\n    this.currentFrame = 0;\n\n    this.startListeningForMessages();\n\n    this.__drawLoop = this._drawLoop.bind(this);\n    this._interval = 1000 / this.fps;\n\n    window.requestAnimationFrame(() => {\n      $slideHolder.trigger(`load`);\n    });\n  }\n\n  startListeningForMessages() {\n    this._slideHolderMessageToSlideHandler = this.slideHolderMessageToSlideHandler.bind(this);\n    this.$slideHolder.on(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  stopListeningForMessages() {\n    this.$slideHolder.off(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  slideHolderMessageToSlideHandler(event, message) {\n    this.receiveMessage({data: message});\n  }\n\n  receiveMessage(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case `setState`:\n      this.setState(event.data.state);\n      break;\n    case `destroy`:\n      this.destroy();\n      break;\n    case Constants.SOCKET_RECEIVE:\n      this.receiveSocketMessage(event.data.message);\n      break;\n    default:\n      this.handleMessage(event.data);\n      break;\n    }\n  }\n\n  destroy() {\n    this.stopListeningForMessages();\n    window.cancelAnimationFrame(this._animationFrameId);\n  }\n\n  postMessage(data) {\n    this.$slideHolder.trigger(`message-from-slide`, data);\n  }\n\n  handleMessage(data) { // eslint-disable-line no-unused-vars\n  }\n\n  postSocketMessage(message) {\n    this.postMessage({\n      action: Constants.SOCKET_SEND,\n      message: message\n    });\n  }\n\n  receiveSocketMessage(message) { // eslint-disable-line no-unused-vars\n  }\n\n  setState(state) {\n    if(state !== this.state) {\n      this.state = state;\n      this.onStateChanged();\n      if(this.state === Constants.STATE_ACTIVE) {\n        this.currentFrame = 0;\n        this._drawLoop();\n      } else {\n        window.cancelAnimationFrame(this._animationFrameId);\n      }\n    }\n  }\n\n  onStateChanged() {\n  }\n\n  _drawLoop() {\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n    this._currentTime = (new Date()).getTime();\n    this._delta = (this._currentTime - this._lastTime);\n    if(this._delta > this._interval) {\n      this.currentFrame++;\n      this.prevWidth = this.width;\n      this.prevHeight = this.height;\n      this.width = this.slideHolder.offsetWidth;\n      this.height = this.slideHolder.offsetHeight;\n      this.widthChanged = (this.width !== this.prevWidth);\n      this.heightChanged = (this.height !== this.prevHeight);\n      this.sizeChanged = (this.widthChanged || this.heightChanged);\n      this.drawLoop(this._delta);\n      this._lastTime = this._currentTime - (this._delta % this._interval);\n    }\n  }\n\n  drawLoop(delta) { // eslint-disable-line no-unused-vars\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\nimport HeartRateCanvas from '../HeartRateCanvas';\n\nexport default class HeartRateSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.heartRateCanvas = new HeartRateCanvas(this.slideHolder.querySelector(`canvas`));\n    this.heartRateCanvas.resize(this.width, this.height);\n  }\n\n  receiveMessage(event) {\n    super.receiveMessage(event);\n    if(event.data.action === Constants.HEART_RATE_POLAR) {\n      this.updateHeartRate(event.data.heartRate);\n    }\n  }\n\n  updateHeartRate(heartRate) {\n    this.heartRateCanvas.updateHeartRate(heartRate);\n    this.$slideHolder.find(`.heart-rate-text`).text(heartRate);\n  }\n\n  drawLoop() {\n    if(this.sizeChanged) {\n      this.heartRateCanvas.resize(this.width, this.height);\n    }\n    this.heartRateCanvas.tick();\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport Game from './game/Game';\n\nexport default class HighestHeartrateGameSlide extends ContentBase{\n\n  constructor($slideHolder) {\n    super($slideHolder);\n    this.game = new Game($slideHolder[0], 1280, 670, Phaser.AUTO, `highest-heartrate-game-container`);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.game.paused = false;\n    } else {\n      this.game.paused = true;\n    }\n  }\n\n  destroy() {\n    this.game.destroy();\n    super.destroy();\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport LiveCode from '../live-code';\n\nexport default class LiveCodeSlide extends ContentBase {\n\n  constructor($slideHolder, config, readyCallback) {\n    super($slideHolder);\n\n    const remote = requireNode(`electron`).remote;\n    const config2 = {...config, presentationPath: remote.getGlobal(`__dirname`)};\n\n    //find live code element\n    this.liveCode = new LiveCode(this.$slideHolder.find(`.live-code`), config2, readyCallback);\n  }\n\n  layout() {\n    this.liveCode.layout();\n  }\n\n  destroy() {\n    super.destroy();\n    this.liveCode.destroy();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.liveCode.resume();\n    } else {\n      //stop\n      this.liveCode.pause();\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport Game from './game/Game';\n\nexport default class LowestHeartrateGameSlide extends ContentBase{\n\n  constructor($slideHolder) {\n    super($slideHolder);\n    this.game = new Game($slideHolder[0], 1280, 670, Phaser.AUTO, `lowest-heartrate-game-container`);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.game.paused = false;\n    } else {\n      this.game.paused = true;\n    }\n  }\n\n  destroy() {\n    this.game.destroy();\n    super.destroy();\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class ReactPhonesSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.gameDuration = 11;\n    this.clientsMap = {};\n    this.music = $(`#music`)[0];\n\n    this.$slideHolder.find(`#ip`).text(this.settings.mobileServerUrl);\n\n    this.$slideHolder.find(`.substate-intro .btn`).on(`click`, this.startClickHandler.bind(this));\n    this.$slideHolder.find(`.substate-finished .btn`).on(`click`, this.winnerClickHandler.bind(this));\n\n    this.setSubstate(Constants.REACT_PHONES_INTRO);\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      //send substate to mobile clients\n      this.postSocketMessage({\n        target: {\n          client: `mobile`,\n          slide: this.name\n        },\n        content: {\n          action: Constants.SET_SUBSTATE,\n          substate: this.substate\n        }\n      });\n      if(this.substate === Constants.REACT_PHONES_GAME) {\n        this.resetAllReactionSpeeds();\n      }\n      this.showCurrentState();\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === `updateRoomList`) {\n      //message.content.ids is an array with ids in this room\n      const clientMapIds = _.keys(this.clientsMap);\n      //which ids are new? (in message.content.ids but not in clientsMap)\n      const newClientIds = _.difference(message.content.ids, clientMapIds);\n      //which ids need to be removed? (in clientsMap but not in message.content.ids)\n      const removeClientIds = _.difference(clientMapIds, message.content.ids);\n      //update our map\n      newClientIds.forEach(function(id){\n        this.clientsMap[id] = {\n          id: id,\n          reactionSpeed: 99999999999\n        };\n        this.postSocketMessage({\n          target: {\n            client: `mobile`,\n            slide: this.name\n          },\n          content: {\n            action: Constants.SET_SUBSTATE,\n            substate: this.substate\n          }\n        });\n      }, this);\n      removeClientIds.forEach(function(id){\n        if(this.clientsMap[id]) {\n          //this.clientsMap[id].$div.remove();\n        }\n        delete this.clientsMap[id];\n      }, this);\n\n      this.numClientsChanged();\n    } else if(message.content.action === Constants.UPDATE_REACTION_SPEED) {\n      console.log(message);\n      if(!message.sender) {\n        return;\n      }\n      //message.sender.id contains the origin id\n      if(!this.clientsMap[message.sender.id]) {\n        return;\n      }\n      console.log(`update reactionspeed to ${  message.content.reactionSpeed}`);\n      this.clientsMap[message.sender.id].reactionSpeed = message.content.reactionSpeed;\n    }\n  }\n\n  startClickHandler() {\n    this.setSubstate(Constants.REACT_PHONES_GAME);\n  }\n\n  winnerClickHandler() {\n    //get the clienthandler with the largest motion, and blink it's screen\n    let winningClient = false;\n    let reactionSpeed = 99999999999;\n    for(const id in this.clientsMap) {\n      if(!this.clientsMap[id].speedWinner && this.clientsMap[id].reactionSpeed < reactionSpeed) {\n        winningClient = this.clientsMap[id];\n        reactionSpeed = winningClient.reactionSpeed;\n      }\n    }\n    if(winningClient) {\n      winningClient.speedWinner = true;\n      //send message to this client\n      this.postSocketMessage({\n        target: {\n          client: winningClient.id\n        },\n        content: {\n          action: Constants.BLINK,\n          text: `<span style=\"font-size: 5em;\">Spectacular, You Win!</span>`,\n          backgroundColor: `red`\n        }\n      });\n    }\n  }\n\n  resetAllReactionSpeeds() {\n    for(const id in this.clientsMap) {\n      this.clientsMap[id].reactionSpeed = 99999999999;\n      this.clientsMap[id].speedWinner = false;\n    }\n  }\n\n  numClientsChanged() {\n    this.$slideHolder.find(`#connections span`).text(_.keys(this.clientsMap).length);\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find(`.substate`).removeClass(`active`);\n    this.$slideHolder.find(`.slide`).css({\n      backgroundImage: `none`\n    });\n    if(this.substate === Constants.REACT_PHONES_GAME) {\n      this.music.play();\n      this.$slideHolder.find(`.substate-game .countdown`).html(this.gameDuration);\n      this.$slideHolder.find(`.substate-game`).addClass(`active`);\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n    } else if(this.substate === Constants.REACT_PHONES_FINISHED) {\n      this.$slideHolder.find(`.substate-finished`).addClass(`active`);\n    } else {\n      this.$slideHolder.find(`.slide`).css({\n        backgroundRepeat: `no-repeat`,\n        backgroundSize: `contain`,\n        backgroundPosition: `center center`,\n        backgroundImage: `url(assets/iphone-connections.png)`\n      });\n      this.$slideHolder.find(`.substate-intro`).addClass(`active`);\n    }\n  }\n\n  countDownHandler(timeLeft) {\n    this.$slideHolder.find(`.substate-game .countdown`).html(timeLeft);\n    if(timeLeft > 0) {\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n    } else {\n      this.setSubstate(Constants.REACT_PHONES_FINISHED);\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class ShakeYourPhonesSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.gameDuration = 13; //game lasts 13 seconds\n    this.clientsMap = {};\n    this.clientsByTeam = [\n      [],\n      []\n    ];\n    this.motions = [0, 0];\n    this.music = this.$slideHolder.find(`#music`)[0];\n\n    this.$slideHolder.find(`#ip`).text(this.settings.mobileServerUrl);\n\n    this.$slideHolder.find(`.substate-intro .btn`).on(`click`, this.startClickHandler.bind(this));\n    this.$slideHolder.find(`.substate-finished .btn`).on(`click`, this.winnerClickHandler.bind(this));\n\n    this.setSubstate(Constants.SHAKE_YOUR_PHONES_INTRO);\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      //send substate to mobile clients\n      this.postSocketMessage({\n        target: {\n          client: `mobile`,\n          slide: this.name\n        },\n        content: {\n          action: Constants.SET_SUBSTATE,\n          substate: this.substate\n        }\n      });\n      if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n        this.resetMotion();\n      }\n      this.showCurrentState();\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === `updateRoomList`) {\n      //message.content.ids is an array with ids in this room\n      const clientMapIds = _.keys(this.clientsMap);\n      //which ids are new? (in message.content.ids but not in clientsMap)\n      const newClientIds = _.difference(message.content.ids, clientMapIds);\n      //which ids need to be removed? (in clientsMap but not in message.content.ids)\n      const removeClientIds = _.difference(clientMapIds, message.content.ids);\n      //update our map\n      newClientIds.forEach(function(id){\n        const left = Math.random();\n        const top = Math.random();\n        this.clientsMap[id] = {\n          id: id,\n          motion: 0,\n          size: 10,\n          shakeWinner: false,\n          $div: $(`<div>`).css({\n            position: `absolute`,\n            left: `${left * 100}%`,\n            top: `${top * 100}%`,\n            transformOrigin: `center`,\n            transform: `scale(1)`,\n            borderRadius: `50%`,\n            backgroundColor: `rgba(${  Math.round(left * 255)  },${  Math.round(top * 255)  }, 0, 1)`,\n            width: `10px`,\n            height: `10px`\n          })\n        };\n        $(`.background .substate-game`).append(this.clientsMap[id].$div);\n        this.postSocketMessage({\n          target: {\n            client: `mobile`,\n            slide: this.name\n          },\n          content: {\n            action: Constants.SET_SUBSTATE,\n            substate: this.substate\n          }\n        });\n      }, this);\n      removeClientIds.forEach(function(id){\n        if(this.clientsMap[id]) {\n          this.clientsMap[id].$div.remove();\n        }\n        delete this.clientsMap[id];\n      }, this);\n\n      this.numClientsChanged();\n    } else if(message.content.action === Constants.UPDATE_MOTION) {\n      if(!message.sender) {\n        return;\n      }\n      //message.sender.id contains the origin id\n      if(!this.clientsMap[message.sender.id]) {\n        return;\n      }\n      this.clientsMap[message.sender.id].motion = Math.min(130, message.content.motion); //limit max motion to 130\n    }\n  }\n\n  startClickHandler() {\n    this.setSubstate(Constants.SHAKE_YOUR_PHONES_GAME);\n  }\n\n  winnerClickHandler() {\n    //get the clienthandler with the largest motion, and blink it's screen\n    let winningClient = false;\n    let maximumMotion = -1;\n    for(const id in this.clientsMap) {\n      if(!this.clientsMap[id].shakeWinner && this.clientsMap[id].motion > maximumMotion) {\n        winningClient = this.clientsMap[id];\n        maximumMotion = winningClient.motion;\n      }\n    }\n    if(winningClient) {\n      winningClient.shakeWinner = true;\n      //send message to this client\n      this.postSocketMessage({\n        target: {\n          client: winningClient.id\n        },\n        content: {\n          action: Constants.BLINK,\n          text: `<span style=\"font-size: 5em;\">Spectacular, You Win!</span>`,\n          backgroundColor: `red`\n        }\n      });\n    }\n  }\n\n  resetMotion() {\n    this.motions = [0, 0];\n    for(const id in this.clientsMap) {\n      this.clientsMap[id].motion = 0;\n      this.clientsMap[id].shakeWinner = false;\n    }\n  }\n\n  numClientsChanged() {\n    this.$slideHolder.find(`#connections span`).text(_.keys(this.clientsMap).length);\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find(`.substate`).removeClass(`active`);\n    this.$slideHolder.find(`.slide`).css({\n      backgroundImage: `none`\n    });\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      this.music.play();\n      this.$slideHolder.find(`.substate-game .countdown`).html(this.gameDuration);\n      this.$slideHolder.find(`.substate-game`).addClass(`active`);\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n    } else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\n      this.$slideHolder.find(`.substate-finished`).addClass(`active`);\n    } else {\n      this.$slideHolder.find(`.slide`).css({\n        backgroundRepeat: `no-repeat`,\n        backgroundSize: `contain`,\n        backgroundPosition: `center center`,\n        backgroundImage: `url(assets/iphone-connections.png)`\n      });\n      this.$slideHolder.find(`.substate-intro`).addClass(`active`);\n    }\n  }\n\n  countDownHandler(timeLeft) {\n    this.$slideHolder.find(`.substate-game .countdown`).html(timeLeft);\n    if(timeLeft > 0) {\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n    } else {\n      this.setSubstate(Constants.SHAKE_YOUR_PHONES_FINISHED);\n    }\n  }\n\n  drawLoop() {\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      $.each(this.clientsMap, function(key, value){\n        const target = Math.max(10, value.motion);\n        value.size += (target - value.size) * 0.2;\n        value.$div.css({\n          transform: `scale(${value.size})`\n        });\n      });\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nconst getParameterByName = (url, name) => {\n  name = name.replace(/[\\[]/, `\\\\[`).replace(/[\\]]/, `\\\\]`);\n  const regex = new RegExp(`[\\\\?&]${  name  }=([^&#]*)`),\n    results = regex.exec(url);\n  return results == null ? `` : decodeURIComponent(results[1].replace(/\\+/g, ` `));\n};\n\nexport default class VideoSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.videoPlaying = false;\n    const videoUrl = getParameterByName(this.src, `video`);\n\n    //check for extra config in the filename\n    let loop = false;\n    let muted = false;\n    const videoUrlSplitted = videoUrl.split(`.`);\n    videoUrlSplitted.forEach(part => {\n      if(part === `loop`) {\n        loop = true;\n      }\n      if(part === `muted`) {\n        muted = true;\n      }\n    });\n\n    this.video = this.$slideHolder.find(`video`)[0];\n    if(loop) {\n      $(this.video).attr(`loop`, `loop`);\n    }\n    if(muted) {\n      $(this.video).attr(`muted`, `muted`);\n    }\n    $(this.video).attr(`src`, videoUrl);\n    this._clickHandler = this.clickHandler.bind(this);\n    $(this.video).on(`click`, this._clickHandler);\n  }\n\n  destroy() {\n    super.destroy();\n    $(this.video).off(`click`, this._clickHandler);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setVideoPlaying(true);\n    } else {\n      this.setVideoPlaying(false);\n    }\n  }\n\n  clickHandler(event) { // eslint-disable-line no-unused-vars\n    this.toggleVideoPlaying();\n  }\n\n  setVideoPlaying(value) {\n    if(value !== this.videoPlaying) {\n      this.videoPlaying = value;\n      if(this.videoPlaying) {\n        this.video.play();\n      } else {\n        this.video.pause();\n      }\n    }\n  }\n\n  toggleVideoPlaying() {\n    this.setVideoPlaying(!this.videoPlaying);\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class WebviewSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.webviewMuted = false;\n\n    this.webview = this.$slideHolder.find(`webview`)[0];\n  }\n\n  destroy() {\n    super.destroy();\n  }\n\n  reload() {\n    this.webview.reload();\n  }\n\n  openDevTools() {\n    this.webview.openDevTools();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setWebviewMuted(false);\n    } else {\n      this.setWebviewMuted(true);\n    }\n  }\n\n  setWebviewMuted(value) {\n    if(value !== this.webviewMuted) {\n      this.webviewMuted = value;\n      if (!this.webview) {\n        return;\n      }\n      if(this.webviewMuted) {\n        this.webview.setAudioMuted(true);\n      } else {\n        this.webview.setAudioMuted(false);\n      }\n    }\n  }\n\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9pc29tb3JwaGljLWZldGNoL2ZldGNoLW5wbS1icm93c2VyaWZ5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZGlzdC9mZXRjaC51bWQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvSGVhcnRSYXRlQ2FudmFzLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL01vYmlsZVNlcnZlckJyaWRnZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9Ob2RlQXBwUnVubmVyLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbi5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9TbGlkZUJyaWRnZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9XZWJjYW0uanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL0dhbWUuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL1NwYXJrSGVhcnRSYXRlc1BsdWdpbi5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9oaWdoZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvb2JqZWN0cy9CdXR0b24uanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL29iamVjdHMvRmxhZ3BvbGUuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL29iamVjdHMvR2FtZUNoYXJhY3Rlci5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9oaWdoZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvc3RhdGVzL1BsYXkuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL3N0YXRlcy9QcmVsb2FkLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xpdmUtY29kZS9Db2RlRWxlbWVudC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUvQ29uc29sZUVsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL1Rlcm1pbmFsRWxlbWVudC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUvV2ViUHJldmlld0VsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL1dlYmNhbUVsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xvd2VzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL29iamVjdHMvQmVhbS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9sb3dlc3QtaGVhcnRyYXRlLWdhbWUtc2xpZGUvZ2FtZS9vYmplY3RzL0dhbWVDaGFyYWN0ZXIuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbG93ZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvc3RhdGVzL1BsYXkuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbG93ZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvc3RhdGVzL1ByZWxvYWQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvc2Vuc29ycy9Qb2xhckg3LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9zY3JpcHQuanMiLCJzcmMvc2VydmVyL2NsYXNzZXMvU2xpZGVzRm9sZGVyUGFyc2VyLmpzIiwic3JjL3NoYXJlZC9qcy9Db25zdGFudHMuanMiLCJzcmMvc2hhcmVkL2pzL2NsYXNzZXMvTW9iaWxlU2VydmVyQnJpZGdlLmpzIiwic3JjL3NoYXJlZC9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbi5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9TbGlkZUJyaWRnZS5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9oZWFydC1yYXRlLXNsaWRlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2hpZ2hlc3QtaGVhcnRyYXRlLWdhbWUtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlLXNsaWRlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xvd2VzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9pbmRleC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9yZWFjdC1waG9uZXMtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvc2hha2UteW91ci1waG9uZXMtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvdmlkZW8tc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvd2Vidmlldy1zbGlkZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDL3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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LDRIQUNsQixZQURrQjs7QUFHeEIsVUFBSyxZQUFMLEdBQW9CLEtBQXBCOztBQUVBLFVBQUssT0FBTCxHQUFlLE1BQUssWUFBTCxDQUFrQixJQUFsQixZQUFrQyxDQUFsQyxDQUFmO0FBTHdCO0FBTXpCOzs7OzhCQUVTO0FBQ1I7QUFDRDs7OzZCQUVRO0FBQ1AsV0FBSyxPQUFMLENBQWEsTUFBYjtBQUNEOzs7bUNBRWM7QUFDYixXQUFLLE9BQUwsQ0FBYSxZQUFiO0FBQ0Q7OztxQ0FFZ0I7QUFDZixVQUFHLEtBQUssS0FBTCxLQUFlLHFCQUFVLFlBQTVCLEVBQTBDO0FBQ3hDLGFBQUssZUFBTCxDQUFxQixLQUFyQjtBQUNELE9BRkQsTUFFTztBQUNMLGFBQUssZUFBTCxDQUFxQixJQUFyQjtBQUNEO0FBQ0Y7OztvQ0FFZSxLLEVBQU87QUFDckIsVUFBRyxVQUFVLEtBQUssWUFBbEIsRUFBZ0M7QUFDOUIsYUFBSyxZQUFMLEdBQW9CLEtBQXBCO0FBQ0EsWUFBSSxDQUFDLEtBQUssT0FBVixFQUFtQjtBQUNqQjtBQUNEO0FBQ0QsWUFBRyxLQUFLLFlBQVIsRUFBc0I7QUFDcEIsZUFBSyxPQUFMLENBQWEsYUFBYixDQUEyQixJQUEzQjtBQUNELFNBRkQsTUFFTztBQUNMLGVBQUssT0FBTCxDQUFhLGFBQWIsQ0FBMkIsS0FBM0I7QUFDRDtBQUNGO0FBQ0Y7Ozs7RUExQ3VDLHFCOztrQkFBckIsWSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIiIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgdjQuMi41KzdmMmI1MjZkXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB4O1xuICByZXR1cm4geCAhPT0gbnVsbCAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cblxuXG52YXIgX2lzQXJyYXkgPSB2b2lkIDA7XG5pZiAoQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG59IGVsc2Uge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdm9pZCAwO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdm9pZCAwO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIG5vZGVcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xufVxuXG4vLyB2ZXJ0eFxuZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcbiAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHZlcnR4ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKS5yZXF1aXJlKCd2ZXJ0eCcpO1xuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG4gIH1cbn1cblxudmFyIHNjaGVkdWxlRmx1c2ggPSB2b2lkIDA7XG4vLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuaWYgKGlzTm9kZSkge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG59IGVsc2Uge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuXG4gIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWFrZVByb21pc2UoY2hpbGQpO1xuICB9XG5cbiAgdmFyIF9zdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cblxuICBpZiAoX3N0YXRlKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSB7IGVycm9yOiBudWxsIH07XG5cbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJDEgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlJDEpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkMSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgVFJZX0NBVENIX0VSUk9SLmVycm9yKTtcbiAgICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdm9pZCAwLFxuICAgICAgY2FsbGJhY2sgPSB2b2lkIDAsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdm9pZCAwLFxuICAgICAgZXJyb3IgPSB2b2lkIDAsXG4gICAgICBzdWNjZWVkZWQgPSB2b2lkIDAsXG4gICAgICBmYWlsZWQgPSB2b2lkIDA7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAvLyBub29wXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufVxuXG52YXIgRW51bWVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gICAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcbiAgICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgICB0aGlzLl9lbnVtZXJhdGUoaW5wdXQpO1xuICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICAgIH1cbiAgfVxuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiBfZW51bWVyYXRlKGlucHV0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIF9lYWNoRW50cnkoZW50cnksIGkpIHtcbiAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gICAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7XG5cblxuICAgIGlmIChyZXNvbHZlJCQxID09PSByZXNvbHZlJDEpIHtcbiAgICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDEpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcbiAgICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJDEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7XG4gICAgICAgIH0pLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJDEoZW50cnkpLCBpKTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIF9zZXR0bGVkQXQoc3RhdGUsIGksIHZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cblxuICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIF93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSkge1xuICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBFbnVtZXJhdG9yO1xufSgpO1xuXG4vKipcbiAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcbiAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdO1xuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2VcbiAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcihcIjJcIikpO1xuICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4gIEBzdGF0aWNcbiovXG5mdW5jdGlvbiBhbGwoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IodGhpcywgZW50cmllcykucHJvbWlzZTtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXG4gIH0pO1xuICBgYGBcblxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcbiAgYGBgXG5cbiAgQG1ldGhvZCByYWNlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG4gIHByb21pc2UgdG8gc2V0dGxlLlxuKi9cbmZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShlbnRyaWVzKSkge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuXG4gIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlamVjdFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdCQxKHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cblxudmFyIFByb21pc2UkMSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICAgIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gICAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgfSk7XG4gIGBgYFxuICAgQ2hhaW5pbmdcbiAgLS0tLS0tLS1cbiAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gdXNlci5uYW1lO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgfSk7XG4gICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICB9KTtcbiAgYGBgXG4gIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICB9KTtcbiAgYGBgXG4gICBBc3NpbWlsYXRpb25cbiAgLS0tLS0tLS0tLS0tXG4gICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgfSk7XG4gIGBgYFxuICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICB9KTtcbiAgYGBgXG4gICBTaW1wbGUgRXhhbXBsZVxuICAtLS0tLS0tLS0tLS0tLVxuICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICAgYGBgamF2YXNjcmlwdFxuICBsZXQgcmVzdWx0O1xuICAgdHJ5IHtcbiAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgLy8gc3VjY2Vzc1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAgIC8vIGZhaWx1cmVcbiAgfVxuICBgYGBcbiAgIEVycmJhY2sgRXhhbXBsZVxuICAgYGBganNcbiAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgaWYgKGVycikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfVxuICB9KTtcbiAgYGBgXG4gICBQcm9taXNlIEV4YW1wbGU7XG4gICBgYGBqYXZhc2NyaXB0XG4gIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gc3VjY2Vzc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIGZhaWx1cmVcbiAgfSk7XG4gIGBgYFxuICAgQWR2YW5jZWQgRXhhbXBsZVxuICAtLS0tLS0tLS0tLS0tLVxuICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICAgYGBgamF2YXNjcmlwdFxuICBsZXQgYXV0aG9yLCBib29rcztcbiAgIHRyeSB7XG4gICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgLy8gc3VjY2Vzc1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAgIC8vIGZhaWx1cmVcbiAgfVxuICBgYGBcbiAgIEVycmJhY2sgRXhhbXBsZVxuICAgYGBganNcbiAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgIH1cbiAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG4gICB9XG4gICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBmYWlsdXJlKGVycik7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9XG4gIH0pO1xuICBgYGBcbiAgIFByb21pc2UgRXhhbXBsZTtcbiAgIGBgYGphdmFzY3JpcHRcbiAgZmluZEF1dGhvcigpLlxuICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgLy8gZm91bmQgYm9va3NcbiAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9KTtcbiAgYGBgXG4gICBAbWV0aG9kIHRoZW5cbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cbiAgLyoqXG4gIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cbiAgYGBganNcbiAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgfVxuICAvLyBzeW5jaHJvbm91c1xuICB0cnkge1xuICBmaW5kQXV0aG9yKCk7XG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH1cbiAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfSk7XG4gIGBgYFxuICBAbWV0aG9kIGNhdGNoXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuXG4gIFByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAgYGZpbmFsbHlgIHdpbGwgYmUgaW52b2tlZCByZWdhcmRsZXNzIG9mIHRoZSBwcm9taXNlJ3MgZmF0ZSBqdXN0IGFzIG5hdGl2ZVxuICAgIHRyeS9jYXRjaC9maW5hbGx5IGJlaGF2ZXNcbiAgXG4gICAgU3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkge1xuICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEF1dGhvcigpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmaW5kQXV0aG9yKCk7IC8vIHN1Y2NlZWQgb3IgZmFpbFxuICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gYWx3YXlzIHJ1bnNcbiAgICAgIC8vIGRvZXNuJ3QgYWZmZWN0IHRoZSByZXR1cm4gdmFsdWVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEFzeW5jaHJvbm91cyBleGFtcGxlOlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKXtcbiAgICAgIC8vIGF1dGhvciB3YXMgZWl0aGVyIGZvdW5kLCBvciBub3RcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBmaW5hbGx5XG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uIF9maW5hbGx5KGNhbGxiYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IHByb21pc2UuY29uc3RydWN0b3I7XG5cbiAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGNhbGxiYWNrLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgcmV0dXJuIFByb21pc2U7XG59KCk7XG5cblByb21pc2UkMS5wcm90b3R5cGUudGhlbiA9IHRoZW47XG5Qcm9taXNlJDEuYWxsID0gYWxsO1xuUHJvbWlzZSQxLnJhY2UgPSByYWNlO1xuUHJvbWlzZSQxLnJlc29sdmUgPSByZXNvbHZlJDE7XG5Qcm9taXNlJDEucmVqZWN0ID0gcmVqZWN0JDE7XG5Qcm9taXNlJDEuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblByb21pc2UkMS5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlJDEuX2FzYXAgPSBhc2FwO1xuXG4vKmdsb2JhbCBzZWxmKi9cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICB2YXIgbG9jYWwgPSB2b2lkIDA7XG5cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBnbG9iYWw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBzZWxmO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICB9XG4gIH1cblxuICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgaWYgKFApIHtcbiAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG4gICAgfVxuXG4gICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZSQxO1xufVxuXG4vLyBTdHJhbmdlIGNvbXBhdC4uXG5Qcm9taXNlJDEucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UkMS5Qcm9taXNlID0gUHJvbWlzZSQxO1xuXG5yZXR1cm4gUHJvbWlzZSQxO1xuXG59KSkpO1xuXG5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwXG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG4iLCIvLyB0aGUgd2hhdHdnLWZldGNoIHBvbHlmaWxsIGluc3RhbGxzIHRoZSBmZXRjaCgpIGZ1bmN0aW9uXG4vLyBvbiB0aGUgZ2xvYmFsIG9iamVjdCAod2luZG93IG9yIHNlbGYpXG4vL1xuLy8gUmV0dXJuIHRoYXQgYXMgdGhlIGV4cG9ydCBmb3IgdXNlIGluIFdlYnBhY2ssIEJyb3dzZXJpZnkgZXRjLlxucmVxdWlyZSgnd2hhdHdnLWZldGNoJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2guYmluZChzZWxmKTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChmYWN0b3J5KChnbG9iYWwuV0hBVFdHRmV0Y2ggPSB7fSkpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjpcbiAgICAgICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmXG4gICAgICAnQmxvYicgaW4gc2VsZiAmJlxuICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG5ldyBCbG9iKCk7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICB9O1xuXG4gIGZ1bmN0aW9uIGlzRGF0YVZpZXcob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG4gIH1cblxuICBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlcikge1xuICAgIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAgICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICAgIF07XG5cbiAgICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPVxuICAgICAgQXJyYXlCdWZmZXIuaXNWaWV3IHx8XG4gICAgICBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKTtcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcmF0b3JcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge307XG5cbiAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdO1xuICAgIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSArICcsICcgKyB2YWx1ZSA6IHZhbHVlO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV07XG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgIHJldHVybiB0aGlzLmhhcyhuYW1lKSA/IHRoaXMubWFwW25hbWVdIDogbnVsbFxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgaXRlbXMucHVzaChuYW1lKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW107XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpdGVtcy5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcik7XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKTtcbiAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKTtcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyQXNUZXh0KGJ1Zikge1xuICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGFyc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUodmlld1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKVxuICB9XG5cbiAgZnVuY3Rpb24gYnVmZmVyQ2xvbmUoYnVmKSB7XG4gICAgaWYgKGJ1Zi5zbGljZSkge1xuICAgICAgcmV0dXJuIGJ1Zi5zbGljZSgwKVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zi5ieXRlTGVuZ3RoKTtcbiAgICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpO1xuICAgICAgcmV0dXJuIHZpZXcuYnVmZmVyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gQm9keSgpIHtcbiAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keTtcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5O1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIHN1cHBvcnQuYmxvYiAmJiBpc0RhdGFWaWV3KGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkuYnVmZmVyKTtcbiAgICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChib2R5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnN1bWVkKHRoaXMpIHx8IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ107XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuIG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5O1xuXG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgICB9XG4gICAgICB0aGlzLnVybCA9IGlucHV0LnVybDtcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFscztcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpO1xuICAgICAgfVxuICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Q7XG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlO1xuICAgICAgdGhpcy5zaWduYWwgPSBpbnB1dC5zaWduYWw7XG4gICAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdDtcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVybCA9IFN0cmluZyhpbnB1dCk7XG4gICAgfVxuXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnc2FtZS1vcmlnaW4nO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKTtcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpO1xuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbDtcbiAgICB0aGlzLnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsIHx8IHRoaXMuc2lnbmFsO1xuICAgIHRoaXMucmVmZXJyZXIgPSBudWxsO1xuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KTtcbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHtib2R5OiB0aGlzLl9ib2R5SW5pdH0pXG4gIH07XG5cbiAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGJvZHlcbiAgICAgIC50cmltKClcbiAgICAgIC5zcGxpdCgnJicpXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpO1xuICAgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgcmV0dXJuIGZvcm1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIC8vIFJlcGxhY2UgaW5zdGFuY2VzIG9mIFxcclxcbiBhbmQgXFxuIGZvbGxvd2VkIGJ5IGF0IGxlYXN0IG9uZSBzcGFjZSBvciBob3Jpem9udGFsIHRhYiB3aXRoIGEgc3BhY2VcbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMCNzZWN0aW9uLTMuMlxuICAgIHZhciBwcmVQcm9jZXNzZWRIZWFkZXJzID0gcmF3SGVhZGVycy5yZXBsYWNlKC9cXHI/XFxuW1xcdCBdKy9nLCAnICcpO1xuICAgIHByZVByb2Nlc3NlZEhlYWRlcnMuc3BsaXQoL1xccj9cXG4vKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKTtcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKTtcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gcGFydHMuam9pbignOicpLnRyaW0oKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGhlYWRlcnNcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCc7XG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1cyA9PT0gdW5kZWZpbmVkID8gMjAwIDogb3B0aW9ucy5zdGF0dXM7XG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMDtcbiAgICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSyc7XG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKTtcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnO1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KTtcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpO1xuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH07XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KTtcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJztcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfTtcblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF07XG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfTtcblxuICBleHBvcnRzLkRPTUV4Y2VwdGlvbiA9IHNlbGYuRE9NRXhjZXB0aW9uO1xuICB0cnkge1xuICAgIG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbigpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBleHBvcnRzLkRPTUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG5hbWUpIHtcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgdmFyIGVycm9yID0gRXJyb3IobWVzc2FnZSk7XG4gICAgICB0aGlzLnN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgfTtcbiAgICBleHBvcnRzLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gZXhwb3J0cy5ET01FeGNlcHRpb247XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpO1xuXG4gICAgICBpZiAocmVxdWVzdC5zaWduYWwgJiYgcmVxdWVzdC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpXG4gICAgICB9XG5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgZnVuY3Rpb24gYWJvcnRYaHIoKSB7XG4gICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgICB9O1xuICAgICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpO1xuICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKTtcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ29taXQnKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXF1ZXN0LnNpZ25hbCkge1xuICAgICAgICByZXF1ZXN0LnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0WGhyKTtcblxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gRE9ORSAoc3VjY2VzcyBvciBmYWlsdXJlKVxuICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgcmVxdWVzdC5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KTtcbiAgICB9KVxuICB9XG5cbiAgZmV0Y2gucG9seWZpbGwgPSB0cnVlO1xuXG4gIGlmICghc2VsZi5mZXRjaCkge1xuICAgIHNlbGYuZmV0Y2ggPSBmZXRjaDtcbiAgICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzO1xuICAgIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3Q7XG4gICAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlO1xuICB9XG5cbiAgZXhwb3J0cy5IZWFkZXJzID0gSGVhZGVycztcbiAgZXhwb3J0cy5SZXF1ZXN0ID0gUmVxdWVzdDtcbiAgZXhwb3J0cy5SZXNwb25zZSA9IFJlc3BvbnNlO1xuICBleHBvcnRzLmZldGNoID0gZmV0Y2g7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlYXJ0UmF0ZUNhbnZhcyB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgIHRoaXMucGl4ZWxzUGVyQmVhdEF0NjBCUE0gPSAxMDA7XG4gICAgdGhpcy5mcmFtZU5yID0gMDtcbiAgICB0aGlzLmZwcyA9IDYwO1xuICAgIHRoaXMubnVtVmFsdWVzID0gMDtcbiAgICB0aGlzLm51bVZhbHVlc01hcmdpbiA9IDk7XG4gICAgdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luID0gOTtcbiAgICB0aGlzLmhlYXJ0UmF0ZSA9IDA7XG4gICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBgI2ZmZmA7XG4gICAgdGhpcy5zdHJva2VDb2xvciA9IGAjMDBmYDtcblxuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChgMmRgKTtcbiAgICB0aGlzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG4gICAgdGhpcy5faW5pdFNpemVEZXBlbmRlZFZhcmlhYmxlcygpO1xuXG4gICAgdGhpcy5oZWFydFJhdGVUaWNrSW50ZXJ2YWwgPSBNYXRoLnJvdW5kKHRoaXMuZnBzICogNjAgLyB0aGlzLmhlYXJ0UmF0ZSk7XG4gIH1cblxuICByZXNpemUodywgaCkge1xuICAgIHRoaXMud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCA9IHc7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoO1xuICAgIHRoaXMuX2luaXRTaXplRGVwZW5kZWRWYXJpYWJsZXMoKTtcbiAgfVxuXG4gIF9pbml0U2l6ZURlcGVuZGVkVmFyaWFibGVzKCkge1xuICAgIHRoaXMubnVtVmFsdWVzID0gTWF0aC5yb3VuZCh0aGlzLndpZHRoICogMC44MCk7XG4gICAgdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luID0gdGhpcy5udW1WYWx1ZXMgKyB0aGlzLm51bVZhbHVlc01hcmdpbjtcbiAgICBpZighdGhpcy52YWx1ZXMpIHtcbiAgICAgIHRoaXMudmFsdWVzID0gW107XG4gICAgfVxuICAgIHRoaXMudmFsdWVzLmxlbmd0aCA9IHRoaXMubnVtVmFsdWVzV2l0aE1hcmdpbjtcbiAgICB0aGlzLmNhbnZhc1ZlcnRpY2FsQ2VudGVyID0gdGhpcy5oZWlnaHQgLyAyO1xuICB9XG5cbiAgdGljaygpIHtcbiAgICB0aGlzLmZyYW1lTnIrKztcblxuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHgubW92ZVRvKDAsIHRoaXMuY2FudmFzVmVydGljYWxDZW50ZXIgLSAodGhpcy5jYW52YXNWZXJ0aWNhbENlbnRlciAqIHRoaXMudmFsdWVzWzBdKSk7XG4gICAgZm9yKGxldCBpID0gMTsgaSA8IHRoaXMubnVtVmFsdWVzOyBpKyspIHtcbiAgICAgIHRoaXMuY3R4LmxpbmVUbyhpLCB0aGlzLmNhbnZhc1ZlcnRpY2FsQ2VudGVyIC0gKHRoaXMuY2FudmFzVmVydGljYWxDZW50ZXIgKiB0aGlzLnZhbHVlc1tpXSkpO1xuICAgIH1cbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlQ29sb3I7XG4gICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG5cbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmN0eC5hcmModGhpcy5udW1WYWx1ZXMgLSAxLCB0aGlzLmNhbnZhc1ZlcnRpY2FsQ2VudGVyIC0gKHRoaXMuY2FudmFzVmVydGljYWxDZW50ZXIgKiB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlcyAtIDFdKSwgMiwgMCwgTWF0aC5QSSAqIDIpO1xuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuc3Ryb2tlQ29sb3I7XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgLy9kb2VzIHRoZSB0aWNrIGFsaWduIHdpdGggYSBiZWF0P1xuICAgIGlmKHRoaXMuaGVhcnRSYXRlID4gMCAmJiB0aGlzLmZyYW1lTnIgJSB0aGlzLmhlYXJ0UmF0ZVRpY2tJbnRlcnZhbCA9PT0gMCkge1xuICAgICAgdGhpcy5mcmFtZU5yID0gMDsvL3Jlc2V0IHRvIHplcm9cbiAgICAgIGNvbnN0IHN0cmVuZ3RoID0gMC43ICsgTWF0aC5yYW5kb20oKSAqIDAuMztcbiAgICAgIHRoaXMudmFsdWVzW3RoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiAtIHRoaXMubnVtVmFsdWVzTWFyZ2luIC0gMV0gPSAwLjA1ICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDBdID0gMC4xICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDFdID0gMC4zICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDJdID0gMSAqIHN0cmVuZ3RoO1xuICAgICAgdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luIC0gdGhpcy5udW1WYWx1ZXNNYXJnaW4gKyAzXSA9IDAgKiBzdHJlbmd0aDtcbiAgICAgIHRoaXMudmFsdWVzW3RoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiAtIHRoaXMubnVtVmFsdWVzTWFyZ2luICsgNF0gPSAtMSAqIHN0cmVuZ3RoO1xuICAgICAgdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luIC0gdGhpcy5udW1WYWx1ZXNNYXJnaW4gKyA1XSA9IC0wLjMgKiBzdHJlbmd0aDtcbiAgICAgIHRoaXMudmFsdWVzW3RoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiAtIHRoaXMubnVtVmFsdWVzTWFyZ2luICsgNl0gPSAtMC4xICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDddID0gLTAuMDUgKiBzdHJlbmd0aDtcbiAgICAgIHRoaXMudmFsdWVzW3RoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiAtIHRoaXMubnVtVmFsdWVzTWFyZ2luICsgOF0gPSAwICogc3RyZW5ndGg7XG4gICAgfVxuXG4gICAgdGhpcy52YWx1ZXMuc2hpZnQoKTtcbiAgICB0aGlzLnZhbHVlcy5zaGlmdCgpO1xuICAgIHRoaXMudmFsdWVzLnB1c2goTWF0aC5yYW5kb20oKSAqIDAuMDUgLSAwLjEpO1xuICAgIHRoaXMudmFsdWVzLnB1c2goTWF0aC5yYW5kb20oKSAqIDAuMDUgLSAwLjEpO1xuICB9XG5cbiAgdXBkYXRlSGVhcnRSYXRlKGhlYXJ0UmF0ZSkge1xuICAgIHRoaXMuaGVhcnRSYXRlID0gaGVhcnRSYXRlO1xuICAgIGlmKHRoaXMuaGVhcnRSYXRlID4gMCkge1xuICAgICAgdGhpcy5oZWFydFJhdGVUaWNrSW50ZXJ2YWwgPSBNYXRoLnJvdW5kKHRoaXMuZnBzICogNjAgLyB0aGlzLmhlYXJ0UmF0ZSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgTW9iaWxlU2VydmVyQnJpZGdlQmFzZSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Nb2JpbGVTZXJ2ZXJCcmlkZ2UnO1xuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2JpbGVTZXJ2ZXJCcmlkZ2UgZXh0ZW5kcyBNb2JpbGVTZXJ2ZXJCcmlkZ2VCYXNle1xuXG4gIGNvbnN0cnVjdG9yKHByZXNlbnRhdGlvbiwgc2V0dGluZ3MpIHtcbiAgICBzdXBlcihwcmVzZW50YXRpb24sIHNldHRpbmdzKTtcbiAgICBiZWFuLm9uKHRoaXMucHJlc2VudGF0aW9uLCBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsIHRoaXMuY3VycmVudFNsaWRlSW5kZXhDaGFuZ2VkLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc29ja2V0Q29ubmVjdEhhbmRsZXIoKSB7XG4gICAgc3VwZXIuc29ja2V0Q29ubmVjdEhhbmRsZXIoKTtcbiAgICB0aGlzLnRyeVRvU2VuZChDb25zdGFudHMuTUVTU0FHRSwge1xuICAgICAgdGFyZ2V0OiB7XG4gICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICB9LFxuICAgICAgY29udGVudDoge1xuICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TRVRfQ1VSUkVOVF9TTElERV9JTkRFWCxcbiAgICAgICAgY3VycmVudFNsaWRlSW5kZXg6IHRoaXMucHJlc2VudGF0aW9uLmN1cnJlbnRTbGlkZUluZGV4XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjdXJyZW50U2xpZGVJbmRleENoYW5nZWQoY3VycmVudFNsaWRlSW5kZXgpIHtcbiAgICB0aGlzLnRyeVRvU2VuZChDb25zdGFudHMuTUVTU0FHRSwge1xuICAgICAgdGFyZ2V0OiB7XG4gICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICB9LFxuICAgICAgY29udGVudDoge1xuICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TRVRfQ1VSUkVOVF9TTElERV9JTkRFWCxcbiAgICAgICAgY3VycmVudFNsaWRlSW5kZXg6IGN1cnJlbnRTbGlkZUluZGV4XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuIiwiY29uc3QgY2hpbGRQcm9jZXNzID0gcmVxdWlyZU5vZGUoYGNoaWxkX3Byb2Nlc3NgKTtcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmVOb2RlKGBldmVudHNgKS5FdmVudEVtaXR0ZXI7XG5jb25zdCBwYXRoID0gcmVxdWlyZU5vZGUoYHBhdGhgKTtcblxuY29uc3QgcGxhdGZvcm0gPSByZXF1aXJlTm9kZShgZWxlY3Ryb25gKS5yZW1vdGUucHJvY2Vzcy5wbGF0Zm9ybTtcbmNvbnN0IGlzV2luID0gL153aW4vLnRlc3QocGxhdGZvcm0pO1xuXG4vL2tpbGwgZW50aXJlIHByb2Nlc3MgdHJlZVxuLy9odHRwOi8va3Jhc2ltaXJ0c29uZXYuY29tL2Jsb2cvYXJ0aWNsZS9Ob2RlanMtbWFuYWdpbmctY2hpbGQtcHJvY2Vzc2VzLXN0YXJ0aW5nLXN0b3BwaW5nLWV4ZWMtc3Bhd25cbmNvbnN0IGtpbGwgPSAocGlkLCBzaWduYWwpID0+IHtcbiAgc2lnbmFsID0gc2lnbmFsIHx8IGBTSUdLSUxMYDtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGlmKCFpc1dpbikge1xuICAgICAgY29uc3QgcHNUcmVlID0gcmVxdWlyZU5vZGUoYHBzLXRyZWVgKTtcbiAgICAgIGNvbnN0IGtpbGxUcmVlID0gdHJ1ZTtcbiAgICAgIGlmKGtpbGxUcmVlKSB7XG4gICAgICAgIHBzVHJlZShwaWQsIChlcnIsIGNoaWxkcmVuKSA9PiB7XG4gICAgICAgICAgW3BpZF0uY29uY2F0KGNoaWxkcmVuLm1hcChwID0+IHAuUElEKSkuZm9yRWFjaCh0cGlkID0+IHtcbiAgICAgICAgICAgIHRyeSB7IHByb2Nlc3Mua2lsbCh0cGlkLCBzaWduYWwpOyB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHsgY29uc29sZS5lcnJvcihleCk7IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkgeyBwcm9jZXNzLmtpbGwocGlkLCBzaWduYWwpOyB9XG4gICAgICAgIGNhdGNoIChleCkgeyBjb25zb2xlLmVycm9yKGV4KTsgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZFByb2Nlc3MuZXhlYyhgdGFza2tpbGwgL1BJRCAkeyAgcGlkICB9IC9UIC9GYCwgKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZUFwcFJ1bm5lciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cbiAgcnVuKGFwcGxpY2F0aW9uUGF0aCkge1xuICAgIHJldHVybiB0aGlzLnN0b3AoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuY3dkID0gcGF0aC5kaXJuYW1lKGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICB0aGlzLm51bURhdGFFdmVudHNSZWNlaXZlZCA9IDA7XG4gICAgICB0aGlzLmlnbm9yZUZpcnN0RXZlbnRzQW1vdW50ID0gMDtcbiAgICAgIGlmKGlzV2luKSB7XG4gICAgICAgIHRoaXMuaWdub3JlRmlyc3RFdmVudHNBbW91bnQgPSAyO1xuICAgICAgICB0aGlzLnJ1bm5lciA9IGNoaWxkUHJvY2Vzcy5zcGF3bihgY21kYCwgW2Budm13YCwgYHVzZWAsIGBpb2pzLXYyLjMuMWBdLCB7Y3dkOiB0aGlzLmN3ZH0pO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJ1bm5lci5zdGRpbi53cml0ZShgbm9kZSAkeyAgYXBwbGljYXRpb25QYXRoICB9XFxuYCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgbm9kZSAkeyAgYXBwbGljYXRpb25QYXRofWApO1xuICAgICAgICB0aGlzLnJ1bm5lciA9IGNoaWxkUHJvY2Vzcy5zcGF3bihgbm9kZWAsIFthcHBsaWNhdGlvblBhdGhdLCB7Y3dkOiB0aGlzLmN3ZH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5ydW5uZXIuc3Rkb3V0Lm9uKGBkYXRhYCwgZGF0YSA9PiB0aGlzLm9uUnVubmVyRGF0YShkYXRhKSk7XG4gICAgICB0aGlzLnJ1bm5lci5zdGRlcnIub24oYGRhdGFgLCBlcnJvciA9PiB0aGlzLm9uUnVubmVyRXJyb3IoZXJyb3IpKTtcbiAgICAgIHRoaXMucnVubmVyLm9uKGBkaXNjb25uZWN0YCwgKCkgPT4gdGhpcy5vbkRpc2Nvbm5lY3QoKSk7XG4gICAgICB0aGlzLnJ1bm5lci5vbihgY2xvc2VgLCAoKSA9PiB0aGlzLm9uQ2xvc2UoKSk7XG4gICAgICB0aGlzLnJ1bm5lci5vbihgZXhpdGAsICgpID0+IHRoaXMub25FeGl0KCkpO1xuICAgIH0pO1xuICB9XG4gIG9uUnVubmVyRGF0YShkYXRhKSB7XG4gICAgdGhpcy5udW1EYXRhRXZlbnRzUmVjZWl2ZWQrKztcbiAgICBpZih0aGlzLm51bURhdGFFdmVudHNSZWNlaXZlZCA8PSB0aGlzLmlnbm9yZUZpcnN0RXZlbnRzQW1vdW50KSB7XG4gICAgICAvL2lnbm9yZSB0aGUgZmlyc3QgeC1tZXNzYWdlc1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkYXRhID0gZGF0YS50b1N0cmluZygpLnRyaW0oKTtcbiAgICBpZihkYXRhLmluZGV4T2YodGhpcy5jd2QpID09PSAwKSB7XG4gICAgICBkYXRhID0gZGF0YS5zdWJzdHIodGhpcy5jd2QubGVuZ3RoKTtcbiAgICAgIGlmKGRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5lbWl0KGBzdGRvdXQtZGF0YWAsIGRhdGEpO1xuICB9XG5cbiAgb25SdW5uZXJFcnJvcihlcnJvcikge1xuICAgIHRoaXMuZW1pdChgc3RkZXJyLWRhdGFgLCBlcnJvci50b1N0cmluZygpLnRyaW0oKSk7XG4gIH1cblxuICBvbkRpc2Nvbm5lY3QoKSB7XG4gICAgY29uc29sZS5sb2coYFtDaGlsZEFwcF0gcnVubmVyIGRpc2Nvbm5lY3RlZGApO1xuICAgIHRoaXMucnVubmVyID0gZmFsc2U7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnNvbGUubG9nKGBbQ2hpbGRBcHBdIHJ1bm5lciBjbG9zZWRgKTtcbiAgICB0aGlzLnJ1bm5lciA9IGZhbHNlO1xuICB9XG5cbiAgb25FeGl0KCkge1xuICAgIGNvbnNvbGUubG9nKGBbQ2hpbGRBcHBdIHJ1bm5lciBleGl0ZWRgKTtcbiAgICB0aGlzLnJ1bm5lciA9IGZhbHNlO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZighdGhpcy5ydW5uZXIpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5ydW5uZXIuc3Rkb3V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgdGhpcy5ydW5uZXIuc3RkZXJyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgdGhpcy5ydW5uZXIuc3RkaW4uZW5kKCk7XG4gICAgICAvL2xpc3RlbiBmb3IgcnVubmVyIGV2ZW50cyBhbmQgcmVzb2x2ZSBvbiB0aGUgb25lIHRoYXQgb2NjdXJzXG4gICAgICAvLyBjb25zdCBjYkNhbGxlZCA9IGZhbHNlO1xuICAgICAgLy8gdGhpcy5ydW5uZXIub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdkaXNjb25uZWN0Jyk7XG4gICAgICAvLyAgIGlmKCFjYkNhbGxlZCkge1xuICAgICAgLy8gICAgIHJlc29sdmUoKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSk7XG4gICAgICAvLyB0aGlzLnJ1bm5lci5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdjbG9zZScpO1xuICAgICAgLy8gICBpZighY2JDYWxsZWQpIHtcbiAgICAgIC8vICAgICByZXNvbHZlKCk7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pO1xuICAgICAgLy8gdGhpcy5ydW5uZXIub24oJ2V4aXQnLCAoKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdleGl0Jyk7XG4gICAgICAvLyAgIGlmKCFjYkNhbGxlZCkge1xuICAgICAgLy8gICAgIHJlc29sdmUoKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSk7XG4gICAgICBraWxsKHRoaXMucnVubmVyLnBpZCkudGhlbigoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5ydW5uZXIgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHJldHVybiB0aGlzLnN0b3AoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IFByZXNlbnRhdGlvbkJhc2UgZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvUHJlc2VudGF0aW9uJztcbmltcG9ydCBTbGlkZUJyaWRnZSBmcm9tICcuL1NsaWRlQnJpZGdlJztcbmltcG9ydCBNb2JpbGVTZXJ2ZXJCcmlkZ2UgZnJvbSAnLi9Nb2JpbGVTZXJ2ZXJCcmlkZ2UnO1xuXG5pbXBvcnQgUG9sYXJINyBmcm9tICcuL3NlbnNvcnMvUG9sYXJINyc7XG5pbXBvcnQgV2ViY2FtIGZyb20gJy4vV2ViY2FtJztcblxuY29uc3QgcGF0aCA9IHJlcXVpcmVOb2RlKGBwYXRoYCk7XG5cbmNvbnN0IEtFWUNPREVfTEVGVCA9IDM3O1xuY29uc3QgS0VZQ09ERV9SSUdIVCA9IDM5O1xuY29uc3QgS0VZQ09ERV9TUEFDRSA9IDMyO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVzZW50YXRpb24gZXh0ZW5kcyBQcmVzZW50YXRpb25CYXNlIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgcm9sZSwgc2V0dGluZ3MpIHtcbiAgICBzdXBlcihkYXRhLCByb2xlLCBzZXR0aW5ncyk7XG5cbiAgICBjb25zb2xlLmxvZyhgW1ByZXNlbnRhdGlvbl0gY29uc3RydWN0b3JgKTtcblxuICAgIHRoaXMucG9sYXJINyA9IG5ldyBQb2xhckg3KCk7XG4gICAgdGhpcy5wb2xhckg3Lm9uKFBvbGFySDcuSEVBUlRfUkFURSwgdGhpcy5oZWFydFJhdGVQb2xhckhhbmRsZXIuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLndlYmNhbSA9IG5ldyBXZWJjYW0oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHdlYmNhbS12aWRlb2ApKTtcblxuICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGV2ZW50ID0+IHRoaXMuY2xvc2VIYW5kbGVyKGV2ZW50KTtcbiAgICAkKHdpbmRvdykub24oYGtleWRvd25gLCBldmVudCA9PiB0aGlzLmtleWRvd25IYW5kbGVyKGV2ZW50KSk7XG4gICAgYmVhbi5vbih0aGlzLCBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsIHRoaXMuY3VycmVudFNsaWRlSW5kZXhDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgICQoYGJvZHlgKS5vbihDb25zdGFudHMuR09fVE9fUFJFVklPVVNfU0xJREUsIHRoaXMuZ29Ub1ByZXZpb3VzU2xpZGUuYmluZCh0aGlzKSk7XG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5HT19UT19ORVhUX1NMSURFLCB0aGlzLmdvVG9OZXh0U2xpZGUuYmluZCh0aGlzKSk7XG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5PUEVOX0NPTU1BTkRfTElORSwgdGhpcy5vcGVuQ29tbWFuZExpbmUuYmluZCh0aGlzKSk7XG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5PUEVOX0NBTUVSQSwgdGhpcy5vcGVuQ2FtZXJhLmJpbmQodGhpcykpO1xuICB9XG5cbiAgY2xvc2VIYW5kbGVyKGV2ZW50KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgfVxuXG4gIGN1cnJlbnRTbGlkZUluZGV4Q2hhbmdlZEhhbmRsZXIoc2xpZGVJbmRleCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIH1cblxuICBjcmVhdGVNb2JpbGVTZXJ2ZXJCcmlkZ2UoKSB7XG4gICAgcmV0dXJuIG5ldyBNb2JpbGVTZXJ2ZXJCcmlkZ2UodGhpcywgdGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICB0b2dnbGVFbGV2YXRvck11c2ljKCkge1xuICAgIHRoaXMuZWxldmF0b3JNdXNpY1BsYXlpbmcgPSAhdGhpcy5lbGV2YXRvck11c2ljUGxheWluZztcbiAgICBpZih0aGlzLmVsZXZhdG9yTXVzaWNQbGF5aW5nKSB7XG4gICAgICB0aGlzLmVsZXZhdG9yTXVzaWMucGxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZXZhdG9yTXVzaWMucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICAvL3ByZXBlbmQgdXJscyB3aXRoIGZpbGU6Ly8vIChmYXN0ZXI/KVxuICBwcm9jZXNzU2xpZGVTcmMoc3JjKSB7XG4gICAgc3JjID0gYGZpbGU6Ly8vJHsgIHBhdGgucmVzb2x2ZSh0aGlzLnNldHRpbmdzLnByZXNlbnRhdGlvblBhdGgsIHNyYyl9YDtcbiAgICBzcmMgPSBzcmMucmVwbGFjZSgvXFxcXC9nLCBgL2ApO1xuICAgIHJldHVybiBzcmM7XG4gIH1cblxuICBjcmVhdGVTbGlkZUJyaWRnZXMoZGF0YSkge1xuICAgIFByZXNlbnRhdGlvbkJhc2UucHJvdG90eXBlLmNyZWF0ZVNsaWRlQnJpZGdlcy5jYWxsKHRoaXMsIGRhdGEpO1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIGNvbnN0ICRzbGlkZU1lbnUgPSAkKGAjc2xpZGVNZW51YCk7XG4gICAgY29uc3QgbnVtU2xpZGVCcmlkZ2VzID0gdGhpcy5zbGlkZUJyaWRnZXMubGVuZ3RoO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1TbGlkZUJyaWRnZXM7IGkrKykge1xuICAgICAgY29uc3Qgc2xpZGVCcmlkZ2UgPSB0aGlzLnNsaWRlQnJpZGdlc1tpXTtcbiAgICAgICRzbGlkZU1lbnUuYXBwZW5kKGA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLXNsaWRlbnI9XCIkeyAgaSAgfVwiIGNsYXNzPVwiZHJvcGRvd24taXRlbVwiPiR7ICBpICsgMSAgfSAkeyAgc2xpZGVCcmlkZ2UubmFtZSAgfTwvYnV0dG9uPmApO1xuICAgIH1cbiAgICAkc2xpZGVNZW51LmZpbmQoYGJ1dHRvbmApLm9uKGBjbGlja2AsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGF0LnNldEN1cnJlbnRTbGlkZUluZGV4KHBhcnNlSW50KCQodGhpcykuZGF0YShgc2xpZGVucmApKSk7XG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVTbGlkZUJyaWRnZShzbGlkZSkge1xuICAgIC8vdXNlIG91ciBvd24gYnJpZGdlIHdoaWNoIGRvZXNuJ3QgdXNlIGZldGNoXG4gICAgcmV0dXJuIG5ldyBTbGlkZUJyaWRnZShzbGlkZSk7XG4gIH1cblxuICBzbGlkZU1lc3NhZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgUHJlc2VudGF0aW9uQmFzZS5wcm90b3R5cGUuc2xpZGVNZXNzYWdlSGFuZGxlci5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICBpZighZXZlbnQuZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2goZXZlbnQuZGF0YS5hY3Rpb24pIHtcbiAgICBjYXNlIENvbnN0YW50cy5HT19UT19QUkVWSU9VU19TTElERTpcbiAgICAgIHRoaXMuZ29Ub1ByZXZpb3VzU2xpZGUoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLkdPX1RPX05FWFRfU0xJREU6XG4gICAgICB0aGlzLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLk9QRU5fQ09NTUFORF9MSU5FOlxuICAgICAgdGhpcy5vcGVuQ29tbWFuZExpbmUoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLk9QRU5fQ0FNRVJBOlxuICAgICAgdGhpcy5vcGVuQ2FtZXJhKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBrZXlkb3duSGFuZGxlcihldmVudCkge1xuICAgIC8vb25lIGZyYW1lIGRlbGF5XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZihldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHN3aXRjaChldmVudC5rZXlDb2RlKSB7XG4gICAgICBjYXNlIEtFWUNPREVfTEVGVDpcbiAgICAgICAgdGhpcy5nb1RvUHJldmlvdXNTbGlkZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgS0VZQ09ERV9SSUdIVDpcbiAgICAgICAgdGhpcy5nb1RvTmV4dFNsaWRlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVlDT0RFX1NQQUNFOlxuICAgICAgICAkKGAjcHJlc2VudGF0aW9uLWNvbnRyb2xzYCkudG9nZ2xlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY2hpbGRBcHBEYXRhSGFuZGxlcihkYXRhKSB7XG4gICAgY29uc3QgY3VycmVudFNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgaWYoY3VycmVudFNsaWRlQnJpZGdlKSB7XG4gICAgICBjdXJyZW50U2xpZGVCcmlkZ2UudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLkNISUxEX0FQUF9TVERPVVRfREFUQSxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY2hpbGRBcHBFcnJvckhhbmRsZXIoZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xuICAgIGlmKGN1cnJlbnRTbGlkZUJyaWRnZSkge1xuICAgICAgY3VycmVudFNsaWRlQnJpZGdlLnRyeVRvUG9zdE1lc3NhZ2Uoe1xuICAgICAgICBhY3Rpb246IENvbnN0YW50cy5DSElMRF9BUFBfU1RERVJSX0RBVEEsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGhlYXJ0UmF0ZVBvbGFySGFuZGxlcihoZWFydFJhdGUpIHtcbiAgICAkKGAjZ2xvYmFsLWhlYXJ0LXJhdGVgKS50ZXh0KGhlYXJ0UmF0ZSk7XG4gICAgY29uc3QgY3VycmVudFNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgaWYoY3VycmVudFNsaWRlQnJpZGdlKSB7XG4gICAgICBjdXJyZW50U2xpZGVCcmlkZ2UudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLkhFQVJUX1JBVEVfUE9MQVIsXG4gICAgICAgIGhlYXJ0UmF0ZTogaGVhcnRSYXRlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvcGVuQ29tbWFuZExpbmUoKSB7XG4gICAgJChgI2NvbnNvbGVNb2RhbGApLm1vZGFsKGBzaG93YCk7XG4gIH1cblxuICBvcGVuQ2FtZXJhKCkge1xuICAgICQoYCN3ZWJjYW1Nb2RhbGApLm1vZGFsKGBzaG93YCk7XG4gIH1cblxuICBoYW5kbGVNb2JpbGVTZXJ2ZXJNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZihtZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IGBnb1RvTmV4dFNsaWRlYCkge1xuICAgICAgICB0aGlzLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgIH0gZWxzZSBpZihtZXNzYWdlLmNvbnRlbnQuYWN0aW9uID09PSBgZ29Ub1ByZXZpb3VzU2xpZGVgKSB7XG4gICAgICAgIHRoaXMuZ29Ub1ByZXZpb3VzU2xpZGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBTbGlkZUJyaWRnZUJhc2UgZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvU2xpZGVCcmlkZ2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZUJyaWRnZSBleHRlbmRzIFNsaWRlQnJpZGdlQmFzZSB7XG5cbiAgYXR0YWNoVG9TbGlkZUhvbGRlcihzbGlkZUhvbGRlciwgc3JjLCBjYikge1xuICAgIC8vIGNvbnNvbGUubG9nKCdhdHRhY2hUb1NsaWRlSG9sZGVyJywgc3JjKTtcbiAgICAvLyBjb25zb2xlLmxvZyhzbGlkZUhvbGRlcik7XG4gICAgdGhpcy5zbGlkZUhvbGRlciA9IHNsaWRlSG9sZGVyO1xuICAgIC8vbm90aWZ5IHRoZSBjb250ZW50IGl0IGlzIGJlaW5nIGNsZWFyZWRcbiAgICB0aGlzLnRyeVRvUG9zdE1lc3NhZ2Uoe2FjdGlvbjogYGRlc3Ryb3lgfSk7XG4gICAgLy9jbGVhciB0aGUgY3VycmVudCBjb250ZW50XG4gICAgdGhpcy5zbGlkZUhvbGRlci5pbm5lckhUTUwgPSBgYDtcbiAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgLCB0aGlzLm5hbWUpO1xuICAgICQoc2xpZGVIb2xkZXIpLmFkZENsYXNzKGBsb2FkaW5nYCk7XG5cbiAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYGxvYWRgKTtcbiAgICAkKHNsaWRlSG9sZGVyKS5vbihgbG9hZGAsICgpID0+IHtcbiAgICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogYHNldFN0YXRlYCxcbiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGVcbiAgICAgIH0pO1xuICAgICAgJChzbGlkZUhvbGRlcikub2ZmKGBsb2FkYCk7XG4gICAgfSk7XG5cbiAgICBpZiAoc3JjICE9PSAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXNyY2ApKSB7XG4gICAgICAvL2NyZWF0ZSBodG1sIGltcG9ydFxuICAgICAgY29uc3QgJGltcG9ydEVsID0gJChgPGxpbmsgcmVsPVwiaW1wb3J0XCI+YCk7XG4gICAgICBjb25zdCBpbXBvcnRFbCA9ICRpbXBvcnRFbFswXTtcbiAgICAgICRpbXBvcnRFbC5vbihgbG9hZGAsICgpID0+IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBpbXBvcnRFbC5pbXBvcnQucXVlcnlTZWxlY3RvcihgdGVtcGxhdGVgKTtcbiAgICAgICAgaWYodGVtcGxhdGUpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGUuY29udGVudCwgdHJ1ZSk7XG4gICAgICAgICAgdGhpcy5zbGlkZUhvbGRlci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgJGltcG9ydEVsLnJlbW92ZSgpO1xuICAgICAgICAkKHNsaWRlSG9sZGVyKS5yZW1vdmVDbGFzcyhgbG9hZGluZ2ApO1xuICAgICAgICBjYigpO1xuICAgICAgfSk7XG4gICAgICAkaW1wb3J0RWwuYXR0cihgaHJlZmAsIHNyYyk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXNyY2AsIHNyYyk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5odG1sKCRpbXBvcnRFbCk7XG4gICAgfVxuICB9XG59XG4iLCJjb25zdCBnZXRDYW1lcmFDb25maWcgPSB2aWRlb1dpZHRoID0+IHtcbiAgbGV0IHNvdXJjZUlkID0gZmFsc2U7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcbiAgICAudGhlbihkZXZpY2VzID0+IGRldmljZXMuZmlsdGVyKGRldmljZSA9PiBkZXZpY2Uua2luZCA9PT0gYHZpZGVvYCkpXG4gICAgLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICBkZXZpY2VzLmZvckVhY2goZGV2aWNlID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZGV2aWNlKTtcbiAgICAgICAgaWYoIXNvdXJjZUlkIHx8IGRldmljZS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoYGZhY2V0aW1lYCkgPT09IC0xKSB7XG4gICAgICAgICAgc291cmNlSWQgPSBkZXZpY2UuZGV2aWNlSWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICBvcHRpb25hbDogW1xuICAgICAgICAgICAgeyBzb3VyY2VJZCB9LFxuICAgICAgICAgICAgeyBtaW5XaWR0aDogdmlkZW9XaWR0aH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJjYW0ge1xuICBjb25zdHJ1Y3Rvcih2aWRlbykge1xuICAgIHRoaXMudmlkZW8gPSB2aWRlbztcbiAgICBnZXRDYW1lcmFDb25maWcoMTI4MClcbiAgICAgIC50aGVuKGNvbmZpZyA9PiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uZmlnKSlcbiAgICAgIC50aGVuKHN0cmVhbSA9PiB7XG4gICAgICAgIHRoaXMudmlkZW8uc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcbiAgICAgICAgdGhpcy52aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMudmlkZW8ud2lkdGggPSB0aGlzLnZpZGVvLnZpZGVvV2lkdGg7XG4gICAgICAgICAgdGhpcy52aWRlby5oZWlnaHQgPSB0aGlzLnZpZGVvLnZpZGVvSGVpZ2h0O1xuICAgICAgICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBIZWFydFJhdGVDYW52YXMgZnJvbSAnLi4vLi4vSGVhcnRSYXRlQ2FudmFzJztcblxuaW1wb3J0IFNwYXJrSGVhcnRSYXRlc1BsdWdpbiBmcm9tICcuL1NwYXJrSGVhcnRSYXRlc1BsdWdpbic7XG5cbmltcG9ydCBQcmVsb2FkIGZyb20gJy4vc3RhdGVzL1ByZWxvYWQnO1xuaW1wb3J0IFBsYXkgZnJvbSAnLi9zdGF0ZXMvUGxheSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUgZXh0ZW5kcyBQaGFzZXIuR2FtZSB7XG4gIGNvbnN0cnVjdG9yKHNsaWRlSG9sZGVyLCB3aWR0aCwgaGVpZ2h0LCByZW5kZXJNb2RlLCBjb250YWluZXIpIHtcbiAgICBzdXBlcih3aWR0aCwgaGVpZ2h0LCByZW5kZXJNb2RlLCBjb250YWluZXIsIHsgcHJlbG9hZDogKCkgPT4gdGhpcy5wcmVsb2FkKCl9KTtcbiAgICB0aGlzLnNsaWRlSG9sZGVyID0gc2xpZGVIb2xkZXI7XG4gICAgdGhpcy5zdGF0ZS5hZGQoYFByZWxvYWRgLCBQcmVsb2FkKTtcbiAgICB0aGlzLnN0YXRlLmFkZChgUGxheWAsIFBsYXkpO1xuXG4gICAgdGhpcy5wbGF5ZXIxSGVhcnRSYXRlQ2FudmFzID0gbmV3IEhlYXJ0UmF0ZUNhbnZhcyh0aGlzLnNsaWRlSG9sZGVyLnF1ZXJ5U2VsZWN0b3IoYC5wbGF5ZXIxLWNvbnRhaW5lciBjYW52YXNgKSk7XG4gICAgdGhpcy5wbGF5ZXIxSGVhcnRSYXRlVGV4dCA9IHRoaXMuc2xpZGVIb2xkZXIucXVlcnlTZWxlY3RvcihgLnBsYXllcjEtY29udGFpbmVyIC5oZWFydFJhdGVgKTtcbiAgICB0aGlzLnBsYXllcjJIZWFydFJhdGVDYW52YXMgPSBuZXcgSGVhcnRSYXRlQ2FudmFzKHRoaXMuc2xpZGVIb2xkZXIucXVlcnlTZWxlY3RvcihgLnBsYXllcjItY29udGFpbmVyIGNhbnZhc2ApKTtcbiAgICB0aGlzLnBsYXllcjJIZWFydFJhdGVUZXh0ID0gdGhpcy5zbGlkZUhvbGRlci5xdWVyeVNlbGVjdG9yKGAucGxheWVyMi1jb250YWluZXIgLmhlYXJ0UmF0ZWApO1xuICB9XG4gIHByZWxvYWQoKSB7XG4gICAgdGhpcy5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4gPSB0aGlzLnBsdWdpbnMuYWRkKFNwYXJrSGVhcnRSYXRlc1BsdWdpbik7XG4gICAgdGhpcy5vblBhdXNlLmFkZCgoKSA9PiB0aGlzLm1hbmFnZVNwYXJrSGVhcnRSYXRlc1BsdWdpbkNvbm5lY3Rpb24oKSk7XG4gICAgdGhpcy5vblJlc3VtZS5hZGQoKCkgPT4gdGhpcy5tYW5hZ2VTcGFya0hlYXJ0UmF0ZXNQbHVnaW5Db25uZWN0aW9uKCkpO1xuICAgIHRoaXMubWFuYWdlU3BhcmtIZWFydFJhdGVzUGx1Z2luQ29ubmVjdGlvbigpO1xuICAgIHRoaXMuc3RhdGUuc3RhcnQoYFByZWxvYWRgKTtcbiAgfVxuICB1cGRhdGUodGltZSkge1xuICAgIHN1cGVyLnVwZGF0ZSh0aW1lKTtcbiAgICBpZighdGhpcy5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wbGF5ZXIxSGVhcnRSYXRlQ2FudmFzLnRpY2soKTtcbiAgICB0aGlzLnBsYXllcjFIZWFydFJhdGVDYW52YXMudXBkYXRlSGVhcnRSYXRlKHRoaXMuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjEuaGVhcnRSYXRlKTtcbiAgICB0aGlzLnBsYXllcjFIZWFydFJhdGVUZXh0LmlubmVySFRNTCA9IHRoaXMuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjEuaGVhcnRSYXRlO1xuICAgIHRoaXMucGxheWVyMkhlYXJ0UmF0ZUNhbnZhcy50aWNrKCk7XG4gICAgdGhpcy5wbGF5ZXIySGVhcnRSYXRlQ2FudmFzLnVwZGF0ZUhlYXJ0UmF0ZSh0aGlzLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIyLmhlYXJ0UmF0ZSk7XG4gICAgdGhpcy5wbGF5ZXIySGVhcnRSYXRlVGV4dC5pbm5lckhUTUwgPSB0aGlzLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIyLmhlYXJ0UmF0ZTtcbiAgfVxuICBtYW5hZ2VTcGFya0hlYXJ0UmF0ZXNQbHVnaW5Db25uZWN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKGBbR2FtZV0gbWFuYWdlU3BhcmtIZWFydFJhdGVzUGx1Z2luQ29ubmVjdGlvbmApO1xuICAgIGlmKHRoaXMucGF1c2VkKSB7XG4gICAgICB0aGlzLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5jbG9zZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5jb25uZWN0KCk7XG4gICAgfVxuICB9XG59XG4iLCJjb25zdCBQTEFZRVJfMV9TUEFSS19JRCA9IGA1NWZmNzAwNjUwNzU1NTUzMzIxNzE3ODdgOyAvL3JlZCBvbmVcbmNvbnN0IFBMQVlFUl8yX1NQQVJLX0lEID0gYDUzZmY3MzA2NTA3NTUzNTE0MzE5MTM4N2A7IC8vYmx1ZSBvbmVcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BhcmtIZWFydFJhdGVzUGx1Z2luIGV4dGVuZHMgUGhhc2VyLlBsdWdpbiB7XG4gIGNvbnN0cnVjdG9yKGdhbWUsIHBhcmVudCkge1xuICAgIHN1cGVyKGdhbWUsIHBhcmVudCk7XG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuICBpbml0KCkge1xuICAgIGNvbnNvbGUubG9nKGBTcGFya0hlYXJ0UmF0ZXNQbHVnaW4gUGx1Z2luIGluaXRgKTtcbiAgICB0aGlzLnBsYXllcjEgPSB7XG4gICAgICBzcGFya0lkOiBQTEFZRVJfMV9TUEFSS19JRCxcbiAgICAgIGhlYXJ0UmF0ZTogMFxuICAgIH07XG4gICAgdGhpcy5wbGF5ZXIyID0ge1xuICAgICAgc3BhcmtJZDogUExBWUVSXzJfU1BBUktfSUQsXG4gICAgICBoZWFydFJhdGU6IDBcbiAgICB9O1xuICAgIHRoaXMuX3VkcEVycm9ySGFuZGxlciA9IGVycm9yID0+IHRoaXMudWRwRXJyb3JIYW5kbGVyKGVycm9yKTtcbiAgICB0aGlzLl91ZHBNZXNzYWdlSGFuZGxlciA9IChtZXNzYWdlLCByZW1vdGVJbmZvKSA9PiB0aGlzLnVkcE1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UsIHJlbW90ZUluZm8pO1xuICAgIHRoaXMuX3VkcExpc3RlbmluZ0hhbmRsZXIgPSAoKSA9PiB0aGlzLnVkcExpc3RlbmluZ0hhbmRsZXIoKTtcbiAgfVxuICBjb25uZWN0KCkge1xuICAgIGlmKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGBTcGFya0hlYXJ0UmF0ZXNQbHVnaW4gY29ubmVjdGApO1xuICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICBsZXQgZGdyYW07XG4gICAgdHJ5IHtcbiAgICAgIGRncmFtID0gKHJlcXVpcmVOb2RlICE9PSBudWxsKSA/IHJlcXVpcmVOb2RlKGBkZ3JhbWApIDogcmVxdWlyZShgZGdyYW1gKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgICBpZighZGdyYW0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51ZHBTb2NrZXQgPSBkZ3JhbS5jcmVhdGVTb2NrZXQoYHVkcDRgKTtcbiAgICB0aGlzLnVkcFNvY2tldC5vbihgZXJyb3JgLCB0aGlzLl91ZHBFcnJvckhhbmRsZXIpO1xuICAgIHRoaXMudWRwU29ja2V0Lm9uKGBtZXNzYWdlYCwgdGhpcy5fdWRwTWVzc2FnZUhhbmRsZXIpO1xuICAgIHRoaXMudWRwU29ja2V0Lm9uKGBsaXN0ZW5pbmdgLCB0aGlzLl91ZHBMaXN0ZW5pbmdIYW5kbGVyKTtcbiAgICB0aGlzLnVkcFNvY2tldC5iaW5kKDEyMzQpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIGlmKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgU3BhcmtIZWFydFJhdGVzUGx1Z2luIGNsb3NlYCk7XG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICBpZighdGhpcy51ZHBTb2NrZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51ZHBTb2NrZXQucmVtb3ZlTGlzdGVuZXIoYGVycm9yYCwgdGhpcy5fdWRwRXJyb3JIYW5kbGVyKTtcbiAgICB0aGlzLnVkcFNvY2tldC5yZW1vdmVMaXN0ZW5lcihgbWVzc2FnZWAsIHRoaXMuX3VkcE1lc3NhZ2VIYW5kbGVyKTtcbiAgICB0aGlzLnVkcFNvY2tldC5yZW1vdmVMaXN0ZW5lcihgbGlzdGVuaW5nYCwgdGhpcy5fdWRwTGlzdGVuaW5nSGFuZGxlcik7XG4gICAgdGhpcy51ZHBTb2NrZXQuY2xvc2UoKTtcbiAgICB0aGlzLnVkcFNvY2tldCA9IG51bGw7XG4gIH1cbiAgdWRwRXJyb3JIYW5kbGVyKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coYFtTcGFya0hlYXJ0UmF0ZXNQbHVnaW5dIHVkcEVycm9ySGFuZGxlcmAsIGVycm9yKTtcbiAgICB0aGlzLnVkcFNvY2tldC5jbG9zZSgpO1xuICB9XG4gIHVkcE1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UsIHJlbW90ZUluZm8pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIGNvbnN0IHN0ciA9IG1lc3NhZ2UudG9TdHJpbmcoKTtcbiAgICBjb25zdCBzcGxpdCA9IHN0ci5zcGxpdChgO2ApO1xuICAgIGlmKHNwbGl0Lmxlbmd0aCA+IDIpIHtcbiAgICAgIHRoaXMuc2V0SGVhcnRSYXRlKHNwbGl0WzBdLCBzcGxpdFsyXSk7XG4gICAgfVxuICB9XG4gIHVkcExpc3RlbmluZ0hhbmRsZXIoKSB7XG4gICAgY29uc29sZS5sb2coYFtTcGFya0hlYXJ0UmF0ZXNQbHVnaW5dIHVkcExpc3RlbmluZ2ApO1xuICB9XG4gIHNldEhlYXJ0UmF0ZShzcGFya0lkLCBoZWFydFJhdGUpIHtcbiAgICBoZWFydFJhdGUgPSBwYXJzZUludChoZWFydFJhdGUpO1xuICAgIGlmKHRoaXMucGxheWVyMS5zcGFya0lkID09PSBzcGFya0lkKSB7XG4gICAgICB0aGlzLnBsYXllcjEuaGVhcnRSYXRlID0gaGVhcnRSYXRlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZih0aGlzLnBsYXllcjIuc3BhcmtJZCA9PT0gc3BhcmtJZCkge1xuICAgICAgdGhpcy5wbGF5ZXIyLmhlYXJ0UmF0ZSA9IGhlYXJ0UmF0ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBQaGFzZXIuQnV0dG9uIHtcbiAgY29uc3RydWN0b3IoZ2FtZSwgeCwgeSwgY2FsbGJhY2ssIGNhbGxiYWNrQ29udGV4dCwgY29sb3JOYW1lLCBsYWJlbCkge1xuICAgIHN1cGVyKGdhbWUsIHgsIHksIGBjb21wb25lbnRzYCwgY2FsbGJhY2ssIGNhbGxiYWNrQ29udGV4dCwgYCR7Y29sb3JOYW1lfS1vdmVyYCwgYCR7Y29sb3JOYW1lfS1ub3JtYWxgLCBgJHtjb2xvck5hbWV9LWRvd25gKTtcbiAgICB0aGlzLmxhYmVsRmllbGQgPSBuZXcgUGhhc2VyLlRleHQoZ2FtZSwgMCwgMCwgYGAsIHtcbiAgICAgIGZvbnQ6IGAzNnB4IEFyaWFsYCxcbiAgICAgIGZpbGw6IGAjZmZmZmZmYFxuICAgIH0pO1xuICAgIHRoaXMubGFiZWxGaWVsZC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5sYWJlbEZpZWxkKTtcbiAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gIH1cbiAgc2V0IGxhYmVsKHZhbHVlKSB7XG4gICAgdGhpcy5sYWJlbEZpZWxkLnRleHQgPSB2YWx1ZTtcbiAgfVxuICBnZXQgbGFiZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxGaWVsZC50ZXh0O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGbGFncG9sZSBleHRlbmRzIFBoYXNlci5Hcm91cCB7XG4gIGNvbnN0cnVjdG9yKGdhbWUsIHgsIHkpIHtcbiAgICBzdXBlcihnYW1lKTtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICB0aGlzLnBvbGUgPSBuZXcgUGhhc2VyLlNwcml0ZSh0aGlzLmdhbWUsIDAsIDAsIGBtYXJpby1ncmFwaGljc2AsIGBmbGFncG9sZS5wbmdgKTtcbiAgICB0aGlzLnBvbGUuYW5jaG9yLnNldFRvKDAuNSwgMSk7XG4gICAgdGhpcy5hZGQodGhpcy5wb2xlKTtcblxuICAgIHRoaXMuZmxhZyA9IG5ldyBQaGFzZXIuU3ByaXRlKHRoaXMuZ2FtZSwgMCwgMCwgYG1hcmlvLWdyYXBoaWNzYCwgYGZsYWctbW92aW5nMS5wbmdgKTtcbiAgICB0aGlzLmZsYWcuYW5jaG9yLnNldFRvKDAsIDEpO1xuICAgIHRoaXMuZmxhZy55ID0gLXRoaXMucG9sZS5oZWlnaHQgKyB0aGlzLmZsYWcuaGVpZ2h0ICsgMjA7XG4gICAgdGhpcy5mbGFnLmFuaW1hdGlvbnMuYWRkKGBtb3ZpbmdgLCBbXG4gICAgICBgZmxhZy1tb3ZpbmcxLnBuZ2AsXG4gICAgICBgZmxhZy1tb3ZpbmcyLnBuZ2AsXG4gICAgICBgZmxhZy1tb3ZpbmczLnBuZ2BcbiAgICBdLCAxMCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5mbGFnLmFuaW1hdGlvbnMucGxheShgbW92aW5nYCk7XG4gICAgdGhpcy5hZGQodGhpcy5mbGFnKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNoYXJhY3RlciBleHRlbmRzIFBoYXNlci5TcHJpdGUge1xuICBjb25zdHJ1Y3RvcihnYW1lLCB4LCB5LCBjaGFyYWN0ZXIpIHtcbiAgICBzdXBlcihnYW1lLCB4LCB5LCBgbWFyaW8tZ3JhcGhpY3NgLCBgJHtjaGFyYWN0ZXJ9LXJ1bi0xLnBuZ2ApO1xuICAgIHRoaXMuYW5jaG9yLnNldFRvKDAuNSwgMSk7XG4gICAgdGhpcy5hbmltYXRpb25zLmFkZChgc3RhbmRgLCBbXG4gICAgICBgJHtjaGFyYWN0ZXJ9LXJ1bi0xLnBuZ2AsXG4gICAgXSwgMTAsIHRydWUsIHRydWUpO1xuICAgIHRoaXMuYW5pbWF0aW9ucy5hZGQoYHJ1bmAsIFtcbiAgICAgIGAke2NoYXJhY3Rlcn0tcnVuLTEucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tcnVuLTIucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tcnVuLTMucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tcnVuLTQucG5nYFxuICAgIF0sIDEwLCB0cnVlLCB0cnVlKTtcbiAgICB0aGlzLmFuaW1hdGlvbnMuYWRkKGBqdW1wYCwgW1xuICAgICAgYCR7Y2hhcmFjdGVyfS1qdW1wLnBuZ2BcbiAgICBdLCAxMCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzKTtcbiAgICB0aGlzLmJvZHkuZ3Jhdml0eS55ID0gMTAwMDtcbiAgfVxuICBzdGFuZCgpIHtcbiAgICB0aGlzLmFuaW1hdGlvbnMucGxheShgc3RhbmRgKTtcbiAgICB0aGlzLmJvZHkudmVsb2NpdHkueCA9IDA7XG4gIH1cbiAgcnVuKHNwZWVkKSB7XG4gICAgdGhpcy5ib2R5LnZlbG9jaXR5LnggPSBzcGVlZDtcbiAgICB0aGlzLmFuaW1hdGlvbnMucGxheShgcnVuYCk7XG4gIH1cbiAganVtcCgpIHtcbiAgICBpZih0aGlzLmJvZHkudG91Y2hpbmcuZG93bikge1xuICAgICAgdGhpcy5hbmltYXRpb25zLnBsYXkoYGp1bXBgKTtcbiAgICAgIHRoaXMuYm9keS52ZWxvY2l0eS54ID0gMTAwO1xuICAgICAgdGhpcy5ib2R5LnZlbG9jaXR5LnkgPSAtNzUwO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi9vYmplY3RzL0J1dHRvbic7XG5pbXBvcnQgR2FtZUNoYXJhY3RlciBmcm9tICcuLi9vYmplY3RzL0dhbWVDaGFyYWN0ZXInO1xuaW1wb3J0IEZsYWdwb2xlIGZyb20gJy4uL29iamVjdHMvRmxhZ3BvbGUnO1xuXG5jb25zdCBTVUJTVEFURV9JTlRSTyA9IGBpbnRyb2A7XG5jb25zdCBTVUJTVEFURV9QTEFZID0gYHBsYXlgO1xuY29uc3QgU1VCU1RBVEVfSlVNUF9QT0xFID0gYGp1bXBgO1xuY29uc3QgU1VCU1RBVEVfRklOSVNIRUQgPSBgZmluaXNoZWRgO1xuXG5jb25zdCBXSU5ORVJfRElTVEFOQ0VfUE9MRSA9IDEwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheSBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG4gIGluaXQoKSB7XG4gICAgLy8gaWYoIXRoaXMuZ2FtZS5iYWNrZ3JvdW5kVmlkZW8pIHtcbiAgICAvLyAgIHRoaXMuZ2FtZS5iYWNrZ3JvdW5kVmlkZW8gPSB0aGlzLmFkZC52aWRlbygnYmFja2dyb3VuZC12aWRlbycpO1xuICAgIC8vICAgdGhpcy5nYW1lLmJhY2tncm91bmRWaWRlby5wbGF5KHRydWUpO1xuICAgIC8vIH1cbiAgICAvLyB0aGlzLmdhbWUuYmFja2dyb3VuZFZpZGVvLmFkZFRvV29ybGQoKTtcbiAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcbiAgfVxuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5jcmVhdGVFbnZpcm9ubWVudCgpO1xuICAgIHRoaXMuY3JlYXRlUGxheWVycygpO1xuICAgIHRoaXMuY3JlYXRlQnV0dG9ucygpO1xuXG4gICAgdGhpcy5zZXRTdWJTdGF0ZShTVUJTVEFURV9JTlRSTyk7XG4gIH1cbiAgY3JlYXRlRW52aXJvbm1lbnQoKSB7XG4gICAgdGhpcy5ncm91bmQgPSB0aGlzLmFkZC50aWxlU3ByaXRlKDAsIHRoaXMud29ybGQuaGVpZ2h0LCB0aGlzLndvcmxkLndpZHRoLCA4MiwgYG1hcmlvLWdyYXBoaWNzYCwgYGdyb3VuZC5wbmdgKTtcbiAgICB0aGlzLmdyb3VuZC5hbmNob3Iuc2V0VG8oMCwgMSk7XG4gICAgdGhpcy5waHlzaWNzLmFyY2FkZS5lbmFibGUodGhpcy5ncm91bmQpO1xuICAgIHRoaXMuZ3JvdW5kLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcblxuICAgIHRoaXMuaGlsbHMgPSB0aGlzLmFkZC50aWxlU3ByaXRlKDAsIHRoaXMud29ybGQuaGVpZ2h0IC0gODIsIHRoaXMud29ybGQud2lkdGgsIDQyOCwgYG1hcmlvLWdyYXBoaWNzYCwgYGhpbGxzLnBuZ2ApO1xuICAgIHRoaXMuaGlsbHMuYW5jaG9yLnNldFRvKDAsIDEpO1xuXG4gICAgdGhpcy5mbGFncG9sZSA9IG5ldyBGbGFncG9sZSh0aGlzLmdhbWUsIHRoaXMud29ybGQud2lkdGggLSA1MCwgdGhpcy53b3JsZC5oZWlnaHQgLSA4Mik7XG4gICAgdGhpcy5hZGQuZXhpc3RpbmcodGhpcy5mbGFncG9sZSk7XG4gIH1cbiAgY3JlYXRlUGxheWVycygpIHtcbiAgICB0aGlzLnBlYWNoID0gdGhpcy5hZGQuZXhpc3RpbmcobmV3IEdhbWVDaGFyYWN0ZXIodGhpcy5nYW1lLCAzMCwgMTAsIGBwZWFjaGApKTtcbiAgICB0aGlzLm1hcmlvID0gdGhpcy5hZGQuZXhpc3RpbmcobmV3IEdhbWVDaGFyYWN0ZXIodGhpcy5nYW1lLCAxMCwgMTAsIGBtYXJpb2ApKTtcbiAgfVxuICBjcmVhdGVCdXR0b25zKCkge1xuICAgIHRoaXMucGxheUJ1dHRvbiA9IG5ldyBCdXR0b24odGhpcy5nYW1lLCB0aGlzLndvcmxkLmNlbnRlclgsIHRoaXMud29ybGQuY2VudGVyWSwgdGhpcy5wbGF5Q2xpY2tlZCwgdGhpcywgYGJsdWVgLCBgUGxheWApO1xuICAgIHRoaXMucGxheUJ1dHRvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIHRoaXMuYWRkLmV4aXN0aW5nKHRoaXMucGxheUJ1dHRvbik7XG5cbiAgICB0aGlzLnN0b3BCdXR0b24gPSBuZXcgQnV0dG9uKHRoaXMuZ2FtZSwgdGhpcy53b3JsZC5jZW50ZXJYLCB0aGlzLndvcmxkLmNlbnRlclksIHRoaXMuc3RvcENsaWNrZWQsIHRoaXMsIGBibHVlYCwgYFN0b3BgKTtcbiAgICB0aGlzLnN0b3BCdXR0b24uYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICB0aGlzLmFkZC5leGlzdGluZyh0aGlzLnN0b3BCdXR0b24pO1xuICB9XG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLnBoeXNpY3MuYXJjYWRlLmNvbGxpZGUodGhpcy5ncm91bmQsIHRoaXMucGVhY2gpO1xuICAgIHRoaXMucGh5c2ljcy5hcmNhZGUuY29sbGlkZSh0aGlzLmdyb3VuZCwgdGhpcy5tYXJpbyk7XG4gICAgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfUExBWSkge1xuICAgICAgdGhpcy51cGRhdGVQbGF5U3RhdGUoKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfSlVNUF9QT0xFKSB7XG4gICAgICB0aGlzLnVwZGF0ZUp1bXBTdGF0ZSgpO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9GSU5JU0hFRCkge1xuICAgICAgdGhpcy51cGRhdGVGaW5pc2hlZFN0YXRlKCk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZVBsYXlTdGF0ZSgpIHtcbiAgICBjb25zdCBkaXN0YW5jZU1hcmlvID0gdGhpcy5mbGFncG9sZS54IC0gdGhpcy5tYXJpby54O1xuICAgIGNvbnN0IGRpc3RhbmNlUGVhY2ggPSB0aGlzLmZsYWdwb2xlLnggLSB0aGlzLnBlYWNoLng7XG4gICAgdGhpcy5wZWFjaC5ydW4odGhpcy5nYW1lLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIxLmhlYXJ0UmF0ZSk7XG4gICAgdGhpcy5tYXJpby5ydW4odGhpcy5nYW1lLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIyLmhlYXJ0UmF0ZSk7XG4gICAgaWYoZGlzdGFuY2VNYXJpbyA8IFdJTk5FUl9ESVNUQU5DRV9QT0xFIHx8IGRpc3RhbmNlUGVhY2ggPCBXSU5ORVJfRElTVEFOQ0VfUE9MRSkge1xuICAgICAgaWYoZGlzdGFuY2VNYXJpbyA8IGRpc3RhbmNlUGVhY2gpIHtcbiAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLm1hcmlvO1xuICAgICAgICB0aGlzLmxvc2VyID0gdGhpcy5wZWFjaDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5wZWFjaDtcbiAgICAgICAgdGhpcy5sb3NlciA9IHRoaXMubWFyaW87XG4gICAgICB9XG4gICAgICB0aGlzLnNldFN1YlN0YXRlKFNVQlNUQVRFX0pVTVBfUE9MRSk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZUp1bXBTdGF0ZSgpIHtcbiAgICBjb25zdCBkaXN0YW5jZVdpbm5lciA9IHRoaXMuZmxhZ3BvbGUueCAtIHRoaXMud2lubmVyLng7XG4gICAgaWYoZGlzdGFuY2VXaW5uZXIgPD0gMCkge1xuICAgICAgdGhpcy53aW5uZXIuYm9keS52ZWxvY2l0eS54ID0gMDtcbiAgICAgIHRoaXMuc2V0U3ViU3RhdGUoU1VCU1RBVEVfRklOSVNIRUQpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVGaW5pc2hlZFN0YXRlKCkge1xuICAgIHRoaXMuZmxhZ3BvbGUuZmxhZy55ID0gdGhpcy53aW5uZXIueSAtIHRoaXMuZmxhZ3BvbGUueTtcbiAgfVxuICBzZXRTdWJTdGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuc3ViU3RhdGUgPSB2YWx1ZTtcbiAgICB0aGlzLnBsYXlCdXR0b24udmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuc3RvcEJ1dHRvbi52aXNpYmxlID0gZmFsc2U7XG4gICAgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfUExBWSkge1xuICAgICAgdGhpcy5zdG9wQnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICAgICAgLy8gdGhpcy5wZWFjaC5ydW4oMTAwKTtcbiAgICAgIC8vIHRoaXMubWFyaW8ucnVuKDUwKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfSlVNUF9QT0xFKXtcbiAgICAgIHRoaXMuc3RvcEJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMubG9zZXIuc3RhbmQoKTtcbiAgICAgIHRoaXMud2lubmVyLmp1bXAoKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfRklOSVNIRUQpe1xuICAgICAgdGhpcy5wbGF5QnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXlCdXR0b24udmlzaWJsZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHBsYXlDbGlja2VkKCkge1xuICAgIHRoaXMuc2V0U3ViU3RhdGUoU1VCU1RBVEVfUExBWSk7XG4gIH1cbiAgc3RvcENsaWNrZWQoKSB7XG4gICAgdGhpcy5zdGF0ZS5zdGFydChgUGxheWApO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVsb2FkIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgaW5pdCgpIHtcbiAgICB0aGlzLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgdGhpcy5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSBgIzUwODhhMGA7XG4gIH1cbiAgcHJlbG9hZCgpIHtcbiAgICB0aGlzLmxvYWQuYXRsYXNKU09OSGFzaChgY29tcG9uZW50c2AsIGBhc3NldHMvbWFyaW8vY29tcG9uZW50cy5wbmdgLCBgYXNzZXRzL21hcmlvL2NvbXBvbmVudHMuanNvbmApO1xuICAgIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKGBtYXJpby1ncmFwaGljc2AsIGBhc3NldHMvbWFyaW8vbWFyaW8tZ3JhcGhpY3MucG5nYCwgYGFzc2V0cy9tYXJpby9tYXJpby1ncmFwaGljcy5qc29uYCk7XG4gIH1cbiAgY3JlYXRlKCkge1xuICAgIHRoaXMuc3RhdGUuc3RhcnQoYFBsYXlgKTtcbiAgfVxufVxuIiwiY29uc3QgZnMgPSByZXF1aXJlTm9kZShgZnMtZXh0cmFgKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29kZUVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRlbCA9ICQoZWwpO1xuICAgIC8vb3B0aW9uc1xuICAgIGlmKCFvcHRpb25zKVxuICAgIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCB3aWR0aCA9ICQoZWwpLnBhcmVudCgpWzBdLnN0eWxlLndpZHRoIHx8IGAxMDAlYDtcbiAgICBjb25zdCBoZWlnaHQgPSAkKGVsKS5wYXJlbnQoKVswXS5zdHlsZS5oZWlnaHQgfHwgYDEwMCVgO1xuXG4gICAgLy93cmFwIGVsZW1lbnQgaW4gYSBjb250YWluZXJcbiAgICB0aGlzLiR3cmFwcGVyRWwgPSAkKGVsKS53cmFwKGA8ZGl2IGNsYXNzPVwibGl2ZS1jb2RlLWVsZW1lbnQgbGl2ZS1jb2RlLWNvZGUtZWxlbWVudFwiPjwvZGl2PmApLnBhcmVudCgpO1xuICAgIHRoaXMud3JhcHBlckVsID0gdGhpcy4kd3JhcHBlckVsWzBdO1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgKTtcbiAgICB0aGlzLmZpbGUgPSB0aGlzLiRlbC5kYXRhKGBmaWxlYCk7XG5cbiAgICBpZighdGhpcy5pZCAmJiB0aGlzLmZpbGUpXG4gICAge1xuICAgICAgdGhpcy5pZCA9IHRoaXMuZmlsZTtcbiAgICB9XG4gICAgaWYoIXRoaXMuaWQpXG4gICAge1xuICAgICAgdGhpcy5pZCA9IGBjb2RlLSR7ICBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwICogbmV3IERhdGUoKS5nZXRUaW1lKCkpfWA7XG4gICAgfVxuICAgIHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgLCB0aGlzLmlkKTtcblxuICAgIHRoaXMucnVudGltZSA9IHRoaXMuJGVsLmRhdGEoYHJ1bnRpbWVgKTtcbiAgICBpZighdGhpcy5ydW50aW1lKVxuICAgIHtcbiAgICAgIHRoaXMucnVudGltZSA9IGBicm93c2VyYDtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnNvbGUgPSB0aGlzLiRlbC5kYXRhKGBjb25zb2xlYCk7XG4gICAgdGhpcy5wcm9jZXNzb3IgPSB0aGlzLiRlbC5kYXRhKGBwcm9jZXNzb3JgKTtcblxuICAgIC8vbGFuZ3VhZ2UgaXMgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UgLSB1c2VkIGZvciBpbmplY3RpbmcgaW4gaHRtbFxuICAgIHRoaXMubGFuZ3VhZ2UgPSB0aGlzLiRlbC5kYXRhKGBsYW5ndWFnZWApO1xuICAgIGlmKCF0aGlzLmxhbmd1YWdlKVxuICAgIHtcbiAgICAgIC8vZGVmYXVsdCB0byBqYXZhc2NyaXB0XG4gICAgICB0aGlzLmxhbmd1YWdlID0gYGphdmFzY3JpcHRgO1xuICAgIH1cblxuICAgIC8vbW9kZSBpcyBtb2RlIGZvciBjb2RlbWlycm9yXG4gICAgdGhpcy5tb2RlID0gdGhpcy4kZWwuZGF0YShgbW9kZWApO1xuICAgIGlmKCF0aGlzLm1vZGUpXG4gICAge1xuICAgICAgLy9kZWZhdWx0IHRvIHRoZSBsYW5ndWFnZVxuICAgICAgdGhpcy5tb2RlID0gdGhpcy5sYW5ndWFnZTtcbiAgICB9XG5cbiAgICB0aGlzLmNvZGVNaXJyb3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSh0aGlzLmVsLCB7XG4gICAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICAgIG1vZGU6IHRoaXMubW9kZSxcbiAgICAgIGV4dHJhS2V5czoge1wiQ3RybC1TcGFjZVwiOiBgYXV0b2NvbXBsZXRlYH1cbiAgICB9KTtcblxuICAgIHRoaXMuY29kZU1pcnJvci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy90aGlzLiRlbC5jc3MoJ3dpZHRoJywgJzEwMCUnKS5jc3MoJ2hlaWdodCcsICcxMDAlJyk7XG4gICAgdGhpcy5sYXlvdXQoKTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIC8vbm8gcmVhbCByZWFzb24gdG8gZG8gcGF1c2UgLyByZXN1bWVcbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICAvL25vIHJlYWwgcmVhc29uIHRvIGRvIHBhdXNlIC8gcmVzdW1lXG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfVxuXG4gIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmNvZGVNaXJyb3IuZ2V0VmFsdWUoKTtcbiAgfVxuXG4gIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5jb2RlTWlycm9yLnNldFZhbHVlKHZhbHVlKTtcbiAgfVxuXG4gIHNhdmVUb0ZpbGUoZmlsZVBhdGgpIHtcbiAgICByZXR1cm4gZnMud3JpdGVGaWxlKGZpbGVQYXRoLCB0aGlzLmdldFZhbHVlKCkpO1xuICB9XG5cbiAgcmVhZEZyb21GaWxlKGZpbGVQYXRoKSB7XG4gICAgcmV0dXJuIGZzLnJlYWRGaWxlKGZpbGVQYXRoLCBgdXRmOGApXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShkYXRhKTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICB0aGlzLnNldFZhbHVlKGBgKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgbGF5b3V0KCkge1xuICAgIC8vIHRoaXMuJHdyYXBwZXJFbC5maW5kKCcuQ29kZU1pcnJvci1zY3JvbGwnKS5jc3MoJ21heC1oZWlnaHQnLCB0aGlzLiR3cmFwcGVyRWwuY3NzKCdoZWlnaHQnKSk7XG4gICAgdGhpcy5jb2RlTWlycm9yLnJlZnJlc2goKTtcbiAgfVxufVxuIiwiaW1wb3J0IE5vZGVBcHBSdW5uZXIgZnJvbSAnLi4vTm9kZUFwcFJ1bm5lcic7XG5cbmNvbnN0IGh0bWxFc2NhcGUgPSBzdHIgPT4ge1xuICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvJi9nLCBgJmFtcDtgKVxuICAgIC5yZXBsYWNlKC9cXFwiL2csIGAmcXVvdDtgKVxuICAgIC5yZXBsYWNlKC8nL2csIGAmIzM5O2ApXG4gICAgLnJlcGxhY2UoLzwvZywgYCZsdDtgKVxuICAgIC5yZXBsYWNlKC8+L2csIGAmZ3Q7YCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25zb2xlRWxlbWVudCB7XG5cbiAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy4kZWwgPSAkKGVsKTtcblxuICAgIHRoaXMubm9kZUFwcFJ1bm5lciA9IG5ldyBOb2RlQXBwUnVubmVyKCk7XG4gICAgdGhpcy5ub2RlQXBwUnVubmVyLm9uKGBzdGRvdXQtZGF0YWAsIGRhdGEgPT4gdGhpcy5pbmZvKFtkYXRhXSkpO1xuICAgIHRoaXMubm9kZUFwcFJ1bm5lci5vbihgc3RkZXJyLWRhdGFgLCBlcnJvciA9PiB0aGlzLmVycm9yKFtlcnJvcl0pKTtcblxuICAgIC8vb3B0aW9uc1xuICAgIGlmKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIC8vd3JhcCBlbGVtZW50IGluIGEgY29udGFpbmVyXG4gICAgdGhpcy4kd3JhcHBlckVsID0gJChlbCkud3JhcChgPGRpdiBjbGFzcz1cImxpdmUtY29kZS1lbGVtZW50IGxpdmUtY29kZS1jb25zb2xlLWVsZW1lbnQgdW5yZXNldFwiPjwvZGl2PmApLnBhcmVudCgpO1xuICAgIHRoaXMud3JhcHBlckVsID0gdGhpcy4kd3JhcHBlckVsWzBdO1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgKTtcbiAgICBpZighdGhpcy5pZClcbiAgICB7XG4gICAgICAvL2dlbmVyYXRlIGlkXG4gICAgICB0aGlzLmlkID0gYGNvZGUtJHsgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl9YDtcbiAgICAgIHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmZpbGUgPSB0aGlzLiRlbC5kYXRhKGBmaWxlYCk7XG5cbiAgICB0aGlzLiRlbC5jc3MoYHdpZHRoYCwgYDEwMCVgKS5jc3MoYGhlaWdodGAsIGAxMDAlYCk7XG5cbiAgICB0aGlzLmxvZ3MgPSBbXTtcblxuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICBpZighdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLm5vZGVBcHBSdW5uZXIuc3RvcCgpO1xuICB9XG5cbiAgcmVzdW1lKCkge1xuICAgIGlmKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKCF0aGlzLmFwcGxpY2F0aW9uUGF0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm5vZGVBcHBSdW5uZXIucnVuKHRoaXMuYXBwbGljYXRpb25QYXRoKTtcbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfVxuXG4gIHJ1bk5vZGVBcHAoYXBwbGljYXRpb25QYXRoKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICAgIHRoaXMuYXBwbGljYXRpb25QYXRoID0gYXBwbGljYXRpb25QYXRoO1xuICAgIHRoaXMucmVzdW1lKCk7XG4gIH1cblxuICBtZXNzYWdlKGV2ZW50KSB7XG4gICAgY29uc3Qgc3RyID0gaHRtbEVzY2FwZShldmVudC5tZXNzYWdlKTtcbiAgICBsZXQgZmlsZU5hbWUgPSBldmVudC5zb3VyY2VJZC5zcGxpdChgL2ApO1xuICAgIGZpbGVOYW1lID0gZmlsZU5hbWVbZmlsZU5hbWUubGVuZ3RoIC0gMV07XG4gICAgdGhpcy5sb2dzLnB1c2goYDxkaXYgY2xhc3M9XCJjb25zb2xlLW1lc3NhZ2VcIj5cbiAgICAgIDxwcmUgY2xhc3M9XCJjb25zb2xlLW1lc3NhZ2VfX2NvbnRlbnQgY29uc29sZS1tZXNzYWdlX19jb250ZW50LS1sZXZlbCR7ZXZlbnQubGV2ZWx9XCI+JHsgIHN0ciAgfTwvcHJlPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbnNvbGUtbWVzc2FnZV9fb3JpZ2luXCI+JHtmaWxlTmFtZX06JHtldmVudC5saW5lfTwvZGl2PlxuICAgIDwvZGl2PmApO1xuICAgIHdoaWxlKHRoaXMubG9ncy5sZW5ndGggPiAyMCkge1xuICAgICAgdGhpcy5sb2dzLnNoaWZ0KCk7XG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSB0aGlzLmxvZ3Muam9pbihgYCk7XG4gICAgdGhpcy5lbC5pbm5lckhUTUwgPSBodG1sO1xuICAgIHRoaXMud3JhcHBlckVsLnNjcm9sbFRvcCA9IHRoaXMud3JhcHBlckVsLnNjcm9sbEhlaWdodDtcbiAgfVxufVxuIiwiY29uc3QgVEVSTUlOQUxfVVJMID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMGA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRlcm1pbmFsRWxlbWVudCB7XG5cbiAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy4kZWwgPSAkKGVsKTtcblxuICAgIHRoaXMuX2lwY01lc3NhZ2VIYW5kbGVyID0gZSA9PiB0aGlzLmlwY01lc3NhZ2VIYW5kbGVyKGUpO1xuXG4gICAgLy9vcHRpb25zXG4gICAgaWYoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgLy93cmFwIGVsZW1lbnQgaW4gYSBjb250YWluZXJcbiAgICB0aGlzLiR3cmFwcGVyRWwgPSAkKGVsKS53cmFwKGA8ZGl2IGNsYXNzPVwibGl2ZS1jb2RlLWVsZW1lbnQgbGl2ZS1jb2RlLXRlcm1pbmFsLWVsZW1lbnRcIj48L2Rpdj5gKS5wYXJlbnQoKTtcbiAgICB0aGlzLndyYXBwZXJFbCA9IHRoaXMuJHdyYXBwZXJFbFswXTtcblxuICAgIHRoaXMuaWQgPSB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCk7XG4gICAgaWYoIXRoaXMuaWQpXG4gICAge1xuICAgICAgLy9nZW5lcmF0ZSBpZFxuICAgICAgdGhpcy5pZCA9IGBjb2RlLSR7ICBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwICogbmV3IERhdGUoKS5nZXRUaW1lKCkpfWA7XG4gICAgICB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCwgdGhpcy5pZCk7XG4gICAgfVxuXG4gICAgdGhpcy5kaXIgPSB0aGlzLiRlbC5kYXRhKGBkaXJgKTtcbiAgICB0aGlzLmF1dG9ydW4gPSB0aGlzLiRlbC5kYXRhKGBhdXRvcnVuYCk7XG5cbiAgICB0aGlzLiRlbC5jc3MoYHdpZHRoYCwgYDEwMCVgKS5jc3MoYGhlaWdodGAsIGAxMDAlYCk7XG5cbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICBpZih0aGlzLndlYnZpZXcpIHtcbiAgICAgIHRoaXMud2Vidmlldy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud2Vidmlldyk7XG4gICAgICB0aGlzLndlYnZpZXcgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgaWYodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICAgIC8vY3JlYXRlIGEgd2VidmlldyB0YWdcbiAgICBpZih0aGlzLndlYnZpZXcpIHtcbiAgICAgIHRoaXMud2Vidmlldy5yZW1vdmVFdmVudExpc3RlbmVyKGBpcGMtbWVzc2FnZWAsIHRoaXMuX2lwY01lc3NhZ2VIYW5kbGVyKTtcbiAgICAgIHRoaXMud2Vidmlldy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud2Vidmlldyk7XG4gICAgICB0aGlzLndlYnZpZXcgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy53ZWJ2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgd2Vidmlld2ApO1xuICAgIC8vIHRoaXMud2Vidmlldy5hZGRFdmVudExpc3RlbmVyKCdkb20tcmVhZHknLCAoKSA9PiB7XG4gICAgLy8gICB0aGlzLndlYnZpZXcub3BlbkRldlRvb2xzKCk7XG4gICAgLy8gfSk7XG4gICAgdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoYGlwYy1tZXNzYWdlYCwgdGhpcy5faXBjTWVzc2FnZUhhbmRsZXIpO1xuICAgIHRoaXMud2Vidmlldy5zdHlsZS53aWR0aCA9IGAxMDAlYDtcbiAgICB0aGlzLndlYnZpZXcuc3R5bGUuaGVpZ2h0ID0gYDEwMCVgO1xuICAgIHRoaXMud2Vidmlldy5zZXRBdHRyaWJ1dGUoYG5vZGVpbnRlZ3JhdGlvbmAsIGBgKTtcbiAgICB0aGlzLndlYnZpZXcuc2V0QXR0cmlidXRlKGBzcmNgLCBURVJNSU5BTF9VUkwpO1xuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy53ZWJ2aWV3KTtcbiAgfVxuXG4gIGlwY01lc3NhZ2VIYW5kbGVyKGUpIHtcbiAgICBpZihlLmNoYW5uZWwgIT09IGBtZXNzYWdlLWZyb20tdGVybWluYWxgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKGUuYXJncy5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG8gPSBlLmFyZ3NbMF07XG4gICAgaWYoIW8uY29tbWFuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2goby5jb21tYW5kKSB7XG4gICAgY2FzZSBgaW5pdGA6XG4gICAgICBpZih0aGlzLmRpcikge1xuICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGBjZCAke3RoaXMuZGlyfWApO1xuICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKGBjbGVhcmApO1xuICAgICAgfVxuICAgICAgaWYodGhpcy5hdXRvcnVuKSB7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmQodGhpcy5hdXRvcnVuKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLndhcm4oYHVua25vdyBjb21tYW5kIG9iamVjdCBmcm9tIHRlcm1pbmFsYCk7XG4gICAgICBjb25zb2xlLndhcm4obyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBleGVjdXRlQ29tbWFuZChjb21tYW5kU3RyaW5nKSB7XG4gICAgdGhpcy53ZWJ2aWV3LnNlbmQoYG1lc3NhZ2UtdG8tdGVybWluYWxgLCB7XG4gICAgICBjb21tYW5kOiBgZXhlY3V0ZWAsXG4gICAgICB2YWx1ZTogY29tbWFuZFN0cmluZ1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYlByZXZpZXdFbGVtZW50IHtcblxuICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRlbCA9ICQoZWwpO1xuICAgIC8vb3B0aW9uc1xuICAgIGlmKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXHRcdC8vd3JhcCBlbGVtZW50IGluIGEgY29udGFpbmVyXG4gICAgdGhpcy4kd3JhcHBlckVsID0gJChlbCkud3JhcChgPGRpdiBjbGFzcz1cImxpdmUtY29kZS1lbGVtZW50IGxpdmUtY29kZS13ZWItcHJldmlldy1lbGVtZW50XCI+PC9kaXY+YCkucGFyZW50KCk7XG4gICAgdGhpcy53cmFwcGVyRWwgPSB0aGlzLiR3cmFwcGVyRWxbMF07XG5cbiAgICB0aGlzLmlkID0gdGhpcy4kZWwuYXR0cihgZGF0YS1pZGApO1xuICAgIGlmKCF0aGlzLmlkKVxuXHRcdHtcblx0XHRcdC8vZ2VuZXJhdGUgaWRcbiAgICAgIHRoaXMuaWQgPSBgY29kZS0keyAgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpKX1gO1xuICAgICAgdGhpcy4kZWwuYXR0cihgZGF0YS1pZGAsIHRoaXMuaWQpO1xuICAgIH1cblxuICAgIHRoaXMuZmlsZSA9IHRoaXMuJGVsLmRhdGEoYGZpbGVgKSB8fCB0aGlzLiRlbC5kYXRhKGB1cmxgKTtcbiAgICB0aGlzLmF1dG9sb2FkID0gdGhpcy4kZWwuZGF0YShgYXV0b2xvYWRgKSB8fCBmYWxzZTtcbiAgICB0aGlzLnpvb21mYWN0b3IgPSB0aGlzLiRlbC5kYXRhKGB6b29tZmFjdG9yYCkgfHwgZmFsc2U7XG5cbiAgICB0aGlzLmNvbnNvbGUgPSB0aGlzLiRlbC5kYXRhKGBjb25zb2xlYCkgfHwgZmFsc2U7XG5cbiAgICB0aGlzLiRlbC5jc3MoYHdpZHRoYCwgYDEwMCVgKS5jc3MoYGhlaWdodGAsIGAxMDAlYCk7XG5cbiAgICB0aGlzLnVybCA9IGZhbHNlO1xuICAgIHRoaXMuYmxvY2tzID0gZmFsc2U7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcblx0XHQvL3dlYnZpZXcgZ2V0cyBjcmVhdGVkIGJ5IGNhbGxpbmcgdXBkYXRlVXJsIG9yIHVwZGF0ZUNvZGVcbiAgfVxuXG4gIGdldCBuZWVkc091dHB1dFBhdGhQcmVmaXgoKSB7XG4gICAgcmV0dXJuICEodGhpcy4kZWwuZGF0YShgdXJsYCkpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIGlmKHRoaXMud2Vidmlldykge1xuICAgICAgdGhpcy53ZWJ2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGRpZC1nZXQtcmVzcG9uc2UtZGV0YWlsc2AsIHRoaXMuX2RpZEdldFJlc3BvbnNlRGV0YWlsc0hhbmRsZXIpO1xuICAgICAgdGhpcy53ZWJ2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGRvbS1yZWFkeWAsIHRoaXMuX2RvbVJlYWR5SGFuZGxlcik7XG4gICAgICB0aGlzLndlYnZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcihgZGlkLWZhaWwtbG9hZGAsIHRoaXMuX2RpZEZhaWxMb2FkSGFuZGxlcik7XG4gICAgICB0aGlzLndlYnZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcihgaXBjLW1lc3NhZ2VgLCB0aGlzLl9pcGNNZXNzYWdlSGFuZGxlcik7XG4gICAgICB0aGlzLndlYnZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcihgY29uc29sZS1tZXNzYWdlYCwgdGhpcy5fY29uc29sZU1lc3NhZ2VIYW5kbGVyKTtcbiAgICAgIHRoaXMud2Vidmlldy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud2Vidmlldyk7XG4gICAgICB0aGlzLndlYnZpZXcgPSBmYWxzZTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJldHJ5VGltZW91dCk7XG4gICAgfVxuICB9XG5cbiAgcmVzdW1lKCkge1xuICAgIGlmKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKHRoaXMudXJsID09PSBmYWxzZSAmJiB0aGlzLmJsb2NrcyA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICAgIHRoaXMuX2NyZWF0ZVdlYnZpZXcoKTtcbiAgfVxuXG4gIF9jcmVhdGVXZWJ2aWV3KCkge1xuICAgIC8vY3JlYXRlIGEgd2VidmlldyB0YWdcbiAgICBpZih0aGlzLndlYnZpZXcpIHtcbiAgICAgIHRoaXMud2Vidmlldy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud2Vidmlldyk7XG4gICAgICB0aGlzLndlYnZpZXcgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy53ZWJ2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgd2Vidmlld2ApO1xuICAgIHRoaXMud2Vidmlldy5zdHlsZS53aWR0aCA9IGAxMDAlYDtcbiAgICB0aGlzLndlYnZpZXcuc3R5bGUuaGVpZ2h0ID0gYDEwMCVgO1xuICAgIHRoaXMud2Vidmlldy5wcmVsb2FkID0gYGpzL2xpdmVjb2RlLXdlYnByZXZpZXcuanNgO1xuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy53ZWJ2aWV3KTtcblxuICAgIGNvbnN0IHVybCA9ICh0aGlzLnVybCAhPT0gZmFsc2UpID8gdGhpcy51cmwgOiBgd2VicHJldmlldy5odG1sYDtcbiAgICBsZXQgaHRtbFNyYyA9IGBgO1xuICAgIGlmKHRoaXMuYmxvY2tzICE9PSBmYWxzZSkge1xuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tzLmxlbmd0aDsgaSsrKVxuXHRcdFx0e1xuICAgICAgICBodG1sU3JjICs9IHRoaXMuYmxvY2tzW2ldLmNvZGU7XG4gICAgICB9XG4gICAgfVxuXG5cdFx0Ly9hZGQgbGlzdGVuZXJzXG4gICAgdGhpcy5fZGlkR2V0UmVzcG9uc2VEZXRhaWxzSGFuZGxlciA9IGUgPT4ge1xuICAgICAgaWYoZS5vcmlnaW5hbFVSTCAhPT0gdGhpcy53ZWJ2aWV3LnNyYykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZih0aGlzLiRlbC5hdHRyKGBkYXRhLW9wZW4tZGV2dG9vbHNgKSkge1xuICAgICAgICB0aGlzLndlYnZpZXcub3BlbkRldlRvb2xzKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLndlYnZpZXcuYWRkRXZlbnRMaXN0ZW5lcihgZGlkLWdldC1yZXNwb25zZS1kZXRhaWxzYCwgdGhpcy5fZGlkR2V0UmVzcG9uc2VEZXRhaWxzSGFuZGxlcik7XG5cbiAgICB0aGlzLl9kb21SZWFkeUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy56b29tZmFjdG9yKSB7XG4gICAgICAgIGNvbnN0IHpvb21mYWN0b3IgPSBwYXJzZUZsb2F0KHRoaXMuem9vbWZhY3Rvcik7XG4gICAgICAgIHRoaXMud2Vidmlldy5zZXRab29tRmFjdG9yKHpvb21mYWN0b3IpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoYGRvbS1yZWFkeWAsIHRoaXMuX2RvbVJlYWR5SGFuZGxlcik7XG5cbiAgICB0aGlzLl9kaWRGYWlsTG9hZEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLnJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIHRoaXMucmVzdW1lKCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9O1xuICAgIHRoaXMud2Vidmlldy5hZGRFdmVudExpc3RlbmVyKGBkaWQtZmFpbC1sb2FkYCwgdGhpcy5fZGlkRmFpbExvYWRIYW5kbGVyKTtcblxuICAgIHRoaXMuX2NvbnNvbGVNZXNzYWdlSGFuZGxlciA9IGUgPT4ge1xuICAgICAgdGhpcy4kd3JhcHBlckVsLnRyaWdnZXIoYGNvbnNvbGUtbWVzc2FnZWAsIGUpO1xuICAgIH07XG4gICAgdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoYGNvbnNvbGUtbWVzc2FnZWAsIHRoaXMuX2NvbnNvbGVNZXNzYWdlSGFuZGxlcik7XG5cbiAgICB0aGlzLl9pcGNNZXNzYWdlSGFuZGxlciA9IGV2ZW50ID0+IHtcbiAgICAgIGlmKGV2ZW50LmNoYW5uZWwgPT09IGByZXF1ZXN0LWh0bWxgKVxuICAgICAge1xuICAgICAgICB0aGlzLndlYnZpZXcuc2VuZChgcmVjZWl2ZS1odG1sYCwgaHRtbFNyYyk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLndlYnZpZXcuYWRkRXZlbnRMaXN0ZW5lcihgaXBjLW1lc3NhZ2VgLCB0aGlzLl9pcGNNZXNzYWdlSGFuZGxlcik7XG5cbiAgICBpZighdGhpcy4kZWwuYXR0cihgZGF0YS1kaXNhYmxlLW5vZGVpbnRlZ3JhdGlvbmApKSB7XG4gICAgICB0aGlzLndlYnZpZXcuc2V0QXR0cmlidXRlKGBub2RlaW50ZWdyYXRpb25gLCBgYCk7XG4gICAgfVxuICAgIHRoaXMud2Vidmlldy5zZXRBdHRyaWJ1dGUoYHNyY2AsIHVybCk7XG4gIH1cblxuICB1cGRhdGVVcmwodXJsKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuYmxvY2tzID0gZmFsc2U7XG4gICAgdGhpcy5yZXN1bWUoKTtcbiAgfVxuXG4gIHVwZGF0ZUNvZGUoYmxvY2tzKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICAgIHRoaXMudXJsID0gZmFsc2U7XG4gICAgdGhpcy5ibG9ja3MgPSBibG9ja3M7XG4gICAgdGhpcy5yZXN1bWUoKTtcbiAgfVxuXG4gIG9wZW5EZXZUb29scygpIHtcbiAgICB0aGlzLndlYnZpZXcub3BlbkRldlRvb2xzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYmNhbUVsZW1lbnQge1xuXG4gIGNvbnN0cnVjdG9yKGVsLCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuJGVsID0gJChlbCk7XG5cbiAgICAvL29wdGlvbnNcbiAgICBpZighb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHRoaXMuaWQgPSB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCk7XG4gICAgaWYoIXRoaXMuaWQpXG4gICAge1xuICAgICAgLy9nZW5lcmF0ZSBpZFxuICAgICAgdGhpcy5pZCA9IGB3ZWJjYW0tJHsgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl9YDtcbiAgICAgIHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLnNvdXJjZSA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtc291cmNlYCk7XG4gICAgaWYodGhpcy5zb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc291cmNlKTtcbiAgICB9XG5cbiAgICB0aGlzLmN0eCA9IHRoaXMuZWwuZ2V0Q29udGV4dChgMmRgKTtcblxuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCk7XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgaWYodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5kcmF3TG9vcCgpKTtcbiAgfVxuXG4gIGRyYXdMb29wKCkge1xuICAgIGlmKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZHJhd0xvb3AoKSk7XG4gICAgfVxuICAgIGlmKCF0aGlzLnNvdXJjZUVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwud2lkdGggPSB0aGlzLnNvdXJjZUVsLndpZHRoO1xuICAgIHRoaXMuZWwuaGVpZ2h0ID0gdGhpcy5zb3VyY2VFbC5oZWlnaHQ7XG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuZWwud2lkdGgsIHRoaXMuZWwuaGVpZ2h0KTtcbiAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5zb3VyY2VFbCwgMCwgMCk7XG4gIH1cbn1cbiIsImltcG9ydCBDb25zb2xlRWxlbWVudCBmcm9tICcuL0NvbnNvbGVFbGVtZW50JztcbmltcG9ydCBUZXJtaW5hbEVsZW1lbnQgZnJvbSAnLi9UZXJtaW5hbEVsZW1lbnQnO1xuaW1wb3J0IENvZGVFbGVtZW50IGZyb20gJy4vQ29kZUVsZW1lbnQnO1xuaW1wb3J0IFdlYlByZXZpZXdFbGVtZW50IGZyb20gJy4vV2ViUHJldmlld0VsZW1lbnQnO1xuaW1wb3J0IFdlYmNhbUVsZW1lbnQgZnJvbSAnLi9XZWJjYW1FbGVtZW50JztcblxuY29uc3QgcGF0aCA9IHJlcXVpcmVOb2RlKGBwYXRoYCk7XG5jb25zdCBmcyA9IHJlcXVpcmVOb2RlKGBmcy1leHRyYWApO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlQ29kZSB7XG5cbiAgY29uc3RydWN0b3IoJGVsLCBjb25maWcsIHJlYWR5Q2FsbGJhY2spIHtcbiAgICB0aGlzLiRlbCA9ICRlbDtcbiAgICB0aGlzLmVsID0gdGhpcy4kZWxbMF07XG5cbiAgICBpZih0aGlzLiRlbC5hdHRyKGBkYXRhLWVudHJ5LXBhdGhgKSkge1xuICAgICAgdGhpcy5lbnRyeVBhdGggPSBwYXRoLmpvaW4oY29uZmlnLnByZXNlbnRhdGlvblBhdGgsIHRoaXMuJGVsLmF0dHIoYGRhdGEtZW50cnktcGF0aGApKTtcbiAgICB9XG4gICAgaWYodGhpcy4kZWwuYXR0cihgZGF0YS1vdXRwdXQtcGF0aGApKSB7XG4gICAgICB0aGlzLm91dHB1dFBhdGggPSBwYXRoLmpvaW4oY29uZmlnLnByZXNlbnRhdGlvblBhdGgsIHRoaXMuJGVsLmF0dHIoYGRhdGEtb3V0cHV0LXBhdGhgKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKHRoaXMuZW50cnlQYXRoKSB7XG4gICAgICAgIHRoaXMub3V0cHV0UGF0aCA9IHRoaXMuZW50cnlQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHAgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBwLnRoZW4oKCkgPT4ge1xuICAgICAgaWYodGhpcy5lbnRyeVBhdGggJiYgdGhpcy5lbnRyeVBhdGggIT09IHRoaXMub3V0cHV0UGF0aCkge1xuICAgICAgICByZXR1cm4gZnMuY29weSh0aGlzLmVudHJ5UGF0aCwgdGhpcy5vdXRwdXRQYXRoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIC8vY3JlYXRlIHRoZSBjb25zb2xlc1xuICAgICAgdGhpcy5jb25zb2xlRWxlbWVudHMgPSB7fTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJjb25zb2xlXCJdYCkuZWFjaCgoKGluZGV4LCBjb25zb2xlRWwpID0+IHRoaXMuY3JlYXRlQ29uc29sZUVsZW1lbnQoY29uc29sZUVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSB0aGUgdGVybWluYWxzXG4gICAgICB0aGlzLnRlcm1pbmFsRWxlbWVudHMgPSB7fTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJ0ZXJtaW5hbFwiXWApLmVhY2goKChpbmRleCwgdGVybWluYWxFbCkgPT4gdGhpcy5jcmVhdGVUZXJtaW5hbEVsZW1lbnQodGVybWluYWxFbCkpKTtcblxuICAgICAgLy9jcmVhdGUgdGhlIHByZXZpZXdzXG4gICAgICB0aGlzLndlYlByZXZpZXdFbGVtZW50cyA9IHt9O1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cIndlYi1wcmV2aWV3XCJdYCkuZWFjaCgoKGluZGV4LCB3ZWJQcmV2aWV3RWwpID0+IHRoaXMuY3JlYXRlV2ViUHJldmlld0VsZW1lbnQod2ViUHJldmlld0VsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSB0aGUgY29kZSBlZGl0b3JzXG4gICAgICB0aGlzLmNvZGVFbGVtZW50cyA9IHt9O1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cImNvZGVcIl1gKS5lYWNoKCgoaW5kZXgsIGNvZGVFbCkgPT4gdGhpcy5jcmVhdGVDb2RlRWxlbWVudChjb2RlRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHRoZSB3ZWJjYW0gZWxlbWVudHNcbiAgICAgIHRoaXMud2ViY2FtRWxlbWVudHMgPSB7fTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJ3ZWJjYW1cIl1gKS5lYWNoKCgoaW5kZXgsIHdlYmNhbUVsKSA9PiB0aGlzLmNyZWF0ZVdlYmNhbUVsZW1lbnQod2ViY2FtRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHJ1biBidXR0b25zXG4gICAgICB0aGlzLnJ1bkJ1dHRvbkVscyA9IFtdO1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cInJ1bi1idXR0b25cIl1gKS5lYWNoKCgoaW5kZXgsIHJ1bkJ1dHRvbkVsKSA9PiB0aGlzLmNyZWF0ZVJ1bkJ1dHRvbihydW5CdXR0b25FbCkpKTtcblxuICAgICAgLy9jcmVhdGUgc2F2ZSBidXR0b25zXG4gICAgICB0aGlzLnNhdmVCdXR0b25FbHMgPSBbXTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJzYXZlLWJ1dHRvblwiXWApLmVhY2goKChpbmRleCwgc2F2ZUJ1dHRvbkVsKSA9PiB0aGlzLmNyZWF0ZVNhdmVCdXR0b24oc2F2ZUJ1dHRvbkVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSByZWxvYWQgYnV0dG9uc1xuICAgICAgdGhpcy5yZWxvYWRCdXR0b25FbHMgPSBbXTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJyZWxvYWQtYnV0dG9uXCJdYCkuZWFjaCgoKGluZGV4LCByZWxvYWRCdXR0b25FbCkgPT4gdGhpcy5jcmVhdGVSZWxvYWRCdXR0b24ocmVsb2FkQnV0dG9uRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHJlbG9hZCBidXR0b25zXG4gICAgICB0aGlzLmRldlRvb2xzQnV0dG9uRWxzID0gW107XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwiZGV2dG9vbHMtYnV0dG9uXCJdYCkuZWFjaCgoKGluZGV4LCBkZXZUb29sc0J1dHRvbkVsKSA9PiB0aGlzLmNyZWF0ZURldlRvb2xzQnV0dG9uKGRldlRvb2xzQnV0dG9uRWwpKSk7XG5cbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHRoaXMuc2V0Q29kZUVsZW1lbnRWYWx1ZXNGcm9tRmlsZXMoKSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICBpZih0aGlzLmlzUnVubmluZykge1xuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlc3VtZSgpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4ocmVhZHlDYWxsYmFjaykuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG4gICAgLy9kaXNhYmxlIGtleWJvYXJkIGJ1YmJsaW5nIHVwXG4gICAgJCh3aW5kb3cpLm9uKGBrZXlkb3duYCwgZXZlbnQgPT4gdGhpcy5rZXlEb3duSGFuZGxlcihldmVudCkpO1xuICB9XG5cbiAga2V5RG93bkhhbmRsZXIoZSkge1xuICAgIGlmKHRoaXMuZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybiBhIHByZXZpb3VzbHkgY3JlYXRlZCBjb2RlIGVsZW1lbnQsIGJhc2VkIG9uIHRoZSBpbnB1dFxuICAgKiBpbnB1dCBjYW4gYmU6XG4gICAqICAtIGh0bWwgZG9tIGVsZW1lbnRcbiAgICogIC0gaWQgb2YgY29kZSBlbGVtZW50XG4gICAqXG4gICAqIHJldHVybnMgdGhlIGNvZGUgZWxlbWVudCBpZiBmb3VuZCwgb3RoZXJ3aXNlIHJldHVybnMgZmFsc2VcbiAgICovXG4gIGdldENvZGVFbGVtZW50KGlucHV0KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudCh0aGlzLmNvZGVFbGVtZW50cywgaW5wdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybiBhIHByZXZpb3VzbHkgY3JlYXRlZCB3ZWIgcHJldmlldyBlbGVtZW50LCBiYXNlZCBvbiB0aGUgaW5wdXRcbiAgICogaW5wdXQgY2FuIGJlOlxuICAgKiAgLSBodG1sIGRvbSBlbGVtZW50XG4gICAqICAtIGlkIG9mIGNvZGUgZWxlbWVudFxuICAgKlxuICAgKiByZXR1cm5zIHRoZSB3ZWIgcHJldmlldyBlbGVtZW50IGlmIGZvdW5kLCBvdGhlcndpc2UgcmV0dXJucyBmYWxzZVxuICAgKi9cbiAgZ2V0V2ViUHJldmlld0VsZW1lbnQoaW5wdXQpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KHRoaXMud2ViUHJldmlld0VsZW1lbnRzLCBpbnB1dCk7XG4gIH1cblxuICBnZXRFbGVtZW50KGVsZW1lbnRzQ29sbGVjdGlvbiwgaW5wdXQpIHtcbiAgICBsZXQgcHJvcGVydHlUb0NoZWNrID0gYGlkYDtcbiAgICBpZihpbnB1dC5ub2RlTmFtZSkge1xuICAgICAgcHJvcGVydHlUb0NoZWNrID0gYGVsYDtcbiAgICB9XG4gICAgZm9yKGNvbnN0IGtleSBpbiBlbGVtZW50c0NvbGxlY3Rpb24pXG4gICAge1xuICAgICAgaWYoZWxlbWVudHNDb2xsZWN0aW9uW2tleV1bcHJvcGVydHlUb0NoZWNrXSA9PT0gaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzQ29sbGVjdGlvbltrZXldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzZXRDb2RlRWxlbWVudFZhbHVlRnJvbUZpbGUoY29kZUVsZW1lbnQsIGZpbGVQYXRoKSB7XG4gICAgcmV0dXJuIGNvZGVFbGVtZW50LnJlYWRGcm9tRmlsZShmaWxlUGF0aCk7XG4gIH1cblxuICBzYXZlQ29kZUVsZW1lbnRUb0ZpbGUoY29kZUVsZW1lbnQsIGZpbGVQYXRoKSB7XG4gICAgcmV0dXJuIGNvZGVFbGVtZW50LnNhdmVUb0ZpbGUoZmlsZVBhdGgpO1xuICB9XG5cbiAgZ2V0RmlsZVBhdGgoZmlsZSkge1xuICAgIGlmKCFmaWxlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmKHRoaXMub3V0cHV0UGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguam9pbih0aGlzLm91dHB1dFBhdGgsIGZpbGUpO1xuICAgIH1cbiAgICByZXR1cm4gZmlsZTtcbiAgfVxuXG4gIGdldEZpbGVQYXRoRm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpIHtcbiAgICBpZighY29kZUVsZW1lbnQuZmlsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRGaWxlUGF0aChjb2RlRWxlbWVudC5maWxlKTtcbiAgfVxuXG4gIHNldENvZGVFbGVtZW50VmFsdWVzRnJvbUZpbGVzKCkge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgbGV0IGtleTtcbiAgICBsZXQgY29kZUVsZW1lbnQ7XG4gICAgbGV0IGZpbGVQYXRoO1xuICAgIGZvcihrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgY29kZUVsZW1lbnQgPSB0aGlzLmNvZGVFbGVtZW50c1trZXldO1xuICAgICAgZmlsZVBhdGggPSB0aGlzLmdldEZpbGVQYXRoRm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpO1xuICAgICAgaWYoZmlsZVBhdGgpXG4gICAgICB7XG4gICAgICAgIHRhc2tzLnB1c2godGhpcy5zZXRDb2RlRWxlbWVudFZhbHVlRnJvbUZpbGUoY29kZUVsZW1lbnQsIGZpbGVQYXRoKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbCh0YXNrcyk7XG4gIH1cblxuICBhdXRvU3RhcnRXZWJwcmV2aWV3RWxlbWVudHNXaGVuTmVlZGVkKCkge1xuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMpXG4gICAge1xuICAgICAgY29uc3Qgd2ViUHJldmlld0VsZW1lbnQgPSB0aGlzLndlYlByZXZpZXdFbGVtZW50c1trZXldO1xuICAgICAgaWYod2ViUHJldmlld0VsZW1lbnQuYXV0b2xvYWQpIHtcbiAgICAgICAgdGhpcy5yZWxvYWRXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2F2ZUNvZGVFbGVtZW50c1RvRmlsZXMoKSB7XG4gICAgY29uc3QgdGFza3MgPSBbXTtcbiAgICBsZXQga2V5O1xuICAgIGxldCBjb2RlRWxlbWVudDtcbiAgICBsZXQgZmlsZVBhdGg7XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICBjb2RlRWxlbWVudCA9IHRoaXMuY29kZUVsZW1lbnRzW2tleV07XG4gICAgICBmaWxlUGF0aCA9IHRoaXMuZ2V0RmlsZVBhdGhGb3JDb2RlRWxlbWVudChjb2RlRWxlbWVudCk7XG4gICAgICBpZihmaWxlUGF0aClcbiAgICAgIHtcbiAgICAgICAgdGFza3MucHVzaCh0aGlzLnNhdmVDb2RlRWxlbWVudFRvRmlsZShjb2RlRWxlbWVudCwgZmlsZVBhdGgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRhc2tzKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgbGV0IGtleTtcbiAgICBmb3Ioa2V5IGluIHRoaXMuY29uc29sZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuZGVzdHJveUNvbnNvbGVFbGVtZW50KHRoaXMuY29uc29sZUVsZW1lbnRzW2tleV0pO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMudGVybWluYWxFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmRlc3Ryb3lUZXJtaW5hbEVsZW1lbnQodGhpcy50ZXJtaW5hbEVsZW1lbnRzW2tleV0pO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMud2ViUHJldmlld0VsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuZGVzdHJveVdlYlByZXZpZXdFbGVtZW50KHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2tleV0pO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuZGVzdHJveUNvZGVFbGVtZW50KHRoaXMuY29kZUVsZW1lbnRzW2tleV0pO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMud2ViY2FtRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5kZXN0cm95V2ViY2FtRWxlbWVudCh0aGlzLndlYmNhbUVsZW1lbnRzW2tleV0pO1xuICAgIH1cbiAgICB0aGlzLnJ1bkJ1dHRvbkVscy5mb3JFYWNoKGVsID0+IHRoaXMuZGVzdHJveVJ1bkJ1dHRvbihlbCkpO1xuICAgIHRoaXMuc2F2ZUJ1dHRvbkVscy5mb3JFYWNoKGVsID0+IHRoaXMuZGVzdHJveVNhdmVCdXR0b24oZWwpKTtcbiAgICB0aGlzLnJlbG9hZEJ1dHRvbkVscy5mb3JFYWNoKGVsID0+IHRoaXMuZGVzdHJveVJlbG9hZEJ1dHRvbihlbCkpO1xuICAgIHRoaXMuZGV2VG9vbHNCdXR0b25FbHMuZm9yRWFjaChlbCA9PiB0aGlzLmRlc3Ryb3lEZXZUb29sc0J1dHRvbihlbCkpO1xuICAgIC8vVE9ETzogZGVzdHJveSB0aGUgdG1wIGRpcmVjdG9yeSBmb3IgdGhpcyBpbnN0YW5jZVxuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICBpZighdGhpcy5sb2FkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGtleTtcbiAgICBmb3Ioa2V5IGluIHRoaXMuY29uc29sZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuY29uc29sZUVsZW1lbnRzW2tleV0ucGF1c2UoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLnRlcm1pbmFsRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy50ZXJtaW5hbEVsZW1lbnRzW2tleV0ucGF1c2UoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLndlYlByZXZpZXdFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLndlYlByZXZpZXdFbGVtZW50c1trZXldLnBhdXNlKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5jb2RlRWxlbWVudHNba2V5XS5wYXVzZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMud2ViY2FtRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy53ZWJjYW1FbGVtZW50c1trZXldLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgcmVzdW1lKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICBpZighdGhpcy5sb2FkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGtleTtcbiAgICBmb3Ioa2V5IGluIHRoaXMuY29uc29sZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuY29uc29sZUVsZW1lbnRzW2tleV0ucmVzdW1lKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy50ZXJtaW5hbEVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMudGVybWluYWxFbGVtZW50c1trZXldLnJlc3VtZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMud2ViUHJldmlld0VsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2tleV0ucmVzdW1lKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5jb2RlRWxlbWVudHNba2V5XS5yZXN1bWUoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLndlYmNhbUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMud2ViY2FtRWxlbWVudHNba2V5XS5yZXN1bWUoKTtcbiAgICB9XG4gICAgdGhpcy5hdXRvU3RhcnRXZWJwcmV2aWV3RWxlbWVudHNXaGVuTmVlZGVkKCk7XG4gIH1cblxuICBsYXlvdXQoKSB7XG4gICAgLy9taWdodCBiZSB0cmlnZ2VyZWQgYWZ0ZXIgc3BsaXQgcGFuZSByZXNpemUgb3IgdGFiIHN3aXRjaFxuICAgIC8vY29kZW1pcnJvciBpbnN0YW5jZXMgbmVlZCB0byBiZSB1cGRhdGVkXG4gICAgZm9yKGNvbnN0IGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmNvZGVFbGVtZW50c1trZXldLmxheW91dCgpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNvbnNvbGVFbGVtZW50KGNvbnNvbGVFbCkge1xuICAgIGNvbnN0IGNvbnNvbGVFbGVtZW50ID0gbmV3IENvbnNvbGVFbGVtZW50KGNvbnNvbGVFbCk7XG4gICAgdGhpcy5jb25zb2xlRWxlbWVudHNbY29uc29sZUVsZW1lbnQuaWRdID0gY29uc29sZUVsZW1lbnQ7XG4gIH1cblxuICBkZXN0cm95Q29uc29sZUVsZW1lbnQoY29uc29sZUVsZW1lbnQpIHtcbiAgICBjb25zb2xlRWxlbWVudC5kZXN0cm95KCk7XG4gIH1cblxuICBjcmVhdGVUZXJtaW5hbEVsZW1lbnQodGVybWluYWxFbCkge1xuICAgIGNvbnN0IHRlcm1pbmFsRWxlbWVudCA9IG5ldyBUZXJtaW5hbEVsZW1lbnQodGVybWluYWxFbCk7XG4gICAgdGhpcy50ZXJtaW5hbEVsZW1lbnRzW3Rlcm1pbmFsRWxlbWVudC5pZF0gPSB0ZXJtaW5hbEVsZW1lbnQ7XG4gIH1cblxuICBkZXN0cm95VGVybWluYWxFbGVtZW50KHRlcm1pbmFsRWxlbWVudCkge1xuICAgIHRlcm1pbmFsRWxlbWVudC5kZXN0cm95KCk7XG4gIH1cblxuICBjcmVhdGVXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWwpIHtcbiAgICBjb25zdCB3ZWJQcmV2aWV3RWxlbWVudCA9IG5ldyBXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWwpO1xuICAgIHdlYlByZXZpZXdFbGVtZW50LiR3cmFwcGVyRWwub24oYGNvbnNvbGUtbWVzc2FnZWAsIHRoaXMud2ViUHJldmlld0NvbnNvbGVNZXNzYWdlSGFuZGxlci5iaW5kKHRoaXMsIHdlYlByZXZpZXdFbGVtZW50KSk7XG4gICAgdGhpcy53ZWJQcmV2aWV3RWxlbWVudHNbd2ViUHJldmlld0VsZW1lbnQuaWRdID0gd2ViUHJldmlld0VsZW1lbnQ7XG4gIH1cblxuICBkZXN0cm95V2ViUHJldmlld0VsZW1lbnQod2ViUHJldmlld0VsZW1lbnQpIHtcbiAgICB3ZWJQcmV2aWV3RWxlbWVudC4kd3JhcHBlckVsLm9mZihgY29uc29sZS1tZXNzYWdlYCk7XG4gICAgd2ViUHJldmlld0VsZW1lbnQuZGVzdHJveSgpO1xuICB9XG5cbiAgY3JlYXRlQ29kZUVsZW1lbnQoY29kZUVsKSB7XG4gICAgY29uc3QgY29kZUVsZW1lbnQgPSBuZXcgQ29kZUVsZW1lbnQoY29kZUVsKTtcbiAgICB0aGlzLmNvZGVFbGVtZW50c1tjb2RlRWxlbWVudC5pZF0gPSBjb2RlRWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lDb2RlRWxlbWVudChjb2RlRWxlbWVudCkge1xuICAgIGNvZGVFbGVtZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGNyZWF0ZVdlYmNhbUVsZW1lbnQod2ViY2FtRWwpIHtcbiAgICBjb25zdCB3ZWJjYW1FbGVtZW50ID0gbmV3IFdlYmNhbUVsZW1lbnQod2ViY2FtRWwpO1xuICAgIHRoaXMud2ViY2FtRWxlbWVudHNbd2ViY2FtRWxlbWVudC5pZF0gPSB3ZWJjYW1FbGVtZW50O1xuICB9XG5cbiAgZGVzdHJveVdlYmNhbUVsZW1lbnQod2ViY2FtRWxlbWVudCkge1xuICAgIHdlYmNhbUVsZW1lbnQuZGVzdHJveSgpO1xuICB9XG5cbiAgY3JlYXRlUnVuQnV0dG9uKHJ1bkJ1dHRvbkVsKSB7XG4gICAgdGhpcy5ydW5CdXR0b25FbHMucHVzaChydW5CdXR0b25FbCk7XG4gICAgJChydW5CdXR0b25FbCkub24oYGNsaWNrYCwgZSA9PiB7XG4gICAgICBpZih0aGlzLndlYlByZXZpZXdFbGVtZW50c1skKHJ1bkJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKV0pIHtcbiAgICAgICAgLy9zYXZlIHRoZSBmaWxlcyBmaXJzdFxuICAgICAgICB0aGlzLnNhdmVDb2RlRWxlbWVudHNUb0ZpbGVzKClcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy91cGRhdGUgdGhlIHdlYiBwcmV2aWV3XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdlYlByZXZpZXdFbGVtZW50KHRoaXMud2ViUHJldmlld0VsZW1lbnRzWyQocnVuQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApXSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYodGhpcy5jb25zb2xlRWxlbWVudHNbJChydW5CdXR0b25FbCkuZGF0YShgdGFyZ2V0YCldKSB7XG4gICAgICAgIGNvbnN0IGFwcGxpY2F0aW9uUGF0aCA9IHRoaXMuZ2V0RmlsZVBhdGgodGhpcy5jb25zb2xlRWxlbWVudHNbJChydW5CdXR0b25FbCkuZGF0YShgdGFyZ2V0YCldLmZpbGUpO1xuICAgICAgICB0aGlzLmNvbnNvbGVFbGVtZW50c1skKHJ1bkJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKV0ucnVuTm9kZUFwcChhcHBsaWNhdGlvblBhdGgpO1xuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lSdW5CdXR0b24ocnVuQnV0dG9uRWwpIHtcbiAgICAkKHJ1bkJ1dHRvbkVsKS5vZmYoYGNsaWNrYCk7XG4gIH1cblxuICBjcmVhdGVTYXZlQnV0dG9uKHNhdmVCdXR0b25FbCkge1xuICAgIHRoaXMuc2F2ZUJ1dHRvbkVscy5wdXNoKHNhdmVCdXR0b25FbCk7XG4gICAgJChzYXZlQnV0dG9uRWwpLm9uKGBjbGlja2AsIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgIC8vZ2V0IHRoZSB0YXJnZXQgZWxlbWVudCBmb3IgdGhpcyBidXR0b25cbiAgICAgIGNvbnN0IHRhcmdldFN0cmluZyA9ICQoc2F2ZUJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKTtcbiAgICAgIGlmKHRhcmdldFN0cmluZyA9PT0gYGFsbGApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZUNvZGVFbGVtZW50c1RvRmlsZXMoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvZGVFbGVtZW50ID0gdGhpcy5nZXRDb2RlRWxlbWVudCh0YXJnZXRTdHJpbmcpO1xuICAgICAgaWYoIWNvZGVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRGaWxlUGF0aEZvckNvZGVFbGVtZW50KGNvZGVFbGVtZW50KTtcbiAgICAgIGlmKCFmaWxlUGF0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb2RlRWxlbWVudC5zYXZlVG9GaWxlKGZpbGVQYXRoKS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKTsgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95U2F2ZUJ1dHRvbihzYXZlQnV0dG9uRWwpIHtcbiAgICAkKHNhdmVCdXR0b25FbCkub2ZmKGBjbGlja2ApO1xuICB9XG5cbiAgY3JlYXRlUmVsb2FkQnV0dG9uKHJlbG9hZEJ1dHRvbkVsKSB7XG4gICAgdGhpcy5yZWxvYWRCdXR0b25FbHMucHVzaChyZWxvYWRCdXR0b25FbCk7XG4gICAgJChyZWxvYWRCdXR0b25FbCkub24oYGNsaWNrYCwgZSA9PiB7XG4gICAgICAvL2dldCB0aGUgcmVsb2FkIGJ1dHRvbiB0YXJnZXRcbiAgICAgIGxldCByZWxvYWRUYXJnZXRFbGVtZW50ID0gdGhpcy5nZXRDb2RlRWxlbWVudCgkKHJlbG9hZEJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKSk7XG4gICAgICBpZihyZWxvYWRUYXJnZXRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMucmVsb2FkQ29kZUVsZW1lbnQocmVsb2FkVGFyZ2V0RWxlbWVudCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVsb2FkVGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0V2ViUHJldmlld0VsZW1lbnQoJChyZWxvYWRCdXR0b25FbCkuZGF0YShgdGFyZ2V0YCkpO1xuICAgICAgaWYocmVsb2FkVGFyZ2V0RWxlbWVudCkge1xuICAgICAgICB0aGlzLnJlbG9hZFdlYlByZXZpZXdFbGVtZW50KHJlbG9hZFRhcmdldEVsZW1lbnQpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIHJlbG9hZCBhbGwgZWxlbWVudHNcbiAgICAgIHRoaXMucmVsb2FkQWxsQ29kZUVsZW1lbnRzKCkudGhlbigoKSA9PiB0aGlzLnJlbG9hZEFsbFdlYlByZXZpZXdFbGVtZW50cygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbG9hZEFsbENvZGVFbGVtZW50cygpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGFza3MucHVzaCh0aGlzLnJlbG9hZENvZGVFbGVtZW50KHRoaXMuY29kZUVsZW1lbnRzW2tleV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRhc2tzKTtcbiAgfVxuXG4gIHJlbG9hZENvZGVFbGVtZW50KGNvZGVFbGVtZW50KSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSB0aGlzLmdldEZpbGVQYXRoRm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpO1xuICAgIGlmKCFmaWxlUGF0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gY29kZUVsZW1lbnQucmVhZEZyb21GaWxlKGZpbGVQYXRoKS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gIH1cblxuICByZWxvYWRBbGxXZWJQcmV2aWV3RWxlbWVudHMoKSB7XG4gICAgY29uc3QgdGFza3MgPSBbXTtcbiAgICBmb3IoY29uc3Qga2V5IGluIHRoaXMud2ViUHJldmlld0VsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRhc2tzLnB1c2godGhpcy5yZWxvYWRXZWJQcmV2aWV3RWxlbWVudCh0aGlzLndlYlByZXZpZXdFbGVtZW50c1trZXldKSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbCh0YXNrcyk7XG4gIH1cblxuICByZWxvYWRXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbGVtZW50KTtcbiAgfVxuXG4gIGRlc3Ryb3lSZWxvYWRCdXR0b24ocmVsb2FkQnV0dG9uRWwpIHtcbiAgICAkKHJlbG9hZEJ1dHRvbkVsKS5vZmYoYGNsaWNrYCk7XG4gIH1cblxuICBjcmVhdGVEZXZUb29sc0J1dHRvbihkZXZUb29sc0J1dHRvbkVsKSB7XG4gICAgdGhpcy5kZXZUb29sc0J1dHRvbkVscy5wdXNoKGRldlRvb2xzQnV0dG9uRWwpO1xuICAgICQoZGV2VG9vbHNCdXR0b25FbCkub24oYGNsaWNrYCwgZSA9PiB7XG4gICAgICAvL2dldCB0aGUgdGFyZ2V0IGVsZW1lbnQgZm9yIHRoaXMgYnV0dG9uXG4gICAgICBjb25zdCB3ZWJQcmV2aWV3RWxlbWVudCA9IHRoaXMuZ2V0V2ViUHJldmlld0VsZW1lbnQoJChkZXZUb29sc0J1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKSk7XG4gICAgICBpZiAoIXdlYlByZXZpZXdFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdlYlByZXZpZXdFbGVtZW50Lm9wZW5EZXZUb29scygpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lEZXZUb29sc0J1dHRvbihkZXZUb29sc0J1dHRvbkVsKSB7XG4gICAgJChkZXZUb29sc0J1dHRvbkVsKS5vZmYoYGNsaWNrYCk7XG4gIH1cblxuICB3ZWJQcmV2aWV3Q29uc29sZU1lc3NhZ2VIYW5kbGVyKHdlYlByZXZpZXdFbGVtZW50LCBqcUV2ZW50LCBldmVudCkge1xuICAgIC8vZ2V0IHRoZSBjb25zb2xlIGVsZW1lbnQgZm9yIHRoaXMgd2ViIHByZXZpZXdcbiAgICBjb25zdCBjb25zb2xlRWxlbWVudCA9IHRoaXMuZ2V0Q29uc29sZUVsZW1lbnRGb3JXZWJQcmV2aWV3KHdlYlByZXZpZXdFbGVtZW50KTtcbiAgICBpZihjb25zb2xlRWxlbWVudClcbiAgICB7XG4gICAgICBjb25zb2xlRWxlbWVudC5tZXNzYWdlKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBnZXRDb25zb2xlRWxlbWVudEZvcldlYlByZXZpZXcod2ViUHJldmlld0VsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zb2xlRWxlbWVudHNbd2ViUHJldmlld0VsZW1lbnQuY29uc29sZV07XG4gIH1cblxuICBnZXRXZWJQcmV2aWV3RWxlbWVudEZvckNvZGVFbGVtZW50KGNvZGVFbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2NvZGVFbGVtZW50LnByb2Nlc3Nvcl07XG4gIH1cblxuICB1cGRhdGVXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWxlbWVudCkge1xuICAgIC8vbG9hZCBhIGZpbGUgb3IgY29kZSBibG9ja3M/XG4gICAgaWYod2ViUHJldmlld0VsZW1lbnQuZmlsZSkge1xuICAgICAgaWYodGhpcy5vdXRwdXRQYXRoICYmIHdlYlByZXZpZXdFbGVtZW50Lm5lZWRzT3V0cHV0UGF0aFByZWZpeCkge1xuICAgICAgICByZXR1cm4gd2ViUHJldmlld0VsZW1lbnQudXBkYXRlVXJsKHBhdGguam9pbih0aGlzLm91dHB1dFBhdGgsIHdlYlByZXZpZXdFbGVtZW50LmZpbGUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3ZWJQcmV2aWV3RWxlbWVudC51cGRhdGVVcmwod2ViUHJldmlld0VsZW1lbnQuZmlsZSk7XG4gICAgfVxuXG4gICAgLy9nYXRoZXIgYWxsIHRoZSBjb2RlIGZvciB0aGlzIGVsZW1lbnRcbiAgICBjb25zdCBibG9ja3MgPSBbXTtcbiAgICBmb3IoY29uc3Qga2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIGNvbnN0IGNvZGVFbGVtZW50ID0gdGhpcy5jb2RlRWxlbWVudHNba2V5XTtcbiAgICAgIGlmKGNvZGVFbGVtZW50LnByb2Nlc3NvciA9PT0gd2ViUHJldmlld0VsZW1lbnQuaWQpXG4gICAgICB7XG4gICAgICAgIGNvbnN0IGJsb2NrID0ge1xuICAgICAgICAgIGxhbmd1YWdlOiBjb2RlRWxlbWVudC5sYW5ndWFnZSxcbiAgICAgICAgICBjb2RlOiBjb2RlRWxlbWVudC5nZXRWYWx1ZSgpXG4gICAgICAgIH07XG4gICAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2ViUHJldmlld0VsZW1lbnQudXBkYXRlQ29kZShibG9ja3MpO1xuICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJlYW0gZXh0ZW5kcyBQaGFzZXIuR3JvdXAge1xuICBjb25zdHJ1Y3RvcihnYW1lLCB4LCB5LCBtYXhXaWR0aCkge1xuICAgIHN1cGVyKGdhbWUpO1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcblxuICAgIHRoaXMuZGF0YSA9IHtcbiAgICAgIG1heFdpZHRoOiBtYXhXaWR0aCxcbiAgICAgIHBvc2l0aW9uOiAwLjVcbiAgICB9O1xuICAgIHRoaXMuYmVhbUVuZExlZnQgPSB0aGlzLl9jcmVhdGVCZWFtRW5kKCk7XG4gICAgdGhpcy5iZWFtRW5kTGVmdC5zY2FsZS5zZXRUbygtMSwgMSk7XG4gICAgdGhpcy5iZWFtTGVmdCA9IHRoaXMuX2NyZWF0ZUJlYW0oKTtcbiAgICB0aGlzLmJlYW1MZWZ0LmFuY2hvci5zZXRUbygxLCAwLjUpO1xuXG4gICAgdGhpcy5iZWFtRW5kUmlnaHQgPSB0aGlzLl9jcmVhdGVCZWFtRW5kKCk7XG4gICAgdGhpcy5iZWFtUmlnaHQgPSB0aGlzLl9jcmVhdGVCZWFtKCk7XG4gICAgdGhpcy5iZWFtUmlnaHQuYW5jaG9yLnNldFRvKDAsIDAuNSk7XG4gIH1cbiAgX2NyZWF0ZUJlYW1FbmQoKSB7XG4gICAgY29uc3QgYmVhbUVuZCA9IHRoaXMuYWRkKG5ldyBQaGFzZXIuU3ByaXRlKHRoaXMuZ2FtZSwgMCwgMCwgYGRyYWdvbmJhbGwtZ3JhcGhpY3NgLCBgYmVhbWluZzEucG5nYCkpO1xuICAgIGJlYW1FbmQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICBiZWFtRW5kLmFuaW1hdGlvbnMuYWRkKGBiZWFtaW5nYCwgW1xuICAgICAgYGJlYW1pbmcxLnBuZ2AsXG4gICAgICBgYmVhbWluZzIucG5nYCxcbiAgICBdLCA4LCB0cnVlLCB0cnVlKTtcbiAgICBiZWFtRW5kLmFuaW1hdGlvbnMucGxheShgYmVhbWluZ2ApO1xuICAgIHJldHVybiBiZWFtRW5kO1xuICB9XG4gIF9jcmVhdGVCZWFtKCkge1xuICAgIGNvbnN0IGJlYW0gPSB0aGlzLmFkZChuZXcgUGhhc2VyLlRpbGVTcHJpdGUodGhpcy5nYW1lLCAwLCAwLCAzMiwgMzIsIGBkcmFnb25iYWxsLWdyYXBoaWNzYCwgYGJlYW0ucG5nYCkpO1xuICAgIHJldHVybiBiZWFtO1xuICB9XG4gIHNldCBiZWFtUG9zaXRpb24odmFsdWUpIHtcbiAgICB0aGlzLmRhdGEucG9zaXRpb24gPSB2YWx1ZTtcbiAgfVxuICBnZXQgYmVhbVBvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEucG9zaXRpb247XG4gIH1cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJlYW1DZW50ZXIgPSB0aGlzLmRhdGEubWF4V2lkdGggKiB0aGlzLmRhdGEucG9zaXRpb247XG4gICAgdGhpcy5iZWFtRW5kTGVmdC54ID0gYmVhbUNlbnRlciAtIDIwO1xuICAgIHRoaXMuYmVhbUVuZFJpZ2h0LnggPSBiZWFtQ2VudGVyICsgMjA7XG4gICAgdGhpcy5iZWFtTGVmdC54ID0gdGhpcy5iZWFtRW5kTGVmdC54ICsgMTA7XG4gICAgdGhpcy5iZWFtUmlnaHQueCA9IHRoaXMuYmVhbUVuZFJpZ2h0LnggLSAxMDtcbiAgICB0aGlzLmJlYW1MZWZ0LndpZHRoID0gYmVhbUNlbnRlcjtcbiAgICB0aGlzLmJlYW1SaWdodC53aWR0aCA9IHRoaXMuZGF0YS5tYXhXaWR0aCAtIGJlYW1DZW50ZXI7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDaGFyYWN0ZXIgZXh0ZW5kcyBQaGFzZXIuU3ByaXRlIHtcbiAgY29uc3RydWN0b3IoZ2FtZSwgeCwgeSwgY2hhcmFjdGVyKSB7XG4gICAgc3VwZXIoZ2FtZSwgeCwgeSwgYGRyYWdvbmJhbGwtZ3JhcGhpY3NgLCBgJHtjaGFyYWN0ZXJ9LXN0YW5kaW5nMS5wbmdgKTtcbiAgICB0aGlzLmFuY2hvci5zZXRUbygwLjUsIDEpO1xuICAgIGlmKGNoYXJhY3RlciA9PT0gYGdvaGFuYCkge1xuICAgICAgdGhpcy5zY2FsZS5zZXRUbygtMSwgMSk7XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0aW9ucy5hZGQoYHN0YW5kYCwgW1xuICAgICAgYCR7Y2hhcmFjdGVyfS1zdGFuZGluZzEucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tc3RhbmRpbmcyLnBuZ2AsXG4gICAgXSwgNCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5hbmltYXRpb25zLmFkZChgZmFsbGAsIFtcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzEucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzIucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzMucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzQucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzUucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzYucG5nYCxcbiAgICAgIGAke2NoYXJhY3Rlcn0tZmFsbGluZzcucG5nYCxcbiAgICBdLCAxMCwgZmFsc2UsIHRydWUpO1xuICAgIHRoaXMuYW5pbWF0aW9ucy5hZGQoYGthbWVoYWAsIFtcbiAgICAgIGAke2NoYXJhY3Rlcn0ta2FtZWhhMS5wbmdgXG4gICAgXSwgMTAsIHRydWUsIHRydWUpO1xuXG4gICAgdGhpcy5zdGFuZCgpO1xuICB9XG4gIHN0YW5kKCkge1xuICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KGBzdGFuZGApO1xuICB9XG4gIGZhbGwoKSB7XG4gICAgdGhpcy5hbmltYXRpb25zLnBsYXkoYGZhbGxgKTtcbiAgfVxuICBrYW1laGEoKSB7XG4gICAgdGhpcy5hbmltYXRpb25zLnBsYXkoYGthbWVoYWApO1xuICB9XG59XG4iLCJpbXBvcnQgQnV0dG9uIGZyb20gJy4uL29iamVjdHMvQnV0dG9uJztcbmltcG9ydCBHYW1lQ2hhcmFjdGVyIGZyb20gJy4uL29iamVjdHMvR2FtZUNoYXJhY3Rlcic7XG5pbXBvcnQgQmVhbSBmcm9tICcuLi9vYmplY3RzL0JlYW0nO1xuXG5jb25zdCBTVUJTVEFURV9JTlRSTyA9IGBpbnRyb2A7XG5jb25zdCBTVUJTVEFURV9QTEFZID0gYHBsYXlgO1xuY29uc3QgU1VCU1RBVEVfRkFMTElORyA9IGBmYWxsaW5nYDtcbmNvbnN0IFNVQlNUQVRFX0ZJTklTSEVEID0gYGZpbmlzaGVkYDtcblxuY29uc3QgQkVBTV9PRkZTRVQgPSAxNDM7XG5jb25zdCBNQVhfSEVBUlRSQVRFID0gMTAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5IGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgaW5pdCgpIHtcbiAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcbiAgfVxuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5jcmVhdGVFbnZpcm9ubWVudCgpO1xuICAgIHRoaXMuY3JlYXRlUGxheWVycygpO1xuICAgIHRoaXMuY3JlYXRlQnV0dG9ucygpO1xuICAgIHRoaXMuY3JlYXRlQmVhbSgpO1xuXG4gICAgdGhpcy5zZXRTdWJTdGF0ZShTVUJTVEFURV9JTlRSTyk7XG4gIH1cbiAgY3JlYXRlRW52aXJvbm1lbnQoKSB7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuc3ByaXRlKHRoaXMud29ybGQuY2VudGVyWCwgdGhpcy53b3JsZC5oZWlnaHQgLSAxMTIsIGBkcmFnb25iYWxsLWdyYXBoaWNzYCwgYGJhY2tncm91bmQucG5nYCk7XG4gICAgdGhpcy5iYWNrZ3JvdW5kLmFuY2hvci5zZXRUbygwLjUsIDEpO1xuXG4gICAgdGhpcy5ncm91bmQgPSB0aGlzLmFkZC5zcHJpdGUodGhpcy53b3JsZC5jZW50ZXJYLCB0aGlzLndvcmxkLmhlaWdodCwgYGRyYWdvbmJhbGwtZ3JhcGhpY3NgLCBgZmxvb3IucG5nYCk7XG4gICAgdGhpcy5ncm91bmQuYW5jaG9yLnNldFRvKDAuNSwgMSk7XG4gIH1cbiAgY3JlYXRlUGxheWVycygpIHtcbiAgICB0aGlzLmdva3UgPSB0aGlzLmFkZC5leGlzdGluZyhuZXcgR2FtZUNoYXJhY3Rlcih0aGlzLmdhbWUsIDgwLCB0aGlzLndvcmxkLmhlaWdodCwgYGdva3VgKSk7XG4gICAgdGhpcy5nb2hhbiA9IHRoaXMuYWRkLmV4aXN0aW5nKG5ldyBHYW1lQ2hhcmFjdGVyKHRoaXMuZ2FtZSwgdGhpcy53b3JsZC53aWR0aCAtIDgwLCB0aGlzLndvcmxkLmhlaWdodCwgYGdvaGFuYCkpO1xuICB9XG4gIGNyZWF0ZUJlYW0oKSB7XG4gICAgdGhpcy5iZWFtID0gdGhpcy5hZGQuZXhpc3RpbmcobmV3IEJlYW0odGhpcy5nYW1lLCBCRUFNX09GRlNFVCwgdGhpcy53b3JsZC5jZW50ZXJZICsgMjEwLCB0aGlzLndvcmxkLndpZHRoIC0gQkVBTV9PRkZTRVQgKiAyKSk7XG4gIH1cbiAgY3JlYXRlQnV0dG9ucygpIHtcbiAgICB0aGlzLnBsYXlCdXR0b24gPSBuZXcgQnV0dG9uKHRoaXMuZ2FtZSwgdGhpcy53b3JsZC5jZW50ZXJYLCB0aGlzLndvcmxkLmNlbnRlclksIHRoaXMucGxheUNsaWNrZWQsIHRoaXMsIGBibHVlYCwgYFBsYXlgKTtcbiAgICB0aGlzLnBsYXlCdXR0b24uYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICB0aGlzLmFkZC5leGlzdGluZyh0aGlzLnBsYXlCdXR0b24pO1xuXG4gICAgdGhpcy5zdG9wQnV0dG9uID0gbmV3IEJ1dHRvbih0aGlzLmdhbWUsIHRoaXMud29ybGQuY2VudGVyWCwgdGhpcy53b3JsZC5jZW50ZXJZLCB0aGlzLnN0b3BDbGlja2VkLCB0aGlzLCBgYmx1ZWAsIGBTdG9wYCk7XG4gICAgdGhpcy5zdG9wQnV0dG9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgdGhpcy5hZGQuZXhpc3RpbmcodGhpcy5zdG9wQnV0dG9uKTtcbiAgfVxuICB1cGRhdGUoKSB7XG4gICAgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfUExBWSkge1xuICAgICAgdGhpcy51cGRhdGVQbGF5U3RhdGUoKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfRklOSVNIRUQpIHtcbiAgICAgIHRoaXMudXBkYXRlRmluaXNoZWRTdGF0ZSgpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVQbGF5U3RhdGUoKSB7XG4gICAgLy91cGRhdGUgYmVhbVBvc2l0aW9uIGFjY29yZGluZyB0byBoZWFydCByYXRlc1xuICAgIGlmKHRoaXMuZ2FtZS5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4ucGxheWVyMS5oZWFydFJhdGUgPiAwICYmIHRoaXMuZ2FtZS5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4ucGxheWVyMi5oZWFydFJhdGUgPiAwKSB7XG4gICAgICBjb25zdCBoZWFydFJhdGVEaWZmID0gTWF0aC5taW4oTUFYX0hFQVJUUkFURSwgdGhpcy5nYW1lLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIyLmhlYXJ0UmF0ZSkgLSBNYXRoLm1pbihNQVhfSEVBUlRSQVRFLCB0aGlzLmdhbWUuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjEuaGVhcnRSYXRlKTtcbiAgICAgIHRoaXMuYmVhbS5iZWFtUG9zaXRpb24gPSB0aGlzLmJlYW0uYmVhbVBvc2l0aW9uICsgKGhlYXJ0UmF0ZURpZmYgKiAwLjAwMDIpO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuYmVhbS5iZWFtUG9zaXRpb247XG4gICAgaWYgKHBvc2l0aW9uIDwgMC4wMSkge1xuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmdvaGFuO1xuICAgICAgdGhpcy5sb3NlciA9IHRoaXMuZ29rdTtcbiAgICAgIHRoaXMuYWRkLnR3ZWVuKHRoaXMuYmVhbSkudG8oe3g6IC10aGlzLndvcmxkLndpZHRofSwgMzUwLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5OT05FLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID4gMC45OSkge1xuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmdva3U7XG4gICAgICB0aGlzLmxvc2VyID0gdGhpcy5nb2hhbjtcbiAgICAgIHRoaXMuYWRkLnR3ZWVuKHRoaXMuYmVhbSkudG8oe3g6IHRoaXMud29ybGQud2lkdGh9LCAzNTAsIFBoYXNlci5FYXNpbmcuTGluZWFyLk5PTkUsIHRydWUpO1xuICAgIH1cbiAgICBpZih0aGlzLndpbm5lcikge1xuICAgICAgdGhpcy53aW5uZXIuc3RhbmQoKTtcbiAgICAgIHRoaXMubG9zZXIuZmFsbCgpO1xuICAgICAgdGhpcy5zZXRTdWJTdGF0ZShTVUJTVEFURV9GQUxMSU5HKTtcbiAgICAgIHRoaXMudGltZS5ldmVudHMuYWRkKDUwMCwgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN1YlN0YXRlKFNVQlNUQVRFX0ZJTklTSEVEKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB1cGRhdGVGaW5pc2hlZFN0YXRlKCkge1xuICB9XG4gIHNldFN1YlN0YXRlKHZhbHVlKSB7XG4gICAgdGhpcy5zdWJTdGF0ZSA9IHZhbHVlO1xuICAgIHRoaXMucGxheUJ1dHRvbi52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5zdG9wQnV0dG9uLnZpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLmJlYW0udmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuYmVhbS54ID0gQkVBTV9PRkZTRVQ7XG4gICAgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfUExBWSkge1xuICAgICAgdGhpcy5zdG9wQnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5iZWFtLnZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy53aW5uZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMubG9zZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMuYmVhbS5iZWFtUG9zaXRpb24gPSAwLjU7XG4gICAgICB0aGlzLmdva3Uua2FtZWhhKCk7XG4gICAgICB0aGlzLmdvaGFuLmthbWVoYSgpO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9GQUxMSU5HKXtcbiAgICAgIHRoaXMuYmVhbS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGxheUJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJTdGF0ZSA9PT0gU1VCU1RBVEVfRklOSVNIRUQpe1xuICAgICAgdGhpcy5wbGF5QnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXlCdXR0b24udmlzaWJsZSA9IHRydWU7XG4gICAgICB0aGlzLndpbm5lciA9IGZhbHNlO1xuICAgICAgdGhpcy5sb3NlciA9IGZhbHNlO1xuICAgICAgdGhpcy5nb2t1LnN0YW5kKCk7XG4gICAgICB0aGlzLmdvaGFuLnN0YW5kKCk7XG4gICAgfVxuICB9XG4gIHBsYXlDbGlja2VkKCkge1xuICAgIHRoaXMuc2V0U3ViU3RhdGUoU1VCU1RBVEVfUExBWSk7XG4gIH1cbiAgc3RvcENsaWNrZWQoKSB7XG4gICAgdGhpcy5zdGF0ZS5zdGFydChgUGxheWApO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVsb2FkIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgaW5pdCgpIHtcbiAgICB0aGlzLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgdGhpcy5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSBgI2Q4NzA0MGA7XG4gIH1cbiAgcHJlbG9hZCgpIHtcbiAgICB0aGlzLmxvYWQuYXRsYXNKU09OSGFzaChgY29tcG9uZW50c2AsIGBhc3NldHMvZHJhZ29uYmFsbC9jb21wb25lbnRzLnBuZ2AsIGBhc3NldHMvZHJhZ29uYmFsbC9jb21wb25lbnRzLmpzb25gKTtcbiAgICB0aGlzLmxvYWQuYXRsYXNKU09OSGFzaChgZHJhZ29uYmFsbC1ncmFwaGljc2AsIGBhc3NldHMvZHJhZ29uYmFsbC9kcmFnb25iYWxsLWdyYXBoaWNzLnBuZ2AsIGBhc3NldHMvZHJhZ29uYmFsbC9kcmFnb25iYWxsLWdyYXBoaWNzLmpzb25gKTtcbiAgfVxuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5zdGF0ZS5zdGFydChgUGxheWApO1xuICB9XG59XG4iLCJpbXBvcnQgZXZlbnRzIGZyb20gJ2V2ZW50cyc7XG5cbmNvbnN0IFBPTEFSSDdfSFJNX0hFQVJUX1JBVEVfU0VSVklDRV9VVUlEID0gYDE4MGRgO1xuY29uc3QgUE9MQVJIN19IUk1fTUVBU1VSRU1FTlRfQ0hBUkFDVEVSSVNUSUNfVVVJRCA9IGAyYTM3YDtcbmNvbnN0IHNlcnZpY2VVVUlEcyA9IFtQT0xBUkg3X0hSTV9IRUFSVF9SQVRFX1NFUlZJQ0VfVVVJRF07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbGFySDcgZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25zb2xlLmxvZyhgW1BvbGFySDddIGNvbnN0cnVjdG9yYCk7XG5cbiAgICB0aGlzLnBvbGFySDdQZXJpcGhlcmFsID0gZmFsc2U7XG4gICAgdGhpcy5fc3RhdGVDaGFuZ2VIYW5kbGVyID0gc3RhdGUgPT4gdGhpcy5zdGF0ZUNoYW5nZUhhbmRsZXIoc3RhdGUpO1xuICAgIHRoaXMuX2Rpc2NvdmVySGFuZGxlciA9IHBlcmlwaGVyYWwgPT4gdGhpcy5kaXNjb3ZlckhhbmRsZXIocGVyaXBoZXJhbCk7XG5cbiAgICB0aGlzLm5vYmxlID0gcmVxdWlyZU5vZGUoYG5vYmxlLW1hY2ApO1xuICAgIHRoaXMubm9ibGUub24oYHN0YXRlQ2hhbmdlYCwgdGhpcy5fc3RhdGVDaGFuZ2VIYW5kbGVyKTtcbiAgICB0aGlzLm5vYmxlLm9uKGBkaXNjb3ZlcmAsIHRoaXMuX2Rpc2NvdmVySGFuZGxlcik7XG4gIH1cblxuICBzdGF0ZUNoYW5nZUhhbmRsZXIoc3RhdGUpIHtcbiAgICBjb25zb2xlLmxvZyhgW1BvbGFySDddIHN0YXRlQ2hhbmdlYCwgc3RhdGUpO1xuICAgIHRoaXMuZW1pdChgc3RhdGVDaGFuZ2VgLCBzdGF0ZSk7XG4gICAgaWYoc3RhdGUgPT09IGBwb3dlcmVkT25gKSB7XG4gICAgICB0aGlzLm5vYmxlLnN0YXJ0U2Nhbm5pbmcoc2VydmljZVVVSURzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2JsZS5zdG9wU2Nhbm5pbmcoKTtcbiAgICB9XG4gIH1cblxuICBkaXNjb3ZlckhhbmRsZXIocGVyaXBoZXJhbCkge1xuICAgIGNvbnNvbGUubG9nKGBbUG9sYXJIN10gZGlzY292ZXJIYW5kbGVyYCk7XG4gICAgbGV0IGZvdW5kU3VpdGFibGVQZXJpcGhlcmFsID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IHBlcmlwaGVyYWwuYWR2ZXJ0aXNlbWVudC5zZXJ2aWNlVXVpZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmKHBlcmlwaGVyYWwuYWR2ZXJ0aXNlbWVudC5zZXJ2aWNlVXVpZHNbaV0gPT09IFBPTEFSSDdfSFJNX0hFQVJUX1JBVEVfU0VSVklDRV9VVUlEKSB7XG4gICAgICAgIGZvdW5kU3VpdGFibGVQZXJpcGhlcmFsID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmKGZvdW5kU3VpdGFibGVQZXJpcGhlcmFsKSB7XG4gICAgICB0aGlzLm9uRm91bmRTdWl0YWJsZVBlcmlwaGVyYWwocGVyaXBoZXJhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbUG9sYXJIN10gbm8gc3VpdGFibGUgcGVyaXBoZXJhbGApO1xuICAgIH1cbiAgfVxuXG4gIG9uRm91bmRTdWl0YWJsZVBlcmlwaGVyYWwocGVyaXBoZXJhbCkge1xuICAgIGNvbnNvbGUubG9nKGBbUG9sYXJIN11gLCBwZXJpcGhlcmFsLmFkdmVydGlzZW1lbnQubG9jYWxOYW1lKTtcbiAgICB0aGlzLm5vYmxlLnN0b3BTY2FubmluZygpO1xuICAgIHRoaXMucG9sYXJIN1BlcmlwaGVyYWwgPSBwZXJpcGhlcmFsO1xuICAgIHRoaXMucG9sYXJIN1BlcmlwaGVyYWwuY29ubmVjdChlcnJvciA9PiB0aGlzLm9uQ29ubmVjdChlcnJvcikpO1xuICB9XG5cbiAgb25Db25uZWN0KGVycm9yKSB7XG4gICAgaWYoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgW1BvbGFySDddIG9uIGNvbm5lY3RgKTtcbiAgICB0aGlzLmVtaXQoYGNvbm5lY3RgKTtcbiAgICB0aGlzLnBvbGFySDdQZXJpcGhlcmFsLmRpc2NvdmVyU2VydmljZXMoW10sIChlcnJvciwgc2VydmljZXMpID0+IHRoaXMub25QZXJpcGhlcmFsRGlzY292ZXJTZXJ2aWNlcyhlcnJvciwgc2VydmljZXMpKTtcbiAgfVxuXG4gIG9uUGVyaXBoZXJhbERpc2NvdmVyU2VydmljZXMoZXJyb3IsIHNlcnZpY2VzKSB7XG4gICAgY29uc29sZS5sb2coYFtQb2xhckg3XSBvblBlcmlwaGVyYWxEaXNjb3ZlclNlcnZpY2VzYCk7XG4gICAgZm9yIChsZXQgaSA9IHNlcnZpY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBpZihzZXJ2aWNlc1tpXS5uYW1lKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlcnZpY2VzW2ldLnV1aWQsIHNlcnZpY2VzW2ldLm5hbWUpO1xuICAgICAgICBzZXJ2aWNlc1tpXS5kaXNjb3ZlckNoYXJhY3RlcmlzdGljcyhbXSwgKGVycm9yLCBjaGFyYWN0ZXJpc3RpY3MpID0+IHRoaXMub25QZXJpcGhlcmFsU2VydmljZURpc2NvdmVyQ2hhcmFjdGVyaXN0aWNzKGVycm9yLCBjaGFyYWN0ZXJpc3RpY3MpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvblBlcmlwaGVyYWxTZXJ2aWNlRGlzY292ZXJDaGFyYWN0ZXJpc3RpY3MoZXJyb3IsIGNoYXJhY3RlcmlzdGljcykge1xuICAgIGZvciAobGV0IGkgPSBjaGFyYWN0ZXJpc3RpY3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWNzW2ldO1xuICAgICAgaWYoY2hhcmFjdGVyaXN0aWMudXVpZCA9PT0gUE9MQVJIN19IUk1fTUVBU1VSRU1FTlRfQ0hBUkFDVEVSSVNUSUNfVVVJRCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiSFJNIENoYXJhY3RlcmlzdGljXCIpO1xuICAgICAgICBjaGFyYWN0ZXJpc3RpYy5vbihgcmVhZGAsIChkYXRhLCBpc05vdGlmaWNhdGlvbikgPT4gdGhpcy5vbkhlYXJ0UmF0ZVJlYWQoZGF0YSwgaXNOb3RpZmljYXRpb24pKTtcbiAgICAgICAgY2hhcmFjdGVyaXN0aWMubm90aWZ5KHRydWUsIGVycm9yID0+IChlcnJvcikgPyBjb25zb2xlLmxvZyhlcnJvcikgOiB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkhlYXJ0UmF0ZVJlYWQoZGF0YSwgaXNOb3RpZmljYXRpb24pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIGlmKChkYXRhWzBdICYgMHgwMSkgPT09IDApIHtcbiAgICAgIGNvbnN0IGhlYXJ0UmF0ZSA9IGRhdGFbMV07XG4gICAgICBpZihoZWFydFJhdGUpIHtcbiAgICAgICAgdGhpcy5lbWl0KFBvbGFySDcuSEVBUlRfUkFURSwgaGVhcnRSYXRlKTtcbiAgICAgICAgLy8gdmFyIGZpbGVQYXRoID0gQ29uZmlnLmhlYXJ0UmF0ZUZpbGVQYXRoO1xuICAgICAgICAvLyBmcy5hcHBlbmRGaWxlKGZpbGVQYXRoLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiOlwiICsgaGVhcnRSYXRlICsgXCJcXG5cIiwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIC8vIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5Qb2xhckg3LkhFQVJUX1JBVEUgPSBgaGVhcnRSYXRlYDtcbiIsInJlcXVpcmUoYGVzNi1wcm9taXNlYCkucG9seWZpbGwoKTtcblxuaW1wb3J0IFByZXNlbnRhdGlvbiBmcm9tICcuL2NsYXNzZXMvUHJlc2VudGF0aW9uJztcbmltcG9ydCBTbGlkZXNGb2xkZXJQYXJzZXIgZnJvbSAnLi4vLi4vc2VydmVyL2NsYXNzZXMvU2xpZGVzRm9sZGVyUGFyc2VyJztcblxuKCgpID0+IHtcblxuICBjb25zdCByZW1vdGUgPSByZXF1aXJlTm9kZShgZWxlY3Ryb25gKS5yZW1vdGU7XG4gIGNvbnN0IHByZXNlbnRhdGlvblBhdGggPSByZW1vdGUuZ2V0R2xvYmFsKGBfX2Rpcm5hbWVgKTtcbiAgY29uc3QgcGF0aCA9IHJlcXVpcmVOb2RlKGBwYXRoYCk7XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IHtcbiAgICAgIHByZXNlbnRhdGlvblBhdGg6IHByZXNlbnRhdGlvblBhdGgsXG4gICAgICBtb2JpbGVTZXJ2ZXJVcmw6IGBodHRwczovL2pzd29ya291dC5oZXJva3VhcHAuY29tYCxcbiAgICAgIC8vIG1vYmlsZVNlcnZlclVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMGAsXG4gICAgICBtb2JpbGVTZXJ2ZXJVc2VybmFtZTogYHdvdXRlci52ZXJ3ZWlyZGVyQGdtYWlsLmNvbWAsXG4gICAgICBtb2JpbGVTZXJ2ZXJQYXNzd29yZDogYGdlaGVpbWBcbiAgICB9O1xuICAgIGNvbnN0IHNsaWRlc0ZvbGRlclBhcnNlciA9IG5ldyBTbGlkZXNGb2xkZXJQYXJzZXIoKTtcbiAgICBzbGlkZXNGb2xkZXJQYXJzZXIucGFyc2UocHJlc2VudGF0aW9uUGF0aCwgcGF0aC5yZXNvbHZlKHByZXNlbnRhdGlvblBhdGgsIGBzbGlkZXNgKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBuZXcgUHJlc2VudGF0aW9uKGRhdGEsIGBwcmVzZW50YXRpb25gLCBzZXR0aW5ncyk7XG4gICAgICB9KTtcbiAgfTtcblxuICBpbml0KCk7XG59KSgpO1xuIiwibGV0IHJlcXVpcmVOb2RlO1xuaWYoISh0eXBlb2Ygd2luZG93ICE9PSBgdW5kZWZpbmVkYCAmJiB3aW5kb3cpKSB7XG4gIHJlcXVpcmVOb2RlID0gcmVxdWlyZTtcbn0gZWxzZSB7XG4gIHJlcXVpcmVOb2RlID0gd2luZG93LnJlcXVpcmVOb2RlO1xufVxuXG5jb25zdCBmcyA9IHJlcXVpcmVOb2RlKGBmcy1leHRyYWApO1xuY29uc3QgcGF0aCA9IHJlcXVpcmVOb2RlKGBwYXRoYCk7XG5cbmNvbnN0IGdldEZpbGVQcm9wZXJ0aWVzID0gZmlsZVBhdGggPT4ge1xuICBsZXQgX2ZkLCBfbztcbiAgcmV0dXJuIGZzLm9wZW4oZmlsZVBhdGgsIGByYClcbiAgICAudGhlbihmZCA9PiB7XG4gICAgICBfZmQgPSBmZDtcbiAgICAgIHJldHVybiBmZDtcbiAgICB9KVxuICAgIC50aGVuKGZkID0+IGZzLmZzdGF0KGZkKSlcbiAgICAudGhlbihvID0+IHtcbiAgICAgIF9vID0gbztcbiAgICAgIHJldHVybiBfbztcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IGZzLmNsb3NlKF9mZCkpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogZmlsZVBhdGgsXG4gICAgICAgIGlzRGlyZWN0b3J5OiBfby5pc0RpcmVjdG9yeSgpLFxuICAgICAgICBpc0ZpbGU6IF9vLmlzRmlsZSgpXG4gICAgICB9O1xuICAgIH0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlc0ZvbGRlclBhcnNlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICB9XG4gIHBhcnNlKHByZXNlbnRhdGlvblBhdGgsIHNsaWRlc0ZvbGRlclBhdGgpIHtcbiAgICAvL3JlYWQgdGhlIGNvbnRlbnRzIG9mIHRoZSBzbGlkZXMgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGZzLnJlYWRkaXIoc2xpZGVzRm9sZGVyUGF0aClcbiAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQuZmlsdGVyKG5hbWUgPT4gbmFtZS5pbmRleE9mKGAuYCkgPiAwKSlcbiAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQubWFwKG5hbWUgPT4gcGF0aC5yZXNvbHZlKHNsaWRlc0ZvbGRlclBhdGgsIG5hbWUpKSlcbiAgICAgIC50aGVuKHJlc3VsdCA9PiBQcm9taXNlLmFsbChyZXN1bHQubWFwKGZpbGVQYXRoID0+IGdldEZpbGVQcm9wZXJ0aWVzKGZpbGVQYXRoKSkpKVxuICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICBzbGlkZXM6IFtdXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNsaWRlc0J5TmFtZSA9IHt9O1xuICAgICAgICByZXN1bHQuZm9yRWFjaChwcm9wcyA9PiB7XG4gICAgICAgICAgY29uc3Qgc2xpZGUgPSB0aGlzLmNyZWF0ZVNsaWRlT2JqZWN0QmFzZWRPbkZpbGVQcm9wZXJ0aWVzKHByb3BzLCBwcmVzZW50YXRpb25QYXRoLCBzbGlkZXNCeU5hbWUpO1xuICAgICAgICAgIGlmKCFzbGlkZXNCeU5hbWVbc2xpZGUubmFtZV0pIHtcbiAgICAgICAgICAgIGRhdGEuc2xpZGVzLnB1c2goc2xpZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzbGlkZXNCeU5hbWVbc2xpZGUubmFtZV0gPSBzbGlkZTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuc2xpZGVzKTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgfSk7XG4gIH1cblxuICBwYXJzZVNsaWRlQmFzZU5hbWUoc2xpZGVCYXNlTmFtZSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHt9O1xuICAgIHBhcnNlZC5leHQgPSBwYXRoLmV4dG5hbWUoc2xpZGVCYXNlTmFtZSk7XG4gICAgcGFyc2VkLm5hbWUgPSBzbGlkZUJhc2VOYW1lLnN1YnN0cigwLCBzbGlkZUJhc2VOYW1lLmxlbmd0aCAtIHBhcnNlZC5leHQubGVuZ3RoKTtcbiAgICBjb25zdCBzcGxpdHRlZCA9IHBhcnNlZC5uYW1lLnNwbGl0KGAuYCk7XG4gICAgY29uc3Qga2V5d29yZHMgPSBbYG1vYmlsZWAsIGBkZXNrdG9wYCwgYG11dGVkYCwgYGxvb3BgLCBgY292ZXJgXTtcbiAgICBrZXl3b3Jkcy5mb3JFYWNoKGtleXdvcmQgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBzcGxpdHRlZC5pbmRleE9mKGtleXdvcmQpO1xuICAgICAgaWYoaW5kZXggPiAtMSkge1xuICAgICAgICBwYXJzZWRba2V5d29yZF0gPSB0cnVlO1xuICAgICAgICBzcGxpdHRlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBhcnNlZC5uYW1lID0gc3BsaXR0ZWQuam9pbihgLmApO1xuICAgIHJldHVybiBwYXJzZWQ7XG4gIH1cblxuICBjcmVhdGVTbGlkZU9iamVjdEJhc2VkT25GaWxlUHJvcGVydGllcyhmaWxlUHJvcGVydGllcywgcHJlc2VudGF0aW9uUGF0aCwgc2xpZGVzQnlOYW1lKSB7XG5cbiAgICBjb25zdCBwYXJzZWQgPSB0aGlzLnBhcnNlU2xpZGVCYXNlTmFtZShwYXRoLmJhc2VuYW1lKGZpbGVQcm9wZXJ0aWVzLnBhdGgpKTtcbiAgICBsZXQgdXJsID0gcGF0aC5yZWxhdGl2ZShwcmVzZW50YXRpb25QYXRoLCBmaWxlUHJvcGVydGllcy5wYXRoKS5yZXBsYWNlKGBcXFxcYCwgYC9gKTtcbiAgICBpZihwYXJzZWQuZXh0ID09PSBgLmpwZ2AgfHwgcGFyc2VkLmV4dCA9PT0gYC5qcGVnYCB8fCBwYXJzZWQuZXh0ID09PSBgLmdpZmAgfHwgcGFyc2VkLmV4dCA9PT0gYC5wbmdgKSB7XG4gICAgICB1cmwgPSBgc2xpZGVzLWJ1aWx0aW4vaW1hZ2UuaHRtbD9pbWFnZT0keyAgdXJsfWA7XG4gICAgfVxuICAgIGlmKHBhcnNlZC5leHQgPT09IGAubXA0YCkge1xuICAgICAgdXJsID0gYHNsaWRlcy1idWlsdGluL3ZpZGVvLmh0bWw/dmlkZW89JHsgIHVybH1gO1xuICAgIH1cbiAgICBpZihzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdKSB7XG4gICAgICBpZihwYXJzZWQubW9iaWxlKSB7XG4gICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLnVybCA9IHVybDtcbiAgICAgICAgc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXS5tb2JpbGUuZXhwbGljaXQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmKHBhcnNlZC5kZXNrdG9wKSB7XG4gICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ucHJlc2VudGF0aW9uLnVybCA9IHVybDtcbiAgICAgICAgc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXS5wcmVzZW50YXRpb24uZXhwbGljaXQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy9zZXQgdGhlIG9uZSB3aGljaCBpcyBub3Qgc2V0IGV4cGxpY2l0bHlcbiAgICAgICAgaWYoc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXS5tb2JpbGUuZXhwbGljaXQpIHtcbiAgICAgICAgICBzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdLnByZXNlbnRhdGlvbi51cmwgPSB1cmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXS5tb2JpbGUudXJsID0gdXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBwYXJzZWQubmFtZSxcbiAgICAgIHByZXNlbnRhdGlvbjoge1xuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgZXhwbGljaXQ6IGZhbHNlXG4gICAgICB9LFxuICAgICAgbW9iaWxlOiB7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBleHBsaWNpdDogZmFsc2VcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgQ29uc3RhbnRzID0ge1xuICBHT19UT19QUkVWSU9VU19TTElERTogYGdvVG9QcmV2aW91c1NsaWRlYCxcbiAgR09fVE9fTkVYVF9TTElERTogYGdvVG9OZXh0U2xpZGVgLFxuICBTRVRfU0xJREVTOiBgc2V0U2xpZGVzYCxcbiAgU0VUX0NVUlJFTlRfU0xJREVfSU5ERVg6IGBzZXRDdXJyZW50U2xpZGVJbmRleGAsXG5cbiAgTUVTU0FHRTogYG1lc3NhZ2VgLFxuICBTT0NLRVRfU0VORDogYHNvY2tldFNlbmRgLFxuICBTT0NLRVRfUkVDRUlWRTogYHNvY2tldFJlY2VpdmVgLFxuICBKT0lOX1NMSURFX1JPT006IGBqb2luU2xpZGVSb29tYCxcbiAgTEVBVkVfU0xJREVfUk9PTTogYGxlYXZlU2xpZGVSb29tYCxcblxuICBST0xFX1BSRVNFTlRBVElPTjogYHByZXNlbnRhdGlvbmAsXG4gIFJPTEVfTU9CSUxFOiBgbW9iaWxlYCxcblxuICBTVEFURV9BQ1RJVkU6IGBhY3RpdmVgLFxuICBTVEFURV9JTkFDVElWRTogYGluYWN0aXZlYCxcblxuICBTRVRfU1VCU1RBVEU6IGBzZXRTdWJzdGF0ZWAsXG5cbiAgQ0hJTERfQVBQX1NBVkVfQ09ERTogYGNoaWxkQXBwU2F2ZUNvZGVgLFxuICBDSElMRF9BUFBfUlVOX0NPREU6IGBjaGlsZEFwcFJ1bkNvZGVgLFxuICBDSElMRF9BUFBfU1RET1VUX0RBVEE6IGBjaGlsZEFwcFN0ZG91dERhdGFgLFxuICBDSElMRF9BUFBfU1RERVJSX0RBVEE6IGBjaGlsZEFwcFN0ZGVyckRhdGFgLFxuXG4gIE9QRU5fQ09NTUFORF9MSU5FOiBgb3BlbkNvbW1hbmRMaW5lYCxcbiAgT1BFTl9DQU1FUkE6IGBvcGVuQ2FtZXJhYCxcblxuICBCTElOSzogYGJsaW5rYCxcblxuICBIRUFSVF9SQVRFX1BPTEFSOiBgaGVhcnRSYXRlUG9sYXJgLFxuXG4gIFNFVF9URUFNOiBgc2V0VGVhbWAsXG4gIFVQREFURV9NT1RJT046IGB1cGRhdGVNb3Rpb25gLFxuXG4gIFlPVV9XSU46IGB5b3VXaW5gLFxuICBZT1VfTE9TRTogYHlvdUxvc2VgLFxuXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0lOVFJPOiBgc2hha2VZb3VyUGhvbmVzSW50cm9gLFxuICBTSEFLRV9ZT1VSX1BIT05FU19HQU1FOiBgc2hha2VZb3VyUGhvbmVzR2FtZWAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0ZJTklTSEVEOiBgc2hha2VZb3VyUGhvbmVzRmluaXNoZWRgLFxuXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9BRERFRDogYHNoYWtlWW91clBob25lc0NsaWVudEFkZGVkYCxcbiAgU0hBS0VfWU9VUl9QSE9ORVNfQ0xJRU5UX1JFTU9WRUQ6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRSZW1vdmVkYCxcbiAgU0hBS0VfWU9VUl9QSE9ORVNfQ0xJRU5UX0xJU1Q6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRMaXN0YCxcbiAgU0hBS0VfWU9VUl9QSE9ORVNfQ0xJRU5UX1VQREFURTogYHNoYWtlWW91clBob25lc0NsaWVudFVwZGF0ZWAsXG5cbiAgSElHSEVTVF9IRUFSVFJBVEVfR0FNRV9JTlRSTzogYGhpZ2hlc3RIZWFydHJhdGVHYW1lSW50cm9gLFxuICBISUdIRVNUX0hFQVJUUkFURV9HQU1FX0dBTUU6IGBoaWdoZXN0SGVhcnRyYXRlR2FtZUdhbWVgLFxuICBISUdIRVNUX0hFQVJUUkFURV9HQU1FX0ZJTklTSEVEOiBgaGlnaGVzdEhlYXJ0cmF0ZUdhbWVGaW5pc2hlZGAsXG5cbiAgTE9XRVNUX0hFQVJUUkFURV9HQU1FX0lOVFJPOiBgbG93ZXN0SGVhcnRyYXRlR2FtZUludHJvYCxcbiAgTE9XRVNUX0hFQVJUUkFURV9HQU1FX0dBTUU6IGBsb3dlc3RIZWFydHJhdGVHYW1lR2FtZWAsXG4gIExPV0VTVF9IRUFSVFJBVEVfR0FNRV9GSU5JU0hFRDogYGxvd2VzdEhlYXJ0cmF0ZUdhbWVGaW5pc2hlZGAsXG5cbiAgVVBEQVRFX1JFQUNUSU9OX1NQRUVEOiBgdXBkYXRlUmVhY3Rpb25TcGVlZGAsXG5cbiAgUkVBQ1RfUEhPTkVTX0lOVFJPOiBgcmVhY3RQaG9uZXNJbnRyb2AsXG4gIFJFQUNUX1BIT05FU19HQU1FOiBgcmVhY3RQaG9uZXNHYW1lYCxcbiAgUkVBQ1RfUEhPTkVTX0ZJTklTSEVEOiBgcmVhY3RQaG9uZXNGaW5pc2hlZGAsXG5cbiAgREFOQ0VfUEFEX0dBTUVfSU5UUk86IGBkYW5jZVBhZEdhbWVJbnRyb2AsXG4gIERBTkNFX1BBRF9HQU1FX0dBTUU6IGBkYW5jZVBhZEdhbWVHYW1lYCxcbiAgREFOQ0VfUEFEX0dBTUVfRklOSVNIRUQ6IGBkYW5jZVBhZEdhbWVGaW5pc2hlZGAsXG59O1xuIiwiaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtZmV0Y2gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2JpbGVTZXJ2ZXJCcmlkZ2Uge1xuXG4gIGNvbnN0cnVjdG9yKHByZXNlbnRhdGlvbiwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLnByZXNlbnRhdGlvbiA9IHByZXNlbnRhdGlvbjtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cblxuICBjb25uZWN0KCkge1xuICAgIGNvbnNvbGUubG9nKGBNb2JpbGVTZXJ2ZXJCcmlkZ2UuY29ubmVjdGApO1xuICAgIC8vY29uc29sZS53YXJuKCdNb2JpbGVTZXJ2ZXJCcmlkZ2UgZGlzYWJsZWQnKTtcbiAgICAvL3JldHVybjtcbiAgICAvL3Bvc3QgdG8gdGhlIGFwaVxuICAgIGZldGNoKGAke3RoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsfS9sb2dpbmAsIHtcbiAgICAgIG1ldGhvZDogYFBPU1RgLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRMb2dpbkNyZWRlbnRpYWxzKCkpLFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeydDb250ZW50LVR5cGUnOiBgYXBwbGljYXRpb24vanNvbmB9KVxuICAgIH0pXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLmxvZ2luSGFuZGxlcihyZXN1bHQpKVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY29ubmVjdCgpLCAxMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldExvZ2luQ3JlZGVudGlhbHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVtYWlsOiB0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyUGFzc3dvcmQsXG4gICAgfTtcbiAgfVxuXG4gIGxvZ2luSGFuZGxlcihyZXN1bHQpIHtcbiAgICB0aGlzLnRva2VuID0gcmVzdWx0LnRva2VuO1xuICAgIHRoaXMuc29ja2V0ID0gaW8odGhpcy5zZXR0aW5ncy5tb2JpbGVTZXJ2ZXJVcmwsIHtcbiAgICAgIHF1ZXJ5OiBgdG9rZW49JHsgIHRoaXMudG9rZW59YCxcbiAgICAgIHJlY29ubmVjdGlvbjogZmFsc2UsXG4gICAgICBmb3JjZU5ldzogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuc29ja2V0Lm9uKGBjb25uZWN0YCwgdGhpcy5zb2NrZXRDb25uZWN0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNvY2tldC5vbihgZGlzY29ubmVjdGAsIHRoaXMuc29ja2V0RGlzY29ubmVjdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zb2NrZXQub24oYG1lc3NhZ2VgLCB0aGlzLnNvY2tldE1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc29ja2V0Q29ubmVjdEhhbmRsZXIoKSB7XG4gICAgY29uc29sZS5sb2coYE1vYmlsZVNlcnZlckJyaWRnZS5zb2NrZXRDb25uZWN0SGFuZGxlcmApO1xuICAgIHRoaXMucHJlc2VudGF0aW9uLm1vYmlsZVNlcnZlckJyaWRnZUNvbm5lY3RlZCgpO1xuICB9XG5cbiAgc29ja2V0RGlzY29ubmVjdEhhbmRsZXIoKSB7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cblxuICB0cnlUb1NlbmQoKSB7XG4gICAgaWYodGhpcy5zb2NrZXQpIHtcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQuYXBwbHkodGhpcy5zb2NrZXQsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgc29ja2V0TWVzc2FnZUhhbmRsZXIobWVzc2FnZSkge1xuICAgIHRoaXMucHJlc2VudGF0aW9uLm1vYmlsZVNlcnZlck1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpO1xuICB9XG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vQ29uc3RhbnRzJztcbmltcG9ydCBTbGlkZUJyaWRnZSBmcm9tICcuL1NsaWRlQnJpZGdlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VudGF0aW9uIHtcbiAgLypcbiAgICogZGF0YToganNvbiBvYmplY3Qgd2l0aCBzbGlkZXMgYXJyYXkgcHJvcGVydHlcbiAgICogcm9sZTogbW9iaWxlIG9yIHByZXNlbnRhdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSwgcm9sZSwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICQoYCNwcmVzZW50YXRpb25gKS5hdHRyKGBkYXRhLXByZXNlbnRhdGlvbi1zZXR0aW5nc2AsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSk7XG4gICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IC0xO1xuICAgIHRoaXMuc2xpZGVIb2xkZXJzID0gW107XG4gICAgdGhpcy5udW1TbGlkZUhvbGRlcnMgPSAzO1xuICAgIHRoaXMuc2xpZGVCcmlkZ2VzID0gW107XG4gICAgdGhpcy5zbGlkZUJyaWRnZXNCeVNsaWRlTmFtZSA9IHt9O1xuXG4gICAgdGhpcy5jcmVhdGVTbGlkZUhvbGRlcnMoKTtcbiAgICB0aGlzLmNyZWF0ZVNsaWRlQnJpZGdlcyh0aGlzLmRhdGEpO1xuXG4gICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UgPSB0aGlzLmNyZWF0ZU1vYmlsZVNlcnZlckJyaWRnZSgpO1xuICAgIHRoaXMuc3RhcnRMaXN0ZW5pbmdGb3JNZXNzYWdlcygpO1xuXG4gICAgdGhpcy5zZXRDdXJyZW50U2xpZGVJbmRleCgwKTtcbiAgfVxuXG4gIHN0YXJ0TGlzdGVuaW5nRm9yTWVzc2FnZXMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYG1lc3NhZ2VgLCB0aGlzLnNsaWRlTWVzc2FnZUhhbmRsZXIuYmluZCh0aGlzKSwgZmFsc2UpO1xuICB9XG5cbiAgY3JlYXRlU2xpZGVIb2xkZXJzKCkge1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm51bVNsaWRlSG9sZGVyczsgaSsrKSB7XG4gICAgICBjb25zdCAkc2xpZGVIb2xkZXIgPSAkKGA8ZGl2IGNsYXNzPVwic2xpZGUtZnJhbWVcIiAvPmApO1xuICAgICAgdGhpcy5zbGlkZUhvbGRlcnMucHVzaCgkc2xpZGVIb2xkZXIpO1xuICAgICAgJChgI3ByZXNlbnRhdGlvbmApLmFwcGVuZCgkc2xpZGVIb2xkZXIpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNsaWRlQnJpZGdlcyhkYXRhKSB7XG4gICAgY29uc3QgbnVtU2xpZGVzID0gZGF0YS5zbGlkZXMubGVuZ3RoO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1TbGlkZXM7IGkrKykge1xuICAgICAgY29uc3Qgc2xpZGVCcmlkZ2UgPSB0aGlzLmNyZWF0ZVNsaWRlQnJpZGdlKGRhdGEuc2xpZGVzW2ldKTtcbiAgICAgIHRoaXMuc2xpZGVCcmlkZ2VzLnB1c2goc2xpZGVCcmlkZ2UpO1xuICAgICAgdGhpcy5zbGlkZUJyaWRnZXNCeVNsaWRlTmFtZVtzbGlkZUJyaWRnZS5uYW1lXSA9IHNsaWRlQnJpZGdlO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNsaWRlQnJpZGdlKHNsaWRlKSB7XG4gICAgcmV0dXJuIG5ldyBTbGlkZUJyaWRnZShzbGlkZSk7XG4gIH1cblxuICBzbGlkZU1lc3NhZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgaWYoIWV2ZW50LmRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpdGNoKGV2ZW50LmRhdGEuYWN0aW9uKSB7XG4gICAgY2FzZSBDb25zdGFudHMuU09DS0VUX1NFTkQ6XG4gICAgICBpZih0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSkge1xuICAgICAgICB0aGlzLm1vYmlsZVNlcnZlckJyaWRnZS50cnlUb1NlbmQoQ29uc3RhbnRzLk1FU1NBR0UsIGV2ZW50LmRhdGEubWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBtb2JpbGVTZXJ2ZXJCcmlkZ2VDb25uZWN0ZWQoKSB7XG4gICAgLy9qb2luIHRoZSByb29tcyBvZiB0aGUgc2xpZGVIb2xkZXJzXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubnVtU2xpZGVIb2xkZXJzOyBpKyspIHtcbiAgICAgIHRoaXMubW9iaWxlU2VydmVyQnJpZGdlLnRyeVRvU2VuZChDb25zdGFudHMuSk9JTl9TTElERV9ST09NLCAkKHRoaXMuc2xpZGVIb2xkZXJzW2ldKS5hdHRyKGBkYXRhLW5hbWVgKSk7XG4gICAgfVxuICB9XG5cbiAgbW9iaWxlU2VydmVyTWVzc2FnZUhhbmRsZXIobWVzc2FnZSkge1xuICAgIGlmKG1lc3NhZ2UudGFyZ2V0LnNsaWRlKSB7XG4gICAgICAvL3NsaWRlIGhhcyB0byBoYW5kbGUgdGhlIG1lc3NhZ2VcbiAgICAgIGNvbnN0IHNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5TmFtZShtZXNzYWdlLnRhcmdldC5zbGlkZSk7XG4gICAgICBpZihzbGlkZUJyaWRnZSkge1xuICAgICAgICBzbGlkZUJyaWRnZS50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TT0NLRVRfUkVDRUlWRSxcbiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvL3ByZXNlbnRhdGlvbiBoYXMgdG8gaGFuZGxlIHRoZSBtZXNzYWdlXG4gICAgICB0aGlzLmhhbmRsZU1vYmlsZVNlcnZlck1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTW9iaWxlU2VydmVyTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc29sZS5sb2coYFtzaGFyZWQvUHJlc2VudGF0aW9uXSBoYW5kbGVNb2JpbGVTZXJ2ZXJNZXNzYWdlYCwgbWVzc2FnZSk7XG4gIH1cblxuICBnZXRTbGlkZUJyaWRnZUJ5SW5kZXgoaW5kZXgpIHtcbiAgICBpZihpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5zbGlkZUJyaWRnZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zbGlkZUJyaWRnZXNbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRTbGlkZUJyaWRnZUJ5TmFtZShzbGlkZU5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5zbGlkZUJyaWRnZXNCeVNsaWRlTmFtZVtzbGlkZU5hbWVdO1xuICB9XG5cbiAgZ2V0U2xpZGVIb2xkZXJGb3JTbGlkZShzbGlkZSwgc2xpZGVzTm90VG9DbGVhcikge1xuICAgIGlmKHNsaWRlKSB7XG4gICAgICBsZXQgJHNsaWRlSG9sZGVyID0gJChgLnNsaWRlLWZyYW1lW2RhdGEtbmFtZT1cIiR7ICBzbGlkZS5uYW1lICB9XCJdYCk7XG4gICAgICBpZigkc2xpZGVIb2xkZXIubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gJHNsaWRlSG9sZGVyWzBdO1xuICAgICAgfVxuICAgICAgLy9nZXQgYSBmcmVlIHNsaWRlSG9sZGVyXG4gICAgICBjb25zdCBzbGlkZU5hbWVzTm90VG9DbGVhciA9IFtdO1xuICAgICAgJChzbGlkZXNOb3RUb0NsZWFyKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBvYmope1xuICAgICAgICBzbGlkZU5hbWVzTm90VG9DbGVhci5wdXNoKG9iai5uYW1lKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgJHNsaWRlSG9sZGVycyA9ICQoYC5zbGlkZS1mcmFtZWApO1xuICAgICAgZm9yIChsZXQgaSA9ICRzbGlkZUhvbGRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgJHNsaWRlSG9sZGVyID0gJCgkc2xpZGVIb2xkZXJzW2ldKTtcbiAgICAgICAgY29uc3QgbmFtZSA9ICRzbGlkZUhvbGRlci5hdHRyKGBkYXRhLW5hbWVgKTtcbiAgICAgICAgaWYoIW5hbWUgfHwgc2xpZGVOYW1lc05vdFRvQ2xlYXIuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gJHNsaWRlSG9sZGVyWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdvVG9QcmV2aW91c1NsaWRlKCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFNsaWRlSW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCAtIDEpO1xuICB9XG5cbiAgZ29Ub05leHRTbGlkZSgpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRTbGlkZUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggKyAxKTtcbiAgfVxuXG4gIHNldEN1cnJlbnRTbGlkZUluZGV4KHZhbHVlKSB7XG4gICAgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih2YWx1ZSwgdGhpcy5zbGlkZUJyaWRnZXMubGVuZ3RoIC0gMSkpO1xuICAgIGlmKHZhbHVlICE9PSB0aGlzLmN1cnJlbnRTbGlkZUluZGV4KSB7XG4gICAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gdmFsdWU7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xuICAgICAgY29uc3QgcHJldmlvdXNTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggLSAxKTtcbiAgICAgIGNvbnN0IG5leHRTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggKyAxKTtcblxuICAgICAgLy9yZW1vdmUgXCJ1c2VkXCIgY2xhc3MgZnJvbSBzbGlkZSBob2xkZXJzXG4gICAgICAkKGAuc2xpZGUtZnJhbWVgKS5yZW1vdmVBdHRyKGBkYXRhLXVzZWRgLCBmYWxzZSk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZUhvbGRlciA9IHRoaXMuZ2V0U2xpZGVIb2xkZXJGb3JTbGlkZShjdXJyZW50U2xpZGVCcmlkZ2UsIFtwcmV2aW91c1NsaWRlQnJpZGdlLCBuZXh0U2xpZGVCcmlkZ2VdKTtcbiAgICAgIHRoaXMuc2V0dXBTbGlkZUhvbGRlcihjdXJyZW50U2xpZGVIb2xkZXIsIGN1cnJlbnRTbGlkZUJyaWRnZSwgQ29uc3RhbnRzLlNUQVRFX0FDVElWRSwgMCk7XG5cbiAgICAgIGNvbnN0IHByZXZpb3VzU2xpZGVIb2xkZXIgPSB0aGlzLmdldFNsaWRlSG9sZGVyRm9yU2xpZGUocHJldmlvdXNTbGlkZUJyaWRnZSwgW2N1cnJlbnRTbGlkZUJyaWRnZSwgbmV4dFNsaWRlQnJpZGdlXSk7XG4gICAgICB0aGlzLnNldHVwU2xpZGVIb2xkZXIocHJldmlvdXNTbGlkZUhvbGRlciwgcHJldmlvdXNTbGlkZUJyaWRnZSwgQ29uc3RhbnRzLlNUQVRFX0lOQUNUSVZFLCBgLTEwMCVgKTtcblxuICAgICAgY29uc3QgbmV4dFNsaWRlSG9sZGVyID0gdGhpcy5nZXRTbGlkZUhvbGRlckZvclNsaWRlKG5leHRTbGlkZUJyaWRnZSwgW3ByZXZpb3VzU2xpZGVCcmlkZ2UsIGN1cnJlbnRTbGlkZUJyaWRnZV0pO1xuICAgICAgdGhpcy5zZXR1cFNsaWRlSG9sZGVyKG5leHRTbGlkZUhvbGRlciwgbmV4dFNsaWRlQnJpZGdlLCBDb25zdGFudHMuU1RBVEVfSU5BQ1RJVkUsIGAxMDAlYCk7XG5cbiAgICAgIC8vY2xlYXIgYXR0cmlidXRlcyBvZiB1bnVzZWQgc2xpZGUgZnJhbWVzXG4gICAgICAkKGAuc2xpZGUtZnJhbWVgKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBzbGlkZUhvbGRlcil7XG4gICAgICAgIGlmKCEkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXVzZWRgKSkge1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUF0dHIoYGRhdGEtdXNlZGApLnJlbW92ZUF0dHIoYGRhdGEtbmFtZWApLnJlbW92ZUF0dHIoYGRhdGEtc3JjYCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvL2FsbCBvdGhlciBzbGlkZUhvbGRlciBicmlkZ2VzIHNob3VsZCBiZSB1bmxpbmtlZCBmcm9tIHRoZWlyIHNsaWRlSG9sZGVyXG4gICAgICB0aGlzLnNsaWRlQnJpZGdlcy5mb3JFYWNoKGZ1bmN0aW9uKHNsaWRlQnJpZGdlKXtcbiAgICAgICAgaWYoc2xpZGVCcmlkZ2UgPT09IGN1cnJlbnRTbGlkZUJyaWRnZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihzbGlkZUJyaWRnZSA9PT0gcHJldmlvdXNTbGlkZUJyaWRnZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihzbGlkZUJyaWRnZSA9PT0gbmV4dFNsaWRlQnJpZGdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNsaWRlQnJpZGdlLnNsaWRlSG9sZGVyID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICBiZWFuLmZpcmUodGhpcywgQ29uc3RhbnRzLlNFVF9DVVJSRU5UX1NMSURFX0lOREVYLCBbdGhpcy5jdXJyZW50U2xpZGVJbmRleF0pO1xuICAgIH1cbiAgfVxuXG4gIHNldHVwU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlLCBzdGF0ZSwgbGVmdCkge1xuICAgIGlmKHNsaWRlSG9sZGVyKSB7XG4gICAgICBsZXQgc3JjID0gYHNsaWRlcy8keyAgc2xpZGVCcmlkZ2UubmFtZSAgfS5odG1sYDtcbiAgICAgIGlmKHNsaWRlQnJpZGdlLmRhdGFbdGhpcy5yb2xlXSAmJiBzbGlkZUJyaWRnZS5kYXRhW3RoaXMucm9sZV0udXJsKSB7XG4gICAgICAgIHNyYyA9IHNsaWRlQnJpZGdlLmRhdGFbdGhpcy5yb2xlXS51cmw7XG4gICAgICB9XG4gICAgICBzcmMgPSB0aGlzLnByb2Nlc3NTbGlkZVNyYyhzcmMpO1xuICAgICAgaWYoc2xpZGVCcmlkZ2UuaXNBbHJlYWR5Q29ycmVjdGx5QXR0YWNoZWQoc2xpZGVIb2xkZXIsIHNyYykpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhzbGlkZUJyaWRnZS5uYW1lICsgJyBhbHJlYWR5IGF0dGFjaGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmF0dGFjaFRvU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlLCBzcmMpO1xuICAgICAgfVxuICAgICAgc2xpZGVCcmlkZ2Uuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgJChzbGlkZUhvbGRlcikuY3NzKGBsZWZ0YCwgbGVmdCk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXVzZWRgLCAxKTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzbGlkZUJyaWRnZSwgc3JjKSB7XG4gICAgLy9saXN0ZW4gZm9yIGV2ZW50cyBvbiB0aGlzIHNsaWRlSG9sZGVyXG4gICAgJChzbGlkZUhvbGRlcikub2ZmKGBtZXNzYWdlLWZyb20tc2xpZGVgKTtcbiAgICAkKHNsaWRlSG9sZGVyKS5vbihgbWVzc2FnZS1mcm9tLXNsaWRlYCwgKGV2ZW50LCBtZXNzYWdlKSA9PiAge1xuICAgICAgdGhpcy5zbGlkZU1lc3NhZ2VIYW5kbGVyKHtkYXRhOiBtZXNzYWdlfSk7XG4gICAgfSk7XG4gICAgLy9sZWF2ZSBwcmV2aW91cyBjaGFubmVsIG9mIHRoaXMgc2xpZGVIb2xkZXJcbiAgICBpZih0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSkge1xuICAgICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UudHJ5VG9TZW5kKENvbnN0YW50cy5MRUFWRV9TTElERV9ST09NLCAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgKSk7XG4gICAgfVxuICAgIC8vYWRkIHRoZSBqb2luIGFzIGEgY2FsbGJhY2sgZm9yIHRoZSBvbmxvYWQgZXZlbnRcbiAgICBzbGlkZUJyaWRnZS5hdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzcmMsIHRoaXMuc2xpZGVMb2FkZWQuYmluZCh0aGlzLCBzbGlkZUhvbGRlciwgc2xpZGVCcmlkZ2UsIHNyYykpO1xuICB9XG5cbiAgc2xpZGVMb2FkZWQoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAvL2pvaW4gbmV3IGNoYW5uZWxcbiAgICBpZih0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSkge1xuICAgICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UudHJ5VG9TZW5kKENvbnN0YW50cy5KT0lOX1NMSURFX1JPT00sICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWApKTtcbiAgICB9XG4gIH1cblxuICBwcm9jZXNzU2xpZGVTcmMoc3JjKSB7XG4gICAgcmV0dXJuIHNyYztcbiAgfVxuXG4gIGNyZWF0ZU1vYmlsZVNlcnZlckJyaWRnZSgpIHtcbiAgICAvL3RvIGltcGxlbWVudCBpbiBleHRlbmRpbmcgY2xhc3Nlc1xuICB9XG59XG4iLCJpbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy1mZXRjaCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlQnJpZGdlIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5uYW1lID0gdGhpcy5kYXRhLm5hbWU7XG4gIH1cblxuICBpc0FscmVhZHlDb3JyZWN0bHlBdHRhY2hlZChzbGlkZUhvbGRlciwgc3JjKSB7XG4gICAgcmV0dXJuICh0aGlzLnNsaWRlSG9sZGVyID09PSBzbGlkZUhvbGRlciAmJiAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgKSA9PT0gdGhpcy5uYW1lICYmICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCkgPT09IHNyYyk7XG4gIH1cblxuICBhdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzcmMsIGNiKSB7XG4gICAgdGhpcy5zbGlkZUhvbGRlciA9IHNsaWRlSG9sZGVyO1xuICAgIC8vbm90aWZ5IHRoZSBjb250ZW50IGl0IGlzIGJlaW5nIGNsZWFyZWRcbiAgICB0aGlzLnRyeVRvUG9zdE1lc3NhZ2Uoe2FjdGlvbjogYGRlc3Ryb3lgfSk7XG4gICAgLy9jbGVhciB0aGUgY3VycmVudCBjb250ZW50XG4gICAgdGhpcy5zbGlkZUhvbGRlci5pbm5lckhUTUwgPSBgYDtcbiAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgLCB0aGlzLm5hbWUpO1xuICAgICQoc2xpZGVIb2xkZXIpLmFkZENsYXNzKGBsb2FkaW5nYCk7XG5cbiAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYGxvYWRgKTtcbiAgICAkKHNsaWRlSG9sZGVyKS5vbihgbG9hZGAsICgpID0+IHtcbiAgICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogYHNldFN0YXRlYCxcbiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGVcbiAgICAgIH0pO1xuICAgICAgJChzbGlkZUhvbGRlcikub2ZmKGBsb2FkYCk7XG4gICAgfSk7XG5cbiAgICBpZihzcmMgIT09ICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCkpIHtcbiAgICAgIC8vZmV0Y2ggdGhlIGh0bWxcbiAgICAgIGZldGNoKHNyYylcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHJlc3VsdC50ZXh0KCkpXG4gICAgICAgIC50aGVuKHJlc3VsdCA9PiAkKHJlc3VsdCkpXG4gICAgICAgIC50aGVuKCRyZXN1bHQgPT4ge1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLmh0bWwoJHJlc3VsdC5odG1sKCkpO1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUNsYXNzKGBsb2FkaW5nYCk7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUNsYXNzKGBsb2FkaW5nYCk7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXNyY2AsIHNyYyk7XG4gICAgfVxuICB9XG5cbiAgdHJ5VG9Qb3N0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgaWYoIXRoaXMuc2xpZGVIb2xkZXIpXG4gICAge1xuICAgICAgY29uc29sZS5sb2coYCR7dGhpcy5uYW1lICB9IHBvc3QgZmFpbGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL3RyaWdnZXIgd2l0aCBqcXVlcnlcbiAgICAkKHRoaXMuc2xpZGVIb2xkZXIpLnRyaWdnZXIoYG1lc3NhZ2UtdG8tc2xpZGVgLCBtZXNzYWdlKTtcbiAgfVxuXG4gIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICBhY3Rpb246IGBzZXRTdGF0ZWAsXG4gICAgICBzdGF0ZTogdGhpcy5zdGF0ZVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vQ29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGVudEJhc2V7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIgPSAkc2xpZGVIb2xkZXI7XG4gICAgdGhpcy5zbGlkZUhvbGRlciA9IHRoaXMuJHNsaWRlSG9sZGVyWzBdO1xuICAgIHRoaXMud2lkdGggPSB0aGlzLnNsaWRlSG9sZGVyLm9mZnNldFdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRIZWlnaHQ7XG4gICAgdGhpcy5wcmV2V2lkdGggPSB0aGlzLndpZHRoO1xuICAgIHRoaXMucHJldkhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgIHRoaXMud2lkdGhDaGFuZ2VkID0gZmFsc2U7XG4gICAgdGhpcy5oZWlnaHRDaGFuZ2VkID0gZmFsc2U7XG4gICAgdGhpcy5zaXplQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuc3JjID0gJHNsaWRlSG9sZGVyLmF0dHIoYGRhdGEtc3JjYCk7XG4gICAgdGhpcy5uYW1lID0gJHNsaWRlSG9sZGVyLmF0dHIoYGRhdGEtbmFtZWApO1xuICAgIHRoaXMuc2V0dGluZ3MgPSB7fTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zZXR0aW5ncyA9IEpTT04ucGFyc2UoJChgI3ByZXNlbnRhdGlvbmApLmF0dHIoYGRhdGEtcHJlc2VudGF0aW9uLXNldHRpbmdzYCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuICAgIHRoaXMuZnBzID0gNjA7XG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IGZhbHNlO1xuICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gMDtcbiAgICB0aGlzLl9kZWx0YSA9IDA7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSBmYWxzZTtcbiAgICB0aGlzLl9sYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcblxuICAgIHRoaXMuc3RhcnRMaXN0ZW5pbmdGb3JNZXNzYWdlcygpO1xuXG4gICAgdGhpcy5fX2RyYXdMb29wID0gdGhpcy5fZHJhd0xvb3AuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9pbnRlcnZhbCA9IDEwMDAgLyB0aGlzLmZwcztcblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgJHNsaWRlSG9sZGVyLnRyaWdnZXIoYGxvYWRgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXJ0TGlzdGVuaW5nRm9yTWVzc2FnZXMoKSB7XG4gICAgdGhpcy5fc2xpZGVIb2xkZXJNZXNzYWdlVG9TbGlkZUhhbmRsZXIgPSB0aGlzLnNsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIub24oYG1lc3NhZ2UtdG8tc2xpZGVgLCB0aGlzLl9zbGlkZUhvbGRlck1lc3NhZ2VUb1NsaWRlSGFuZGxlcik7XG4gIH1cblxuICBzdG9wTGlzdGVuaW5nRm9yTWVzc2FnZXMoKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIub2ZmKGBtZXNzYWdlLXRvLXNsaWRlYCwgdGhpcy5fc2xpZGVIb2xkZXJNZXNzYWdlVG9TbGlkZUhhbmRsZXIpO1xuICB9XG5cbiAgc2xpZGVIb2xkZXJNZXNzYWdlVG9TbGlkZUhhbmRsZXIoZXZlbnQsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLnJlY2VpdmVNZXNzYWdlKHtkYXRhOiBtZXNzYWdlfSk7XG4gIH1cblxuICByZWNlaXZlTWVzc2FnZShldmVudCkge1xuICAgIGlmKCFldmVudC5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaChldmVudC5kYXRhLmFjdGlvbikge1xuICAgIGNhc2UgYHNldFN0YXRlYDpcbiAgICAgIHRoaXMuc2V0U3RhdGUoZXZlbnQuZGF0YS5zdGF0ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGBkZXN0cm95YDpcbiAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDb25zdGFudHMuU09DS0VUX1JFQ0VJVkU6XG4gICAgICB0aGlzLnJlY2VpdmVTb2NrZXRNZXNzYWdlKGV2ZW50LmRhdGEubWVzc2FnZSk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlKGV2ZW50LmRhdGEpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnN0b3BMaXN0ZW5pbmdGb3JNZXNzYWdlcygpO1xuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUlkKTtcbiAgfVxuXG4gIHBvc3RNZXNzYWdlKGRhdGEpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci50cmlnZ2VyKGBtZXNzYWdlLWZyb20tc2xpZGVgLCBkYXRhKTtcbiAgfVxuXG4gIGhhbmRsZU1lc3NhZ2UoZGF0YSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIH1cblxuICBwb3N0U29ja2V0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICBhY3Rpb246IENvbnN0YW50cy5TT0NLRVRfU0VORCxcbiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICB9KTtcbiAgfVxuXG4gIHJlY2VpdmVTb2NrZXRNZXNzYWdlKG1lc3NhZ2UpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICB9XG5cbiAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICBpZihzdGF0ZSAhPT0gdGhpcy5zdGF0ZSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlZCgpO1xuICAgICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuX2RyYXdMb29wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWVJZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gIH1cblxuICBfZHJhd0xvb3AoKSB7XG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fX2RyYXdMb29wKTtcbiAgICB0aGlzLl9jdXJyZW50VGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgdGhpcy5fZGVsdGEgPSAodGhpcy5fY3VycmVudFRpbWUgLSB0aGlzLl9sYXN0VGltZSk7XG4gICAgaWYodGhpcy5fZGVsdGEgPiB0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgdGhpcy5jdXJyZW50RnJhbWUrKztcbiAgICAgIHRoaXMucHJldldpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgIHRoaXMucHJldkhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgdGhpcy53aWR0aCA9IHRoaXMuc2xpZGVIb2xkZXIub2Zmc2V0V2lkdGg7XG4gICAgICB0aGlzLmhlaWdodCA9IHRoaXMuc2xpZGVIb2xkZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgdGhpcy53aWR0aENoYW5nZWQgPSAodGhpcy53aWR0aCAhPT0gdGhpcy5wcmV2V2lkdGgpO1xuICAgICAgdGhpcy5oZWlnaHRDaGFuZ2VkID0gKHRoaXMuaGVpZ2h0ICE9PSB0aGlzLnByZXZIZWlnaHQpO1xuICAgICAgdGhpcy5zaXplQ2hhbmdlZCA9ICh0aGlzLndpZHRoQ2hhbmdlZCB8fCB0aGlzLmhlaWdodENoYW5nZWQpO1xuICAgICAgdGhpcy5kcmF3TG9vcCh0aGlzLl9kZWx0YSk7XG4gICAgICB0aGlzLl9sYXN0VGltZSA9IHRoaXMuX2N1cnJlbnRUaW1lIC0gKHRoaXMuX2RlbHRhICUgdGhpcy5faW50ZXJ2YWwpO1xuICAgIH1cbiAgfVxuXG4gIGRyYXdMb29wKGRlbHRhKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuaW1wb3J0IEhlYXJ0UmF0ZUNhbnZhcyBmcm9tICcuLi9IZWFydFJhdGVDYW52YXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFydFJhdGVTbGlkZSBleHRlbmRzIENvbnRlbnRCYXNlIHtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuXG4gICAgdGhpcy5oZWFydFJhdGVDYW52YXMgPSBuZXcgSGVhcnRSYXRlQ2FudmFzKHRoaXMuc2xpZGVIb2xkZXIucXVlcnlTZWxlY3RvcihgY2FudmFzYCkpO1xuICAgIHRoaXMuaGVhcnRSYXRlQ2FudmFzLnJlc2l6ZSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gIH1cblxuICByZWNlaXZlTWVzc2FnZShldmVudCkge1xuICAgIHN1cGVyLnJlY2VpdmVNZXNzYWdlKGV2ZW50KTtcbiAgICBpZihldmVudC5kYXRhLmFjdGlvbiA9PT0gQ29uc3RhbnRzLkhFQVJUX1JBVEVfUE9MQVIpIHtcbiAgICAgIHRoaXMudXBkYXRlSGVhcnRSYXRlKGV2ZW50LmRhdGEuaGVhcnRSYXRlKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVIZWFydFJhdGUoaGVhcnRSYXRlKSB7XG4gICAgdGhpcy5oZWFydFJhdGVDYW52YXMudXBkYXRlSGVhcnRSYXRlKGhlYXJ0UmF0ZSk7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLmhlYXJ0LXJhdGUtdGV4dGApLnRleHQoaGVhcnRSYXRlKTtcbiAgfVxuXG4gIGRyYXdMb29wKCkge1xuICAgIGlmKHRoaXMuc2l6ZUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuaGVhcnRSYXRlQ2FudmFzLnJlc2l6ZSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfVxuICAgIHRoaXMuaGVhcnRSYXRlQ2FudmFzLnRpY2soKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5pbXBvcnQgR2FtZSBmcm9tICcuL2dhbWUvR2FtZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhpZ2hlc3RIZWFydHJhdGVHYW1lU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZXtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuICAgIHRoaXMuZ2FtZSA9IG5ldyBHYW1lKCRzbGlkZUhvbGRlclswXSwgMTI4MCwgNjcwLCBQaGFzZXIuQVVUTywgYGhpZ2hlc3QtaGVhcnRyYXRlLWdhbWUtY29udGFpbmVyYCk7XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICB0aGlzLmdhbWUucGF1c2VkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2FtZS5wYXVzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5nYW1lLmRlc3Ryb3koKTtcbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcblxuaW1wb3J0IExpdmVDb2RlIGZyb20gJy4uL2xpdmUtY29kZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdmVDb2RlU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyLCBjb25maWcsIHJlYWR5Q2FsbGJhY2spIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuXG4gICAgY29uc3QgcmVtb3RlID0gcmVxdWlyZU5vZGUoYGVsZWN0cm9uYCkucmVtb3RlO1xuICAgIGNvbnN0IGNvbmZpZzIgPSB7Li4uY29uZmlnLCBwcmVzZW50YXRpb25QYXRoOiByZW1vdGUuZ2V0R2xvYmFsKGBfX2Rpcm5hbWVgKX07XG5cbiAgICAvL2ZpbmQgbGl2ZSBjb2RlIGVsZW1lbnRcbiAgICB0aGlzLmxpdmVDb2RlID0gbmV3IExpdmVDb2RlKHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5saXZlLWNvZGVgKSwgY29uZmlnMiwgcmVhZHlDYWxsYmFjayk7XG4gIH1cblxuICBsYXlvdXQoKSB7XG4gICAgdGhpcy5saXZlQ29kZS5sYXlvdXQoKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIHRoaXMubGl2ZUNvZGUuZGVzdHJveSgpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5saXZlQ29kZS5yZXN1bWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9zdG9wXG4gICAgICB0aGlzLmxpdmVDb2RlLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZSc7XG5cbmltcG9ydCBHYW1lIGZyb20gJy4vZ2FtZS9HYW1lJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG93ZXN0SGVhcnRyYXRlR2FtZVNsaWRlIGV4dGVuZHMgQ29udGVudEJhc2V7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcbiAgICB0aGlzLmdhbWUgPSBuZXcgR2FtZSgkc2xpZGVIb2xkZXJbMF0sIDEyODAsIDY3MCwgUGhhc2VyLkFVVE8sIGBsb3dlc3QtaGVhcnRyYXRlLWdhbWUtY29udGFpbmVyYCk7XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICB0aGlzLmdhbWUucGF1c2VkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2FtZS5wYXVzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5nYW1lLmRlc3Ryb3koKTtcbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVhY3RQaG9uZXNTbGlkZSBleHRlbmRzIENvbnRlbnRCYXNlIHtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuXG4gICAgdGhpcy5nYW1lRHVyYXRpb24gPSAxMTtcbiAgICB0aGlzLmNsaWVudHNNYXAgPSB7fTtcbiAgICB0aGlzLm11c2ljID0gJChgI211c2ljYClbMF07XG5cbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAjaXBgKS50ZXh0KHRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsKTtcblxuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1pbnRybyAuYnRuYCkub24oYGNsaWNrYCwgdGhpcy5zdGFydENsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZmluaXNoZWQgLmJ0bmApLm9uKGBjbGlja2AsIHRoaXMud2lubmVyQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgdGhpcy5zZXRTdWJzdGF0ZShDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0lOVFJPKTtcbiAgfVxuXG4gIHNldFN1YnN0YXRlKHN1YnN0YXRlKSB7XG4gICAgaWYodGhpcy5zdWJzdGF0ZSAhPT0gc3Vic3RhdGUpIHtcbiAgICAgIHRoaXMuc3Vic3RhdGUgPSBzdWJzdGF0ZTtcbiAgICAgIC8vc2VuZCBzdWJzdGF0ZSB0byBtb2JpbGUgY2xpZW50c1xuICAgICAgdGhpcy5wb3N0U29ja2V0TWVzc2FnZSh7XG4gICAgICAgIHRhcmdldDoge1xuICAgICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICAgICAgc2xpZGU6IHRoaXMubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuU0VUX1NVQlNUQVRFLFxuICAgICAgICAgIHN1YnN0YXRlOiB0aGlzLnN1YnN0YXRlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlJFQUNUX1BIT05FU19HQU1FKSB7XG4gICAgICAgIHRoaXMucmVzZXRBbGxSZWFjdGlvblNwZWVkcygpO1xuICAgICAgfVxuICAgICAgdGhpcy5zaG93Q3VycmVudFN0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcmVjZWl2ZVNvY2tldE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmKCFtZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gYHVwZGF0ZVJvb21MaXN0YCkge1xuICAgICAgLy9tZXNzYWdlLmNvbnRlbnQuaWRzIGlzIGFuIGFycmF5IHdpdGggaWRzIGluIHRoaXMgcm9vbVxuICAgICAgY29uc3QgY2xpZW50TWFwSWRzID0gXy5rZXlzKHRoaXMuY2xpZW50c01hcCk7XG4gICAgICAvL3doaWNoIGlkcyBhcmUgbmV3PyAoaW4gbWVzc2FnZS5jb250ZW50LmlkcyBidXQgbm90IGluIGNsaWVudHNNYXApXG4gICAgICBjb25zdCBuZXdDbGllbnRJZHMgPSBfLmRpZmZlcmVuY2UobWVzc2FnZS5jb250ZW50LmlkcywgY2xpZW50TWFwSWRzKTtcbiAgICAgIC8vd2hpY2ggaWRzIG5lZWQgdG8gYmUgcmVtb3ZlZD8gKGluIGNsaWVudHNNYXAgYnV0IG5vdCBpbiBtZXNzYWdlLmNvbnRlbnQuaWRzKVxuICAgICAgY29uc3QgcmVtb3ZlQ2xpZW50SWRzID0gXy5kaWZmZXJlbmNlKGNsaWVudE1hcElkcywgbWVzc2FnZS5jb250ZW50Lmlkcyk7XG4gICAgICAvL3VwZGF0ZSBvdXIgbWFwXG4gICAgICBuZXdDbGllbnRJZHMuZm9yRWFjaChmdW5jdGlvbihpZCl7XG4gICAgICAgIHRoaXMuY2xpZW50c01hcFtpZF0gPSB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIHJlYWN0aW9uU3BlZWQ6IDk5OTk5OTk5OTk5XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9zdFNvY2tldE1lc3NhZ2Uoe1xuICAgICAgICAgIHRhcmdldDoge1xuICAgICAgICAgICAgY2xpZW50OiBgbW9iaWxlYCxcbiAgICAgICAgICAgIHNsaWRlOiB0aGlzLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLlNFVF9TVUJTVEFURSxcbiAgICAgICAgICAgIHN1YnN0YXRlOiB0aGlzLnN1YnN0YXRlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgcmVtb3ZlQ2xpZW50SWRzLmZvckVhY2goZnVuY3Rpb24oaWQpe1xuICAgICAgICBpZih0aGlzLmNsaWVudHNNYXBbaWRdKSB7XG4gICAgICAgICAgLy90aGlzLmNsaWVudHNNYXBbaWRdLiRkaXYucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuY2xpZW50c01hcFtpZF07XG4gICAgICB9LCB0aGlzKTtcblxuICAgICAgdGhpcy5udW1DbGllbnRzQ2hhbmdlZCgpO1xuICAgIH0gZWxzZSBpZihtZXNzYWdlLmNvbnRlbnQuYWN0aW9uID09PSBDb25zdGFudHMuVVBEQVRFX1JFQUNUSU9OX1NQRUVEKSB7XG4gICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgIGlmKCFtZXNzYWdlLnNlbmRlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvL21lc3NhZ2Uuc2VuZGVyLmlkIGNvbnRhaW5zIHRoZSBvcmlnaW4gaWRcbiAgICAgIGlmKCF0aGlzLmNsaWVudHNNYXBbbWVzc2FnZS5zZW5kZXIuaWRdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGB1cGRhdGUgcmVhY3Rpb25zcGVlZCB0byAkeyAgbWVzc2FnZS5jb250ZW50LnJlYWN0aW9uU3BlZWR9YCk7XG4gICAgICB0aGlzLmNsaWVudHNNYXBbbWVzc2FnZS5zZW5kZXIuaWRdLnJlYWN0aW9uU3BlZWQgPSBtZXNzYWdlLmNvbnRlbnQucmVhY3Rpb25TcGVlZDtcbiAgICB9XG4gIH1cblxuICBzdGFydENsaWNrSGFuZGxlcigpIHtcbiAgICB0aGlzLnNldFN1YnN0YXRlKENvbnN0YW50cy5SRUFDVF9QSE9ORVNfR0FNRSk7XG4gIH1cblxuICB3aW5uZXJDbGlja0hhbmRsZXIoKSB7XG4gICAgLy9nZXQgdGhlIGNsaWVudGhhbmRsZXIgd2l0aCB0aGUgbGFyZ2VzdCBtb3Rpb24sIGFuZCBibGluayBpdCdzIHNjcmVlblxuICAgIGxldCB3aW5uaW5nQ2xpZW50ID0gZmFsc2U7XG4gICAgbGV0IHJlYWN0aW9uU3BlZWQgPSA5OTk5OTk5OTk5OTtcbiAgICBmb3IoY29uc3QgaWQgaW4gdGhpcy5jbGllbnRzTWFwKSB7XG4gICAgICBpZighdGhpcy5jbGllbnRzTWFwW2lkXS5zcGVlZFdpbm5lciAmJiB0aGlzLmNsaWVudHNNYXBbaWRdLnJlYWN0aW9uU3BlZWQgPCByZWFjdGlvblNwZWVkKSB7XG4gICAgICAgIHdpbm5pbmdDbGllbnQgPSB0aGlzLmNsaWVudHNNYXBbaWRdO1xuICAgICAgICByZWFjdGlvblNwZWVkID0gd2lubmluZ0NsaWVudC5yZWFjdGlvblNwZWVkO1xuICAgICAgfVxuICAgIH1cbiAgICBpZih3aW5uaW5nQ2xpZW50KSB7XG4gICAgICB3aW5uaW5nQ2xpZW50LnNwZWVkV2lubmVyID0gdHJ1ZTtcbiAgICAgIC8vc2VuZCBtZXNzYWdlIHRvIHRoaXMgY2xpZW50XG4gICAgICB0aGlzLnBvc3RTb2NrZXRNZXNzYWdlKHtcbiAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgY2xpZW50OiB3aW5uaW5nQ2xpZW50LmlkXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICBhY3Rpb246IENvbnN0YW50cy5CTElOSyxcbiAgICAgICAgICB0ZXh0OiBgPHNwYW4gc3R5bGU9XCJmb250LXNpemU6IDVlbTtcIj5TcGVjdGFjdWxhciwgWW91IFdpbiE8L3NwYW4+YCxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZWRgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0QWxsUmVhY3Rpb25TcGVlZHMoKSB7XG4gICAgZm9yKGNvbnN0IGlkIGluIHRoaXMuY2xpZW50c01hcCkge1xuICAgICAgdGhpcy5jbGllbnRzTWFwW2lkXS5yZWFjdGlvblNwZWVkID0gOTk5OTk5OTk5OTk7XG4gICAgICB0aGlzLmNsaWVudHNNYXBbaWRdLnNwZWVkV2lubmVyID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgbnVtQ2xpZW50c0NoYW5nZWQoKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgI2Nvbm5lY3Rpb25zIHNwYW5gKS50ZXh0KF8ua2V5cyh0aGlzLmNsaWVudHNNYXApLmxlbmd0aCk7XG4gIH1cblxuICBzaG93Q3VycmVudFN0YXRlKCkge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZWApLnJlbW92ZUNsYXNzKGBhY3RpdmVgKTtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc2xpZGVgKS5jc3Moe1xuICAgICAgYmFja2dyb3VuZEltYWdlOiBgbm9uZWBcbiAgICB9KTtcbiAgICBpZih0aGlzLnN1YnN0YXRlID09PSBDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0dBTUUpIHtcbiAgICAgIHRoaXMubXVzaWMucGxheSgpO1xuICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWdhbWUgLmNvdW50ZG93bmApLmh0bWwodGhpcy5nYW1lRHVyYXRpb24pO1xuICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWdhbWVgKS5hZGRDbGFzcyhgYWN0aXZlYCk7XG4gICAgICB0aGlzLmNvdW50RG93blRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY291bnREb3duSGFuZGxlci5iaW5kKHRoaXMsIHRoaXMuZ2FtZUR1cmF0aW9uIC0gMSksIDEwMDApO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YnN0YXRlID09PSBDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0ZJTklTSEVEKSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZmluaXNoZWRgKS5hZGRDbGFzcyhgYWN0aXZlYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zbGlkZWApLmNzcyh7XG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6IGBuby1yZXBlYXRgLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogYGNvbnRhaW5gLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IGBjZW50ZXIgY2VudGVyYCxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKGFzc2V0cy9pcGhvbmUtY29ubmVjdGlvbnMucG5nKWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWludHJvYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgIH1cbiAgfVxuXG4gIGNvdW50RG93bkhhbmRsZXIodGltZUxlZnQpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZ2FtZSAuY291bnRkb3duYCkuaHRtbCh0aW1lTGVmdCk7XG4gICAgaWYodGltZUxlZnQgPiAwKSB7XG4gICAgICB0aGlzLmNvdW50RG93blRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY291bnREb3duSGFuZGxlci5iaW5kKHRoaXMsIHRpbWVMZWZ0IC0gMSksIDEwMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN1YnN0YXRlKENvbnN0YW50cy5SRUFDVF9QSE9ORVNfRklOSVNIRUQpO1xuICAgIH1cbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaGFrZVlvdXJQaG9uZXNTbGlkZSBleHRlbmRzIENvbnRlbnRCYXNlIHtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuXG4gICAgdGhpcy5nYW1lRHVyYXRpb24gPSAxMzsgLy9nYW1lIGxhc3RzIDEzIHNlY29uZHNcbiAgICB0aGlzLmNsaWVudHNNYXAgPSB7fTtcbiAgICB0aGlzLmNsaWVudHNCeVRlYW0gPSBbXG4gICAgICBbXSxcbiAgICAgIFtdXG4gICAgXTtcbiAgICB0aGlzLm1vdGlvbnMgPSBbMCwgMF07XG4gICAgdGhpcy5tdXNpYyA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYCNtdXNpY2ApWzBdO1xuXG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgI2lwYCkudGV4dCh0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclVybCk7XG5cbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtaW50cm8gLmJ0bmApLm9uKGBjbGlja2AsIHRoaXMuc3RhcnRDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWZpbmlzaGVkIC5idG5gKS5vbihgY2xpY2tgLCB0aGlzLndpbm5lckNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMuc2V0U3Vic3RhdGUoQ29uc3RhbnRzLlNIQUtFX1lPVVJfUEhPTkVTX0lOVFJPKTtcbiAgfVxuXG4gIHNldFN1YnN0YXRlKHN1YnN0YXRlKSB7XG4gICAgaWYodGhpcy5zdWJzdGF0ZSAhPT0gc3Vic3RhdGUpIHtcbiAgICAgIHRoaXMuc3Vic3RhdGUgPSBzdWJzdGF0ZTtcbiAgICAgIC8vc2VuZCBzdWJzdGF0ZSB0byBtb2JpbGUgY2xpZW50c1xuICAgICAgdGhpcy5wb3N0U29ja2V0TWVzc2FnZSh7XG4gICAgICAgIHRhcmdldDoge1xuICAgICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICAgICAgc2xpZGU6IHRoaXMubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuU0VUX1NVQlNUQVRFLFxuICAgICAgICAgIHN1YnN0YXRlOiB0aGlzLnN1YnN0YXRlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlNIQUtFX1lPVVJfUEhPTkVTX0dBTUUpIHtcbiAgICAgICAgdGhpcy5yZXNldE1vdGlvbigpO1xuICAgICAgfVxuICAgICAgdGhpcy5zaG93Q3VycmVudFN0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcmVjZWl2ZVNvY2tldE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmKCFtZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gYHVwZGF0ZVJvb21MaXN0YCkge1xuICAgICAgLy9tZXNzYWdlLmNvbnRlbnQuaWRzIGlzIGFuIGFycmF5IHdpdGggaWRzIGluIHRoaXMgcm9vbVxuICAgICAgY29uc3QgY2xpZW50TWFwSWRzID0gXy5rZXlzKHRoaXMuY2xpZW50c01hcCk7XG4gICAgICAvL3doaWNoIGlkcyBhcmUgbmV3PyAoaW4gbWVzc2FnZS5jb250ZW50LmlkcyBidXQgbm90IGluIGNsaWVudHNNYXApXG4gICAgICBjb25zdCBuZXdDbGllbnRJZHMgPSBfLmRpZmZlcmVuY2UobWVzc2FnZS5jb250ZW50LmlkcywgY2xpZW50TWFwSWRzKTtcbiAgICAgIC8vd2hpY2ggaWRzIG5lZWQgdG8gYmUgcmVtb3ZlZD8gKGluIGNsaWVudHNNYXAgYnV0IG5vdCBpbiBtZXNzYWdlLmNvbnRlbnQuaWRzKVxuICAgICAgY29uc3QgcmVtb3ZlQ2xpZW50SWRzID0gXy5kaWZmZXJlbmNlKGNsaWVudE1hcElkcywgbWVzc2FnZS5jb250ZW50Lmlkcyk7XG4gICAgICAvL3VwZGF0ZSBvdXIgbWFwXG4gICAgICBuZXdDbGllbnRJZHMuZm9yRWFjaChmdW5jdGlvbihpZCl7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBjb25zdCB0b3AgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB0aGlzLmNsaWVudHNNYXBbaWRdID0ge1xuICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICBtb3Rpb246IDAsXG4gICAgICAgICAgc2l6ZTogMTAsXG4gICAgICAgICAgc2hha2VXaW5uZXI6IGZhbHNlLFxuICAgICAgICAgICRkaXY6ICQoYDxkaXY+YCkuY3NzKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBgYWJzb2x1dGVgLFxuICAgICAgICAgICAgbGVmdDogYCR7bGVmdCAqIDEwMH0lYCxcbiAgICAgICAgICAgIHRvcDogYCR7dG9wICogMTAwfSVgLFxuICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBgY2VudGVyYCxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHNjYWxlKDEpYCxcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogYDUwJWAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZ2JhKCR7ICBNYXRoLnJvdW5kKGxlZnQgKiAyNTUpICB9LCR7ICBNYXRoLnJvdW5kKHRvcCAqIDI1NSkgIH0sIDAsIDEpYCxcbiAgICAgICAgICAgIHdpZHRoOiBgMTBweGAsXG4gICAgICAgICAgICBoZWlnaHQ6IGAxMHB4YFxuICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgICQoYC5iYWNrZ3JvdW5kIC5zdWJzdGF0ZS1nYW1lYCkuYXBwZW5kKHRoaXMuY2xpZW50c01hcFtpZF0uJGRpdik7XG4gICAgICAgIHRoaXMucG9zdFNvY2tldE1lc3NhZ2Uoe1xuICAgICAgICAgIHRhcmdldDoge1xuICAgICAgICAgICAgY2xpZW50OiBgbW9iaWxlYCxcbiAgICAgICAgICAgIHNsaWRlOiB0aGlzLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLlNFVF9TVUJTVEFURSxcbiAgICAgICAgICAgIHN1YnN0YXRlOiB0aGlzLnN1YnN0YXRlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgcmVtb3ZlQ2xpZW50SWRzLmZvckVhY2goZnVuY3Rpb24oaWQpe1xuICAgICAgICBpZih0aGlzLmNsaWVudHNNYXBbaWRdKSB7XG4gICAgICAgICAgdGhpcy5jbGllbnRzTWFwW2lkXS4kZGl2LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNsaWVudHNNYXBbaWRdO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICAgIHRoaXMubnVtQ2xpZW50c0NoYW5nZWQoKTtcbiAgICB9IGVsc2UgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gQ29uc3RhbnRzLlVQREFURV9NT1RJT04pIHtcbiAgICAgIGlmKCFtZXNzYWdlLnNlbmRlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvL21lc3NhZ2Uuc2VuZGVyLmlkIGNvbnRhaW5zIHRoZSBvcmlnaW4gaWRcbiAgICAgIGlmKCF0aGlzLmNsaWVudHNNYXBbbWVzc2FnZS5zZW5kZXIuaWRdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xpZW50c01hcFttZXNzYWdlLnNlbmRlci5pZF0ubW90aW9uID0gTWF0aC5taW4oMTMwLCBtZXNzYWdlLmNvbnRlbnQubW90aW9uKTsgLy9saW1pdCBtYXggbW90aW9uIHRvIDEzMFxuICAgIH1cbiAgfVxuXG4gIHN0YXJ0Q2xpY2tIYW5kbGVyKCkge1xuICAgIHRoaXMuc2V0U3Vic3RhdGUoQ29uc3RhbnRzLlNIQUtFX1lPVVJfUEhPTkVTX0dBTUUpO1xuICB9XG5cbiAgd2lubmVyQ2xpY2tIYW5kbGVyKCkge1xuICAgIC8vZ2V0IHRoZSBjbGllbnRoYW5kbGVyIHdpdGggdGhlIGxhcmdlc3QgbW90aW9uLCBhbmQgYmxpbmsgaXQncyBzY3JlZW5cbiAgICBsZXQgd2lubmluZ0NsaWVudCA9IGZhbHNlO1xuICAgIGxldCBtYXhpbXVtTW90aW9uID0gLTE7XG4gICAgZm9yKGNvbnN0IGlkIGluIHRoaXMuY2xpZW50c01hcCkge1xuICAgICAgaWYoIXRoaXMuY2xpZW50c01hcFtpZF0uc2hha2VXaW5uZXIgJiYgdGhpcy5jbGllbnRzTWFwW2lkXS5tb3Rpb24gPiBtYXhpbXVtTW90aW9uKSB7XG4gICAgICAgIHdpbm5pbmdDbGllbnQgPSB0aGlzLmNsaWVudHNNYXBbaWRdO1xuICAgICAgICBtYXhpbXVtTW90aW9uID0gd2lubmluZ0NsaWVudC5tb3Rpb247XG4gICAgICB9XG4gICAgfVxuICAgIGlmKHdpbm5pbmdDbGllbnQpIHtcbiAgICAgIHdpbm5pbmdDbGllbnQuc2hha2VXaW5uZXIgPSB0cnVlO1xuICAgICAgLy9zZW5kIG1lc3NhZ2UgdG8gdGhpcyBjbGllbnRcbiAgICAgIHRoaXMucG9zdFNvY2tldE1lc3NhZ2Uoe1xuICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICBjbGllbnQ6IHdpbm5pbmdDbGllbnQuaWRcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLkJMSU5LLFxuICAgICAgICAgIHRleHQ6IGA8c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogNWVtO1wiPlNwZWN0YWN1bGFyLCBZb3UgV2luITwvc3Bhbj5gLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYHJlZGBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRNb3Rpb24oKSB7XG4gICAgdGhpcy5tb3Rpb25zID0gWzAsIDBdO1xuICAgIGZvcihjb25zdCBpZCBpbiB0aGlzLmNsaWVudHNNYXApIHtcbiAgICAgIHRoaXMuY2xpZW50c01hcFtpZF0ubW90aW9uID0gMDtcbiAgICAgIHRoaXMuY2xpZW50c01hcFtpZF0uc2hha2VXaW5uZXIgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBudW1DbGllbnRzQ2hhbmdlZCgpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAjY29ubmVjdGlvbnMgc3BhbmApLnRleHQoXy5rZXlzKHRoaXMuY2xpZW50c01hcCkubGVuZ3RoKTtcbiAgfVxuXG4gIHNob3dDdXJyZW50U3RhdGUoKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlYCkucmVtb3ZlQ2xhc3MoYGFjdGl2ZWApO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zbGlkZWApLmNzcyh7XG4gICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGBub25lYFxuICAgIH0pO1xuICAgIGlmKHRoaXMuc3Vic3RhdGUgPT09IENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19HQU1FKSB7XG4gICAgICB0aGlzLm11c2ljLnBsYXkoKTtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1nYW1lIC5jb3VudGRvd25gKS5odG1sKHRoaXMuZ2FtZUR1cmF0aW9uKTtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1nYW1lYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgICAgdGhpcy5jb3VudERvd25UaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNvdW50RG93bkhhbmRsZXIuYmluZCh0aGlzLCB0aGlzLmdhbWVEdXJhdGlvbiAtIDEpLCAxMDAwKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlNIQUtFX1lPVVJfUEhPTkVTX0ZJTklTSEVEKSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZmluaXNoZWRgKS5hZGRDbGFzcyhgYWN0aXZlYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zbGlkZWApLmNzcyh7XG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6IGBuby1yZXBlYXRgLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogYGNvbnRhaW5gLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IGBjZW50ZXIgY2VudGVyYCxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKGFzc2V0cy9pcGhvbmUtY29ubmVjdGlvbnMucG5nKWBcbiAgICAgIH0pO1xuICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWludHJvYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgIH1cbiAgfVxuXG4gIGNvdW50RG93bkhhbmRsZXIodGltZUxlZnQpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZ2FtZSAuY291bnRkb3duYCkuaHRtbCh0aW1lTGVmdCk7XG4gICAgaWYodGltZUxlZnQgPiAwKSB7XG4gICAgICB0aGlzLmNvdW50RG93blRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY291bnREb3duSGFuZGxlci5iaW5kKHRoaXMsIHRpbWVMZWZ0IC0gMSksIDEwMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN1YnN0YXRlKENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19GSU5JU0hFRCk7XG4gICAgfVxuICB9XG5cbiAgZHJhd0xvb3AoKSB7XG4gICAgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlNIQUtFX1lPVVJfUEhPTkVTX0dBTUUpIHtcbiAgICAgICQuZWFjaCh0aGlzLmNsaWVudHNNYXAsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBNYXRoLm1heCgxMCwgdmFsdWUubW90aW9uKTtcbiAgICAgICAgdmFsdWUuc2l6ZSArPSAodGFyZ2V0IC0gdmFsdWUuc2l6ZSkgKiAwLjI7XG4gICAgICAgIHZhbHVlLiRkaXYuY3NzKHtcbiAgICAgICAgICB0cmFuc2Zvcm06IGBzY2FsZSgke3ZhbHVlLnNpemV9KWBcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcblxuY29uc3QgZ2V0UGFyYW1ldGVyQnlOYW1lID0gKHVybCwgbmFtZSkgPT4ge1xuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXS8sIGBcXFxcW2ApLnJlcGxhY2UoL1tcXF1dLywgYFxcXFxdYCk7XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgW1xcXFw/Jl0keyAgbmFtZSAgfT0oW14mI10qKWApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gIHJldHVybiByZXN1bHRzID09IG51bGwgPyBgYCA6IGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCBgIGApKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZGVvU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMudmlkZW9QbGF5aW5nID0gZmFsc2U7XG4gICAgY29uc3QgdmlkZW9VcmwgPSBnZXRQYXJhbWV0ZXJCeU5hbWUodGhpcy5zcmMsIGB2aWRlb2ApO1xuXG4gICAgLy9jaGVjayBmb3IgZXh0cmEgY29uZmlnIGluIHRoZSBmaWxlbmFtZVxuICAgIGxldCBsb29wID0gZmFsc2U7XG4gICAgbGV0IG11dGVkID0gZmFsc2U7XG4gICAgY29uc3QgdmlkZW9VcmxTcGxpdHRlZCA9IHZpZGVvVXJsLnNwbGl0KGAuYCk7XG4gICAgdmlkZW9VcmxTcGxpdHRlZC5mb3JFYWNoKHBhcnQgPT4ge1xuICAgICAgaWYocGFydCA9PT0gYGxvb3BgKSB7XG4gICAgICAgIGxvb3AgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYocGFydCA9PT0gYG11dGVkYCkge1xuICAgICAgICBtdXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZGVvID0gdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgdmlkZW9gKVswXTtcbiAgICBpZihsb29wKSB7XG4gICAgICAkKHRoaXMudmlkZW8pLmF0dHIoYGxvb3BgLCBgbG9vcGApO1xuICAgIH1cbiAgICBpZihtdXRlZCkge1xuICAgICAgJCh0aGlzLnZpZGVvKS5hdHRyKGBtdXRlZGAsIGBtdXRlZGApO1xuICAgIH1cbiAgICAkKHRoaXMudmlkZW8pLmF0dHIoYHNyY2AsIHZpZGVvVXJsKTtcbiAgICB0aGlzLl9jbGlja0hhbmRsZXIgPSB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgICQodGhpcy52aWRlbykub24oYGNsaWNrYCwgdGhpcy5fY2xpY2tIYW5kbGVyKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgICQodGhpcy52aWRlbykub2ZmKGBjbGlja2AsIHRoaXMuX2NsaWNrSGFuZGxlcik7XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICB0aGlzLnNldFZpZGVvUGxheWluZyh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRWaWRlb1BsYXlpbmcoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGNsaWNrSGFuZGxlcihldmVudCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgdGhpcy50b2dnbGVWaWRlb1BsYXlpbmcoKTtcbiAgfVxuXG4gIHNldFZpZGVvUGxheWluZyh2YWx1ZSkge1xuICAgIGlmKHZhbHVlICE9PSB0aGlzLnZpZGVvUGxheWluZykge1xuICAgICAgdGhpcy52aWRlb1BsYXlpbmcgPSB2YWx1ZTtcbiAgICAgIGlmKHRoaXMudmlkZW9QbGF5aW5nKSB7XG4gICAgICAgIHRoaXMudmlkZW8ucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52aWRlby5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZVZpZGVvUGxheWluZygpIHtcbiAgICB0aGlzLnNldFZpZGVvUGxheWluZyghdGhpcy52aWRlb1BsYXlpbmcpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYnZpZXdTbGlkZSBleHRlbmRzIENvbnRlbnRCYXNlIHtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuXG4gICAgdGhpcy53ZWJ2aWV3TXV0ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMud2VidmlldyA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYHdlYnZpZXdgKVswXTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICB9XG5cbiAgcmVsb2FkKCkge1xuICAgIHRoaXMud2Vidmlldy5yZWxvYWQoKTtcbiAgfVxuXG4gIG9wZW5EZXZUb29scygpIHtcbiAgICB0aGlzLndlYnZpZXcub3BlbkRldlRvb2xzKCk7XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICB0aGlzLnNldFdlYnZpZXdNdXRlZChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0V2Vidmlld011dGVkKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHNldFdlYnZpZXdNdXRlZCh2YWx1ZSkge1xuICAgIGlmKHZhbHVlICE9PSB0aGlzLndlYnZpZXdNdXRlZCkge1xuICAgICAgdGhpcy53ZWJ2aWV3TXV0ZWQgPSB2YWx1ZTtcbiAgICAgIGlmICghdGhpcy53ZWJ2aWV3KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMud2Vidmlld011dGVkKSB7XG4gICAgICAgIHRoaXMud2Vidmlldy5zZXRBdWRpb011dGVkKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53ZWJ2aWV3LnNldEF1ZGlvTXV0ZWQoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG4iXX0="}