{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/browserify/lib/_empty.js","node_modules/es6-promise/dist/es6-promise.js","node_modules/events/events.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/process/browser.js","node_modules/whatwg-fetch/fetch.js","src/presentation/js/classes/HeartRateCanvas.js","src/presentation/js/classes/MobileServerBridge.js","src/presentation/js/classes/NodeAppRunner.js","src/presentation/js/classes/Presentation.js","src/presentation/js/classes/SlideBridge.js","src/presentation/js/classes/Webcam.js","src/presentation/js/classes/highest-heartrate-game-slide/game/Game.js","src/presentation/js/classes/highest-heartrate-game-slide/game/SparkHeartRatesPlugin.js","src/presentation/js/classes/highest-heartrate-game-slide/game/objects/Button.js","src/presentation/js/classes/highest-heartrate-game-slide/game/objects/Flagpole.js","src/presentation/js/classes/highest-heartrate-game-slide/game/objects/GameCharacter.js","src/presentation/js/classes/highest-heartrate-game-slide/game/states/Play.js","src/presentation/js/classes/highest-heartrate-game-slide/game/states/Preload.js","src/presentation/js/classes/live-code/CodeElement.js","src/presentation/js/classes/live-code/ConsoleElement.js","src/presentation/js/classes/live-code/TerminalElement.js","src/presentation/js/classes/live-code/WebPreviewElement.js","src/presentation/js/classes/live-code/WebcamElement.js","src/presentation/js/classes/live-code/index.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/objects/Beam.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/objects/GameCharacter.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/states/Play.js","src/presentation/js/classes/lowest-heartrate-game-slide/game/states/Preload.js","src/presentation/js/classes/sensors/PolarH7.js","src/presentation/js/script.js","src/server/classes/SlidesFolderParser.js","src/shared/js/Constants.js","src/shared/js/classes/MobileServerBridge.js","src/shared/js/classes/Presentation.js","src/shared/js/classes/SlideBridge.js","src/shared/js/classes/ContentBase.js","src/presentation/js/classes/heart-rate-slide/index.js","src/presentation/js/classes/highest-heartrate-game-slide/index.js","src/presentation/js/classes/live-code-slide/index.js","src/presentation/js/classes/lowest-heartrate-game-slide/index.js","src/presentation/js/classes/react-phones-slide/index.js","src/presentation/js/classes/shake-your-phones-slide/index.js","src/presentation/js/classes/video-slide/index.js","src/presentation/js/classes/webview-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACroCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;IC7cqB,e;AACnB,2BAAY,MAAZ,EAAoB;AAAA;;AAClB,SAAK,oBAAL,GAA4B,GAA5B;AACA,SAAK,OAAL,GAAe,CAAf;AACA,SAAK,GAAL,GAAW,EAAX;AACA,SAAK,SAAL,GAAiB,CAAjB;AACA,SAAK,eAAL,GAAuB,CAAvB;AACA,SAAK,mBAAL,GAA2B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","file":"script.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.1\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator$1(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate(input);\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nEnumerator$1.prototype._enumerate = function (input) {\n  for (var i = 0; this._state === PENDING && i < input.length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator$1.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$1 = c.resolve;\n\n  if (resolve$$1 === resolve$1) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise$2) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$1) {\n        return resolve$$1(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$1(entry), i);\n  }\n};\n\nEnumerator$1.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator$1.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all$1(entries) {\n  return new Enumerator$1(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race$1(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise$2(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise$2.all = all$1;\nPromise$2.race = race$1;\nPromise$2.resolve = resolve$1;\nPromise$2.reject = reject$1;\nPromise$2._setScheduler = setScheduler;\nPromise$2._setAsap = setAsap;\nPromise$2._asap = asap;\n\nPromise$2.prototype = {\n  constructor: Promise$2,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\n/*global self*/\nfunction polyfill$1() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise$2;\n}\n\n// Strange compat..\nPromise$2.polyfill = polyfill$1;\nPromise$2.Promise = Promise$2;\n\nreturn Promise$2;\n\n})));\n\n//# sourceMappingURL=es6-promise.map\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","export default class HeartRateCanvas {\n  constructor(canvas) {\n    this.pixelsPerBeatAt60BPM = 100;\n    this.frameNr = 0;\n    this.fps = 60;\n    this.numValues = 0;\n    this.numValuesMargin = 9;\n    this.numValuesWithMargin = 9;\n    this.heartRate = 0;\n    this.backgroundColor = `#fff`;\n    this.strokeColor = `#00f`;\n\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext(`2d`);\n    this.width = this.canvas.width;\n    this.height = this.canvas.height;\n    this._initSizeDependedVariables();\n\n    this.heartRateTickInterval = Math.round(this.fps * 60 / this.heartRate);\n  }\n\n  resize(w, h) {\n    this.width = this.canvas.width = w;\n    this.height = this.canvas.height = h;\n    this._initSizeDependedVariables();\n  }\n\n  _initSizeDependedVariables() {\n    this.numValues = Math.round(this.width * 0.80);\n    this.numValuesWithMargin = this.numValues + this.numValuesMargin;\n    if(!this.values) {\n      this.values = [];\n    }\n    this.values.length = this.numValuesWithMargin;\n    this.canvasVerticalCenter = this.height / 2;\n  }\n\n  tick() {\n    this.frameNr++;\n\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[0]));\n    for(let i = 1; i < this.numValues; i++) {\n      this.ctx.lineTo(i, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[i]));\n    }\n    this.ctx.strokeStyle = this.strokeColor;\n    this.ctx.stroke();\n    this.ctx.closePath();\n\n    this.ctx.beginPath();\n    this.ctx.arc(this.numValues - 1, this.canvasVerticalCenter - (this.canvasVerticalCenter * this.values[this.numValues - 1]), 2, 0, Math.PI * 2);\n    this.ctx.fillStyle = this.strokeColor;\n    this.ctx.fill();\n    this.ctx.closePath();\n\n    //does the tick align with a beat?\n    if(this.heartRate > 0 && this.frameNr % this.heartRateTickInterval === 0) {\n      this.frameNr = 0;//reset to zero\n      const strength = 0.7 + Math.random() * 0.3;\n      this.values[this.numValuesWithMargin - this.numValuesMargin - 1] = 0.05 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 0] = 0.1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 1] = 0.3 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 2] = 1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 3] = 0 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 4] = -1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 5] = -0.3 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 6] = -0.1 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 7] = -0.05 * strength;\n      this.values[this.numValuesWithMargin - this.numValuesMargin + 8] = 0 * strength;\n    }\n\n    this.values.shift();\n    this.values.shift();\n    this.values.push(Math.random() * 0.05 - 0.1);\n    this.values.push(Math.random() * 0.05 - 0.1);\n  }\n\n  updateHeartRate(heartRate) {\n    this.heartRate = heartRate;\n    if(this.heartRate > 0) {\n      this.heartRateTickInterval = Math.round(this.fps * 60 / this.heartRate);\n    }\n  }\n}\n","import MobileServerBridgeBase from '../../../shared/js/classes/MobileServerBridge';\nimport {Constants} from '../../../shared/js/Constants';\n\nexport default class MobileServerBridge extends MobileServerBridgeBase{\n\n  constructor(presentation, settings) {\n    super(presentation, settings);\n    bean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n  }\n\n  socketConnectHandler() {\n    super.socketConnectHandler();\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: `mobile`,\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: this.presentation.currentSlideIndex\n      }\n    });\n  }\n\n  currentSlideIndexChanged(currentSlideIndex) {\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: `mobile`,\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: currentSlideIndex\n      }\n    });\n  }\n\n}\n","const childProcess = requireNode(`child_process`);\nconst EventEmitter = requireNode(`events`).EventEmitter;\nconst path = requireNode(`path`);\n\nconst platform = requireNode(`electron`).remote.process.platform;\nconst isWin = /^win/.test(platform);\n\n//kill entire process tree\n//http://krasimirtsonev.com/blog/article/Nodejs-managing-child-processes-starting-stopping-exec-spawn\nconst kill = (pid, signal) => {\n  signal = signal || `SIGKILL`;\n  return new Promise(resolve => {\n    if(!isWin) {\n      const psTree = requireNode(`ps-tree`);\n      const killTree = true;\n      if(killTree) {\n        psTree(pid, (err, children) => {\n          [pid].concat(children.map(p => p.PID)).forEach(tpid => {\n            try { process.kill(tpid, signal); }\n            catch (ex) { console.error(ex); }\n          });\n        });\n      } else {\n        try { process.kill(pid, signal); }\n        catch (ex) { console.error(ex); }\n      }\n      resolve();\n    } else {\n      childProcess.exec(`taskkill /PID ${  pid  } /T /F`, () => {\n        resolve();\n      });\n    }\n  });\n};\n\nexport default class NodeAppRunner extends EventEmitter {\n  constructor() {\n    super();\n  }\n  run(applicationPath) {\n    return this.stop()\n    .then(() => {\n      this.cwd = path.dirname(applicationPath);\n      this.numDataEventsReceived = 0;\n      this.ignoreFirstEventsAmount = 0;\n      if(isWin) {\n        this.ignoreFirstEventsAmount = 2;\n        this.runner = childProcess.spawn(`cmd`, [`nvmw`, `use`, `iojs-v2.3.1`], {cwd: this.cwd});\n        setTimeout(() => {\n          this.runner.stdin.write(`node ${  applicationPath  }\\n`);\n        }, 500);\n      } else {\n        console.log(`node ${  applicationPath}`);\n        this.runner = childProcess.spawn(`node`, [applicationPath], {cwd: this.cwd});\n      }\n      this.runner.stdout.on(`data`, data => this.onRunnerData(data));\n      this.runner.stderr.on(`data`, error => this.onRunnerError(error));\n      this.runner.on(`disconnect`, () => this.onDisconnect());\n      this.runner.on(`close`, () => this.onClose());\n      this.runner.on(`exit`, () => this.onExit());\n    });\n  }\n  onRunnerData(data) {\n    this.numDataEventsReceived++;\n    if(this.numDataEventsReceived <= this.ignoreFirstEventsAmount) {\n      //ignore the first x-messages\n      return;\n    }\n    data = data.toString().trim();\n    if(data.indexOf(this.cwd) === 0) {\n      data = data.substr(this.cwd.length);\n      if(data.length === 1) {\n        return;\n      }\n    }\n    this.emit(`stdout-data`, data);\n  }\n\n  onRunnerError(error) {\n    this.emit(`stderr-data`, error.toString().trim());\n  }\n\n  onDisconnect() {\n    console.log(`[ChildApp] runner disconnected`);\n    this.runner = false;\n  }\n\n  onClose() {\n    console.log(`[ChildApp] runner closed`);\n    this.runner = false;\n  }\n\n  onExit() {\n    console.log(`[ChildApp] runner exited`);\n    this.runner = false;\n  }\n\n  stop() {\n    return new Promise(resolve => {\n      if(!this.runner) {\n        resolve();\n      }\n      this.runner.stdout.removeAllListeners();\n      this.runner.stderr.removeAllListeners();\n      this.runner.stdin.end();\n      //listen for runner events and resolve on the one that occurs\n      // const cbCalled = false;\n      // this.runner.on('disconnect', () => {\n      //   console.log('disconnect');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('close', () => {\n      //   console.log('close');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('exit', () => {\n      //   console.log('exit');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      kill(this.runner.pid).then(() => {\n        resolve();\n      });\n      this.runner = false;\n    });\n  }\n  destroy() {\n    return this.stop()\n    .then(() => {\n    });\n  }\n}\n","import {Constants} from '../../../shared/js/Constants';\nimport PresentationBase from '../../../shared/js/classes/Presentation';\nimport SlideBridge from './SlideBridge';\nimport MobileServerBridge from './MobileServerBridge';\n\nimport PolarH7 from './sensors/PolarH7';\nimport Webcam from './Webcam';\n\nconst path = requireNode(`path`);\n\nconst KEYCODE_LEFT = 37;\nconst KEYCODE_RIGHT = 39;\nconst KEYCODE_SPACE = 32;\n\nexport default class Presentation extends PresentationBase {\n  constructor(data, role, settings) {\n    super(data, role, settings);\n\n    this.polarH7 = new PolarH7();\n    this.polarH7.on(PolarH7.HEART_RATE, this.heartRatePolarHandler.bind(this));\n\n    this.webcam = new Webcam(document.getElementById(`webcam-video`));\n\n    window.onbeforeunload = event => this.closeHandler(event);\n    $(window).on(`keydown`, event => this.keydownHandler(event));\n    bean.on(this, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChangedHandler.bind(this));\n\n    $(`body`).on(Constants.GO_TO_PREVIOUS_SLIDE, this.goToPreviousSlide.bind(this));\n    $(`body`).on(Constants.GO_TO_NEXT_SLIDE, this.goToNextSlide.bind(this));\n    $(`body`).on(Constants.OPEN_COMMAND_LINE, this.openCommandLine.bind(this));\n    $(`body`).on(Constants.OPEN_CAMERA, this.openCamera.bind(this));\n  }\n\n  closeHandler(event) { // eslint-disable-line no-unused-vars\n  }\n\n  currentSlideIndexChangedHandler(slideIndex) { // eslint-disable-line no-unused-vars\n  }\n\n  createMobileServerBridge() {\n    return new MobileServerBridge(this, this.settings);\n  }\n\n  toggleElevatorMusic() {\n    this.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n    if(this.elevatorMusicPlaying) {\n      this.elevatorMusic.play();\n    } else {\n      this.elevatorMusic.pause();\n    }\n  }\n\n  //prepend urls with file:/// (faster?)\n  processSlideSrc(src) {\n    src = `file:///${  path.resolve(this.settings.presentationPath, src)}`;\n    src = src.replace(/\\\\/g, `/`);\n    return src;\n  }\n\n  createSlideBridges(data) {\n    PresentationBase.prototype.createSlideBridges.call(this, data);\n    const that = this;\n    const $slideMenu = $(`#slideMenu`);\n    const numSlideBridges = this.slideBridges.length;\n    for(let i = 0; i < numSlideBridges; i++) {\n      const slideBridge = this.slideBridges[i];\n      $slideMenu.append(`<button type=\"button\" data-slidenr=\"${  i  }\" class=\"dropdown-item\">${  i + 1  } ${  slideBridge.name  }</button>`);\n    }\n    $slideMenu.find(`button`).on(`click`, function(event){\n      event.preventDefault();\n      that.setCurrentSlideIndex(parseInt($(this).data(`slidenr`)));\n    });\n  }\n\n  createSlideBridge(slide) {\n    //use our own bridge which doesn't use fetch\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    PresentationBase.prototype.slideMessageHandler.call(this, event);\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.GO_TO_PREVIOUS_SLIDE:\n      this.goToPreviousSlide();\n      break;\n    case Constants.GO_TO_NEXT_SLIDE:\n      this.goToNextSlide();\n      break;\n    case Constants.OPEN_COMMAND_LINE:\n      this.openCommandLine();\n      break;\n    case Constants.OPEN_CAMERA:\n      this.openCamera();\n      break;\n    }\n  }\n\n  keydownHandler(event) {\n    //one frame delay\n    window.requestAnimationFrame(() => {\n      if(event.isImmediatePropagationStopped()) {\n        return;\n      }\n      switch(event.keyCode) {\n      case KEYCODE_LEFT:\n        this.goToPreviousSlide();\n        break;\n      case KEYCODE_RIGHT:\n        this.goToNextSlide();\n        break;\n      case KEYCODE_SPACE:\n        $(`#presentation-controls`).toggle();\n        break;\n      }\n    });\n  }\n\n  childAppDataHandler(data) {\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDOUT_DATA,\n        data: data\n      });\n    }\n  }\n\n  childAppErrorHandler(data) {\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDERR_DATA,\n        data: data\n      });\n    }\n  }\n\n  heartRatePolarHandler(heartRate) {\n    $(`#global-heart-rate`).text(heartRate);\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.HEART_RATE_POLAR,\n        heartRate: heartRate\n      });\n    }\n  }\n\n  openCommandLine() {\n    $(`#consoleModal`).modal(`show`);\n  }\n\n  openCamera() {\n    $(`#webcamModal`).modal(`show`);\n  }\n\n  handleMobileServerMessage(message) {\n    if(message.content) {\n      if(message.content.action === `goToNextSlide`) {\n        this.goToNextSlide();\n      } else if(message.content.action === `goToPreviousSlide`) {\n        this.goToPreviousSlide();\n      }\n    }\n  }\n}\n","import SlideBridgeBase from '../../../shared/js/classes/SlideBridge';\n\nexport default class SlideBridge extends SlideBridgeBase {\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    // console.log('attachToSlideHolder', src);\n    // console.log(slideHolder);\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if (src !== $(slideHolder).attr(`data-src`)) {\n      //create html import\n      const $importEl = $(`<link rel=\"import\">`);\n      const importEl = $importEl[0];\n      $importEl.on(`load`, () => {\n        const template = importEl.import.querySelector(`template`);\n        if(template) {\n          const clone = document.importNode(template.content, true);\n          this.slideHolder.appendChild(clone);\n        }\n        $importEl.remove();\n        $(slideHolder).removeClass(`loading`);\n        cb();\n      });\n      $importEl.attr(`href`, src);\n      $(slideHolder).attr(`data-src`, src);\n      $(slideHolder).html($importEl);\n    }\n  }\n}\n","const getCameraConfig = videoWidth => {\n  let sourceId = false;\n  return window.navigator.mediaDevices.enumerateDevices()\n    .then(devices => devices.filter(device => device.kind === `video`))\n    .then(devices => {\n      devices.forEach(device => {\n        console.log(device);\n        if(!sourceId || device.label.toLowerCase().indexOf(`facetime`) === -1) {\n          sourceId = device.deviceId;\n        }\n      });\n    })\n    .then(() => {\n      return {\n        video: {\n          optional: [\n            { sourceId },\n            { minWidth: videoWidth}\n          ]\n        }\n      };\n    });\n};\n\nexport default class Webcam {\n  constructor(video) {\n    this.video = video;\n    getCameraConfig(1280)\n      .then(config => window.navigator.mediaDevices.getUserMedia(config))\n      .then(stream => {\n        this.video.src = window.URL.createObjectURL(stream);\n        this.video.onloadedmetadata = () => {\n          this.video.width = this.video.videoWidth;\n          this.video.height = this.video.videoHeight;\n          this.video.play();\n        };\n      });\n  }\n}\n","import HeartRateCanvas from '../../HeartRateCanvas';\n\nimport SparkHeartRatesPlugin from './SparkHeartRatesPlugin';\n\nimport Preload from './states/Preload';\nimport Play from './states/Play';\n\nexport default class Game extends Phaser.Game {\n  constructor(slideHolder, width, height, renderMode, container) {\n    super(width, height, renderMode, container, { preload: () => this.preload()});\n    this.slideHolder = slideHolder;\n    this.state.add(`Preload`, Preload);\n    this.state.add(`Play`, Play);\n\n    this.player1HeartRateCanvas = new HeartRateCanvas(this.slideHolder.querySelector(`.player1-container canvas`));\n    this.player1HeartRateText = this.slideHolder.querySelector(`.player1-container .heartRate`);\n    this.player2HeartRateCanvas = new HeartRateCanvas(this.slideHolder.querySelector(`.player2-container canvas`));\n    this.player2HeartRateText = this.slideHolder.querySelector(`.player2-container .heartRate`);\n  }\n  preload() {\n    this.sparkHeartRatesPlugin = this.plugins.add(SparkHeartRatesPlugin);\n    this.onPause.add(() => this.manageSparkHeartRatesPluginConnection());\n    this.onResume.add(() => this.manageSparkHeartRatesPluginConnection());\n    this.manageSparkHeartRatesPluginConnection();\n    this.state.start(`Preload`);\n  }\n  update(time) {\n    super.update(time);\n    if(!this.sparkHeartRatesPlugin) {\n      return;\n    }\n    this.player1HeartRateCanvas.tick();\n    this.player1HeartRateCanvas.updateHeartRate(this.sparkHeartRatesPlugin.player1.heartRate);\n    this.player1HeartRateText.innerHTML = this.sparkHeartRatesPlugin.player1.heartRate;\n    this.player2HeartRateCanvas.tick();\n    this.player2HeartRateCanvas.updateHeartRate(this.sparkHeartRatesPlugin.player2.heartRate);\n    this.player2HeartRateText.innerHTML = this.sparkHeartRatesPlugin.player2.heartRate;\n  }\n  manageSparkHeartRatesPluginConnection() {\n    console.log(`[Game] manageSparkHeartRatesPluginConnection`);\n    if(this.paused) {\n      this.sparkHeartRatesPlugin.close();\n    } else {\n      this.sparkHeartRatesPlugin.connect();\n    }\n  }\n}\n","const PLAYER_1_SPARK_ID = `55ff70065075555332171787`; //red one\nconst PLAYER_2_SPARK_ID = `53ff73065075535143191387`; //blue one\n\nexport default class SparkHeartRatesPlugin extends Phaser.Plugin {\n  constructor(game, parent) {\n    super(game, parent);\n    this.connected = false;\n  }\n  init() {\n    console.log(`SparkHeartRatesPlugin Plugin init`);\n    this.player1 = {\n      sparkId: PLAYER_1_SPARK_ID,\n      heartRate: 0\n    };\n    this.player2 = {\n      sparkId: PLAYER_2_SPARK_ID,\n      heartRate: 0\n    };\n    this._udpErrorHandler = error => this.udpErrorHandler(error);\n    this._udpMessageHandler = (message, remoteInfo) => this.udpMessageHandler(message, remoteInfo);\n    this._udpListeningHandler = () => this.udpListeningHandler();\n  }\n  connect() {\n    if(this.connected) {\n      return;\n    }\n    console.log(`SparkHeartRatesPlugin connect`);\n    this.connected = true;\n    let dgram;\n    try {\n      dgram = (requireNode !== null) ? requireNode(`dgram`) : require(`dgram`);\n    } catch (e) {\n      console.error(e);\n    }\n    if(!dgram) {\n      return;\n    }\n    this.udpSocket = dgram.createSocket(`udp4`);\n    this.udpSocket.on(`error`, this._udpErrorHandler);\n    this.udpSocket.on(`message`, this._udpMessageHandler);\n    this.udpSocket.on(`listening`, this._udpListeningHandler);\n    this.udpSocket.bind(1234);\n  }\n  close() {\n    if(!this.connected) {\n      return;\n    }\n    console.log(`SparkHeartRatesPlugin close`);\n    this.connected = false;\n    if(!this.udpSocket) {\n      return;\n    }\n    this.udpSocket.removeListener(`error`, this._udpErrorHandler);\n    this.udpSocket.removeListener(`message`, this._udpMessageHandler);\n    this.udpSocket.removeListener(`listening`, this._udpListeningHandler);\n    this.udpSocket.close();\n    this.udpSocket = null;\n  }\n  udpErrorHandler(error) {\n    console.log(`[SparkHeartRatesPlugin] udpErrorHandler`, error);\n    this.udpSocket.close();\n  }\n  udpMessageHandler(message, remoteInfo) { // eslint-disable-line no-unused-vars\n    const str = message.toString();\n    const split = str.split(`;`);\n    if(split.length > 2) {\n      this.setHeartRate(split[0], split[2]);\n    }\n  }\n  udpListeningHandler() {\n    console.log(`[SparkHeartRatesPlugin] udpListening`);\n  }\n  setHeartRate(sparkId, heartRate) {\n    heartRate = parseInt(heartRate);\n    if(this.player1.sparkId === sparkId) {\n      this.player1.heartRate = heartRate;\n      return;\n    }\n    if(this.player2.sparkId === sparkId) {\n      this.player2.heartRate = heartRate;\n      return;\n    }\n  }\n  destroy() {\n    this.close();\n    super.destroy();\n  }\n}\n","export default class Button extends Phaser.Button {\n  constructor(game, x, y, callback, callbackContext, colorName, label) {\n    super(game, x, y, `components`, callback, callbackContext, `${colorName}-over`, `${colorName}-normal`, `${colorName}-down`);\n    this.labelField = new Phaser.Text(game, 0, 0, ``, {\n      font: `36px Arial`,\n      fill: `#ffffff`\n    });\n    this.labelField.anchor.setTo(0.5, 0.5);\n    this.addChild(this.labelField);\n    this.label = label;\n  }\n  set label(value) {\n    this.labelField.text = value;\n  }\n  get label() {\n    return this.labelField.text;\n  }\n}\n","export default class Flagpole extends Phaser.Group {\n  constructor(game, x, y) {\n    super(game);\n    this.x = x;\n    this.y = y;\n\n    this.pole = new Phaser.Sprite(this.game, 0, 0, `mario-graphics`, `flagpole.png`);\n    this.pole.anchor.setTo(0.5, 1);\n    this.add(this.pole);\n\n    this.flag = new Phaser.Sprite(this.game, 0, 0, `mario-graphics`, `flag-moving1.png`);\n    this.flag.anchor.setTo(0, 1);\n    this.flag.y = -this.pole.height + this.flag.height + 20;\n    this.flag.animations.add(`moving`, [\n      `flag-moving1.png`,\n      `flag-moving2.png`,\n      `flag-moving3.png`\n    ], 10, true, true);\n    this.flag.animations.play(`moving`);\n    this.add(this.flag);\n  }\n}\n","export default class GameCharacter extends Phaser.Sprite {\n  constructor(game, x, y, character) {\n    super(game, x, y, `mario-graphics`, `${character}-run-1.png`);\n    this.anchor.setTo(0.5, 1);\n    this.animations.add(`stand`, [\n      `${character}-run-1.png`,\n    ], 10, true, true);\n    this.animations.add(`run`, [\n      `${character}-run-1.png`,\n      `${character}-run-2.png`,\n      `${character}-run-3.png`,\n      `${character}-run-4.png`\n    ], 10, true, true);\n    this.animations.add(`jump`, [\n      `${character}-jump.png`\n    ], 10, true, true);\n    this.game.physics.arcade.enable(this);\n    this.body.gravity.y = 1000;\n  }\n  stand() {\n    this.animations.play(`stand`);\n    this.body.velocity.x = 0;\n  }\n  run(speed) {\n    this.body.velocity.x = speed;\n    this.animations.play(`run`);\n  }\n  jump() {\n    if(this.body.touching.down) {\n      this.animations.play(`jump`);\n      this.body.velocity.x = 100;\n      this.body.velocity.y = -750;\n    }\n  }\n}\n","import Button from '../objects/Button';\nimport GameCharacter from '../objects/GameCharacter';\nimport Flagpole from '../objects/Flagpole';\n\nconst SUBSTATE_INTRO = `intro`;\nconst SUBSTATE_PLAY = `play`;\nconst SUBSTATE_JUMP_POLE = `jump`;\nconst SUBSTATE_FINISHED = `finished`;\n\nconst WINNER_DISTANCE_POLE = 100;\n\nexport default class Play extends Phaser.State {\n  init() {\n    // if(!this.game.backgroundVideo) {\n    //   this.game.backgroundVideo = this.add.video('background-video');\n    //   this.game.backgroundVideo.play(true);\n    // }\n    // this.game.backgroundVideo.addToWorld();\n    this.cursors = this.input.keyboard.createCursorKeys();\n  }\n  create() {\n    this.createEnvironment();\n    this.createPlayers();\n    this.createButtons();\n\n    this.setSubState(SUBSTATE_INTRO);\n  }\n  createEnvironment() {\n    this.ground = this.add.tileSprite(0, this.world.height, this.world.width, 82, `mario-graphics`, `ground.png`);\n    this.ground.anchor.setTo(0, 1);\n    this.physics.arcade.enable(this.ground);\n    this.ground.body.immovable = true;\n\n    this.hills = this.add.tileSprite(0, this.world.height - 82, this.world.width, 428, `mario-graphics`, `hills.png`);\n    this.hills.anchor.setTo(0, 1);\n\n    this.flagpole = new Flagpole(this.game, this.world.width - 50, this.world.height - 82);\n    this.add.existing(this.flagpole);\n  }\n  createPlayers() {\n    this.peach = this.add.existing(new GameCharacter(this.game, 30, 10, `peach`));\n    this.mario = this.add.existing(new GameCharacter(this.game, 10, 10, `mario`));\n  }\n  createButtons() {\n    this.playButton = new Button(this.game, this.world.centerX, this.world.centerY, this.playClicked, this, `blue`, `Play`);\n    this.playButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.playButton);\n\n    this.stopButton = new Button(this.game, this.world.centerX, this.world.centerY, this.stopClicked, this, `blue`, `Stop`);\n    this.stopButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.stopButton);\n  }\n  update() {\n    this.physics.arcade.collide(this.ground, this.peach);\n    this.physics.arcade.collide(this.ground, this.mario);\n    if(this.subState === SUBSTATE_PLAY) {\n      this.updatePlayState();\n    } else if(this.subState === SUBSTATE_JUMP_POLE) {\n      this.updateJumpState();\n    } else if(this.subState === SUBSTATE_FINISHED) {\n      this.updateFinishedState();\n    }\n  }\n  updatePlayState() {\n    const distanceMario = this.flagpole.x - this.mario.x;\n    const distancePeach = this.flagpole.x - this.peach.x;\n    this.peach.run(this.game.sparkHeartRatesPlugin.player1.heartRate);\n    this.mario.run(this.game.sparkHeartRatesPlugin.player2.heartRate);\n    if(distanceMario < WINNER_DISTANCE_POLE || distancePeach < WINNER_DISTANCE_POLE) {\n      if(distanceMario < distancePeach) {\n        this.winner = this.mario;\n        this.loser = this.peach;\n      } else {\n        this.winner = this.peach;\n        this.loser = this.mario;\n      }\n      this.setSubState(SUBSTATE_JUMP_POLE);\n    }\n  }\n  updateJumpState() {\n    const distanceWinner = this.flagpole.x - this.winner.x;\n    if(distanceWinner <= 0) {\n      this.winner.body.velocity.x = 0;\n      this.setSubState(SUBSTATE_FINISHED);\n    }\n  }\n  updateFinishedState() {\n    this.flagpole.flag.y = this.winner.y - this.flagpole.y;\n  }\n  setSubState(value) {\n    this.subState = value;\n    this.playButton.visible = false;\n    this.stopButton.visible = false;\n    if(this.subState === SUBSTATE_PLAY) {\n      this.stopButton.visible = true;\n      // this.peach.run(100);\n      // this.mario.run(50);\n    } else if(this.subState === SUBSTATE_JUMP_POLE){\n      this.stopButton.visible = true;\n      this.loser.stand();\n      this.winner.jump();\n    } else if(this.subState === SUBSTATE_FINISHED){\n      this.playButton.visible = true;\n    } else {\n      this.playButton.visible = true;\n    }\n  }\n  playClicked() {\n    this.setSubState(SUBSTATE_PLAY);\n  }\n  stopClicked() {\n    this.state.start(`Play`);\n  }\n}\n","export default class Preload extends Phaser.State {\n  init() {\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.stage.backgroundColor = `#5088a0`;\n  }\n  preload() {\n    this.load.atlasJSONHash(`components`, `assets/mario/components.png`, `assets/mario/components.json`);\n    this.load.atlasJSONHash(`mario-graphics`, `assets/mario/mario-graphics.png`, `assets/mario/mario-graphics.json`);\n  }\n  create() {\n    this.state.start(`Play`);\n  }\n}\n","const fs = requireNode(`fs-extra`);\n\nexport default class CodeElement {\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options)\n    {\n      options = {};\n    }\n\n    const width = $(el).parent()[0].style.width || `100%`;\n    const height = $(el).parent()[0].style.height || `100%`;\n\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-code-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    this.file = this.$el.data(`file`);\n\n    if(!this.id && this.file)\n    {\n      this.id = this.file;\n    }\n    if(!this.id)\n    {\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n    }\n    this.$el.attr(`data-id`, this.id);\n\n    this.runtime = this.$el.data(`runtime`);\n    if(!this.runtime)\n    {\n      this.runtime = `browser`;\n    }\n\n    this.console = this.$el.data(`console`);\n    this.processor = this.$el.data(`processor`);\n\n    //language is programming language - used for injecting in html\n    this.language = this.$el.data(`language`);\n    if(!this.language)\n    {\n      //default to javascript\n      this.language = `javascript`;\n    }\n\n    //mode is mode for codemirror\n    this.mode = this.$el.data(`mode`);\n    if(!this.mode)\n    {\n      //default to the language\n      this.mode = this.language;\n    }\n\n    this.codeMirror = CodeMirror.fromTextArea(this.el, {\n      lineNumbers: true,\n      mode: this.mode,\n      extraKeys: {\"Ctrl-Space\": `autocomplete`}\n    });\n\n    this.codeMirror.setSize(width, height);\n\n    //this.$el.css('width', '100%').css('height', '100%');\n    this.layout();\n  }\n\n  pause() {\n    //no real reason to do pause / resume\n  }\n\n  resume() {\n    //no real reason to do pause / resume\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  getValue() {\n    return this.codeMirror.getValue();\n  }\n\n  setValue(value) {\n    this.codeMirror.setValue(value);\n  }\n\n  saveToFile(filePath) {\n    return fs.writeFile(filePath, this.getValue());\n  }\n\n  readFromFile(filePath) {\n    return fs.readFile(filePath, `utf8`)\n      .then(data => {\n        this.setValue(data);\n        return data;\n      })\n      .catch(e => {\n        this.setValue(``);\n        throw e;\n      });\n  }\n\n  layout() {\n    // this.$wrapperEl.find('.CodeMirror-scroll').css('max-height', this.$wrapperEl.css('height'));\n    this.codeMirror.refresh();\n  }\n}\n","import NodeAppRunner from '../NodeAppRunner';\n\nconst htmlEscape = str => {\n  return String(str).replace(/&/g, `&amp;`)\n    .replace(/\\\"/g, `&quot;`)\n    .replace(/'/g, `&#39;`)\n    .replace(/</g, `&lt;`)\n    .replace(/>/g, `&gt;`);\n};\n\nexport default class ConsoleElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    this.nodeAppRunner = new NodeAppRunner();\n    this.nodeAppRunner.on(`stdout-data`, data => this.info([data]));\n    this.nodeAppRunner.on(`stderr-data`, error => this.error([error]));\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-console-element unreset\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.file = this.$el.data(`file`);\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.logs = [];\n\n    this.isRunning = false;\n  }\n\n  pause() {\n    if(!this.isRunning) {\n      return;\n    }\n    this.isRunning = false;\n    this.nodeAppRunner.stop();\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    if(!this.applicationPath) {\n      return;\n    }\n    this.nodeAppRunner.run(this.applicationPath);\n    this.isRunning = true;\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  runNodeApp(applicationPath) {\n    this.pause();\n    this.applicationPath = applicationPath;\n    this.resume();\n  }\n\n  message(event) {\n    const str = htmlEscape(event.message);\n    let fileName = event.sourceId.split(`/`);\n    fileName = fileName[fileName.length - 1];\n    this.logs.push(`<div class=\"console-message\">\n      <pre class=\"console-message__content console-message__content--level${event.level}\">${  str  }</pre>\n      <div class=\"console-message__origin\">${fileName}:${event.line}</div>\n    </div>`);\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    const html = this.logs.join(``);\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  }\n}\n","const TERMINAL_URL = `http://localhost:3000`;\n\nexport default class TerminalElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    this._ipcMessageHandler = e => this.ipcMessageHandler(e);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-terminal-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.dir = this.$el.data(`dir`);\n    this.autorun = this.$el.data(`autorun`);\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.isRunning = false;\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n    //create a webview tag\n    if(this.webview) {\n      this.webview.removeEventListener(`ipc-message`, this._ipcMessageHandler);\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement(`webview`);\n    // this.webview.addEventListener('dom-ready', () => {\n    //   this.webview.openDevTools();\n    // });\n    this.webview.addEventListener(`ipc-message`, this._ipcMessageHandler);\n    this.webview.style.width = `100%`;\n    this.webview.style.height = `100%`;\n    this.webview.setAttribute(`nodeintegration`, ``);\n    this.webview.setAttribute(`src`, TERMINAL_URL);\n    this.el.appendChild(this.webview);\n  }\n\n  ipcMessageHandler(e) {\n    if(e.channel !== `message-from-terminal`) {\n      return;\n    }\n    if(e.args.length < 1) {\n      return;\n    }\n    const o = e.args[0];\n    if(!o.command) {\n      return;\n    }\n    switch(o.command) {\n    case `init`:\n      if(this.dir) {\n        this.executeCommand(`cd ${this.dir}`);\n        this.executeCommand(`clear`);\n      }\n      if(this.autorun) {\n        this.executeCommand(this.autorun);\n      }\n      break;\n    default:\n      console.warn(`unknow command object from terminal`);\n      console.warn(o);\n      break;\n    }\n  }\n\n  executeCommand(commandString) {\n    this.webview.send(`message-to-terminal`, {\n      command: `execute`,\n      value: commandString\n    });\n  }\n\n  destroy() {\n    this.pause();\n  }\n}\n","export default class WebPreviewElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options) {\n      options = {};\n    }\n\t\t//wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-web-preview-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n\t\t{\n\t\t\t//generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.file = this.$el.data(`file`) || this.$el.data(`url`);\n    this.autoload = this.$el.data(`autoload`) || false;\n    this.zoomfactor = this.$el.data(`zoomfactor`) || false;\n\n    this.console = this.$el.data(`console`) || false;\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.url = false;\n    this.blocks = false;\n    this.isRunning = false;\n\t\t//webview gets created by calling updateUrl or updateCode\n  }\n\n  get needsOutputPathPrefix() {\n    return !(this.$el.data(`url`));\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(this.webview) {\n      this.webview.removeEventListener(`did-get-response-details`, this._didGetResponseDetailsHandler);\n      this.webview.removeEventListener(`dom-ready`, this._domReadyHandler);\n      this.webview.removeEventListener(`did-fail-load`, this._didFailLoadHandler);\n      this.webview.removeEventListener(`ipc-message`, this._ipcMessageHandler);\n      this.webview.removeEventListener(`console-message`, this._consoleMessageHandler);\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n      clearTimeout(this.retryTimeout);\n    }\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    if(this.url === false && this.blocks === false) {\n      return;\n    }\n    this.isRunning = true;\n    this._createWebview();\n  }\n\n  _createWebview() {\n    //create a webview tag\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement(`webview`);\n    this.webview.style.width = `100%`;\n    this.webview.style.height = `100%`;\n    this.webview.preload = `js/livecode-webpreview.js`;\n    this.el.appendChild(this.webview);\n\n    const url = (this.url !== false) ? this.url : `webpreview.html`;\n    let htmlSrc = ``;\n    if(this.blocks !== false) {\n      for(let i = 0; i < this.blocks.length; i++)\n\t\t\t{\n        htmlSrc += this.blocks[i].code;\n      }\n    }\n\n\t\t//add listeners\n    this._didGetResponseDetailsHandler = e => {\n      if(e.originalURL !== this.webview.src) {\n        return;\n      }\n      if(this.$el.attr(`data-open-devtools`)) {\n        this.webview.openDevTools();\n      }\n    };\n    this.webview.addEventListener(`did-get-response-details`, this._didGetResponseDetailsHandler);\n\n    this._domReadyHandler = () => {\n      if (this.zoomfactor) {\n        const zoomfactor = parseFloat(this.zoomfactor);\n        this.webview.setZoomFactor(zoomfactor);\n      }\n    };\n    this.webview.addEventListener(`dom-ready`, this._domReadyHandler);\n\n    this._didFailLoadHandler = () => {\n      this.retryTimeout = setTimeout(() => {\n        this.pause();\n        this.resume();\n      }, 1000);\n    };\n    this.webview.addEventListener(`did-fail-load`, this._didFailLoadHandler);\n\n    this._consoleMessageHandler = e => {\n      this.$wrapperEl.trigger(`console-message`, e);\n    };\n    this.webview.addEventListener(`console-message`, this._consoleMessageHandler);\n\n    this._ipcMessageHandler = event => {\n      if(event.channel === `request-html`)\n      {\n        this.webview.send(`receive-html`, htmlSrc);\n      }\n    };\n    this.webview.addEventListener(`ipc-message`, this._ipcMessageHandler);\n\n    if(!this.$el.attr(`data-disable-nodeintegration`)) {\n      this.webview.setAttribute(`nodeintegration`, ``);\n    }\n    this.webview.setAttribute(`src`, url);\n  }\n\n  updateUrl(url) {\n    this.pause();\n    this.url = url;\n    this.blocks = false;\n    this.resume();\n  }\n\n  updateCode(blocks) {\n    this.pause();\n    this.url = false;\n    this.blocks = blocks;\n    this.resume();\n  }\n\n  openDevTools() {\n    this.webview.openDevTools();\n  }\n}\n","export default class WebcamElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `webcam-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.source = this.$el.attr(`data-source`);\n    if(this.source) {\n      this.sourceEl = document.querySelector(this.source);\n    }\n\n    this.ctx = this.el.getContext(`2d`);\n\n    this.isRunning = false;\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  pause() {\n    this.isRunning = false;\n    window.cancelAnimationFrame(this.animationFrameId);\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n    this.animationFrameId = window.requestAnimationFrame(() => this.drawLoop());\n  }\n\n  drawLoop() {\n    if(this.isRunning) {\n      window.requestAnimationFrame(() => this.drawLoop());\n    }\n    if(!this.sourceEl) {\n      return;\n    }\n    this.el.width = this.sourceEl.width;\n    this.el.height = this.sourceEl.height;\n    this.ctx.clearRect(0, 0, this.el.width, this.el.height);\n    this.ctx.drawImage(this.sourceEl, 0, 0);\n  }\n}\n","import ConsoleElement from './ConsoleElement';\nimport TerminalElement from './TerminalElement';\nimport CodeElement from './CodeElement';\nimport WebPreviewElement from './WebPreviewElement';\nimport WebcamElement from './WebcamElement';\n\nconst path = requireNode(`path`);\nconst fs = requireNode(`fs-extra`);\n\nexport default class LiveCode {\n\n  constructor($el, config, readyCallback) {\n    this.$el = $el;\n    this.el = this.$el[0];\n\n    if(this.$el.attr(`data-entry-path`)) {\n      this.entryPath = path.join(config.presentationPath, this.$el.attr(`data-entry-path`));\n    }\n    if(this.$el.attr(`data-output-path`)) {\n      this.outputPath = path.join(config.presentationPath, this.$el.attr(`data-output-path`));\n    } else {\n      if(this.entryPath) {\n        this.outputPath = this.entryPath;\n      }\n    }\n\n    const p = Promise.resolve();\n    p.then(() => {\n      if(this.entryPath && this.entryPath !== this.outputPath) {\n        return fs.copy(this.entryPath, this.outputPath);\n      }\n    })\n    .then(() => {\n      //create the consoles\n      this.consoleElements = {};\n      this.$el.find(`[data-type=\"console\"]`).each(((index, consoleEl) => this.createConsoleElement(consoleEl)));\n\n      //create the terminals\n      this.terminalElements = {};\n      this.$el.find(`[data-type=\"terminal\"]`).each(((index, terminalEl) => this.createTerminalElement(terminalEl)));\n\n      //create the previews\n      this.webPreviewElements = {};\n      this.$el.find(`[data-type=\"web-preview\"]`).each(((index, webPreviewEl) => this.createWebPreviewElement(webPreviewEl)));\n\n      //create the code editors\n      this.codeElements = {};\n      this.$el.find(`[data-type=\"code\"]`).each(((index, codeEl) => this.createCodeElement(codeEl)));\n\n      //create the webcam elements\n      this.webcamElements = {};\n      this.$el.find(`[data-type=\"webcam\"]`).each(((index, webcamEl) => this.createWebcamElement(webcamEl)));\n\n      //create run buttons\n      this.runButtonEls = [];\n      this.$el.find(`[data-type=\"run-button\"]`).each(((index, runButtonEl) => this.createRunButton(runButtonEl)));\n\n      //create save buttons\n      this.saveButtonEls = [];\n      this.$el.find(`[data-type=\"save-button\"]`).each(((index, saveButtonEl) => this.createSaveButton(saveButtonEl)));\n\n      //create reload buttons\n      this.reloadButtonEls = [];\n      this.$el.find(`[data-type=\"reload-button\"]`).each(((index, reloadButtonEl) => this.createReloadButton(reloadButtonEl)));\n\n      //create reload buttons\n      this.devToolsButtonEls = [];\n      this.$el.find(`[data-type=\"devtools-button\"]`).each(((index, devToolsButtonEl) => this.createDevToolsButton(devToolsButtonEl)));\n\n    })\n    .then(() => this.setCodeElementValuesFromFiles())\n    .then(() => {\n      this.loaded = true;\n      if(this.isRunning) {\n        this.isRunning = false;\n        this.resume();\n      }\n    })\n    .then(readyCallback).catch(err => console.log(err));\n\n    //disable keyboard bubbling up\n    $(window).on(`keydown`, event => this.keyDownHandler(event));\n  }\n\n  keyDownHandler(e) {\n    if(this.el.contains(document.activeElement)) {\n      e.stopImmediatePropagation();\n    }\n  }\n\n  /**\n   * return a previously created code element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the code element if found, otherwise returns false\n   */\n  getCodeElement(input) {\n    return this.getElement(this.codeElements, input);\n  }\n\n  /**\n   * return a previously created web preview element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the web preview element if found, otherwise returns false\n   */\n  getWebPreviewElement(input) {\n    return this.getElement(this.webPreviewElements, input);\n  }\n\n  getElement(elementsCollection, input) {\n    let propertyToCheck = `id`;\n    if(input.nodeName) {\n      propertyToCheck = `el`;\n    }\n    for(const key in elementsCollection)\n    {\n      if(elementsCollection[key][propertyToCheck] === input) {\n        return elementsCollection[key];\n      }\n    }\n    return false;\n  }\n\n  setCodeElementValueFromFile(codeElement, filePath) {\n    return codeElement.readFromFile(filePath);\n  }\n\n  saveCodeElementToFile(codeElement, filePath) {\n    return codeElement.saveToFile(filePath);\n  }\n\n  getFilePath(file) {\n    if(!file) {\n      return false;\n    }\n    if(this.outputPath) {\n      return path.join(this.outputPath, file);\n    }\n    return file;\n  }\n\n  getFilePathForCodeElement(codeElement) {\n    if(!codeElement.file) {\n      return false;\n    }\n    return this.getFilePath(codeElement.file);\n  }\n\n  setCodeElementValuesFromFiles() {\n    const tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.setCodeElementValueFromFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  autoStartWebpreviewElementsWhenNeeded() {\n    for(const key in this.webPreviewElements)\n    {\n      const webPreviewElement = this.webPreviewElements[key];\n      if(webPreviewElement.autoload) {\n        this.reloadWebPreviewElement(webPreviewElement);\n      }\n    }\n  }\n\n  saveCodeElementsToFiles() {\n    const tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.saveCodeElementToFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  destroy() {\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.destroyConsoleElement(this.consoleElements[key]);\n    }\n    for(key in this.terminalElements)\n    {\n      this.destroyTerminalElement(this.terminalElements[key]);\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.destroyWebPreviewElement(this.webPreviewElements[key]);\n    }\n    for(key in this.codeElements)\n    {\n      this.destroyCodeElement(this.codeElements[key]);\n    }\n    for(key in this.webcamElements)\n    {\n      this.destroyWebcamElement(this.webcamElements[key]);\n    }\n    this.runButtonEls.forEach(el => this.destroyRunButton(el));\n    this.saveButtonEls.forEach(el => this.destroySaveButton(el));\n    this.reloadButtonEls.forEach(el => this.destroyReloadButton(el));\n    this.devToolsButtonEls.forEach(el => this.destroyDevToolsButton(el));\n    //TODO: destroy the tmp directory for this instance\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(!this.loaded) {\n      return;\n    }\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].pause();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].pause();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].pause();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].pause();\n    }\n    for(key in this.webcamElements)\n    {\n      this.webcamElements[key].pause();\n    }\n  }\n\n  resume() {\n    this.isRunning = true;\n    if(!this.loaded) {\n      return;\n    }\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].resume();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].resume();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].resume();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].resume();\n    }\n    for(key in this.webcamElements)\n    {\n      this.webcamElements[key].resume();\n    }\n    this.autoStartWebpreviewElementsWhenNeeded();\n  }\n\n  layout() {\n    //might be triggered after split pane resize or tab switch\n    //codemirror instances need to be updated\n    for(const key in this.codeElements)\n    {\n      this.codeElements[key].layout();\n    }\n  }\n\n  createConsoleElement(consoleEl) {\n    const consoleElement = new ConsoleElement(consoleEl);\n    this.consoleElements[consoleElement.id] = consoleElement;\n  }\n\n  destroyConsoleElement(consoleElement) {\n    consoleElement.destroy();\n  }\n\n  createTerminalElement(terminalEl) {\n    const terminalElement = new TerminalElement(terminalEl);\n    this.terminalElements[terminalElement.id] = terminalElement;\n  }\n\n  destroyTerminalElement(terminalElement) {\n    terminalElement.destroy();\n  }\n\n  createWebPreviewElement(webPreviewEl) {\n    const webPreviewElement = new WebPreviewElement(webPreviewEl);\n    webPreviewElement.$wrapperEl.on(`console-message`, this.webPreviewConsoleMessageHandler.bind(this, webPreviewElement));\n    this.webPreviewElements[webPreviewElement.id] = webPreviewElement;\n  }\n\n  destroyWebPreviewElement(webPreviewElement) {\n    webPreviewElement.$wrapperEl.off(`console-message`);\n    webPreviewElement.destroy();\n  }\n\n  createCodeElement(codeEl) {\n    const codeElement = new CodeElement(codeEl);\n    this.codeElements[codeElement.id] = codeElement;\n  }\n\n  destroyCodeElement(codeElement) {\n    codeElement.destroy();\n  }\n\n  createWebcamElement(webcamEl) {\n    const webcamElement = new WebcamElement(webcamEl);\n    this.webcamElements[webcamElement.id] = webcamElement;\n  }\n\n  destroyWebcamElement(webcamElement) {\n    webcamElement.destroy();\n  }\n\n  createRunButton(runButtonEl) {\n    this.runButtonEls.push(runButtonEl);\n    $(runButtonEl).on(`click`, e => {\n      if(this.webPreviewElements[$(runButtonEl).data(`target`)]) {\n        //save the files first\n        this.saveCodeElementsToFiles()\n          .catch(err => console.log(err))\n          .then(() => {\n            //update the web preview\n            this.updateWebPreviewElement(this.webPreviewElements[$(runButtonEl).data(`target`)]);\n          });\n      } else if(this.consoleElements[$(runButtonEl).data(`target`)]) {\n        const applicationPath = this.getFilePath(this.consoleElements[$(runButtonEl).data(`target`)].file);\n        this.consoleElements[$(runButtonEl).data(`target`)].runNodeApp(applicationPath);\n      }\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    });\n  }\n\n  destroyRunButton(runButtonEl) {\n    $(runButtonEl).off(`click`);\n  }\n\n  createSaveButton(saveButtonEl) {\n    this.saveButtonEls.push(saveButtonEl);\n    $(saveButtonEl).on(`click`, e => {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      //get the target element for this button\n      const targetString = $(saveButtonEl).data(`target`);\n      if(targetString === `all`) {\n        return this.saveCodeElementsToFiles();\n      }\n      const codeElement = this.getCodeElement(targetString);\n      if(!codeElement) {\n        return;\n      }\n      const filePath = this.getFilePathForCodeElement(codeElement);\n      if(!filePath) {\n        return;\n      }\n      codeElement.saveToFile(filePath).catch(function(err) { console.log(err); });\n    });\n  }\n\n  destroySaveButton(saveButtonEl) {\n    $(saveButtonEl).off(`click`);\n  }\n\n  createReloadButton(reloadButtonEl) {\n    this.reloadButtonEls.push(reloadButtonEl);\n    $(reloadButtonEl).on(`click`, e => {\n      //get the reload button target\n      let reloadTargetElement = this.getCodeElement($(reloadButtonEl).data(`target`));\n      if(reloadTargetElement) {\n        this.reloadCodeElement(reloadTargetElement);\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n      reloadTargetElement = this.getWebPreviewElement($(reloadButtonEl).data(`target`));\n      if(reloadTargetElement) {\n        this.reloadWebPreviewElement(reloadTargetElement);\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n      // reload all elements\n      this.reloadAllCodeElements().then(() => this.reloadAllWebPreviewElements());\n    });\n  }\n\n  reloadAllCodeElements() {\n    const tasks = [];\n    for(const key in this.codeElements)\n    {\n      tasks.push(this.reloadCodeElement(this.codeElements[key]));\n    }\n    return Promise.all(tasks);\n  }\n\n  reloadCodeElement(codeElement) {\n    const filePath = this.getFilePathForCodeElement(codeElement);\n    if(!filePath) {\n      return;\n    }\n    return codeElement.readFromFile(filePath).catch(err => console.log(err));\n  }\n\n  reloadAllWebPreviewElements() {\n    const tasks = [];\n    for(const key in this.webPreviewElements)\n    {\n      tasks.push(this.reloadWebPreviewElement(this.webPreviewElements[key]));\n    }\n    return Promise.all(tasks);\n  }\n\n  reloadWebPreviewElement(webPreviewElement) {\n    return this.updateWebPreviewElement(webPreviewElement);\n  }\n\n  destroyReloadButton(reloadButtonEl) {\n    $(reloadButtonEl).off(`click`);\n  }\n\n  createDevToolsButton(devToolsButtonEl) {\n    this.devToolsButtonEls.push(devToolsButtonEl);\n    $(devToolsButtonEl).on(`click`, e => {\n      //get the target element for this button\n      const webPreviewElement = this.getWebPreviewElement($(devToolsButtonEl).data(`target`));\n      if (!webPreviewElement) {\n        return;\n      }\n      webPreviewElement.openDevTools();\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    });\n  }\n\n  destroyDevToolsButton(devToolsButtonEl) {\n    $(devToolsButtonEl).off(`click`);\n  }\n\n  webPreviewConsoleMessageHandler(webPreviewElement, jqEvent, event) {\n    //get the console element for this web preview\n    const consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.message(event);\n    }\n  }\n\n  getConsoleElementForWebPreview(webPreviewElement) {\n    return this.consoleElements[webPreviewElement.console];\n  }\n\n  getWebPreviewElementForCodeElement(codeElement) {\n    return this.webPreviewElements[codeElement.processor];\n  }\n\n  updateWebPreviewElement(webPreviewElement) {\n    //load a file or code blocks?\n    if(webPreviewElement.file) {\n      if(this.outputPath && webPreviewElement.needsOutputPathPrefix) {\n        return webPreviewElement.updateUrl(path.join(this.outputPath, webPreviewElement.file));\n      }\n      return webPreviewElement.updateUrl(webPreviewElement.file);\n    }\n\n    //gather all the code for this element\n    const blocks = [];\n    for(const key in this.codeElements)\n    {\n      const codeElement = this.codeElements[key];\n      if(codeElement.processor === webPreviewElement.id)\n      {\n        const block = {\n          language: codeElement.language,\n          code: codeElement.getValue()\n        };\n        blocks.push(block);\n      }\n    }\n    webPreviewElement.updateCode(blocks);\n  }\n\n}\n","export default class Beam extends Phaser.Group {\n  constructor(game, x, y, maxWidth) {\n    super(game);\n    this.x = x;\n    this.y = y;\n\n    this.data = {\n      maxWidth: maxWidth,\n      position: 0.5\n    };\n    this.beamEndLeft = this._createBeamEnd();\n    this.beamEndLeft.scale.setTo(-1, 1);\n    this.beamLeft = this._createBeam();\n    this.beamLeft.anchor.setTo(1, 0.5);\n\n    this.beamEndRight = this._createBeamEnd();\n    this.beamRight = this._createBeam();\n    this.beamRight.anchor.setTo(0, 0.5);\n  }\n  _createBeamEnd() {\n    const beamEnd = this.add(new Phaser.Sprite(this.game, 0, 0, `dragonball-graphics`, `beaming1.png`));\n    beamEnd.anchor.setTo(0.5, 0.5);\n    beamEnd.animations.add(`beaming`, [\n      `beaming1.png`,\n      `beaming2.png`,\n    ], 8, true, true);\n    beamEnd.animations.play(`beaming`);\n    return beamEnd;\n  }\n  _createBeam() {\n    const beam = this.add(new Phaser.TileSprite(this.game, 0, 0, 32, 32, `dragonball-graphics`, `beam.png`));\n    return beam;\n  }\n  set beamPosition(value) {\n    this.data.position = value;\n  }\n  get beamPosition() {\n    return this.data.position;\n  }\n  update() {\n    const beamCenter = this.data.maxWidth * this.data.position;\n    this.beamEndLeft.x = beamCenter - 20;\n    this.beamEndRight.x = beamCenter + 20;\n    this.beamLeft.x = this.beamEndLeft.x + 10;\n    this.beamRight.x = this.beamEndRight.x - 10;\n    this.beamLeft.width = beamCenter;\n    this.beamRight.width = this.data.maxWidth - beamCenter;\n  }\n}\n","export default class GameCharacter extends Phaser.Sprite {\n  constructor(game, x, y, character) {\n    super(game, x, y, `dragonball-graphics`, `${character}-standing1.png`);\n    this.anchor.setTo(0.5, 1);\n    if(character === `gohan`) {\n      this.scale.setTo(-1, 1);\n    }\n    this.animations.add(`stand`, [\n      `${character}-standing1.png`,\n      `${character}-standing2.png`,\n    ], 4, true, true);\n    this.animations.add(`fall`, [\n      `${character}-falling1.png`,\n      `${character}-falling2.png`,\n      `${character}-falling3.png`,\n      `${character}-falling4.png`,\n      `${character}-falling5.png`,\n      `${character}-falling6.png`,\n      `${character}-falling7.png`,\n    ], 10, false, true);\n    this.animations.add(`kameha`, [\n      `${character}-kameha1.png`\n    ], 10, true, true);\n\n    this.stand();\n  }\n  stand() {\n    this.animations.play(`stand`);\n  }\n  fall() {\n    this.animations.play(`fall`);\n  }\n  kameha() {\n    this.animations.play(`kameha`);\n  }\n}\n","import Button from '../objects/Button';\nimport GameCharacter from '../objects/GameCharacter';\nimport Beam from '../objects/Beam';\n\nconst SUBSTATE_INTRO = `intro`;\nconst SUBSTATE_PLAY = `play`;\nconst SUBSTATE_FALLING = `falling`;\nconst SUBSTATE_FINISHED = `finished`;\n\nconst BEAM_OFFSET = 143;\nconst MAX_HEARTRATE = 100;\n\nexport default class Play extends Phaser.State {\n  init() {\n    this.cursors = this.input.keyboard.createCursorKeys();\n  }\n  create() {\n    this.createEnvironment();\n    this.createPlayers();\n    this.createButtons();\n    this.createBeam();\n\n    this.setSubState(SUBSTATE_INTRO);\n  }\n  createEnvironment() {\n    this.background = this.add.sprite(this.world.centerX, this.world.height - 112, `dragonball-graphics`, `background.png`);\n    this.background.anchor.setTo(0.5, 1);\n\n    this.ground = this.add.sprite(this.world.centerX, this.world.height, `dragonball-graphics`, `floor.png`);\n    this.ground.anchor.setTo(0.5, 1);\n  }\n  createPlayers() {\n    this.goku = this.add.existing(new GameCharacter(this.game, 80, this.world.height, `goku`));\n    this.gohan = this.add.existing(new GameCharacter(this.game, this.world.width - 80, this.world.height, `gohan`));\n  }\n  createBeam() {\n    this.beam = this.add.existing(new Beam(this.game, BEAM_OFFSET, this.world.centerY + 210, this.world.width - BEAM_OFFSET * 2));\n  }\n  createButtons() {\n    this.playButton = new Button(this.game, this.world.centerX, this.world.centerY, this.playClicked, this, `blue`, `Play`);\n    this.playButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.playButton);\n\n    this.stopButton = new Button(this.game, this.world.centerX, this.world.centerY, this.stopClicked, this, `blue`, `Stop`);\n    this.stopButton.anchor.setTo(0.5, 0.5);\n    this.add.existing(this.stopButton);\n  }\n  update() {\n    if(this.subState === SUBSTATE_PLAY) {\n      this.updatePlayState();\n    } else if(this.subState === SUBSTATE_FINISHED) {\n      this.updateFinishedState();\n    }\n  }\n  updatePlayState() {\n    //update beamPosition according to heart rates\n    if(this.game.sparkHeartRatesPlugin.player1.heartRate > 0 && this.game.sparkHeartRatesPlugin.player2.heartRate > 0) {\n      const heartRateDiff = Math.min(MAX_HEARTRATE, this.game.sparkHeartRatesPlugin.player2.heartRate) - Math.min(MAX_HEARTRATE, this.game.sparkHeartRatesPlugin.player1.heartRate);\n      this.beam.beamPosition = this.beam.beamPosition + (heartRateDiff * 0.0002);\n    }\n    const position = this.beam.beamPosition;\n    if (position < 0.01) {\n      this.winner = this.gohan;\n      this.loser = this.goku;\n      this.add.tween(this.beam).to({x: -this.world.width}, 350, Phaser.Easing.Linear.NONE, true);\n    } else if (position > 0.99) {\n      this.winner = this.goku;\n      this.loser = this.gohan;\n      this.add.tween(this.beam).to({x: this.world.width}, 350, Phaser.Easing.Linear.NONE, true);\n    }\n    if(this.winner) {\n      this.winner.stand();\n      this.loser.fall();\n      this.setSubState(SUBSTATE_FALLING);\n      this.time.events.add(500, () => {\n        this.setSubState(SUBSTATE_FINISHED);\n      });\n    }\n  }\n  updateFinishedState() {\n  }\n  setSubState(value) {\n    this.subState = value;\n    this.playButton.visible = false;\n    this.stopButton.visible = false;\n    this.beam.visible = false;\n    this.beam.x = BEAM_OFFSET;\n    if(this.subState === SUBSTATE_PLAY) {\n      this.stopButton.visible = true;\n      this.beam.visible = true;\n      this.winner = false;\n      this.loser = false;\n      this.beam.beamPosition = 0.5;\n      this.goku.kameha();\n      this.gohan.kameha();\n    } else if(this.subState === SUBSTATE_FALLING){\n      this.beam.visible = true;\n      this.playButton.visible = true;\n    } else if(this.subState === SUBSTATE_FINISHED){\n      this.playButton.visible = true;\n    } else {\n      this.playButton.visible = true;\n      this.winner = false;\n      this.loser = false;\n      this.goku.stand();\n      this.gohan.stand();\n    }\n  }\n  playClicked() {\n    this.setSubState(SUBSTATE_PLAY);\n  }\n  stopClicked() {\n    this.state.start(`Play`);\n  }\n}\n","export default class Preload extends Phaser.State {\n  init() {\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.stage.backgroundColor = `#d87040`;\n  }\n  preload() {\n    this.load.atlasJSONHash(`components`, `assets/dragonball/components.png`, `assets/dragonball/components.json`);\n    this.load.atlasJSONHash(`dragonball-graphics`, `assets/dragonball/dragonball-graphics.png`, `assets/dragonball/dragonball-graphics.json`);\n  }\n  create() {\n    this.state.start(`Play`);\n  }\n}\n","import events from 'events';\n\nconst POLARH7_HRM_HEART_RATE_SERVICE_UUID = `180d`;\nconst POLARH7_HRM_MEASUREMENT_CHARACTERISTIC_UUID = `2a37`;\nconst serviceUUIDs = [POLARH7_HRM_HEART_RATE_SERVICE_UUID];\n\nexport default class PolarH7 extends events.EventEmitter {\n  constructor() {\n    super();\n\n    this.polarH7Peripheral = false;\n    this._stateChangeHandler = state => this.stateChangeHandler(state);\n    this._discoverHandler = peripheral => this.discoverHandler(peripheral);\n\n    this.noble = requireNode(`noble`);\n    this.noble.on(`stateChange`, this._stateChangeHandler);\n    this.noble.on(`discover`, this._discoverHandler);\n  }\n\n  stateChangeHandler(state) {\n    console.log(`[PolarH7] stateChange`, state);\n    this.emit(`stateChange`, state);\n    if(state === `poweredOn`) {\n      this.noble.startScanning(serviceUUIDs);\n    } else {\n      this.noble.stopScanning();\n    }\n  }\n\n  discoverHandler(peripheral) {\n    let foundSuitablePeripheral = false;\n    for (let i = peripheral.advertisement.serviceUuids.length - 1; i >= 0; i--) {\n      if(peripheral.advertisement.serviceUuids[i] === POLARH7_HRM_HEART_RATE_SERVICE_UUID) {\n        foundSuitablePeripheral = true;\n        break;\n      }\n    }\n    if(foundSuitablePeripheral) {\n      this.onFoundSuitablePeripheral(peripheral);\n    } else {\n      console.log(`[PolarH7] no suitable peripheral`);\n    }\n  }\n\n  onFoundSuitablePeripheral(peripheral) {\n    console.log(`[PolarH7]`, peripheral.advertisement.localName);\n    this.noble.stopScanning();\n    this.polarH7Peripheral = peripheral;\n    this.polarH7Peripheral.connect(error => this.onConnect(error));\n  }\n\n  onConnect(error) {\n    if(error) {\n      console.error(error);\n      return;\n    }\n    console.log(`[PolarH7] on connect`);\n    this.emit(`connect`);\n    this.polarH7Peripheral.discoverServices([], (error, services) => this.onPeripheralDiscoverServices(error, services));\n  }\n\n  onPeripheralDiscoverServices(error, services) {\n    console.log(`[PolarH7] onPeripheralDiscoverServices`);\n    for (let i = services.length - 1; i >= 0; i--) {\n      if(services[i].name) {\n        console.log(services[i].uuid, services[i].name);\n        services[i].discoverCharacteristics([], (error, characteristics) => this.onPeripheralServiceDiscoverCharacteristics(error, characteristics));\n      }\n    }\n  }\n\n  onPeripheralServiceDiscoverCharacteristics(error, characteristics) {\n    for (let i = characteristics.length - 1; i >= 0; i--) {\n      const characteristic = characteristics[i];\n      if(characteristic.uuid === POLARH7_HRM_MEASUREMENT_CHARACTERISTIC_UUID) {\n\t\t\t\t//console.log(\"HRM Characteristic\");\n        characteristic.on(`read`, (data, isNotification) => this.onHeartRateRead(data, isNotification));\n        characteristic.notify(true, error => (error) ? console.log(error) : true);\n      }\n    }\n  }\n\n  onHeartRateRead(data, isNotification) { // eslint-disable-line no-unused-vars\n    if((data[0] & 0x01) === 0) {\n      const heartRate = data[1];\n      if(heartRate) {\n        this.emit(PolarH7.HEART_RATE, heartRate);\n\t\t\t\t// var filePath = Config.heartRateFilePath;\n\t\t\t\t// fs.appendFile(filePath, new Date().getTime() + \":\" + heartRate + \"\\n\", function (err) {\n\t\t\t\t// \tconsole.log(err);\n\t\t\t\t// });\n      }\n    }\n  }\n}\n\nPolarH7.HEART_RATE = `heartRate`;\n","require(`es6-promise`).polyfill();\n\nimport Presentation from './classes/Presentation';\nimport SlidesFolderParser from '../../server/classes/SlidesFolderParser';\n\n(() => {\n\n  const remote = requireNode(`electron`).remote;\n  const presentationPath = remote.getGlobal(`__dirname`);\n  const path = requireNode(`path`);\n\n  const init = () => {\n    const settings = {\n      presentationPath: presentationPath,\n      // mobileServerUrl: 'https://jsworkout.herokuapp.com',\n      mobileServerUrl: `http://localhost:5000`,\n      mobileServerUsername: `wouter.verweirder@gmail.com`,\n      mobileServerPassword: `geheim`\n    };\n    const slidesFolderParser = new SlidesFolderParser();\n    slidesFolderParser.parse(presentationPath, path.resolve(presentationPath, `slides`))\n      .then(data => {\n        new Presentation(data, `presentation`, settings);\n      });\n  };\n\n  init();\n})();\n","let requireNode;\nif(!(typeof window !== `undefined` && window)) {\n  requireNode = require;\n} else {\n  requireNode = window.requireNode;\n}\n\nconst fs = requireNode(`fs-extra`);\nconst path = requireNode(`path`);\n\nconst getFileProperties = filePath => {\n  let _fd, _o;\n  return fs.open(filePath, `r`)\n    .then(fd => {\n      _fd = fd;\n      return fd;\n    })\n    .then(fd => fs.fstat(fd))\n    .then(o => {\n      _o = o;\n      return _o;\n    })\n    .then(() => fs.close(_fd))\n    .then(() => {\n      return {\n        path: filePath,\n        isDirectory: _o.isDirectory(),\n        isFile: _o.isFile()\n      };\n    });\n};\nexport default class SlidesFolderParser {\n  constructor() {\n  }\n  parse(presentationPath, slidesFolderPath) {\n    //read the contents of the slides directory\n    return fs.readdir(slidesFolderPath)\n      .then(result => result.filter(name => name.indexOf(`.`) > 0))\n      .then(result => result.map(name => path.resolve(slidesFolderPath, name)))\n      .then(result => Promise.all(result.map(filePath => getFileProperties(filePath))))\n      .then(result => {\n        const data = {\n          slides: []\n        };\n        const slidesByName = {};\n        result.forEach(props => {\n          const slide = this.createSlideObjectBasedOnFileProperties(props, presentationPath, slidesByName);\n          if(!slidesByName[slide.name]) {\n            data.slides.push(slide);\n          }\n          slidesByName[slide.name] = slide;\n        });\n        // console.log(data.slides);\n        return data;\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  }\n\n  parseSlideBaseName(slideBaseName) {\n    const parsed = {};\n    parsed.ext = path.extname(slideBaseName);\n    parsed.name = slideBaseName.substr(0, slideBaseName.length - parsed.ext.length);\n    const splitted = parsed.name.split(`.`);\n    const keywords = [`mobile`, `desktop`, `muted`, `loop`, `cover`];\n    keywords.forEach(keyword => {\n      const index = splitted.indexOf(keyword);\n      if(index > -1) {\n        parsed[keyword] = true;\n        splitted.splice(index, 1);\n      }\n    });\n    parsed.name = splitted.join(`.`);\n    return parsed;\n  }\n\n  createSlideObjectBasedOnFileProperties(fileProperties, presentationPath, slidesByName) {\n\n    const parsed = this.parseSlideBaseName(path.basename(fileProperties.path));\n    let url = path.relative(presentationPath, fileProperties.path).replace(`\\\\`, `/`);\n    if(parsed.ext === `.jpg` || parsed.ext === `.jpeg` || parsed.ext === `.gif` || parsed.ext === `.png`) {\n      url = `slides-builtin/image.html?image=${  url}`;\n    }\n    if(parsed.ext === `.mp4`) {\n      url = `slides-builtin/video.html?video=${  url}`;\n    }\n    if(slidesByName[parsed.name]) {\n      if(parsed.mobile) {\n        slidesByName[parsed.name].mobile.url = url;\n        slidesByName[parsed.name].mobile.explicit = true;\n      } else if(parsed.desktop) {\n        slidesByName[parsed.name].presentation.url = url;\n        slidesByName[parsed.name].presentation.explicit = true;\n      } else {\n        //set the one which is not set explicitly\n        if(slidesByName[parsed.name].mobile.explicit) {\n          slidesByName[parsed.name].presentation.url = url;\n        } else {\n          slidesByName[parsed.name].mobile.url = url;\n        }\n        return slidesByName[parsed.name];\n      }\n    }\n\n    return {\n      name: parsed.name,\n      presentation: {\n        url: url,\n        explicit: false\n      },\n      mobile: {\n        url: url,\n        explicit: false\n      }\n    };\n  }\n}\n","export const Constants = {\n  GO_TO_PREVIOUS_SLIDE: `goToPreviousSlide`,\n  GO_TO_NEXT_SLIDE: `goToNextSlide`,\n  SET_SLIDES: `setSlides`,\n  SET_CURRENT_SLIDE_INDEX: `setCurrentSlideIndex`,\n\n  MESSAGE: `message`,\n  SOCKET_SEND: `socketSend`,\n  SOCKET_RECEIVE: `socketReceive`,\n  JOIN_SLIDE_ROOM: `joinSlideRoom`,\n  LEAVE_SLIDE_ROOM: `leaveSlideRoom`,\n\n  ROLE_PRESENTATION: `presentation`,\n  ROLE_MOBILE: `mobile`,\n\n  STATE_ACTIVE: `active`,\n  STATE_INACTIVE: `inactive`,\n\n  SET_SUBSTATE: `setSubstate`,\n\n  CHILD_APP_SAVE_CODE: `childAppSaveCode`,\n  CHILD_APP_RUN_CODE: `childAppRunCode`,\n  CHILD_APP_STDOUT_DATA: `childAppStdoutData`,\n  CHILD_APP_STDERR_DATA: `childAppStderrData`,\n\n  OPEN_COMMAND_LINE: `openCommandLine`,\n  OPEN_CAMERA: `openCamera`,\n\n  BLINK: `blink`,\n\n  HEART_RATE_POLAR: `heartRatePolar`,\n\n  SET_TEAM: `setTeam`,\n  UPDATE_MOTION: `updateMotion`,\n\n  YOU_WIN: `youWin`,\n  YOU_LOSE: `youLose`,\n\n  SHAKE_YOUR_PHONES_INTRO: `shakeYourPhonesIntro`,\n  SHAKE_YOUR_PHONES_GAME: `shakeYourPhonesGame`,\n  SHAKE_YOUR_PHONES_FINISHED: `shakeYourPhonesFinished`,\n\n  SHAKE_YOUR_PHONES_CLIENT_ADDED: `shakeYourPhonesClientAdded`,\n  SHAKE_YOUR_PHONES_CLIENT_REMOVED: `shakeYourPhonesClientRemoved`,\n  SHAKE_YOUR_PHONES_CLIENT_LIST: `shakeYourPhonesClientList`,\n  SHAKE_YOUR_PHONES_CLIENT_UPDATE: `shakeYourPhonesClientUpdate`,\n\n  HIGHEST_HEARTRATE_GAME_INTRO: `highestHeartrateGameIntro`,\n  HIGHEST_HEARTRATE_GAME_GAME: `highestHeartrateGameGame`,\n  HIGHEST_HEARTRATE_GAME_FINISHED: `highestHeartrateGameFinished`,\n\n  LOWEST_HEARTRATE_GAME_INTRO: `lowestHeartrateGameIntro`,\n  LOWEST_HEARTRATE_GAME_GAME: `lowestHeartrateGameGame`,\n  LOWEST_HEARTRATE_GAME_FINISHED: `lowestHeartrateGameFinished`,\n\n  UPDATE_REACTION_SPEED: `updateReactionSpeed`,\n\n  REACT_PHONES_INTRO: `reactPhonesIntro`,\n  REACT_PHONES_GAME: `reactPhonesGame`,\n  REACT_PHONES_FINISHED: `reactPhonesFinished`,\n\n  DANCE_PAD_GAME_INTRO: `dancePadGameIntro`,\n  DANCE_PAD_GAME_GAME: `dancePadGameGame`,\n  DANCE_PAD_GAME_FINISHED: `dancePadGameFinished`,\n};\n","import fetch from 'isomorphic-fetch';\n\nexport default class MobileServerBridge {\n\n  constructor(presentation, settings) {\n    this.presentation = presentation;\n    this.settings = settings;\n    this.connect();\n  }\n\n  connect() {\n    console.log(`MobileServerBridge.connect`);\n    //console.warn('MobileServerBridge disabled');\n    //return;\n    //post to the api\n    fetch(`${this.settings.mobileServerUrl}/login`, {\n      method: `POST`,\n      body: JSON.stringify(this.getLoginCredentials()),\n      headers: new Headers({'Content-Type': `application/json`})\n    })\n    .then(response => response.json())\n    .then(result => this.loginHandler(result))\n    .catch(e => {\n      console.error(e);\n      setTimeout(() => this.connect(), 1000);\n    });\n  }\n\n  getLoginCredentials() {\n    return {\n      email: this.settings.mobileServerUsername,\n      password: this.settings.mobileServerPassword,\n    };\n  }\n\n  loginHandler(result) {\n    this.token = result.token;\n    this.socket = io(this.settings.mobileServerUrl, {\n      query: `token=${  this.token}`,\n      reconnection: false,\n      forceNew: true\n    });\n    this.socket.on(`connect`, this.socketConnectHandler.bind(this));\n    this.socket.on(`disconnect`, this.socketDisconnectHandler.bind(this));\n    this.socket.on(`message`, this.socketMessageHandler.bind(this));\n  }\n\n  socketConnectHandler() {\n    console.log(`MobileServerBridge.socketConnectHandler`);\n    this.presentation.mobileServerBridgeConnected();\n  }\n\n  socketDisconnectHandler() {\n    this.connect();\n  }\n\n  tryToSend() {\n    if(this.socket) {\n      this.socket.emit.apply(this.socket, arguments);\n    }\n  }\n\n  socketMessageHandler(message) {\n    this.presentation.mobileServerMessageHandler(message);\n  }\n}\n","import {Constants} from '../Constants';\nimport SlideBridge from './SlideBridge';\n\nexport default class Presentation {\n  /*\n   * data: json object with slides array property\n   * role: mobile or presentation\n   */\n  constructor(data, role, settings) {\n    this.data = data;\n    this.role = role;\n    this.settings = settings;\n    $(`#presentation`).attr(`data-presentation-settings`, JSON.stringify(settings));\n    this.currentSlideIndex = -1;\n    this.slideHolders = [];\n    this.numSlideHolders = 3;\n    this.slideBridges = [];\n    this.slideBridgesBySlideName = {};\n\n    this.createSlideHolders();\n    this.createSlideBridges(this.data);\n\n    this.mobileServerBridge = this.createMobileServerBridge();\n    this.startListeningForMessages();\n\n    this.setCurrentSlideIndex(0);\n  }\n\n  startListeningForMessages() {\n    window.addEventListener(`message`, this.slideMessageHandler.bind(this), false);\n  }\n\n  createSlideHolders() {\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      const $slideHolder = $(`<div class=\"slide-frame\" />`);\n      this.slideHolders.push($slideHolder);\n      $(`#presentation`).append($slideHolder);\n    }\n  }\n\n  createSlideBridges(data) {\n    const numSlides = data.slides.length;\n    for(let i = 0; i < numSlides; i++) {\n      const slideBridge = this.createSlideBridge(data.slides[i]);\n      this.slideBridges.push(slideBridge);\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\n    }\n  }\n\n  createSlideBridge(slide) {\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.SOCKET_SEND:\n      if(this.mobileServerBridge) {\n        this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n      }\n      break;\n    }\n  }\n\n  mobileServerBridgeConnected() {\n    //join the rooms of the slideHolders\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr(`data-name`));\n    }\n  }\n\n  mobileServerMessageHandler(message) {\n    if(message.target.slide) {\n      //slide has to handle the message\n      const slideBridge = this.getSlideBridgeByName(message.target.slide);\n      if(slideBridge) {\n        slideBridge.tryToPostMessage({\n          action: Constants.SOCKET_RECEIVE,\n          message: message\n        });\n      }\n    } else {\n      //presentation has to handle the message\n      this.handleMobileServerMessage(message);\n    }\n  }\n\n  handleMobileServerMessage(message) {\n    console.log(`[shared/Presentation] handleMobileServerMessage`, message);\n  }\n\n  getSlideBridgeByIndex(index) {\n    if(index >= 0 && index < this.slideBridges.length) {\n      return this.slideBridges[index];\n    }\n    return false;\n  }\n\n  getSlideBridgeByName(slideName) {\n    return this.slideBridgesBySlideName[slideName];\n  }\n\n  getSlideHolderForSlide(slide, slidesNotToClear) {\n    if(slide) {\n      let $slideHolder = $(`.slide-frame[data-name=\"${  slide.name  }\"]`);\n      if($slideHolder.length > 0) {\n        return $slideHolder[0];\n      }\n      //get a free slideHolder\n      const slideNamesNotToClear = [];\n      $(slidesNotToClear).each(function(index, obj){\n        slideNamesNotToClear.push(obj.name);\n      });\n      const $slideHolders = $(`.slide-frame`);\n      for (let i = $slideHolders.length - 1; i >= 0; i--) {\n        $slideHolder = $($slideHolders[i]);\n        const name = $slideHolder.attr(`data-name`);\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\n          return $slideHolder[0];\n        }\n      }\n    }\n    return false;\n  }\n\n  goToPreviousSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\n  }\n\n  goToNextSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\n  }\n\n  setCurrentSlideIndex(value) {\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\n    if(value !== this.currentSlideIndex) {\n      this.currentSlideIndex = value;\n\n      const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n      const previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\n      const nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\n\n      //remove \"used\" class from slide holders\n      $(`.slide-frame`).removeAttr(`data-used`, false);\n\n      const currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\n\n      const previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, `-100%`);\n\n      const nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, `100%`);\n\n      //clear attributes of unused slide frames\n      $(`.slide-frame`).each(function(index, slideHolder){\n        if(!$(slideHolder).attr(`data-used`)) {\n          $(slideHolder).removeAttr(`data-used`).removeAttr(`data-name`).removeAttr(`data-src`);\n        }\n      });\n\n      //all other slideHolder bridges should be unlinked from their slideHolder\n      this.slideBridges.forEach(function(slideBridge){\n        if(slideBridge === currentSlideBridge) {\n          return;\n        }\n        if(slideBridge === previousSlideBridge) {\n          return;\n        }\n        if(slideBridge === nextSlideBridge) {\n          return;\n        }\n        slideBridge.slideHolder = null;\n      });\n\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n    }\n  }\n\n  setupSlideHolder(slideHolder, slideBridge, state, left) {\n    if(slideHolder) {\n      let src = `slides/${  slideBridge.name  }.html`;\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\n        src = slideBridge.data[this.role].url;\n      }\n      src = this.processSlideSrc(src);\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\n        //console.log(slideBridge.name + ' already attached');\n      } else {\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\n      }\n      slideBridge.setState(state);\n      $(slideHolder).css(`left`, left);\n      $(slideHolder).attr(`data-used`, 1);\n    }\n  }\n\n  attachToSlideHolder(slideHolder, slideBridge, src) {\n    //listen for events on this slideHolder\n    $(slideHolder).off(`message-from-slide`);\n    $(slideHolder).on(`message-from-slide`, (event, message) =>  {\n      this.slideMessageHandler({data: message});\n    });\n    //leave previous channel of this slideHolder\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n    //add the join as a callback for the onload event\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\n  }\n\n  slideLoaded(slideHolder, slideBridge) { // eslint-disable-line no-unused-vars\n    //join new channel\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n  }\n\n  processSlideSrc(src) {\n    return src;\n  }\n\n  createMobileServerBridge() {\n    //to implement in extending classes\n  }\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class SlideBridge {\n  constructor(data) {\n    this.data = data;\n    this.name = this.data.name;\n  }\n\n  isAlreadyCorrectlyAttached(slideHolder, src) {\n    return (this.slideHolder === slideHolder && $(slideHolder).attr(`data-name`) === this.name && $(slideHolder).attr(`data-src`) === src);\n  }\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if(src !== $(slideHolder).attr(`data-src`)) {\n      //fetch the html\n      fetch(src)\n        .then(result => result.text())\n        .then(result => $(result))\n        .then($result => {\n          $(slideHolder).html($result.html());\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        })\n        .catch(err => {\n          console.error(err);\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        });\n      $(slideHolder).attr(`data-src`, src);\n    }\n  }\n\n  tryToPostMessage(message) {\n    if(!this.slideHolder)\n    {\n      console.log(`${this.name  } post fail`);\n      return;\n    }\n    //trigger with jquery\n    $(this.slideHolder).trigger(`message-to-slide`, message);\n  }\n\n  setState(state) {\n    this.state = state;\n    this.tryToPostMessage({\n      action: `setState`,\n      state: this.state\n    });\n  }\n}\n","import {Constants} from '../Constants';\n\nexport default class ContentBase{\n\n  constructor($slideHolder) {\n    this.$slideHolder = $slideHolder;\n    this.slideHolder = this.$slideHolder[0];\n    this.width = this.slideHolder.offsetWidth;\n    this.height = this.slideHolder.offsetHeight;\n    this.prevWidth = this.width;\n    this.prevHeight = this.height;\n    this.widthChanged = false;\n    this.heightChanged = false;\n    this.sizeChanged = false;\n    this.src = $slideHolder.attr(`data-src`);\n    this.name = $slideHolder.attr(`data-name`);\n    this.settings = {};\n    try {\n      this.settings = JSON.parse($(`#presentation`).attr(`data-presentation-settings`));\n    } catch (e) {\n      console.error(e);\n    }\n    this.fps = 60;\n    this._animationFrameId = false;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._interval = false;\n    this._lastTime = new Date().getTime();\n    this.currentFrame = 0;\n\n    this.startListeningForMessages();\n\n    this.__drawLoop = this._drawLoop.bind(this);\n    this._interval = 1000 / this.fps;\n\n    window.requestAnimationFrame(() => {\n      $slideHolder.trigger(`load`);\n    });\n  }\n\n  startListeningForMessages() {\n    this._slideHolderMessageToSlideHandler = this.slideHolderMessageToSlideHandler.bind(this);\n    this.$slideHolder.on(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  stopListeningForMessages() {\n    this.$slideHolder.off(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  slideHolderMessageToSlideHandler(event, message) {\n    this.receiveMessage({data: message});\n  }\n\n  receiveMessage(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case `setState`:\n      this.setState(event.data.state);\n      break;\n    case `destroy`:\n      this.destroy();\n      break;\n    case Constants.SOCKET_RECEIVE:\n      this.receiveSocketMessage(event.data.message);\n      break;\n    default:\n      this.handleMessage(event.data);\n      break;\n    }\n  }\n\n  destroy() {\n    this.stopListeningForMessages();\n    window.cancelAnimationFrame(this._animationFrameId);\n  }\n\n  postMessage(data) {\n    this.$slideHolder.trigger(`message-from-slide`, data);\n  }\n\n  handleMessage(data) { // eslint-disable-line no-unused-vars\n  }\n\n  postSocketMessage(message) {\n    this.postMessage({\n      action: Constants.SOCKET_SEND,\n      message: message\n    });\n  }\n\n  receiveSocketMessage(message) { // eslint-disable-line no-unused-vars\n  }\n\n  setState(state) {\n    if(state !== this.state) {\n      this.state = state;\n      this.onStateChanged();\n      if(this.state === Constants.STATE_ACTIVE) {\n        this.currentFrame = 0;\n        this._drawLoop();\n      } else {\n        window.cancelAnimationFrame(this._animationFrameId);\n      }\n    }\n  }\n\n  onStateChanged() {\n  }\n\n  _drawLoop() {\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n    this._currentTime = (new Date()).getTime();\n    this._delta = (this._currentTime - this._lastTime);\n    if(this._delta > this._interval) {\n      this.currentFrame++;\n      this.prevWidth = this.width;\n      this.prevHeight = this.height;\n      this.width = this.slideHolder.offsetWidth;\n      this.height = this.slideHolder.offsetHeight;\n      this.widthChanged = (this.width !== this.prevWidth);\n      this.heightChanged = (this.height !== this.prevHeight);\n      this.sizeChanged = (this.widthChanged || this.heightChanged);\n      this.drawLoop(this._delta);\n      this._lastTime = this._currentTime - (this._delta % this._interval);\n    }\n  }\n\n  drawLoop(delta) { // eslint-disable-line no-unused-vars\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\nimport HeartRateCanvas from '../HeartRateCanvas';\n\nexport default class HeartRateSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.heartRateCanvas = new HeartRateCanvas(this.slideHolder.querySelector(`canvas`));\n    this.heartRateCanvas.resize(this.width, this.height);\n  }\n\n  receiveMessage(event) {\n    super.receiveMessage(event);\n    if(event.data.action === Constants.HEART_RATE_POLAR) {\n      this.updateHeartRate(event.data.heartRate);\n    }\n  }\n\n  updateHeartRate(heartRate) {\n    this.heartRateCanvas.updateHeartRate(heartRate);\n    this.$slideHolder.find(`.heart-rate-text`).text(heartRate);\n  }\n\n  drawLoop() {\n    if(this.sizeChanged) {\n      this.heartRateCanvas.resize(this.width, this.height);\n    }\n    this.heartRateCanvas.tick();\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport Game from './game/Game';\n\nexport default class HighestHeartrateGameSlide extends ContentBase{\n\n  constructor($slideHolder) {\n    super($slideHolder);\n    this.game = new Game($slideHolder[0], 1280, 670, Phaser.AUTO, `highest-heartrate-game-container`);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.game.paused = false;\n    } else {\n      this.game.paused = true;\n    }\n  }\n\n  destroy() {\n    this.game.destroy();\n    super.destroy();\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport LiveCode from '../live-code';\n\nexport default class LiveCodeSlide extends ContentBase {\n\n  constructor($slideHolder, config, readyCallback) {\n    super($slideHolder);\n\n    const remote = requireNode(`electron`).remote;\n    const config2 = {...config, presentationPath: remote.getGlobal(`__dirname`)};\n\n    //find live code element\n    this.liveCode = new LiveCode(this.$slideHolder.find(`.live-code`), config2, readyCallback);\n  }\n\n  layout() {\n    this.liveCode.layout();\n  }\n\n  destroy() {\n    super.destroy();\n    this.liveCode.destroy();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.liveCode.resume();\n    } else {\n      //stop\n      this.liveCode.pause();\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport Game from './game/Game';\n\nexport default class LowestHeartrateGameSlide extends ContentBase{\n\n  constructor($slideHolder) {\n    super($slideHolder);\n    this.game = new Game($slideHolder[0], 1280, 670, Phaser.AUTO, `lowest-heartrate-game-container`);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.game.paused = false;\n    } else {\n      this.game.paused = true;\n    }\n  }\n\n  destroy() {\n    this.game.destroy();\n    super.destroy();\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class ReactPhonesSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.gameDuration = 11;\n    this.clientsMap = {};\n    this.music = $(`#music`)[0];\n\n    this.$slideHolder.find(`#ip`).text(this.settings.mobileServerUrl);\n\n    this.$slideHolder.find(`.substate-intro .btn`).on(`click`, this.startClickHandler.bind(this));\n    this.$slideHolder.find(`.substate-finished .btn`).on(`click`, this.winnerClickHandler.bind(this));\n\n    this.setSubstate(Constants.REACT_PHONES_INTRO);\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      //send substate to mobile clients\n      this.postSocketMessage({\n        target: {\n          client: `mobile`,\n          slide: this.name\n        },\n        content: {\n          action: Constants.SET_SUBSTATE,\n          substate: this.substate\n        }\n      });\n      if(this.substate === Constants.REACT_PHONES_GAME) {\n        this.resetAllReactionSpeeds();\n      }\n      this.showCurrentState();\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === `updateRoomList`) {\n      //message.content.ids is an array with ids in this room\n      const clientMapIds = _.keys(this.clientsMap);\n      //which ids are new? (in message.content.ids but not in clientsMap)\n      const newClientIds = _.difference(message.content.ids, clientMapIds);\n      //which ids need to be removed? (in clientsMap but not in message.content.ids)\n      const removeClientIds = _.difference(clientMapIds, message.content.ids);\n      //update our map\n      newClientIds.forEach(function(id){\n        this.clientsMap[id] = {\n          id: id,\n          reactionSpeed: 99999999999\n        };\n        this.postSocketMessage({\n          target: {\n            client: `mobile`,\n            slide: this.name\n          },\n          content: {\n            action: Constants.SET_SUBSTATE,\n            substate: this.substate\n          }\n        });\n      }, this);\n      removeClientIds.forEach(function(id){\n        if(this.clientsMap[id]) {\n          //this.clientsMap[id].$div.remove();\n        }\n        delete this.clientsMap[id];\n      }, this);\n\n      this.numClientsChanged();\n    } else if(message.content.action === Constants.UPDATE_REACTION_SPEED) {\n      console.log(message);\n      if(!message.sender) {\n        return;\n      }\n      //message.sender.id contains the origin id\n      if(!this.clientsMap[message.sender.id]) {\n        return;\n      }\n      console.log(`update reactionspeed to ${  message.content.reactionSpeed}`);\n      this.clientsMap[message.sender.id].reactionSpeed = message.content.reactionSpeed;\n    }\n  }\n\n  startClickHandler() {\n    this.setSubstate(Constants.REACT_PHONES_GAME);\n  }\n\n  winnerClickHandler() {\n    //get the clienthandler with the largest motion, and blink it's screen\n    let winningClient = false;\n    let reactionSpeed = 99999999999;\n    for(const id in this.clientsMap) {\n      if(!this.clientsMap[id].speedWinner && this.clientsMap[id].reactionSpeed < reactionSpeed) {\n        winningClient = this.clientsMap[id];\n        reactionSpeed = winningClient.reactionSpeed;\n      }\n    }\n    if(winningClient) {\n      winningClient.speedWinner = true;\n      //send message to this client\n      this.postSocketMessage({\n        target: {\n          client: winningClient.id\n        },\n        content: {\n          action: Constants.BLINK,\n          text: `<span style=\"font-size: 5em;\">Spectacular, You Win!</span>`,\n          backgroundColor: `red`\n        }\n      });\n    }\n  }\n\n  resetAllReactionSpeeds() {\n    for(const id in this.clientsMap) {\n      this.clientsMap[id].reactionSpeed = 99999999999;\n      this.clientsMap[id].speedWinner = false;\n    }\n  }\n\n  numClientsChanged() {\n    this.$slideHolder.find(`#connections span`).text(_.keys(this.clientsMap).length);\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find(`.substate`).removeClass(`active`);\n    this.$slideHolder.find(`.slide`).css({\n      backgroundImage: `none`\n    });\n    if(this.substate === Constants.REACT_PHONES_GAME) {\n      this.music.play();\n      this.$slideHolder.find(`.substate-game .countdown`).html(this.gameDuration);\n      this.$slideHolder.find(`.substate-game`).addClass(`active`);\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n    } else if(this.substate === Constants.REACT_PHONES_FINISHED) {\n      this.$slideHolder.find(`.substate-finished`).addClass(`active`);\n    } else {\n      this.$slideHolder.find(`.slide`).css({\n        backgroundRepeat: `no-repeat`,\n        backgroundSize: `contain`,\n        backgroundPosition: `center center`,\n        backgroundImage: `url(assets/iphone-connections.png)`\n      });\n      this.$slideHolder.find(`.substate-intro`).addClass(`active`);\n    }\n  }\n\n  countDownHandler(timeLeft) {\n    this.$slideHolder.find(`.substate-game .countdown`).html(timeLeft);\n    if(timeLeft > 0) {\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n    } else {\n      this.setSubstate(Constants.REACT_PHONES_FINISHED);\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class ShakeYourPhonesSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.gameDuration = 13; //game lasts 13 seconds\n    this.clientsMap = {};\n    this.clientsByTeam = [\n      [],\n      []\n    ];\n    this.motions = [0, 0];\n    this.music = this.$slideHolder.find(`#music`)[0];\n\n    this.$slideHolder.find(`#ip`).text(this.settings.mobileServerUrl);\n\n    this.$slideHolder.find(`.substate-intro .btn`).on(`click`, this.startClickHandler.bind(this));\n    this.$slideHolder.find(`.substate-finished .btn`).on(`click`, this.winnerClickHandler.bind(this));\n\n    this.setSubstate(Constants.SHAKE_YOUR_PHONES_INTRO);\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      //send substate to mobile clients\n      this.postSocketMessage({\n        target: {\n          client: `mobile`,\n          slide: this.name\n        },\n        content: {\n          action: Constants.SET_SUBSTATE,\n          substate: this.substate\n        }\n      });\n      if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n        this.resetMotion();\n      }\n      this.showCurrentState();\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === `updateRoomList`) {\n      //message.content.ids is an array with ids in this room\n      const clientMapIds = _.keys(this.clientsMap);\n      //which ids are new? (in message.content.ids but not in clientsMap)\n      const newClientIds = _.difference(message.content.ids, clientMapIds);\n      //which ids need to be removed? (in clientsMap but not in message.content.ids)\n      const removeClientIds = _.difference(clientMapIds, message.content.ids);\n      //update our map\n      newClientIds.forEach(function(id){\n        const left = Math.random();\n        const top = Math.random();\n        this.clientsMap[id] = {\n          id: id,\n          motion: 0,\n          size: 10,\n          shakeWinner: false,\n          $div: $(`<div>`).css({\n            position: `absolute`,\n            left: `${left * 100}%`,\n            top: `${top * 100}%`,\n            transformOrigin: `center`,\n            transform: `scale(1)`,\n            borderRadius: `50%`,\n            backgroundColor: `rgba(${  Math.round(left * 255)  },${  Math.round(top * 255)  }, 0, 1)`,\n            width: `10px`,\n            height: `10px`\n          })\n        };\n        $(`.background .substate-game`).append(this.clientsMap[id].$div);\n        this.postSocketMessage({\n          target: {\n            client: `mobile`,\n            slide: this.name\n          },\n          content: {\n            action: Constants.SET_SUBSTATE,\n            substate: this.substate\n          }\n        });\n      }, this);\n      removeClientIds.forEach(function(id){\n        if(this.clientsMap[id]) {\n          this.clientsMap[id].$div.remove();\n        }\n        delete this.clientsMap[id];\n      }, this);\n\n      this.numClientsChanged();\n    } else if(message.content.action === Constants.UPDATE_MOTION) {\n      if(!message.sender) {\n        return;\n      }\n      //message.sender.id contains the origin id\n      if(!this.clientsMap[message.sender.id]) {\n        return;\n      }\n      this.clientsMap[message.sender.id].motion = Math.min(130, message.content.motion); //limit max motion to 130\n    }\n  }\n\n  startClickHandler() {\n    this.setSubstate(Constants.SHAKE_YOUR_PHONES_GAME);\n  }\n\n  winnerClickHandler() {\n    //get the clienthandler with the largest motion, and blink it's screen\n    let winningClient = false;\n    let maximumMotion = -1;\n    for(const id in this.clientsMap) {\n      if(!this.clientsMap[id].shakeWinner && this.clientsMap[id].motion > maximumMotion) {\n        winningClient = this.clientsMap[id];\n        maximumMotion = winningClient.motion;\n      }\n    }\n    if(winningClient) {\n      winningClient.shakeWinner = true;\n      //send message to this client\n      this.postSocketMessage({\n        target: {\n          client: winningClient.id\n        },\n        content: {\n          action: Constants.BLINK,\n          text: `<span style=\"font-size: 5em;\">Spectacular, You Win!</span>`,\n          backgroundColor: `red`\n        }\n      });\n    }\n  }\n\n  resetMotion() {\n    this.motions = [0, 0];\n    for(const id in this.clientsMap) {\n      this.clientsMap[id].motion = 0;\n      this.clientsMap[id].shakeWinner = false;\n    }\n  }\n\n  numClientsChanged() {\n    this.$slideHolder.find(`#connections span`).text(_.keys(this.clientsMap).length);\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find(`.substate`).removeClass(`active`);\n    this.$slideHolder.find(`.slide`).css({\n      backgroundImage: `none`\n    });\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      this.music.play();\n      this.$slideHolder.find(`.substate-game .countdown`).html(this.gameDuration);\n      this.$slideHolder.find(`.substate-game`).addClass(`active`);\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, this.gameDuration - 1), 1000);\n    } else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\n      this.$slideHolder.find(`.substate-finished`).addClass(`active`);\n    } else {\n      this.$slideHolder.find(`.slide`).css({\n        backgroundRepeat: `no-repeat`,\n        backgroundSize: `contain`,\n        backgroundPosition: `center center`,\n        backgroundImage: `url(assets/iphone-connections.png)`\n      });\n      this.$slideHolder.find(`.substate-intro`).addClass(`active`);\n    }\n  }\n\n  countDownHandler(timeLeft) {\n    this.$slideHolder.find(`.substate-game .countdown`).html(timeLeft);\n    if(timeLeft > 0) {\n      this.countDownTimeout = setTimeout(this.countDownHandler.bind(this, timeLeft - 1), 1000);\n    } else {\n      this.setSubstate(Constants.SHAKE_YOUR_PHONES_FINISHED);\n    }\n  }\n\n  drawLoop() {\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      $.each(this.clientsMap, function(key, value){\n        const target = Math.max(10, value.motion);\n        value.size += (target - value.size) * 0.2;\n        value.$div.css({\n          transform: `scale(${value.size})`\n        });\n      });\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nconst getParameterByName = (url, name) => {\n  name = name.replace(/[\\[]/, `\\\\[`).replace(/[\\]]/, `\\\\]`);\n  const regex = new RegExp(`[\\\\?&]${  name  }=([^&#]*)`),\n    results = regex.exec(url);\n  return results == null ? `` : decodeURIComponent(results[1].replace(/\\+/g, ` `));\n};\n\nexport default class VideoSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.videoPlaying = false;\n    const videoUrl = getParameterByName(this.src, `video`);\n\n    //check for extra config in the filename\n    let loop = false;\n    let muted = false;\n    const videoUrlSplitted = videoUrl.split(`.`);\n    videoUrlSplitted.forEach(part => {\n      if(part === `loop`) {\n        loop = true;\n      }\n      if(part === `muted`) {\n        muted = true;\n      }\n    });\n\n    this.video = this.$slideHolder.find(`video`)[0];\n    if(loop) {\n      $(this.video).attr(`loop`, `loop`);\n    }\n    if(muted) {\n      $(this.video).attr(`muted`, `muted`);\n    }\n    $(this.video).attr(`src`, videoUrl);\n    this._clickHandler = this.clickHandler.bind(this);\n    $(this.video).on(`click`, this._clickHandler);\n  }\n\n  destroy() {\n    super.destroy();\n    $(this.video).off(`click`, this._clickHandler);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setVideoPlaying(true);\n    } else {\n      this.setVideoPlaying(false);\n    }\n  }\n\n  clickHandler(event) { // eslint-disable-line no-unused-vars\n    this.toggleVideoPlaying();\n  }\n\n  setVideoPlaying(value) {\n    if(value !== this.videoPlaying) {\n      this.videoPlaying = value;\n      if(this.videoPlaying) {\n        this.video.play();\n      } else {\n        this.video.pause();\n      }\n    }\n  }\n\n  toggleVideoPlaying() {\n    this.setVideoPlaying(!this.videoPlaying);\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class WebviewSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.webviewMuted = false;\n\n    this.webview = this.$slideHolder.find(`webview`)[0];\n  }\n\n  destroy() {\n    super.destroy();\n  }\n\n  reload() {\n    this.webview.reload();\n  }\n\n  openDevTools() {\n    this.webview.openDevTools();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setWebviewMuted(false);\n    } else {\n      this.setWebviewMuted(true);\n    }\n  }\n\n  setWebviewMuted(value) {\n    if(value !== this.webviewMuted) {\n      this.webviewMuted = value;\n      if (!this.webview) {\n        return;\n      }\n      if(this.webviewMuted) {\n        this.webview.setAudioMuted(true);\n      } else {\n        this.webview.setAudioMuted(false);\n      }\n    }\n  }\n\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9pc29tb3JwaGljLWZldGNoL2ZldGNoLW5wbS1icm93c2VyaWZ5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvSGVhcnRSYXRlQ2FudmFzLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL01vYmlsZVNlcnZlckJyaWRnZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9Ob2RlQXBwUnVubmVyLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbi5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9TbGlkZUJyaWRnZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9XZWJjYW0uanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL0dhbWUuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL1NwYXJrSGVhcnRSYXRlc1BsdWdpbi5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9oaWdoZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvb2JqZWN0cy9CdXR0b24uanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL29iamVjdHMvRmxhZ3BvbGUuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL29iamVjdHMvR2FtZUNoYXJhY3Rlci5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9oaWdoZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvc3RhdGVzL1BsYXkuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvaGlnaGVzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL3N0YXRlcy9QcmVsb2FkLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xpdmUtY29kZS9Db2RlRWxlbWVudC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUvQ29uc29sZUVsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL1Rlcm1pbmFsRWxlbWVudC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUvV2ViUHJldmlld0VsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL1dlYmNhbUVsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xvd2VzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9nYW1lL29iamVjdHMvQmVhbS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9sb3dlc3QtaGVhcnRyYXRlLWdhbWUtc2xpZGUvZ2FtZS9vYmplY3RzL0dhbWVDaGFyYWN0ZXIuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbG93ZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvc3RhdGVzL1BsYXkuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbG93ZXN0LWhlYXJ0cmF0ZS1nYW1lLXNsaWRlL2dhbWUvc3RhdGVzL1ByZWxvYWQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvc2Vuc29ycy9Qb2xhckg3LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9zY3JpcHQuanMiLCJzcmMvc2VydmVyL2NsYXNzZXMvU2xpZGVzRm9sZGVyUGFyc2VyLmpzIiwic3JjL3NoYXJlZC9qcy9Db25zdGFudHMuanMiLCJzcmMvc2hhcmVkL2pzL2NsYXNzZXMvTW9iaWxlU2VydmVyQnJpZGdlLmpzIiwic3JjL3NoYXJlZC9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbi5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9TbGlkZUJyaWRnZS5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9oZWFydC1yYXRlLXNsaWRlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2hpZ2hlc3QtaGVhcnRyYXRlLWdhbWUtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlLXNsaWRlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xvd2VzdC1oZWFydHJhdGUtZ2FtZS1zbGlkZS9pbmRleC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9yZWFjdC1waG9uZXMtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvc2hha2UteW91ci1waG9uZXMtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvdmlkZW8tc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvd2Vidmlldy1zbGlkZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNyb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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OztBQUVBLFVBQUssT0FBTCxHQUFlLE1BQUssWUFBTCxDQUFrQixJQUFsQixZQUFrQyxDQUFsQyxDQUFmO0FBTHdCO0FBTXpCOzs7OzhCQUVTO0FBQ1I7QUFDRDs7OzZCQUVRO0FBQ1AsV0FBSyxPQUFMLENBQWEsTUFBYjtBQUNEOzs7bUNBRWM7QUFDYixXQUFLLE9BQUwsQ0FBYSxZQUFiO0FBQ0Q7OztxQ0FFZ0I7QUFDZixVQUFHLEtBQUssS0FBTCxLQUFlLHFCQUFVLFlBQTVCLEVBQTBDO0FBQ3hDLGFBQUssZUFBTCxDQUFxQixLQUFyQjtBQUNELE9BRkQsTUFFTztBQUNMLGFBQUssZUFBTCxDQUFxQixJQUFyQjtBQUNEO0FBQ0Y7OztvQ0FFZSxLLEVBQU87QUFDckIsVUFBRyxVQUFVLEtBQUssWUFBbEIsRUFBZ0M7QUFDOUIsYUFBSyxZQUFMLEdBQW9CLEtBQXBCO0FBQ0EsWUFBSSxDQUFDLEtBQUssT0FBVixFQUFtQjtBQUNqQjtBQUNEO0FBQ0QsWUFBRyxLQUFLLFlBQVIsRUFBc0I7QUFDcEIsZUFBSyxPQUFMLENBQWEsYUFBYixDQUEyQixJQUEzQjtBQUNELFNBRkQsTUFFTztBQUNMLGVBQUssT0FBTCxDQUFhLGFBQWIsQ0FBMkIsS0FBM0I7QUFDRDtBQUNGO0FBQ0Y7Ozs7OztrQkExQ2tCLFkiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICA0LjEuMVxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgeDtcbiAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuXG52YXIgX2lzQXJyYXkgPSB1bmRlZmluZWQ7XG5pZiAoQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG59IGVsc2Uge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJDEgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlJDEpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkMSA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGlsZCA9IHVuZGVmaW5lZCxcbiAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkLFxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7XG4gIHRoaXMuZXJyb3IgPSBudWxsO1xufVxuXG52YXIgVFJZX0NBVENIX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXG4gICAgICBlcnJvciA9IHVuZGVmaW5lZCxcbiAgICAgIHN1Y2NlZWRlZCA9IHVuZGVmaW5lZCxcbiAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcblxuICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgdmFsdWUuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiBFbnVtZXJhdG9yJDEoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB0aGlzLl9lbnVtZXJhdGUoaW5wdXQpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59XG5cbkVudW1lcmF0b3IkMS5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvciQxLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7XG5cbiAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDIpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7XG4gICAgICB9KSwgaSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IkMS5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yJDEucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsJDEoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IkMSh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZSQxKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5mdW5jdGlvbiBQcm9taXNlJDIocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlJDIgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICB9XG59XG5cblByb21pc2UkMi5hbGwgPSBhbGwkMTtcblByb21pc2UkMi5yYWNlID0gcmFjZSQxO1xuUHJvbWlzZSQyLnJlc29sdmUgPSByZXNvbHZlJDE7XG5Qcm9taXNlJDIucmVqZWN0ID0gcmVqZWN0JDE7XG5Qcm9taXNlJDIuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblByb21pc2UkMi5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlJDIuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlJDIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSQyLFxuXG4gIC8qKlxuICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIENoYWluaW5nXG4gICAgLS0tLS0tLS1cbiAgXG4gICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgfSk7XG4gIFxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgIH0pO1xuICAgIGBgYFxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBc3NpbWlsYXRpb25cbiAgICAtLS0tLS0tLS0tLS1cbiAgXG4gICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgU2ltcGxlIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgcmVzdWx0O1xuICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgYXV0aG9yLCBib29rcztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICBcbiAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgXG4gICAgfVxuICBcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRBdXRob3IoKS5cbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgdGhlblxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICB0aGVuOiB0aGVuLFxuXG4gIC8qKlxuICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBcbiAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgIH1cbiAgXG4gICAgLy8gc3luY2hyb25vdXNcbiAgICB0cnkge1xuICAgICAgZmluZEF1dGhvcigpO1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH1cbiAgXG4gICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBjYXRjaFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9XG59O1xuXG4vKmdsb2JhbCBzZWxmKi9cbmZ1bmN0aW9uIHBvbHlmaWxsJDEoKSB7XG4gICAgdmFyIGxvY2FsID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gICAgaWYgKFApIHtcbiAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMjtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQyLnBvbHlmaWxsID0gcG9seWZpbGwkMTtcblByb21pc2UkMi5Qcm9taXNlID0gUHJvbWlzZSQyO1xuXG5yZXR1cm4gUHJvbWlzZSQyO1xuXG59KSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXBcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbiIsIi8vIHRoZSB3aGF0d2ctZmV0Y2ggcG9seWZpbGwgaW5zdGFsbHMgdGhlIGZldGNoKCkgZnVuY3Rpb25cbi8vIG9uIHRoZSBnbG9iYWwgb2JqZWN0ICh3aW5kb3cgb3Igc2VsZilcbi8vXG4vLyBSZXR1cm4gdGhhdCBhcyB0aGUgZXhwb3J0IGZvciB1c2UgaW4gV2VicGFjaywgQnJvd3NlcmlmeSBldGMuXG5yZXF1aXJlKCd3aGF0d2ctZmV0Y2gnKTtcbm1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaC5iaW5kKHNlbGYpO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIihmdW5jdGlvbihzZWxmKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAoc2VsZi5mZXRjaCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgICB2YXIgdmlld0NsYXNzZXMgPSBbXG4gICAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSdcbiAgICBdXG5cbiAgICB2YXIgaXNEYXRhVmlldyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG4gICAgfVxuXG4gICAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID0gQXJyYXlCdWZmZXIuaXNWaWV3IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICAgIH1cbiAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcmF0b3JcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge31cblxuICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgICAgfSwgdGhpcylcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdXG4gICAgdGhpcy5tYXBbbmFtZV0gPSBvbGRWYWx1ZSA/IG9sZFZhbHVlKycsJyt2YWx1ZSA6IHZhbHVlXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlckFzVGV4dChidWYpIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZilcbiAgICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3W2ldKVxuICAgIH1cbiAgICByZXR1cm4gY2hhcnMuam9pbignJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICAgIGlmIChidWYuc2xpY2UpIHtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYuYnl0ZUxlbmd0aClcbiAgICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpXG4gICAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBCb2R5KCkge1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcilcbiAgICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiAoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkgfHwgaXNBcnJheUJ1ZmZlclZpZXcoYm9keSkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gY29uc3VtZWQodGhpcykgfHwgUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblxuICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpXG4gICAgfVxuXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG4gICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSlcbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHsgYm9keTogdGhpcy5fYm9keUluaXQgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICByYXdIZWFkZXJzLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKVxuICAgICAgaWYgKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5qb2luKCc6JykudHJpbSgpXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gaGVhZGVyc1xuICB9XG5cbiAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge31cbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgICB0aGlzLnN0YXR1cyA9ICdzdGF0dXMnIGluIG9wdGlvbnMgPyBvcHRpb25zLnN0YXR1cyA6IDIwMFxuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSydcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuICB9XG5cbiAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICAgIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblxuICBSZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuICB9XG5cbiAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXG4gIHNlbGYuZmV0Y2ggPSBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpXG4gICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfVxuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgfSlcblxuICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcbiAgICB9KVxuICB9XG4gIHNlbGYuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFydFJhdGVDYW52YXMge1xuICBjb25zdHJ1Y3RvcihjYW52YXMpIHtcbiAgICB0aGlzLnBpeGVsc1BlckJlYXRBdDYwQlBNID0gMTAwO1xuICAgIHRoaXMuZnJhbWVOciA9IDA7XG4gICAgdGhpcy5mcHMgPSA2MDtcbiAgICB0aGlzLm51bVZhbHVlcyA9IDA7XG4gICAgdGhpcy5udW1WYWx1ZXNNYXJnaW4gPSA5O1xuICAgIHRoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiA9IDk7XG4gICAgdGhpcy5oZWFydFJhdGUgPSAwO1xuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gYCNmZmZgO1xuICAgIHRoaXMuc3Ryb2tlQ29sb3IgPSBgIzAwZmA7XG5cbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoYDJkYCk7XG4gICAgdGhpcy53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xuICAgIHRoaXMuX2luaXRTaXplRGVwZW5kZWRWYXJpYWJsZXMoKTtcblxuICAgIHRoaXMuaGVhcnRSYXRlVGlja0ludGVydmFsID0gTWF0aC5yb3VuZCh0aGlzLmZwcyAqIDYwIC8gdGhpcy5oZWFydFJhdGUpO1xuICB9XG5cbiAgcmVzaXplKHcsIGgpIHtcbiAgICB0aGlzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGggPSB3O1xuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICB0aGlzLl9pbml0U2l6ZURlcGVuZGVkVmFyaWFibGVzKCk7XG4gIH1cblxuICBfaW5pdFNpemVEZXBlbmRlZFZhcmlhYmxlcygpIHtcbiAgICB0aGlzLm51bVZhbHVlcyA9IE1hdGgucm91bmQodGhpcy53aWR0aCAqIDAuODApO1xuICAgIHRoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiA9IHRoaXMubnVtVmFsdWVzICsgdGhpcy5udW1WYWx1ZXNNYXJnaW47XG4gICAgaWYoIXRoaXMudmFsdWVzKSB7XG4gICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLnZhbHVlcy5sZW5ndGggPSB0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW47XG4gICAgdGhpcy5jYW52YXNWZXJ0aWNhbENlbnRlciA9IHRoaXMuaGVpZ2h0IC8gMjtcbiAgfVxuXG4gIHRpY2soKSB7XG4gICAgdGhpcy5mcmFtZU5yKys7XG5cbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY3R4Lm1vdmVUbygwLCB0aGlzLmNhbnZhc1ZlcnRpY2FsQ2VudGVyIC0gKHRoaXMuY2FudmFzVmVydGljYWxDZW50ZXIgKiB0aGlzLnZhbHVlc1swXSkpO1xuICAgIGZvcihsZXQgaSA9IDE7IGkgPCB0aGlzLm51bVZhbHVlczsgaSsrKSB7XG4gICAgICB0aGlzLmN0eC5saW5lVG8oaSwgdGhpcy5jYW52YXNWZXJ0aWNhbENlbnRlciAtICh0aGlzLmNhbnZhc1ZlcnRpY2FsQ2VudGVyICogdGhpcy52YWx1ZXNbaV0pKTtcbiAgICB9XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZUNvbG9yO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHguYXJjKHRoaXMubnVtVmFsdWVzIC0gMSwgdGhpcy5jYW52YXNWZXJ0aWNhbENlbnRlciAtICh0aGlzLmNhbnZhc1ZlcnRpY2FsQ2VudGVyICogdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXMgLSAxXSksIDIsIDAsIE1hdGguUEkgKiAyKTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLnN0cm9rZUNvbG9yO1xuICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcblxuICAgIC8vZG9lcyB0aGUgdGljayBhbGlnbiB3aXRoIGEgYmVhdD9cbiAgICBpZih0aGlzLmhlYXJ0UmF0ZSA+IDAgJiYgdGhpcy5mcmFtZU5yICUgdGhpcy5oZWFydFJhdGVUaWNrSW50ZXJ2YWwgPT09IDApIHtcbiAgICAgIHRoaXMuZnJhbWVOciA9IDA7Ly9yZXNldCB0byB6ZXJvXG4gICAgICBjb25zdCBzdHJlbmd0aCA9IDAuNyArIE1hdGgucmFuZG9tKCkgKiAwLjM7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiAtIDFdID0gMC4wNSAqIHN0cmVuZ3RoO1xuICAgICAgdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luIC0gdGhpcy5udW1WYWx1ZXNNYXJnaW4gKyAwXSA9IDAuMSAqIHN0cmVuZ3RoO1xuICAgICAgdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luIC0gdGhpcy5udW1WYWx1ZXNNYXJnaW4gKyAxXSA9IDAuMyAqIHN0cmVuZ3RoO1xuICAgICAgdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luIC0gdGhpcy5udW1WYWx1ZXNNYXJnaW4gKyAyXSA9IDEgKiBzdHJlbmd0aDtcbiAgICAgIHRoaXMudmFsdWVzW3RoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiAtIHRoaXMubnVtVmFsdWVzTWFyZ2luICsgM10gPSAwICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDRdID0gLTEgKiBzdHJlbmd0aDtcbiAgICAgIHRoaXMudmFsdWVzW3RoaXMubnVtVmFsdWVzV2l0aE1hcmdpbiAtIHRoaXMubnVtVmFsdWVzTWFyZ2luICsgNV0gPSAtMC4zICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDZdID0gLTAuMSAqIHN0cmVuZ3RoO1xuICAgICAgdGhpcy52YWx1ZXNbdGhpcy5udW1WYWx1ZXNXaXRoTWFyZ2luIC0gdGhpcy5udW1WYWx1ZXNNYXJnaW4gKyA3XSA9IC0wLjA1ICogc3RyZW5ndGg7XG4gICAgICB0aGlzLnZhbHVlc1t0aGlzLm51bVZhbHVlc1dpdGhNYXJnaW4gLSB0aGlzLm51bVZhbHVlc01hcmdpbiArIDhdID0gMCAqIHN0cmVuZ3RoO1xuICAgIH1cblxuICAgIHRoaXMudmFsdWVzLnNoaWZ0KCk7XG4gICAgdGhpcy52YWx1ZXMuc2hpZnQoKTtcbiAgICB0aGlzLnZhbHVlcy5wdXNoKE1hdGgucmFuZG9tKCkgKiAwLjA1IC0gMC4xKTtcbiAgICB0aGlzLnZhbHVlcy5wdXNoKE1hdGgucmFuZG9tKCkgKiAwLjA1IC0gMC4xKTtcbiAgfVxuXG4gIHVwZGF0ZUhlYXJ0UmF0ZShoZWFydFJhdGUpIHtcbiAgICB0aGlzLmhlYXJ0UmF0ZSA9IGhlYXJ0UmF0ZTtcbiAgICBpZih0aGlzLmhlYXJ0UmF0ZSA+IDApIHtcbiAgICAgIHRoaXMuaGVhcnRSYXRlVGlja0ludGVydmFsID0gTWF0aC5yb3VuZCh0aGlzLmZwcyAqIDYwIC8gdGhpcy5oZWFydFJhdGUpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IE1vYmlsZVNlcnZlckJyaWRnZUJhc2UgZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvTW9iaWxlU2VydmVyQnJpZGdlJztcbmltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9iaWxlU2VydmVyQnJpZGdlIGV4dGVuZHMgTW9iaWxlU2VydmVyQnJpZGdlQmFzZXtcblxuICBjb25zdHJ1Y3RvcihwcmVzZW50YXRpb24sIHNldHRpbmdzKSB7XG4gICAgc3VwZXIocHJlc2VudGF0aW9uLCBzZXR0aW5ncyk7XG4gICAgYmVhbi5vbih0aGlzLnByZXNlbnRhdGlvbiwgQ29uc3RhbnRzLlNFVF9DVVJSRU5UX1NMSURFX0lOREVYLCB0aGlzLmN1cnJlbnRTbGlkZUluZGV4Q2hhbmdlZC5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHNvY2tldENvbm5lY3RIYW5kbGVyKCkge1xuICAgIHN1cGVyLnNvY2tldENvbm5lY3RIYW5kbGVyKCk7XG4gICAgdGhpcy50cnlUb1NlbmQoQ29uc3RhbnRzLk1FU1NBR0UsIHtcbiAgICAgIHRhcmdldDoge1xuICAgICAgICBjbGllbnQ6IGBtb2JpbGVgLFxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsXG4gICAgICAgIGN1cnJlbnRTbGlkZUluZGV4OiB0aGlzLnByZXNlbnRhdGlvbi5jdXJyZW50U2xpZGVJbmRleFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY3VycmVudFNsaWRlSW5kZXhDaGFuZ2VkKGN1cnJlbnRTbGlkZUluZGV4KSB7XG4gICAgdGhpcy50cnlUb1NlbmQoQ29uc3RhbnRzLk1FU1NBR0UsIHtcbiAgICAgIHRhcmdldDoge1xuICAgICAgICBjbGllbnQ6IGBtb2JpbGVgLFxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsXG4gICAgICAgIGN1cnJlbnRTbGlkZUluZGV4OiBjdXJyZW50U2xpZGVJbmRleFxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbn1cbiIsImNvbnN0IGNoaWxkUHJvY2VzcyA9IHJlcXVpcmVOb2RlKGBjaGlsZF9wcm9jZXNzYCk7XG5jb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlTm9kZShgZXZlbnRzYCkuRXZlbnRFbWl0dGVyO1xuY29uc3QgcGF0aCA9IHJlcXVpcmVOb2RlKGBwYXRoYCk7XG5cbmNvbnN0IHBsYXRmb3JtID0gcmVxdWlyZU5vZGUoYGVsZWN0cm9uYCkucmVtb3RlLnByb2Nlc3MucGxhdGZvcm07XG5jb25zdCBpc1dpbiA9IC9ed2luLy50ZXN0KHBsYXRmb3JtKTtcblxuLy9raWxsIGVudGlyZSBwcm9jZXNzIHRyZWVcbi8vaHR0cDovL2tyYXNpbWlydHNvbmV2LmNvbS9ibG9nL2FydGljbGUvTm9kZWpzLW1hbmFnaW5nLWNoaWxkLXByb2Nlc3Nlcy1zdGFydGluZy1zdG9wcGluZy1leGVjLXNwYXduXG5jb25zdCBraWxsID0gKHBpZCwgc2lnbmFsKSA9PiB7XG4gIHNpZ25hbCA9IHNpZ25hbCB8fCBgU0lHS0lMTGA7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBpZighaXNXaW4pIHtcbiAgICAgIGNvbnN0IHBzVHJlZSA9IHJlcXVpcmVOb2RlKGBwcy10cmVlYCk7XG4gICAgICBjb25zdCBraWxsVHJlZSA9IHRydWU7XG4gICAgICBpZihraWxsVHJlZSkge1xuICAgICAgICBwc1RyZWUocGlkLCAoZXJyLCBjaGlsZHJlbikgPT4ge1xuICAgICAgICAgIFtwaWRdLmNvbmNhdChjaGlsZHJlbi5tYXAocCA9PiBwLlBJRCkpLmZvckVhY2godHBpZCA9PiB7XG4gICAgICAgICAgICB0cnkgeyBwcm9jZXNzLmtpbGwodHBpZCwgc2lnbmFsKTsgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7IGNvbnNvbGUuZXJyb3IoZXgpOyB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHsgcHJvY2Vzcy5raWxsKHBpZCwgc2lnbmFsKTsgfVxuICAgICAgICBjYXRjaCAoZXgpIHsgY29uc29sZS5lcnJvcihleCk7IH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGRQcm9jZXNzLmV4ZWMoYHRhc2traWxsIC9QSUQgJHsgIHBpZCAgfSAvVCAvRmAsICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGVBcHBSdW5uZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG4gIHJ1bihhcHBsaWNhdGlvblBhdGgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9wKClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmN3ZCA9IHBhdGguZGlybmFtZShhcHBsaWNhdGlvblBhdGgpO1xuICAgICAgdGhpcy5udW1EYXRhRXZlbnRzUmVjZWl2ZWQgPSAwO1xuICAgICAgdGhpcy5pZ25vcmVGaXJzdEV2ZW50c0Ftb3VudCA9IDA7XG4gICAgICBpZihpc1dpbikge1xuICAgICAgICB0aGlzLmlnbm9yZUZpcnN0RXZlbnRzQW1vdW50ID0gMjtcbiAgICAgICAgdGhpcy5ydW5uZXIgPSBjaGlsZFByb2Nlc3Muc3Bhd24oYGNtZGAsIFtgbnZtd2AsIGB1c2VgLCBgaW9qcy12Mi4zLjFgXSwge2N3ZDogdGhpcy5jd2R9KTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5ydW5uZXIuc3RkaW4ud3JpdGUoYG5vZGUgJHsgIGFwcGxpY2F0aW9uUGF0aCAgfVxcbmApO1xuICAgICAgICB9LCA1MDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYG5vZGUgJHsgIGFwcGxpY2F0aW9uUGF0aH1gKTtcbiAgICAgICAgdGhpcy5ydW5uZXIgPSBjaGlsZFByb2Nlc3Muc3Bhd24oYG5vZGVgLCBbYXBwbGljYXRpb25QYXRoXSwge2N3ZDogdGhpcy5jd2R9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucnVubmVyLnN0ZG91dC5vbihgZGF0YWAsIGRhdGEgPT4gdGhpcy5vblJ1bm5lckRhdGEoZGF0YSkpO1xuICAgICAgdGhpcy5ydW5uZXIuc3RkZXJyLm9uKGBkYXRhYCwgZXJyb3IgPT4gdGhpcy5vblJ1bm5lckVycm9yKGVycm9yKSk7XG4gICAgICB0aGlzLnJ1bm5lci5vbihgZGlzY29ubmVjdGAsICgpID0+IHRoaXMub25EaXNjb25uZWN0KCkpO1xuICAgICAgdGhpcy5ydW5uZXIub24oYGNsb3NlYCwgKCkgPT4gdGhpcy5vbkNsb3NlKCkpO1xuICAgICAgdGhpcy5ydW5uZXIub24oYGV4aXRgLCAoKSA9PiB0aGlzLm9uRXhpdCgpKTtcbiAgICB9KTtcbiAgfVxuICBvblJ1bm5lckRhdGEoZGF0YSkge1xuICAgIHRoaXMubnVtRGF0YUV2ZW50c1JlY2VpdmVkKys7XG4gICAgaWYodGhpcy5udW1EYXRhRXZlbnRzUmVjZWl2ZWQgPD0gdGhpcy5pZ25vcmVGaXJzdEV2ZW50c0Ftb3VudCkge1xuICAgICAgLy9pZ25vcmUgdGhlIGZpcnN0IHgtbWVzc2FnZXNcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGF0YSA9IGRhdGEudG9TdHJpbmcoKS50cmltKCk7XG4gICAgaWYoZGF0YS5pbmRleE9mKHRoaXMuY3dkKSA9PT0gMCkge1xuICAgICAgZGF0YSA9IGRhdGEuc3Vic3RyKHRoaXMuY3dkLmxlbmd0aCk7XG4gICAgICBpZihkYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZW1pdChgc3Rkb3V0LWRhdGFgLCBkYXRhKTtcbiAgfVxuXG4gIG9uUnVubmVyRXJyb3IoZXJyb3IpIHtcbiAgICB0aGlzLmVtaXQoYHN0ZGVyci1kYXRhYCwgZXJyb3IudG9TdHJpbmcoKS50cmltKCkpO1xuICB9XG5cbiAgb25EaXNjb25uZWN0KCkge1xuICAgIGNvbnNvbGUubG9nKGBbQ2hpbGRBcHBdIHJ1bm5lciBkaXNjb25uZWN0ZWRgKTtcbiAgICB0aGlzLnJ1bm5lciA9IGZhbHNlO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zb2xlLmxvZyhgW0NoaWxkQXBwXSBydW5uZXIgY2xvc2VkYCk7XG4gICAgdGhpcy5ydW5uZXIgPSBmYWxzZTtcbiAgfVxuXG4gIG9uRXhpdCgpIHtcbiAgICBjb25zb2xlLmxvZyhgW0NoaWxkQXBwXSBydW5uZXIgZXhpdGVkYCk7XG4gICAgdGhpcy5ydW5uZXIgPSBmYWxzZTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgaWYoIXRoaXMucnVubmVyKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucnVubmVyLnN0ZG91dC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMucnVubmVyLnN0ZGVyci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMucnVubmVyLnN0ZGluLmVuZCgpO1xuICAgICAgLy9saXN0ZW4gZm9yIHJ1bm5lciBldmVudHMgYW5kIHJlc29sdmUgb24gdGhlIG9uZSB0aGF0IG9jY3Vyc1xuICAgICAgLy8gY29uc3QgY2JDYWxsZWQgPSBmYWxzZTtcbiAgICAgIC8vIHRoaXMucnVubmVyLm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgLy8gICBjb25zb2xlLmxvZygnZGlzY29ubmVjdCcpO1xuICAgICAgLy8gICBpZighY2JDYWxsZWQpIHtcbiAgICAgIC8vICAgICByZXNvbHZlKCk7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pO1xuICAgICAgLy8gdGhpcy5ydW5uZXIub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgLy8gICBjb25zb2xlLmxvZygnY2xvc2UnKTtcbiAgICAgIC8vICAgaWYoIWNiQ2FsbGVkKSB7XG4gICAgICAvLyAgICAgcmVzb2x2ZSgpO1xuICAgICAgLy8gICB9XG4gICAgICAvLyB9KTtcbiAgICAgIC8vIHRoaXMucnVubmVyLm9uKCdleGl0JywgKCkgPT4ge1xuICAgICAgLy8gICBjb25zb2xlLmxvZygnZXhpdCcpO1xuICAgICAgLy8gICBpZighY2JDYWxsZWQpIHtcbiAgICAgIC8vICAgICByZXNvbHZlKCk7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pO1xuICAgICAga2lsbCh0aGlzLnJ1bm5lci5waWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMucnVubmVyID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9wKClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBQcmVzZW50YXRpb25CYXNlIGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbic7XG5pbXBvcnQgU2xpZGVCcmlkZ2UgZnJvbSAnLi9TbGlkZUJyaWRnZSc7XG5pbXBvcnQgTW9iaWxlU2VydmVyQnJpZGdlIGZyb20gJy4vTW9iaWxlU2VydmVyQnJpZGdlJztcblxuaW1wb3J0IFBvbGFySDcgZnJvbSAnLi9zZW5zb3JzL1BvbGFySDcnO1xuaW1wb3J0IFdlYmNhbSBmcm9tICcuL1dlYmNhbSc7XG5cbmNvbnN0IHBhdGggPSByZXF1aXJlTm9kZShgcGF0aGApO1xuXG5jb25zdCBLRVlDT0RFX0xFRlQgPSAzNztcbmNvbnN0IEtFWUNPREVfUklHSFQgPSAzOTtcbmNvbnN0IEtFWUNPREVfU1BBQ0UgPSAzMjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VudGF0aW9uIGV4dGVuZHMgUHJlc2VudGF0aW9uQmFzZSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHJvbGUsIHNldHRpbmdzKSB7XG4gICAgc3VwZXIoZGF0YSwgcm9sZSwgc2V0dGluZ3MpO1xuXG4gICAgdGhpcy5wb2xhckg3ID0gbmV3IFBvbGFySDcoKTtcbiAgICB0aGlzLnBvbGFySDcub24oUG9sYXJINy5IRUFSVF9SQVRFLCB0aGlzLmhlYXJ0UmF0ZVBvbGFySGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMud2ViY2FtID0gbmV3IFdlYmNhbShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgd2ViY2FtLXZpZGVvYCkpO1xuXG4gICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZXZlbnQgPT4gdGhpcy5jbG9zZUhhbmRsZXIoZXZlbnQpO1xuICAgICQod2luZG93KS5vbihga2V5ZG93bmAsIGV2ZW50ID0+IHRoaXMua2V5ZG93bkhhbmRsZXIoZXZlbnQpKTtcbiAgICBiZWFuLm9uKHRoaXMsIENvbnN0YW50cy5TRVRfQ1VSUkVOVF9TTElERV9JTkRFWCwgdGhpcy5jdXJyZW50U2xpZGVJbmRleENoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5HT19UT19QUkVWSU9VU19TTElERSwgdGhpcy5nb1RvUHJldmlvdXNTbGlkZS5iaW5kKHRoaXMpKTtcbiAgICAkKGBib2R5YCkub24oQ29uc3RhbnRzLkdPX1RPX05FWFRfU0xJREUsIHRoaXMuZ29Ub05leHRTbGlkZS5iaW5kKHRoaXMpKTtcbiAgICAkKGBib2R5YCkub24oQ29uc3RhbnRzLk9QRU5fQ09NTUFORF9MSU5FLCB0aGlzLm9wZW5Db21tYW5kTGluZS5iaW5kKHRoaXMpKTtcbiAgICAkKGBib2R5YCkub24oQ29uc3RhbnRzLk9QRU5fQ0FNRVJBLCB0aGlzLm9wZW5DYW1lcmEuYmluZCh0aGlzKSk7XG4gIH1cblxuICBjbG9zZUhhbmRsZXIoZXZlbnQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICB9XG5cbiAgY3VycmVudFNsaWRlSW5kZXhDaGFuZ2VkSGFuZGxlcihzbGlkZUluZGV4KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgfVxuXG4gIGNyZWF0ZU1vYmlsZVNlcnZlckJyaWRnZSgpIHtcbiAgICByZXR1cm4gbmV3IE1vYmlsZVNlcnZlckJyaWRnZSh0aGlzLCB0aGlzLnNldHRpbmdzKTtcbiAgfVxuXG4gIHRvZ2dsZUVsZXZhdG9yTXVzaWMoKSB7XG4gICAgdGhpcy5lbGV2YXRvck11c2ljUGxheWluZyA9ICF0aGlzLmVsZXZhdG9yTXVzaWNQbGF5aW5nO1xuICAgIGlmKHRoaXMuZWxldmF0b3JNdXNpY1BsYXlpbmcpIHtcbiAgICAgIHRoaXMuZWxldmF0b3JNdXNpYy5wbGF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxldmF0b3JNdXNpYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vcHJlcGVuZCB1cmxzIHdpdGggZmlsZTovLy8gKGZhc3Rlcj8pXG4gIHByb2Nlc3NTbGlkZVNyYyhzcmMpIHtcbiAgICBzcmMgPSBgZmlsZTovLy8keyAgcGF0aC5yZXNvbHZlKHRoaXMuc2V0dGluZ3MucHJlc2VudGF0aW9uUGF0aCwgc3JjKX1gO1xuICAgIHNyYyA9IHNyYy5yZXBsYWNlKC9cXFxcL2csIGAvYCk7XG4gICAgcmV0dXJuIHNyYztcbiAgfVxuXG4gIGNyZWF0ZVNsaWRlQnJpZGdlcyhkYXRhKSB7XG4gICAgUHJlc2VudGF0aW9uQmFzZS5wcm90b3R5cGUuY3JlYXRlU2xpZGVCcmlkZ2VzLmNhbGwodGhpcywgZGF0YSk7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgY29uc3QgJHNsaWRlTWVudSA9ICQoYCNzbGlkZU1lbnVgKTtcbiAgICBjb25zdCBudW1TbGlkZUJyaWRnZXMgPSB0aGlzLnNsaWRlQnJpZGdlcy5sZW5ndGg7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bVNsaWRlQnJpZGdlczsgaSsrKSB7XG4gICAgICBjb25zdCBzbGlkZUJyaWRnZSA9IHRoaXMuc2xpZGVCcmlkZ2VzW2ldO1xuICAgICAgJHNsaWRlTWVudS5hcHBlbmQoYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtc2xpZGVucj1cIiR7ICBpICB9XCIgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCI+JHsgIGkgKyAxICB9ICR7ICBzbGlkZUJyaWRnZS5uYW1lICB9PC9idXR0b24+YCk7XG4gICAgfVxuICAgICRzbGlkZU1lbnUuZmluZChgYnV0dG9uYCkub24oYGNsaWNrYCwgZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoYXQuc2V0Q3VycmVudFNsaWRlSW5kZXgocGFyc2VJbnQoJCh0aGlzKS5kYXRhKGBzbGlkZW5yYCkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVNsaWRlQnJpZGdlKHNsaWRlKSB7XG4gICAgLy91c2Ugb3VyIG93biBicmlkZ2Ugd2hpY2ggZG9lc24ndCB1c2UgZmV0Y2hcbiAgICByZXR1cm4gbmV3IFNsaWRlQnJpZGdlKHNsaWRlKTtcbiAgfVxuXG4gIHNsaWRlTWVzc2FnZUhhbmRsZXIoZXZlbnQpIHtcbiAgICBQcmVzZW50YXRpb25CYXNlLnByb3RvdHlwZS5zbGlkZU1lc3NhZ2VIYW5kbGVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIGlmKCFldmVudC5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaChldmVudC5kYXRhLmFjdGlvbikge1xuICAgIGNhc2UgQ29uc3RhbnRzLkdPX1RPX1BSRVZJT1VTX1NMSURFOlxuICAgICAgdGhpcy5nb1RvUHJldmlvdXNTbGlkZSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDb25zdGFudHMuR09fVE9fTkVYVF9TTElERTpcbiAgICAgIHRoaXMuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDb25zdGFudHMuT1BFTl9DT01NQU5EX0xJTkU6XG4gICAgICB0aGlzLm9wZW5Db21tYW5kTGluZSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDb25zdGFudHMuT1BFTl9DQU1FUkE6XG4gICAgICB0aGlzLm9wZW5DYW1lcmEoKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGtleWRvd25IYW5kbGVyKGV2ZW50KSB7XG4gICAgLy9vbmUgZnJhbWUgZGVsYXlcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmKGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3dpdGNoKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgIGNhc2UgS0VZQ09ERV9MRUZUOlxuICAgICAgICB0aGlzLmdvVG9QcmV2aW91c1NsaWRlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVlDT0RFX1JJR0hUOlxuICAgICAgICB0aGlzLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtFWUNPREVfU1BBQ0U6XG4gICAgICAgICQoYCNwcmVzZW50YXRpb24tY29udHJvbHNgKS50b2dnbGUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjaGlsZEFwcERhdGFIYW5kbGVyKGRhdGEpIHtcbiAgICBjb25zdCBjdXJyZW50U2xpZGVCcmlkZ2UgPSB0aGlzLmdldFNsaWRlQnJpZGdlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICBpZihjdXJyZW50U2xpZGVCcmlkZ2UpIHtcbiAgICAgIGN1cnJlbnRTbGlkZUJyaWRnZS50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuQ0hJTERfQVBQX1NURE9VVF9EQVRBLFxuICAgICAgICBkYXRhOiBkYXRhXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjaGlsZEFwcEVycm9ySGFuZGxlcihkYXRhKSB7XG4gICAgY29uc3QgY3VycmVudFNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgaWYoY3VycmVudFNsaWRlQnJpZGdlKSB7XG4gICAgICBjdXJyZW50U2xpZGVCcmlkZ2UudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLkNISUxEX0FQUF9TVERFUlJfREFUQSxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaGVhcnRSYXRlUG9sYXJIYW5kbGVyKGhlYXJ0UmF0ZSkge1xuICAgICQoYCNnbG9iYWwtaGVhcnQtcmF0ZWApLnRleHQoaGVhcnRSYXRlKTtcbiAgICBjb25zdCBjdXJyZW50U2xpZGVCcmlkZ2UgPSB0aGlzLmdldFNsaWRlQnJpZGdlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICBpZihjdXJyZW50U2xpZGVCcmlkZ2UpIHtcbiAgICAgIGN1cnJlbnRTbGlkZUJyaWRnZS50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuSEVBUlRfUkFURV9QT0xBUixcbiAgICAgICAgaGVhcnRSYXRlOiBoZWFydFJhdGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5Db21tYW5kTGluZSgpIHtcbiAgICAkKGAjY29uc29sZU1vZGFsYCkubW9kYWwoYHNob3dgKTtcbiAgfVxuXG4gIG9wZW5DYW1lcmEoKSB7XG4gICAgJChgI3dlYmNhbU1vZGFsYCkubW9kYWwoYHNob3dgKTtcbiAgfVxuXG4gIGhhbmRsZU1vYmlsZVNlcnZlck1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmKG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gYGdvVG9OZXh0U2xpZGVgKSB7XG4gICAgICAgIHRoaXMuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgfSBlbHNlIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IGBnb1RvUHJldmlvdXNTbGlkZWApIHtcbiAgICAgICAgdGhpcy5nb1RvUHJldmlvdXNTbGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFNsaWRlQnJpZGdlQmFzZSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9TbGlkZUJyaWRnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlQnJpZGdlIGV4dGVuZHMgU2xpZGVCcmlkZ2VCYXNlIHtcblxuICBhdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzcmMsIGNiKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2F0dGFjaFRvU2xpZGVIb2xkZXInLCBzcmMpO1xuICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlSG9sZGVyKTtcbiAgICB0aGlzLnNsaWRlSG9sZGVyID0gc2xpZGVIb2xkZXI7XG4gICAgLy9ub3RpZnkgdGhlIGNvbnRlbnQgaXQgaXMgYmVpbmcgY2xlYXJlZFxuICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7YWN0aW9uOiBgZGVzdHJveWB9KTtcbiAgICAvL2NsZWFyIHRoZSBjdXJyZW50IGNvbnRlbnRcbiAgICB0aGlzLnNsaWRlSG9sZGVyLmlubmVySFRNTCA9IGBgO1xuICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWAsIHRoaXMubmFtZSk7XG4gICAgJChzbGlkZUhvbGRlcikuYWRkQ2xhc3MoYGxvYWRpbmdgKTtcblxuICAgICQoc2xpZGVIb2xkZXIpLm9mZihgbG9hZGApO1xuICAgICQoc2xpZGVIb2xkZXIpLm9uKGBsb2FkYCwgKCkgPT4ge1xuICAgICAgdGhpcy50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiBgc2V0U3RhdGVgLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZVxuICAgICAgfSk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYGxvYWRgKTtcbiAgICB9KTtcblxuICAgIGlmIChzcmMgIT09ICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCkpIHtcbiAgICAgIC8vY3JlYXRlIGh0bWwgaW1wb3J0XG4gICAgICBjb25zdCAkaW1wb3J0RWwgPSAkKGA8bGluayByZWw9XCJpbXBvcnRcIj5gKTtcbiAgICAgIGNvbnN0IGltcG9ydEVsID0gJGltcG9ydEVsWzBdO1xuICAgICAgJGltcG9ydEVsLm9uKGBsb2FkYCwgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGltcG9ydEVsLmltcG9ydC5xdWVyeVNlbGVjdG9yKGB0ZW1wbGF0ZWApO1xuICAgICAgICBpZih0ZW1wbGF0ZSkge1xuICAgICAgICAgIGNvbnN0IGNsb25lID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICAgICAgICB0aGlzLnNsaWRlSG9sZGVyLmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICAgICAgfVxuICAgICAgICAkaW1wb3J0RWwucmVtb3ZlKCk7XG4gICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUNsYXNzKGBsb2FkaW5nYCk7XG4gICAgICAgIGNiKCk7XG4gICAgICB9KTtcbiAgICAgICRpbXBvcnRFbC5hdHRyKGBocmVmYCwgc3JjKTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCwgc3JjKTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmh0bWwoJGltcG9ydEVsKTtcbiAgICB9XG4gIH1cbn1cbiIsImNvbnN0IGdldENhbWVyYUNvbmZpZyA9IHZpZGVvV2lkdGggPT4ge1xuICBsZXQgc291cmNlSWQgPSBmYWxzZTtcbiAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxuICAgIC50aGVuKGRldmljZXMgPT4gZGV2aWNlcy5maWx0ZXIoZGV2aWNlID0+IGRldmljZS5raW5kID09PSBgdmlkZW9gKSlcbiAgICAudGhlbihkZXZpY2VzID0+IHtcbiAgICAgIGRldmljZXMuZm9yRWFjaChkZXZpY2UgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhkZXZpY2UpO1xuICAgICAgICBpZighc291cmNlSWQgfHwgZGV2aWNlLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihgZmFjZXRpbWVgKSA9PT0gLTEpIHtcbiAgICAgICAgICBzb3VyY2VJZCA9IGRldmljZS5kZXZpY2VJZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIG9wdGlvbmFsOiBbXG4gICAgICAgICAgICB7IHNvdXJjZUlkIH0sXG4gICAgICAgICAgICB7IG1pbldpZHRoOiB2aWRlb1dpZHRofVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYmNhbSB7XG4gIGNvbnN0cnVjdG9yKHZpZGVvKSB7XG4gICAgdGhpcy52aWRlbyA9IHZpZGVvO1xuICAgIGdldENhbWVyYUNvbmZpZygxMjgwKVxuICAgICAgLnRoZW4oY29uZmlnID0+IHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25maWcpKVxuICAgICAgLnRoZW4oc3RyZWFtID0+IHtcbiAgICAgICAgdGhpcy52aWRlby5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICB0aGlzLnZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy52aWRlby53aWR0aCA9IHRoaXMudmlkZW8udmlkZW9XaWR0aDtcbiAgICAgICAgICB0aGlzLnZpZGVvLmhlaWdodCA9IHRoaXMudmlkZW8udmlkZW9IZWlnaHQ7XG4gICAgICAgICAgdGhpcy52aWRlby5wbGF5KCk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IEhlYXJ0UmF0ZUNhbnZhcyBmcm9tICcuLi8uLi9IZWFydFJhdGVDYW52YXMnO1xuXG5pbXBvcnQgU3BhcmtIZWFydFJhdGVzUGx1Z2luIGZyb20gJy4vU3BhcmtIZWFydFJhdGVzUGx1Z2luJztcblxuaW1wb3J0IFByZWxvYWQgZnJvbSAnLi9zdGF0ZXMvUHJlbG9hZCc7XG5pbXBvcnQgUGxheSBmcm9tICcuL3N0YXRlcy9QbGF5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5HYW1lIHtcbiAgY29uc3RydWN0b3Ioc2xpZGVIb2xkZXIsIHdpZHRoLCBoZWlnaHQsIHJlbmRlck1vZGUsIGNvbnRhaW5lcikge1xuICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQsIHJlbmRlck1vZGUsIGNvbnRhaW5lciwgeyBwcmVsb2FkOiAoKSA9PiB0aGlzLnByZWxvYWQoKX0pO1xuICAgIHRoaXMuc2xpZGVIb2xkZXIgPSBzbGlkZUhvbGRlcjtcbiAgICB0aGlzLnN0YXRlLmFkZChgUHJlbG9hZGAsIFByZWxvYWQpO1xuICAgIHRoaXMuc3RhdGUuYWRkKGBQbGF5YCwgUGxheSk7XG5cbiAgICB0aGlzLnBsYXllcjFIZWFydFJhdGVDYW52YXMgPSBuZXcgSGVhcnRSYXRlQ2FudmFzKHRoaXMuc2xpZGVIb2xkZXIucXVlcnlTZWxlY3RvcihgLnBsYXllcjEtY29udGFpbmVyIGNhbnZhc2ApKTtcbiAgICB0aGlzLnBsYXllcjFIZWFydFJhdGVUZXh0ID0gdGhpcy5zbGlkZUhvbGRlci5xdWVyeVNlbGVjdG9yKGAucGxheWVyMS1jb250YWluZXIgLmhlYXJ0UmF0ZWApO1xuICAgIHRoaXMucGxheWVyMkhlYXJ0UmF0ZUNhbnZhcyA9IG5ldyBIZWFydFJhdGVDYW52YXModGhpcy5zbGlkZUhvbGRlci5xdWVyeVNlbGVjdG9yKGAucGxheWVyMi1jb250YWluZXIgY2FudmFzYCkpO1xuICAgIHRoaXMucGxheWVyMkhlYXJ0UmF0ZVRleHQgPSB0aGlzLnNsaWRlSG9sZGVyLnF1ZXJ5U2VsZWN0b3IoYC5wbGF5ZXIyLWNvbnRhaW5lciAuaGVhcnRSYXRlYCk7XG4gIH1cbiAgcHJlbG9hZCgpIHtcbiAgICB0aGlzLnNwYXJrSGVhcnRSYXRlc1BsdWdpbiA9IHRoaXMucGx1Z2lucy5hZGQoU3BhcmtIZWFydFJhdGVzUGx1Z2luKTtcbiAgICB0aGlzLm9uUGF1c2UuYWRkKCgpID0+IHRoaXMubWFuYWdlU3BhcmtIZWFydFJhdGVzUGx1Z2luQ29ubmVjdGlvbigpKTtcbiAgICB0aGlzLm9uUmVzdW1lLmFkZCgoKSA9PiB0aGlzLm1hbmFnZVNwYXJrSGVhcnRSYXRlc1BsdWdpbkNvbm5lY3Rpb24oKSk7XG4gICAgdGhpcy5tYW5hZ2VTcGFya0hlYXJ0UmF0ZXNQbHVnaW5Db25uZWN0aW9uKCk7XG4gICAgdGhpcy5zdGF0ZS5zdGFydChgUHJlbG9hZGApO1xuICB9XG4gIHVwZGF0ZSh0aW1lKSB7XG4gICAgc3VwZXIudXBkYXRlKHRpbWUpO1xuICAgIGlmKCF0aGlzLnNwYXJrSGVhcnRSYXRlc1BsdWdpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnBsYXllcjFIZWFydFJhdGVDYW52YXMudGljaygpO1xuICAgIHRoaXMucGxheWVyMUhlYXJ0UmF0ZUNhbnZhcy51cGRhdGVIZWFydFJhdGUodGhpcy5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4ucGxheWVyMS5oZWFydFJhdGUpO1xuICAgIHRoaXMucGxheWVyMUhlYXJ0UmF0ZVRleHQuaW5uZXJIVE1MID0gdGhpcy5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4ucGxheWVyMS5oZWFydFJhdGU7XG4gICAgdGhpcy5wbGF5ZXIySGVhcnRSYXRlQ2FudmFzLnRpY2soKTtcbiAgICB0aGlzLnBsYXllcjJIZWFydFJhdGVDYW52YXMudXBkYXRlSGVhcnRSYXRlKHRoaXMuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjIuaGVhcnRSYXRlKTtcbiAgICB0aGlzLnBsYXllcjJIZWFydFJhdGVUZXh0LmlubmVySFRNTCA9IHRoaXMuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjIuaGVhcnRSYXRlO1xuICB9XG4gIG1hbmFnZVNwYXJrSGVhcnRSYXRlc1BsdWdpbkNvbm5lY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coYFtHYW1lXSBtYW5hZ2VTcGFya0hlYXJ0UmF0ZXNQbHVnaW5Db25uZWN0aW9uYCk7XG4gICAgaWYodGhpcy5wYXVzZWQpIHtcbiAgICAgIHRoaXMuc3BhcmtIZWFydFJhdGVzUGx1Z2luLmNsb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3BhcmtIZWFydFJhdGVzUGx1Z2luLmNvbm5lY3QoKTtcbiAgICB9XG4gIH1cbn1cbiIsImNvbnN0IFBMQVlFUl8xX1NQQVJLX0lEID0gYDU1ZmY3MDA2NTA3NTU1NTMzMjE3MTc4N2A7IC8vcmVkIG9uZVxuY29uc3QgUExBWUVSXzJfU1BBUktfSUQgPSBgNTNmZjczMDY1MDc1NTM1MTQzMTkxMzg3YDsgLy9ibHVlIG9uZVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcGFya0hlYXJ0UmF0ZXNQbHVnaW4gZXh0ZW5kcyBQaGFzZXIuUGx1Z2luIHtcbiAgY29uc3RydWN0b3IoZ2FtZSwgcGFyZW50KSB7XG4gICAgc3VwZXIoZ2FtZSwgcGFyZW50KTtcbiAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG4gIGluaXQoKSB7XG4gICAgY29uc29sZS5sb2coYFNwYXJrSGVhcnRSYXRlc1BsdWdpbiBQbHVnaW4gaW5pdGApO1xuICAgIHRoaXMucGxheWVyMSA9IHtcbiAgICAgIHNwYXJrSWQ6IFBMQVlFUl8xX1NQQVJLX0lELFxuICAgICAgaGVhcnRSYXRlOiAwXG4gICAgfTtcbiAgICB0aGlzLnBsYXllcjIgPSB7XG4gICAgICBzcGFya0lkOiBQTEFZRVJfMl9TUEFSS19JRCxcbiAgICAgIGhlYXJ0UmF0ZTogMFxuICAgIH07XG4gICAgdGhpcy5fdWRwRXJyb3JIYW5kbGVyID0gZXJyb3IgPT4gdGhpcy51ZHBFcnJvckhhbmRsZXIoZXJyb3IpO1xuICAgIHRoaXMuX3VkcE1lc3NhZ2VIYW5kbGVyID0gKG1lc3NhZ2UsIHJlbW90ZUluZm8pID0+IHRoaXMudWRwTWVzc2FnZUhhbmRsZXIobWVzc2FnZSwgcmVtb3RlSW5mbyk7XG4gICAgdGhpcy5fdWRwTGlzdGVuaW5nSGFuZGxlciA9ICgpID0+IHRoaXMudWRwTGlzdGVuaW5nSGFuZGxlcigpO1xuICB9XG4gIGNvbm5lY3QoKSB7XG4gICAgaWYodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYFNwYXJrSGVhcnRSYXRlc1BsdWdpbiBjb25uZWN0YCk7XG4gICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgIGxldCBkZ3JhbTtcbiAgICB0cnkge1xuICAgICAgZGdyYW0gPSAocmVxdWlyZU5vZGUgIT09IG51bGwpID8gcmVxdWlyZU5vZGUoYGRncmFtYCkgOiByZXF1aXJlKGBkZ3JhbWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuICAgIGlmKCFkZ3JhbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVkcFNvY2tldCA9IGRncmFtLmNyZWF0ZVNvY2tldChgdWRwNGApO1xuICAgIHRoaXMudWRwU29ja2V0Lm9uKGBlcnJvcmAsIHRoaXMuX3VkcEVycm9ySGFuZGxlcik7XG4gICAgdGhpcy51ZHBTb2NrZXQub24oYG1lc3NhZ2VgLCB0aGlzLl91ZHBNZXNzYWdlSGFuZGxlcik7XG4gICAgdGhpcy51ZHBTb2NrZXQub24oYGxpc3RlbmluZ2AsIHRoaXMuX3VkcExpc3RlbmluZ0hhbmRsZXIpO1xuICAgIHRoaXMudWRwU29ja2V0LmJpbmQoMTIzNCk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgaWYoIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGBTcGFya0hlYXJ0UmF0ZXNQbHVnaW4gY2xvc2VgKTtcbiAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGlmKCF0aGlzLnVkcFNvY2tldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVkcFNvY2tldC5yZW1vdmVMaXN0ZW5lcihgZXJyb3JgLCB0aGlzLl91ZHBFcnJvckhhbmRsZXIpO1xuICAgIHRoaXMudWRwU29ja2V0LnJlbW92ZUxpc3RlbmVyKGBtZXNzYWdlYCwgdGhpcy5fdWRwTWVzc2FnZUhhbmRsZXIpO1xuICAgIHRoaXMudWRwU29ja2V0LnJlbW92ZUxpc3RlbmVyKGBsaXN0ZW5pbmdgLCB0aGlzLl91ZHBMaXN0ZW5pbmdIYW5kbGVyKTtcbiAgICB0aGlzLnVkcFNvY2tldC5jbG9zZSgpO1xuICAgIHRoaXMudWRwU29ja2V0ID0gbnVsbDtcbiAgfVxuICB1ZHBFcnJvckhhbmRsZXIoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhgW1NwYXJrSGVhcnRSYXRlc1BsdWdpbl0gdWRwRXJyb3JIYW5kbGVyYCwgZXJyb3IpO1xuICAgIHRoaXMudWRwU29ja2V0LmNsb3NlKCk7XG4gIH1cbiAgdWRwTWVzc2FnZUhhbmRsZXIobWVzc2FnZSwgcmVtb3RlSW5mbykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgY29uc3Qgc3RyID0gbWVzc2FnZS50b1N0cmluZygpO1xuICAgIGNvbnN0IHNwbGl0ID0gc3RyLnNwbGl0KGA7YCk7XG4gICAgaWYoc3BsaXQubGVuZ3RoID4gMikge1xuICAgICAgdGhpcy5zZXRIZWFydFJhdGUoc3BsaXRbMF0sIHNwbGl0WzJdKTtcbiAgICB9XG4gIH1cbiAgdWRwTGlzdGVuaW5nSGFuZGxlcigpIHtcbiAgICBjb25zb2xlLmxvZyhgW1NwYXJrSGVhcnRSYXRlc1BsdWdpbl0gdWRwTGlzdGVuaW5nYCk7XG4gIH1cbiAgc2V0SGVhcnRSYXRlKHNwYXJrSWQsIGhlYXJ0UmF0ZSkge1xuICAgIGhlYXJ0UmF0ZSA9IHBhcnNlSW50KGhlYXJ0UmF0ZSk7XG4gICAgaWYodGhpcy5wbGF5ZXIxLnNwYXJrSWQgPT09IHNwYXJrSWQpIHtcbiAgICAgIHRoaXMucGxheWVyMS5oZWFydFJhdGUgPSBoZWFydFJhdGU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKHRoaXMucGxheWVyMi5zcGFya0lkID09PSBzcGFya0lkKSB7XG4gICAgICB0aGlzLnBsYXllcjIuaGVhcnRSYXRlID0gaGVhcnRSYXRlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIFBoYXNlci5CdXR0b24ge1xuICBjb25zdHJ1Y3RvcihnYW1lLCB4LCB5LCBjYWxsYmFjaywgY2FsbGJhY2tDb250ZXh0LCBjb2xvck5hbWUsIGxhYmVsKSB7XG4gICAgc3VwZXIoZ2FtZSwgeCwgeSwgYGNvbXBvbmVudHNgLCBjYWxsYmFjaywgY2FsbGJhY2tDb250ZXh0LCBgJHtjb2xvck5hbWV9LW92ZXJgLCBgJHtjb2xvck5hbWV9LW5vcm1hbGAsIGAke2NvbG9yTmFtZX0tZG93bmApO1xuICAgIHRoaXMubGFiZWxGaWVsZCA9IG5ldyBQaGFzZXIuVGV4dChnYW1lLCAwLCAwLCBgYCwge1xuICAgICAgZm9udDogYDM2cHggQXJpYWxgLFxuICAgICAgZmlsbDogYCNmZmZmZmZgXG4gICAgfSk7XG4gICAgdGhpcy5sYWJlbEZpZWxkLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgdGhpcy5hZGRDaGlsZCh0aGlzLmxhYmVsRmllbGQpO1xuICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgfVxuICBzZXQgbGFiZWwodmFsdWUpIHtcbiAgICB0aGlzLmxhYmVsRmllbGQudGV4dCA9IHZhbHVlO1xuICB9XG4gIGdldCBsYWJlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbEZpZWxkLnRleHQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYWdwb2xlIGV4dGVuZHMgUGhhc2VyLkdyb3VwIHtcbiAgY29uc3RydWN0b3IoZ2FtZSwgeCwgeSkge1xuICAgIHN1cGVyKGdhbWUpO1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcblxuICAgIHRoaXMucG9sZSA9IG5ldyBQaGFzZXIuU3ByaXRlKHRoaXMuZ2FtZSwgMCwgMCwgYG1hcmlvLWdyYXBoaWNzYCwgYGZsYWdwb2xlLnBuZ2ApO1xuICAgIHRoaXMucG9sZS5hbmNob3Iuc2V0VG8oMC41LCAxKTtcbiAgICB0aGlzLmFkZCh0aGlzLnBvbGUpO1xuXG4gICAgdGhpcy5mbGFnID0gbmV3IFBoYXNlci5TcHJpdGUodGhpcy5nYW1lLCAwLCAwLCBgbWFyaW8tZ3JhcGhpY3NgLCBgZmxhZy1tb3ZpbmcxLnBuZ2ApO1xuICAgIHRoaXMuZmxhZy5hbmNob3Iuc2V0VG8oMCwgMSk7XG4gICAgdGhpcy5mbGFnLnkgPSAtdGhpcy5wb2xlLmhlaWdodCArIHRoaXMuZmxhZy5oZWlnaHQgKyAyMDtcbiAgICB0aGlzLmZsYWcuYW5pbWF0aW9ucy5hZGQoYG1vdmluZ2AsIFtcbiAgICAgIGBmbGFnLW1vdmluZzEucG5nYCxcbiAgICAgIGBmbGFnLW1vdmluZzIucG5nYCxcbiAgICAgIGBmbGFnLW1vdmluZzMucG5nYFxuICAgIF0sIDEwLCB0cnVlLCB0cnVlKTtcbiAgICB0aGlzLmZsYWcuYW5pbWF0aW9ucy5wbGF5KGBtb3ZpbmdgKTtcbiAgICB0aGlzLmFkZCh0aGlzLmZsYWcpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ2hhcmFjdGVyIGV4dGVuZHMgUGhhc2VyLlNwcml0ZSB7XG4gIGNvbnN0cnVjdG9yKGdhbWUsIHgsIHksIGNoYXJhY3Rlcikge1xuICAgIHN1cGVyKGdhbWUsIHgsIHksIGBtYXJpby1ncmFwaGljc2AsIGAke2NoYXJhY3Rlcn0tcnVuLTEucG5nYCk7XG4gICAgdGhpcy5hbmNob3Iuc2V0VG8oMC41LCAxKTtcbiAgICB0aGlzLmFuaW1hdGlvbnMuYWRkKGBzdGFuZGAsIFtcbiAgICAgIGAke2NoYXJhY3Rlcn0tcnVuLTEucG5nYCxcbiAgICBdLCAxMCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5hbmltYXRpb25zLmFkZChgcnVuYCwgW1xuICAgICAgYCR7Y2hhcmFjdGVyfS1ydW4tMS5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1ydW4tMi5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1ydW4tMy5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1ydW4tNC5wbmdgXG4gICAgXSwgMTAsIHRydWUsIHRydWUpO1xuICAgIHRoaXMuYW5pbWF0aW9ucy5hZGQoYGp1bXBgLCBbXG4gICAgICBgJHtjaGFyYWN0ZXJ9LWp1bXAucG5nYFxuICAgIF0sIDEwLCB0cnVlLCB0cnVlKTtcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHRoaXMpO1xuICAgIHRoaXMuYm9keS5ncmF2aXR5LnkgPSAxMDAwO1xuICB9XG4gIHN0YW5kKCkge1xuICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KGBzdGFuZGApO1xuICAgIHRoaXMuYm9keS52ZWxvY2l0eS54ID0gMDtcbiAgfVxuICBydW4oc3BlZWQpIHtcbiAgICB0aGlzLmJvZHkudmVsb2NpdHkueCA9IHNwZWVkO1xuICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KGBydW5gKTtcbiAgfVxuICBqdW1wKCkge1xuICAgIGlmKHRoaXMuYm9keS50b3VjaGluZy5kb3duKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbnMucGxheShganVtcGApO1xuICAgICAgdGhpcy5ib2R5LnZlbG9jaXR5LnggPSAxMDA7XG4gICAgICB0aGlzLmJvZHkudmVsb2NpdHkueSA9IC03NTA7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgQnV0dG9uIGZyb20gJy4uL29iamVjdHMvQnV0dG9uJztcbmltcG9ydCBHYW1lQ2hhcmFjdGVyIGZyb20gJy4uL29iamVjdHMvR2FtZUNoYXJhY3Rlcic7XG5pbXBvcnQgRmxhZ3BvbGUgZnJvbSAnLi4vb2JqZWN0cy9GbGFncG9sZSc7XG5cbmNvbnN0IFNVQlNUQVRFX0lOVFJPID0gYGludHJvYDtcbmNvbnN0IFNVQlNUQVRFX1BMQVkgPSBgcGxheWA7XG5jb25zdCBTVUJTVEFURV9KVU1QX1BPTEUgPSBganVtcGA7XG5jb25zdCBTVUJTVEFURV9GSU5JU0hFRCA9IGBmaW5pc2hlZGA7XG5cbmNvbnN0IFdJTk5FUl9ESVNUQU5DRV9QT0xFID0gMTAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5IGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcbiAgaW5pdCgpIHtcbiAgICAvLyBpZighdGhpcy5nYW1lLmJhY2tncm91bmRWaWRlbykge1xuICAgIC8vICAgdGhpcy5nYW1lLmJhY2tncm91bmRWaWRlbyA9IHRoaXMuYWRkLnZpZGVvKCdiYWNrZ3JvdW5kLXZpZGVvJyk7XG4gICAgLy8gICB0aGlzLmdhbWUuYmFja2dyb3VuZFZpZGVvLnBsYXkodHJ1ZSk7XG4gICAgLy8gfVxuICAgIC8vIHRoaXMuZ2FtZS5iYWNrZ3JvdW5kVmlkZW8uYWRkVG9Xb3JsZCgpO1xuICAgIHRoaXMuY3Vyc29ycyA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xuICB9XG4gIGNyZWF0ZSgpIHtcbiAgICB0aGlzLmNyZWF0ZUVudmlyb25tZW50KCk7XG4gICAgdGhpcy5jcmVhdGVQbGF5ZXJzKCk7XG4gICAgdGhpcy5jcmVhdGVCdXR0b25zKCk7XG5cbiAgICB0aGlzLnNldFN1YlN0YXRlKFNVQlNUQVRFX0lOVFJPKTtcbiAgfVxuICBjcmVhdGVFbnZpcm9ubWVudCgpIHtcbiAgICB0aGlzLmdyb3VuZCA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgdGhpcy53b3JsZC5oZWlnaHQsIHRoaXMud29ybGQud2lkdGgsIDgyLCBgbWFyaW8tZ3JhcGhpY3NgLCBgZ3JvdW5kLnBuZ2ApO1xuICAgIHRoaXMuZ3JvdW5kLmFuY2hvci5zZXRUbygwLCAxKTtcbiAgICB0aGlzLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLmdyb3VuZCk7XG4gICAgdGhpcy5ncm91bmQuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xuXG4gICAgdGhpcy5oaWxscyA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgdGhpcy53b3JsZC5oZWlnaHQgLSA4MiwgdGhpcy53b3JsZC53aWR0aCwgNDI4LCBgbWFyaW8tZ3JhcGhpY3NgLCBgaGlsbHMucG5nYCk7XG4gICAgdGhpcy5oaWxscy5hbmNob3Iuc2V0VG8oMCwgMSk7XG5cbiAgICB0aGlzLmZsYWdwb2xlID0gbmV3IEZsYWdwb2xlKHRoaXMuZ2FtZSwgdGhpcy53b3JsZC53aWR0aCAtIDUwLCB0aGlzLndvcmxkLmhlaWdodCAtIDgyKTtcbiAgICB0aGlzLmFkZC5leGlzdGluZyh0aGlzLmZsYWdwb2xlKTtcbiAgfVxuICBjcmVhdGVQbGF5ZXJzKCkge1xuICAgIHRoaXMucGVhY2ggPSB0aGlzLmFkZC5leGlzdGluZyhuZXcgR2FtZUNoYXJhY3Rlcih0aGlzLmdhbWUsIDMwLCAxMCwgYHBlYWNoYCkpO1xuICAgIHRoaXMubWFyaW8gPSB0aGlzLmFkZC5leGlzdGluZyhuZXcgR2FtZUNoYXJhY3Rlcih0aGlzLmdhbWUsIDEwLCAxMCwgYG1hcmlvYCkpO1xuICB9XG4gIGNyZWF0ZUJ1dHRvbnMoKSB7XG4gICAgdGhpcy5wbGF5QnV0dG9uID0gbmV3IEJ1dHRvbih0aGlzLmdhbWUsIHRoaXMud29ybGQuY2VudGVyWCwgdGhpcy53b3JsZC5jZW50ZXJZLCB0aGlzLnBsYXlDbGlja2VkLCB0aGlzLCBgYmx1ZWAsIGBQbGF5YCk7XG4gICAgdGhpcy5wbGF5QnV0dG9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgdGhpcy5hZGQuZXhpc3RpbmcodGhpcy5wbGF5QnV0dG9uKTtcblxuICAgIHRoaXMuc3RvcEJ1dHRvbiA9IG5ldyBCdXR0b24odGhpcy5nYW1lLCB0aGlzLndvcmxkLmNlbnRlclgsIHRoaXMud29ybGQuY2VudGVyWSwgdGhpcy5zdG9wQ2xpY2tlZCwgdGhpcywgYGJsdWVgLCBgU3RvcGApO1xuICAgIHRoaXMuc3RvcEJ1dHRvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIHRoaXMuYWRkLmV4aXN0aW5nKHRoaXMuc3RvcEJ1dHRvbik7XG4gIH1cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMucGh5c2ljcy5hcmNhZGUuY29sbGlkZSh0aGlzLmdyb3VuZCwgdGhpcy5wZWFjaCk7XG4gICAgdGhpcy5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMuZ3JvdW5kLCB0aGlzLm1hcmlvKTtcbiAgICBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9QTEFZKSB7XG4gICAgICB0aGlzLnVwZGF0ZVBsYXlTdGF0ZSgpO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9KVU1QX1BPTEUpIHtcbiAgICAgIHRoaXMudXBkYXRlSnVtcFN0YXRlKCk7XG4gICAgfSBlbHNlIGlmKHRoaXMuc3ViU3RhdGUgPT09IFNVQlNUQVRFX0ZJTklTSEVEKSB7XG4gICAgICB0aGlzLnVwZGF0ZUZpbmlzaGVkU3RhdGUoKTtcbiAgICB9XG4gIH1cbiAgdXBkYXRlUGxheVN0YXRlKCkge1xuICAgIGNvbnN0IGRpc3RhbmNlTWFyaW8gPSB0aGlzLmZsYWdwb2xlLnggLSB0aGlzLm1hcmlvLng7XG4gICAgY29uc3QgZGlzdGFuY2VQZWFjaCA9IHRoaXMuZmxhZ3BvbGUueCAtIHRoaXMucGVhY2gueDtcbiAgICB0aGlzLnBlYWNoLnJ1bih0aGlzLmdhbWUuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjEuaGVhcnRSYXRlKTtcbiAgICB0aGlzLm1hcmlvLnJ1bih0aGlzLmdhbWUuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjIuaGVhcnRSYXRlKTtcbiAgICBpZihkaXN0YW5jZU1hcmlvIDwgV0lOTkVSX0RJU1RBTkNFX1BPTEUgfHwgZGlzdGFuY2VQZWFjaCA8IFdJTk5FUl9ESVNUQU5DRV9QT0xFKSB7XG4gICAgICBpZihkaXN0YW5jZU1hcmlvIDwgZGlzdGFuY2VQZWFjaCkge1xuICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMubWFyaW87XG4gICAgICAgIHRoaXMubG9zZXIgPSB0aGlzLnBlYWNoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnBlYWNoO1xuICAgICAgICB0aGlzLmxvc2VyID0gdGhpcy5tYXJpbztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0U3ViU3RhdGUoU1VCU1RBVEVfSlVNUF9QT0xFKTtcbiAgICB9XG4gIH1cbiAgdXBkYXRlSnVtcFN0YXRlKCkge1xuICAgIGNvbnN0IGRpc3RhbmNlV2lubmVyID0gdGhpcy5mbGFncG9sZS54IC0gdGhpcy53aW5uZXIueDtcbiAgICBpZihkaXN0YW5jZVdpbm5lciA8PSAwKSB7XG4gICAgICB0aGlzLndpbm5lci5ib2R5LnZlbG9jaXR5LnggPSAwO1xuICAgICAgdGhpcy5zZXRTdWJTdGF0ZShTVUJTVEFURV9GSU5JU0hFRCk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZUZpbmlzaGVkU3RhdGUoKSB7XG4gICAgdGhpcy5mbGFncG9sZS5mbGFnLnkgPSB0aGlzLndpbm5lci55IC0gdGhpcy5mbGFncG9sZS55O1xuICB9XG4gIHNldFN1YlN0YXRlKHZhbHVlKSB7XG4gICAgdGhpcy5zdWJTdGF0ZSA9IHZhbHVlO1xuICAgIHRoaXMucGxheUJ1dHRvbi52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5zdG9wQnV0dG9uLnZpc2libGUgPSBmYWxzZTtcbiAgICBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9QTEFZKSB7XG4gICAgICB0aGlzLnN0b3BCdXR0b24udmlzaWJsZSA9IHRydWU7XG4gICAgICAvLyB0aGlzLnBlYWNoLnJ1bigxMDApO1xuICAgICAgLy8gdGhpcy5tYXJpby5ydW4oNTApO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9KVU1QX1BPTEUpe1xuICAgICAgdGhpcy5zdG9wQnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5sb3Nlci5zdGFuZCgpO1xuICAgICAgdGhpcy53aW5uZXIuanVtcCgpO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9GSU5JU0hFRCl7XG4gICAgICB0aGlzLnBsYXlCdXR0b24udmlzaWJsZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxheUJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcGxheUNsaWNrZWQoKSB7XG4gICAgdGhpcy5zZXRTdWJTdGF0ZShTVUJTVEFURV9QTEFZKTtcbiAgfVxuICBzdG9wQ2xpY2tlZCgpIHtcbiAgICB0aGlzLnN0YXRlLnN0YXJ0KGBQbGF5YCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWxvYWQgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICBpbml0KCkge1xuICAgIHRoaXMuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICB0aGlzLnN0YWdlLmJhY2tncm91bmRDb2xvciA9IGAjNTA4OGEwYDtcbiAgfVxuICBwcmVsb2FkKCkge1xuICAgIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKGBjb21wb25lbnRzYCwgYGFzc2V0cy9tYXJpby9jb21wb25lbnRzLnBuZ2AsIGBhc3NldHMvbWFyaW8vY29tcG9uZW50cy5qc29uYCk7XG4gICAgdGhpcy5sb2FkLmF0bGFzSlNPTkhhc2goYG1hcmlvLWdyYXBoaWNzYCwgYGFzc2V0cy9tYXJpby9tYXJpby1ncmFwaGljcy5wbmdgLCBgYXNzZXRzL21hcmlvL21hcmlvLWdyYXBoaWNzLmpzb25gKTtcbiAgfVxuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5zdGF0ZS5zdGFydChgUGxheWApO1xuICB9XG59XG4iLCJjb25zdCBmcyA9IHJlcXVpcmVOb2RlKGBmcy1leHRyYWApO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2RlRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKGVsLCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuJGVsID0gJChlbCk7XG4gICAgLy9vcHRpb25zXG4gICAgaWYoIW9wdGlvbnMpXG4gICAge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGNvbnN0IHdpZHRoID0gJChlbCkucGFyZW50KClbMF0uc3R5bGUud2lkdGggfHwgYDEwMCVgO1xuICAgIGNvbnN0IGhlaWdodCA9ICQoZWwpLnBhcmVudCgpWzBdLnN0eWxlLmhlaWdodCB8fCBgMTAwJWA7XG5cbiAgICAvL3dyYXAgZWxlbWVudCBpbiBhIGNvbnRhaW5lclxuICAgIHRoaXMuJHdyYXBwZXJFbCA9ICQoZWwpLndyYXAoYDxkaXYgY2xhc3M9XCJsaXZlLWNvZGUtZWxlbWVudCBsaXZlLWNvZGUtY29kZS1lbGVtZW50XCI+PC9kaXY+YCkucGFyZW50KCk7XG4gICAgdGhpcy53cmFwcGVyRWwgPSB0aGlzLiR3cmFwcGVyRWxbMF07XG5cbiAgICB0aGlzLmlkID0gdGhpcy4kZWwuYXR0cihgZGF0YS1pZGApO1xuICAgIHRoaXMuZmlsZSA9IHRoaXMuJGVsLmRhdGEoYGZpbGVgKTtcblxuICAgIGlmKCF0aGlzLmlkICYmIHRoaXMuZmlsZSlcbiAgICB7XG4gICAgICB0aGlzLmlkID0gdGhpcy5maWxlO1xuICAgIH1cbiAgICBpZighdGhpcy5pZClcbiAgICB7XG4gICAgICB0aGlzLmlkID0gYGNvZGUtJHsgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl9YDtcbiAgICB9XG4gICAgdGhpcy4kZWwuYXR0cihgZGF0YS1pZGAsIHRoaXMuaWQpO1xuXG4gICAgdGhpcy5ydW50aW1lID0gdGhpcy4kZWwuZGF0YShgcnVudGltZWApO1xuICAgIGlmKCF0aGlzLnJ1bnRpbWUpXG4gICAge1xuICAgICAgdGhpcy5ydW50aW1lID0gYGJyb3dzZXJgO1xuICAgIH1cblxuICAgIHRoaXMuY29uc29sZSA9IHRoaXMuJGVsLmRhdGEoYGNvbnNvbGVgKTtcbiAgICB0aGlzLnByb2Nlc3NvciA9IHRoaXMuJGVsLmRhdGEoYHByb2Nlc3NvcmApO1xuXG4gICAgLy9sYW5ndWFnZSBpcyBwcm9ncmFtbWluZyBsYW5ndWFnZSAtIHVzZWQgZm9yIGluamVjdGluZyBpbiBodG1sXG4gICAgdGhpcy5sYW5ndWFnZSA9IHRoaXMuJGVsLmRhdGEoYGxhbmd1YWdlYCk7XG4gICAgaWYoIXRoaXMubGFuZ3VhZ2UpXG4gICAge1xuICAgICAgLy9kZWZhdWx0IHRvIGphdmFzY3JpcHRcbiAgICAgIHRoaXMubGFuZ3VhZ2UgPSBgamF2YXNjcmlwdGA7XG4gICAgfVxuXG4gICAgLy9tb2RlIGlzIG1vZGUgZm9yIGNvZGVtaXJyb3JcbiAgICB0aGlzLm1vZGUgPSB0aGlzLiRlbC5kYXRhKGBtb2RlYCk7XG4gICAgaWYoIXRoaXMubW9kZSlcbiAgICB7XG4gICAgICAvL2RlZmF1bHQgdG8gdGhlIGxhbmd1YWdlXG4gICAgICB0aGlzLm1vZGUgPSB0aGlzLmxhbmd1YWdlO1xuICAgIH1cblxuICAgIHRoaXMuY29kZU1pcnJvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKHRoaXMuZWwsIHtcbiAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgICAgbW9kZTogdGhpcy5tb2RlLFxuICAgICAgZXh0cmFLZXlzOiB7XCJDdHJsLVNwYWNlXCI6IGBhdXRvY29tcGxldGVgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb2RlTWlycm9yLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAvL3RoaXMuJGVsLmNzcygnd2lkdGgnLCAnMTAwJScpLmNzcygnaGVpZ2h0JywgJzEwMCUnKTtcbiAgICB0aGlzLmxheW91dCgpO1xuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgLy9ubyByZWFsIHJlYXNvbiB0byBkbyBwYXVzZSAvIHJlc3VtZVxuICB9XG5cbiAgcmVzdW1lKCkge1xuICAgIC8vbm8gcmVhbCByZWFzb24gdG8gZG8gcGF1c2UgLyByZXN1bWVcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG5cbiAgZ2V0VmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29kZU1pcnJvci5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLmNvZGVNaXJyb3Iuc2V0VmFsdWUodmFsdWUpO1xuICB9XG5cbiAgc2F2ZVRvRmlsZShmaWxlUGF0aCkge1xuICAgIHJldHVybiBmcy53cml0ZUZpbGUoZmlsZVBhdGgsIHRoaXMuZ2V0VmFsdWUoKSk7XG4gIH1cblxuICByZWFkRnJvbUZpbGUoZmlsZVBhdGgpIHtcbiAgICByZXR1cm4gZnMucmVhZEZpbGUoZmlsZVBhdGgsIGB1dGY4YClcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICB0aGlzLnNldFZhbHVlKGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoYGApO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSk7XG4gIH1cblxuICBsYXlvdXQoKSB7XG4gICAgLy8gdGhpcy4kd3JhcHBlckVsLmZpbmQoJy5Db2RlTWlycm9yLXNjcm9sbCcpLmNzcygnbWF4LWhlaWdodCcsIHRoaXMuJHdyYXBwZXJFbC5jc3MoJ2hlaWdodCcpKTtcbiAgICB0aGlzLmNvZGVNaXJyb3IucmVmcmVzaCgpO1xuICB9XG59XG4iLCJpbXBvcnQgTm9kZUFwcFJ1bm5lciBmcm9tICcuLi9Ob2RlQXBwUnVubmVyJztcblxuY29uc3QgaHRtbEVzY2FwZSA9IHN0ciA9PiB7XG4gIHJldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC8mL2csIGAmYW1wO2ApXG4gICAgLnJlcGxhY2UoL1xcXCIvZywgYCZxdW90O2ApXG4gICAgLnJlcGxhY2UoLycvZywgYCYjMzk7YClcbiAgICAucmVwbGFjZSgvPC9nLCBgJmx0O2ApXG4gICAgLnJlcGxhY2UoLz4vZywgYCZndDtgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnNvbGVFbGVtZW50IHtcblxuICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRlbCA9ICQoZWwpO1xuXG4gICAgdGhpcy5ub2RlQXBwUnVubmVyID0gbmV3IE5vZGVBcHBSdW5uZXIoKTtcbiAgICB0aGlzLm5vZGVBcHBSdW5uZXIub24oYHN0ZG91dC1kYXRhYCwgZGF0YSA9PiB0aGlzLmluZm8oW2RhdGFdKSk7XG4gICAgdGhpcy5ub2RlQXBwUnVubmVyLm9uKGBzdGRlcnItZGF0YWAsIGVycm9yID0+IHRoaXMuZXJyb3IoW2Vycm9yXSkpO1xuXG4gICAgLy9vcHRpb25zXG4gICAgaWYoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgLy93cmFwIGVsZW1lbnQgaW4gYSBjb250YWluZXJcbiAgICB0aGlzLiR3cmFwcGVyRWwgPSAkKGVsKS53cmFwKGA8ZGl2IGNsYXNzPVwibGl2ZS1jb2RlLWVsZW1lbnQgbGl2ZS1jb2RlLWNvbnNvbGUtZWxlbWVudCB1bnJlc2V0XCI+PC9kaXY+YCkucGFyZW50KCk7XG4gICAgdGhpcy53cmFwcGVyRWwgPSB0aGlzLiR3cmFwcGVyRWxbMF07XG5cbiAgICB0aGlzLmlkID0gdGhpcy4kZWwuYXR0cihgZGF0YS1pZGApO1xuICAgIGlmKCF0aGlzLmlkKVxuICAgIHtcbiAgICAgIC8vZ2VuZXJhdGUgaWRcbiAgICAgIHRoaXMuaWQgPSBgY29kZS0keyAgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpKX1gO1xuICAgICAgdGhpcy4kZWwuYXR0cihgZGF0YS1pZGAsIHRoaXMuaWQpO1xuICAgIH1cblxuICAgIHRoaXMuZmlsZSA9IHRoaXMuJGVsLmRhdGEoYGZpbGVgKTtcblxuICAgIHRoaXMuJGVsLmNzcyhgd2lkdGhgLCBgMTAwJWApLmNzcyhgaGVpZ2h0YCwgYDEwMCVgKTtcblxuICAgIHRoaXMubG9ncyA9IFtdO1xuXG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIGlmKCF0aGlzLmlzUnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMubm9kZUFwcFJ1bm5lci5zdG9wKCk7XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgaWYodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYoIXRoaXMuYXBwbGljYXRpb25QYXRoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubm9kZUFwcFJ1bm5lci5ydW4odGhpcy5hcHBsaWNhdGlvblBhdGgpO1xuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG5cbiAgcnVuTm9kZUFwcChhcHBsaWNhdGlvblBhdGgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gICAgdGhpcy5hcHBsaWNhdGlvblBhdGggPSBhcHBsaWNhdGlvblBhdGg7XG4gICAgdGhpcy5yZXN1bWUoKTtcbiAgfVxuXG4gIG1lc3NhZ2UoZXZlbnQpIHtcbiAgICBjb25zdCBzdHIgPSBodG1sRXNjYXBlKGV2ZW50Lm1lc3NhZ2UpO1xuICAgIGxldCBmaWxlTmFtZSA9IGV2ZW50LnNvdXJjZUlkLnNwbGl0KGAvYCk7XG4gICAgZmlsZU5hbWUgPSBmaWxlTmFtZVtmaWxlTmFtZS5sZW5ndGggLSAxXTtcbiAgICB0aGlzLmxvZ3MucHVzaChgPGRpdiBjbGFzcz1cImNvbnNvbGUtbWVzc2FnZVwiPlxuICAgICAgPHByZSBjbGFzcz1cImNvbnNvbGUtbWVzc2FnZV9fY29udGVudCBjb25zb2xlLW1lc3NhZ2VfX2NvbnRlbnQtLWxldmVsJHtldmVudC5sZXZlbH1cIj4keyAgc3RyICB9PC9wcmU+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29uc29sZS1tZXNzYWdlX19vcmlnaW5cIj4ke2ZpbGVOYW1lfToke2V2ZW50LmxpbmV9PC9kaXY+XG4gICAgPC9kaXY+YCk7XG4gICAgd2hpbGUodGhpcy5sb2dzLmxlbmd0aCA+IDIwKSB7XG4gICAgICB0aGlzLmxvZ3Muc2hpZnQoKTtcbiAgICB9XG4gICAgY29uc3QgaHRtbCA9IHRoaXMubG9ncy5qb2luKGBgKTtcbiAgICB0aGlzLmVsLmlubmVySFRNTCA9IGh0bWw7XG4gICAgdGhpcy53cmFwcGVyRWwuc2Nyb2xsVG9wID0gdGhpcy53cmFwcGVyRWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG59XG4iLCJjb25zdCBURVJNSU5BTF9VUkwgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAwYDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVybWluYWxFbGVtZW50IHtcblxuICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRlbCA9ICQoZWwpO1xuXG4gICAgdGhpcy5faXBjTWVzc2FnZUhhbmRsZXIgPSBlID0+IHRoaXMuaXBjTWVzc2FnZUhhbmRsZXIoZSk7XG5cbiAgICAvL29wdGlvbnNcbiAgICBpZighb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICAvL3dyYXAgZWxlbWVudCBpbiBhIGNvbnRhaW5lclxuICAgIHRoaXMuJHdyYXBwZXJFbCA9ICQoZWwpLndyYXAoYDxkaXYgY2xhc3M9XCJsaXZlLWNvZGUtZWxlbWVudCBsaXZlLWNvZGUtdGVybWluYWwtZWxlbWVudFwiPjwvZGl2PmApLnBhcmVudCgpO1xuICAgIHRoaXMud3JhcHBlckVsID0gdGhpcy4kd3JhcHBlckVsWzBdO1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgKTtcbiAgICBpZighdGhpcy5pZClcbiAgICB7XG4gICAgICAvL2dlbmVyYXRlIGlkXG4gICAgICB0aGlzLmlkID0gYGNvZGUtJHsgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl9YDtcbiAgICAgIHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpciA9IHRoaXMuJGVsLmRhdGEoYGRpcmApO1xuICAgIHRoaXMuYXV0b3J1biA9IHRoaXMuJGVsLmRhdGEoYGF1dG9ydW5gKTtcblxuICAgIHRoaXMuJGVsLmNzcyhgd2lkdGhgLCBgMTAwJWApLmNzcyhgaGVpZ2h0YCwgYDEwMCVgKTtcblxuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIGlmKHRoaXMud2Vidmlldykge1xuICAgICAgdGhpcy53ZWJ2aWV3LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53ZWJ2aWV3KTtcbiAgICAgIHRoaXMud2VidmlldyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICBpZih0aGlzLmlzUnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgLy9jcmVhdGUgYSB3ZWJ2aWV3IHRhZ1xuICAgIGlmKHRoaXMud2Vidmlldykge1xuICAgICAgdGhpcy53ZWJ2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGlwYy1tZXNzYWdlYCwgdGhpcy5faXBjTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgdGhpcy53ZWJ2aWV3LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53ZWJ2aWV3KTtcbiAgICAgIHRoaXMud2VidmlldyA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLndlYnZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB3ZWJ2aWV3YCk7XG4gICAgLy8gdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2RvbS1yZWFkeScsICgpID0+IHtcbiAgICAvLyAgIHRoaXMud2Vidmlldy5vcGVuRGV2VG9vbHMoKTtcbiAgICAvLyB9KTtcbiAgICB0aGlzLndlYnZpZXcuYWRkRXZlbnRMaXN0ZW5lcihgaXBjLW1lc3NhZ2VgLCB0aGlzLl9pcGNNZXNzYWdlSGFuZGxlcik7XG4gICAgdGhpcy53ZWJ2aWV3LnN0eWxlLndpZHRoID0gYDEwMCVgO1xuICAgIHRoaXMud2Vidmlldy5zdHlsZS5oZWlnaHQgPSBgMTAwJWA7XG4gICAgdGhpcy53ZWJ2aWV3LnNldEF0dHJpYnV0ZShgbm9kZWludGVncmF0aW9uYCwgYGApO1xuICAgIHRoaXMud2Vidmlldy5zZXRBdHRyaWJ1dGUoYHNyY2AsIFRFUk1JTkFMX1VSTCk7XG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLndlYnZpZXcpO1xuICB9XG5cbiAgaXBjTWVzc2FnZUhhbmRsZXIoZSkge1xuICAgIGlmKGUuY2hhbm5lbCAhPT0gYG1lc3NhZ2UtZnJvbS10ZXJtaW5hbGApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYoZS5hcmdzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbyA9IGUuYXJnc1swXTtcbiAgICBpZighby5jb21tYW5kKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaChvLmNvbW1hbmQpIHtcbiAgICBjYXNlIGBpbml0YDpcbiAgICAgIGlmKHRoaXMuZGlyKSB7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmQoYGNkICR7dGhpcy5kaXJ9YCk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmQoYGNsZWFyYCk7XG4gICAgICB9XG4gICAgICBpZih0aGlzLmF1dG9ydW4pIHtcbiAgICAgICAgdGhpcy5leGVjdXRlQ29tbWFuZCh0aGlzLmF1dG9ydW4pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUud2FybihgdW5rbm93IGNvbW1hbmQgb2JqZWN0IGZyb20gdGVybWluYWxgKTtcbiAgICAgIGNvbnNvbGUud2FybihvKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGV4ZWN1dGVDb21tYW5kKGNvbW1hbmRTdHJpbmcpIHtcbiAgICB0aGlzLndlYnZpZXcuc2VuZChgbWVzc2FnZS10by10ZXJtaW5hbGAsIHtcbiAgICAgIGNvbW1hbmQ6IGBleGVjdXRlYCxcbiAgICAgIHZhbHVlOiBjb21tYW5kU3RyaW5nXG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViUHJldmlld0VsZW1lbnQge1xuXG4gIGNvbnN0cnVjdG9yKGVsLCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuJGVsID0gJChlbCk7XG4gICAgLy9vcHRpb25zXG4gICAgaWYoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cdFx0Ly93cmFwIGVsZW1lbnQgaW4gYSBjb250YWluZXJcbiAgICB0aGlzLiR3cmFwcGVyRWwgPSAkKGVsKS53cmFwKGA8ZGl2IGNsYXNzPVwibGl2ZS1jb2RlLWVsZW1lbnQgbGl2ZS1jb2RlLXdlYi1wcmV2aWV3LWVsZW1lbnRcIj48L2Rpdj5gKS5wYXJlbnQoKTtcbiAgICB0aGlzLndyYXBwZXJFbCA9IHRoaXMuJHdyYXBwZXJFbFswXTtcblxuICAgIHRoaXMuaWQgPSB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCk7XG4gICAgaWYoIXRoaXMuaWQpXG5cdFx0e1xuXHRcdFx0Ly9nZW5lcmF0ZSBpZFxuICAgICAgdGhpcy5pZCA9IGBjb2RlLSR7ICBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwICogbmV3IERhdGUoKS5nZXRUaW1lKCkpfWA7XG4gICAgICB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCwgdGhpcy5pZCk7XG4gICAgfVxuXG4gICAgdGhpcy5maWxlID0gdGhpcy4kZWwuZGF0YShgZmlsZWApIHx8IHRoaXMuJGVsLmRhdGEoYHVybGApO1xuICAgIHRoaXMuYXV0b2xvYWQgPSB0aGlzLiRlbC5kYXRhKGBhdXRvbG9hZGApIHx8IGZhbHNlO1xuICAgIHRoaXMuem9vbWZhY3RvciA9IHRoaXMuJGVsLmRhdGEoYHpvb21mYWN0b3JgKSB8fCBmYWxzZTtcblxuICAgIHRoaXMuY29uc29sZSA9IHRoaXMuJGVsLmRhdGEoYGNvbnNvbGVgKSB8fCBmYWxzZTtcblxuICAgIHRoaXMuJGVsLmNzcyhgd2lkdGhgLCBgMTAwJWApLmNzcyhgaGVpZ2h0YCwgYDEwMCVgKTtcblxuICAgIHRoaXMudXJsID0gZmFsc2U7XG4gICAgdGhpcy5ibG9ja3MgPSBmYWxzZTtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuXHRcdC8vd2VidmlldyBnZXRzIGNyZWF0ZWQgYnkgY2FsbGluZyB1cGRhdGVVcmwgb3IgdXBkYXRlQ29kZVxuICB9XG5cbiAgZ2V0IG5lZWRzT3V0cHV0UGF0aFByZWZpeCgpIHtcbiAgICByZXR1cm4gISh0aGlzLiRlbC5kYXRhKGB1cmxgKSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgaWYodGhpcy53ZWJ2aWV3KSB7XG4gICAgICB0aGlzLndlYnZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcihgZGlkLWdldC1yZXNwb25zZS1kZXRhaWxzYCwgdGhpcy5fZGlkR2V0UmVzcG9uc2VEZXRhaWxzSGFuZGxlcik7XG4gICAgICB0aGlzLndlYnZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcihgZG9tLXJlYWR5YCwgdGhpcy5fZG9tUmVhZHlIYW5kbGVyKTtcbiAgICAgIHRoaXMud2Vidmlldy5yZW1vdmVFdmVudExpc3RlbmVyKGBkaWQtZmFpbC1sb2FkYCwgdGhpcy5fZGlkRmFpbExvYWRIYW5kbGVyKTtcbiAgICAgIHRoaXMud2Vidmlldy5yZW1vdmVFdmVudExpc3RlbmVyKGBpcGMtbWVzc2FnZWAsIHRoaXMuX2lwY01lc3NhZ2VIYW5kbGVyKTtcbiAgICAgIHRoaXMud2Vidmlldy5yZW1vdmVFdmVudExpc3RlbmVyKGBjb25zb2xlLW1lc3NhZ2VgLCB0aGlzLl9jb25zb2xlTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgdGhpcy53ZWJ2aWV3LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53ZWJ2aWV3KTtcbiAgICAgIHRoaXMud2VidmlldyA9IGZhbHNlO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgaWYodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYodGhpcy51cmwgPT09IGZhbHNlICYmIHRoaXMuYmxvY2tzID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgdGhpcy5fY3JlYXRlV2VidmlldygpO1xuICB9XG5cbiAgX2NyZWF0ZVdlYnZpZXcoKSB7XG4gICAgLy9jcmVhdGUgYSB3ZWJ2aWV3IHRhZ1xuICAgIGlmKHRoaXMud2Vidmlldykge1xuICAgICAgdGhpcy53ZWJ2aWV3LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53ZWJ2aWV3KTtcbiAgICAgIHRoaXMud2VidmlldyA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLndlYnZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGB3ZWJ2aWV3YCk7XG4gICAgdGhpcy53ZWJ2aWV3LnN0eWxlLndpZHRoID0gYDEwMCVgO1xuICAgIHRoaXMud2Vidmlldy5zdHlsZS5oZWlnaHQgPSBgMTAwJWA7XG4gICAgdGhpcy53ZWJ2aWV3LnByZWxvYWQgPSBganMvbGl2ZWNvZGUtd2VicHJldmlldy5qc2A7XG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLndlYnZpZXcpO1xuXG4gICAgY29uc3QgdXJsID0gKHRoaXMudXJsICE9PSBmYWxzZSkgPyB0aGlzLnVybCA6IGB3ZWJwcmV2aWV3Lmh0bWxgO1xuICAgIGxldCBodG1sU3JjID0gYGA7XG4gICAgaWYodGhpcy5ibG9ja3MgIT09IGZhbHNlKSB7XG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ibG9ja3MubGVuZ3RoOyBpKyspXG5cdFx0XHR7XG4gICAgICAgIGh0bWxTcmMgKz0gdGhpcy5ibG9ja3NbaV0uY29kZTtcbiAgICAgIH1cbiAgICB9XG5cblx0XHQvL2FkZCBsaXN0ZW5lcnNcbiAgICB0aGlzLl9kaWRHZXRSZXNwb25zZURldGFpbHNIYW5kbGVyID0gZSA9PiB7XG4gICAgICBpZihlLm9yaWdpbmFsVVJMICE9PSB0aGlzLndlYnZpZXcuc3JjKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMuJGVsLmF0dHIoYGRhdGEtb3Blbi1kZXZ0b29sc2ApKSB7XG4gICAgICAgIHRoaXMud2Vidmlldy5vcGVuRGV2VG9vbHMoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMud2Vidmlldy5hZGRFdmVudExpc3RlbmVyKGBkaWQtZ2V0LXJlc3BvbnNlLWRldGFpbHNgLCB0aGlzLl9kaWRHZXRSZXNwb25zZURldGFpbHNIYW5kbGVyKTtcblxuICAgIHRoaXMuX2RvbVJlYWR5SGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnpvb21mYWN0b3IpIHtcbiAgICAgICAgY29uc3Qgem9vbWZhY3RvciA9IHBhcnNlRmxvYXQodGhpcy56b29tZmFjdG9yKTtcbiAgICAgICAgdGhpcy53ZWJ2aWV3LnNldFpvb21GYWN0b3Ioem9vbWZhY3Rvcik7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLndlYnZpZXcuYWRkRXZlbnRMaXN0ZW5lcihgZG9tLXJlYWR5YCwgdGhpcy5fZG9tUmVhZHlIYW5kbGVyKTtcblxuICAgIHRoaXMuX2RpZEZhaWxMb2FkSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMucmV0cnlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgdGhpcy5yZXN1bWUoKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH07XG4gICAgdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoYGRpZC1mYWlsLWxvYWRgLCB0aGlzLl9kaWRGYWlsTG9hZEhhbmRsZXIpO1xuXG4gICAgdGhpcy5fY29uc29sZU1lc3NhZ2VIYW5kbGVyID0gZSA9PiB7XG4gICAgICB0aGlzLiR3cmFwcGVyRWwudHJpZ2dlcihgY29uc29sZS1tZXNzYWdlYCwgZSk7XG4gICAgfTtcbiAgICB0aGlzLndlYnZpZXcuYWRkRXZlbnRMaXN0ZW5lcihgY29uc29sZS1tZXNzYWdlYCwgdGhpcy5fY29uc29sZU1lc3NhZ2VIYW5kbGVyKTtcblxuICAgIHRoaXMuX2lwY01lc3NhZ2VIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgaWYoZXZlbnQuY2hhbm5lbCA9PT0gYHJlcXVlc3QtaHRtbGApXG4gICAgICB7XG4gICAgICAgIHRoaXMud2Vidmlldy5zZW5kKGByZWNlaXZlLWh0bWxgLCBodG1sU3JjKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMud2Vidmlldy5hZGRFdmVudExpc3RlbmVyKGBpcGMtbWVzc2FnZWAsIHRoaXMuX2lwY01lc3NhZ2VIYW5kbGVyKTtcblxuICAgIGlmKCF0aGlzLiRlbC5hdHRyKGBkYXRhLWRpc2FibGUtbm9kZWludGVncmF0aW9uYCkpIHtcbiAgICAgIHRoaXMud2Vidmlldy5zZXRBdHRyaWJ1dGUoYG5vZGVpbnRlZ3JhdGlvbmAsIGBgKTtcbiAgICB9XG4gICAgdGhpcy53ZWJ2aWV3LnNldEF0dHJpYnV0ZShgc3JjYCwgdXJsKTtcbiAgfVxuXG4gIHVwZGF0ZVVybCh1cmwpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5ibG9ja3MgPSBmYWxzZTtcbiAgICB0aGlzLnJlc3VtZSgpO1xuICB9XG5cbiAgdXBkYXRlQ29kZShibG9ja3MpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gICAgdGhpcy51cmwgPSBmYWxzZTtcbiAgICB0aGlzLmJsb2NrcyA9IGJsb2NrcztcbiAgICB0aGlzLnJlc3VtZSgpO1xuICB9XG5cbiAgb3BlbkRldlRvb2xzKCkge1xuICAgIHRoaXMud2Vidmlldy5vcGVuRGV2VG9vbHMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViY2FtRWxlbWVudCB7XG5cbiAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy4kZWwgPSAkKGVsKTtcblxuICAgIC8vb3B0aW9uc1xuICAgIGlmKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgKTtcbiAgICBpZighdGhpcy5pZClcbiAgICB7XG4gICAgICAvL2dlbmVyYXRlIGlkXG4gICAgICB0aGlzLmlkID0gYHdlYmNhbS0keyAgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpKX1gO1xuICAgICAgdGhpcy4kZWwuYXR0cihgZGF0YS1pZGAsIHRoaXMuaWQpO1xuICAgIH1cblxuICAgIHRoaXMuc291cmNlID0gdGhpcy4kZWwuYXR0cihgZGF0YS1zb3VyY2VgKTtcbiAgICBpZih0aGlzLnNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zb3VyY2UpO1xuICAgIH1cblxuICAgIHRoaXMuY3R4ID0gdGhpcy5lbC5nZXRDb250ZXh0KGAyZGApO1xuXG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZUlkKTtcbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICBpZih0aGlzLmlzUnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgdGhpcy5hbmltYXRpb25GcmFtZUlkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmRyYXdMb29wKCkpO1xuICB9XG5cbiAgZHJhd0xvb3AoKSB7XG4gICAgaWYodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5kcmF3TG9vcCgpKTtcbiAgICB9XG4gICAgaWYoIXRoaXMuc291cmNlRWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC53aWR0aCA9IHRoaXMuc291cmNlRWwud2lkdGg7XG4gICAgdGhpcy5lbC5oZWlnaHQgPSB0aGlzLnNvdXJjZUVsLmhlaWdodDtcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5lbC53aWR0aCwgdGhpcy5lbC5oZWlnaHQpO1xuICAgIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLnNvdXJjZUVsLCAwLCAwKTtcbiAgfVxufVxuIiwiaW1wb3J0IENvbnNvbGVFbGVtZW50IGZyb20gJy4vQ29uc29sZUVsZW1lbnQnO1xuaW1wb3J0IFRlcm1pbmFsRWxlbWVudCBmcm9tICcuL1Rlcm1pbmFsRWxlbWVudCc7XG5pbXBvcnQgQ29kZUVsZW1lbnQgZnJvbSAnLi9Db2RlRWxlbWVudCc7XG5pbXBvcnQgV2ViUHJldmlld0VsZW1lbnQgZnJvbSAnLi9XZWJQcmV2aWV3RWxlbWVudCc7XG5pbXBvcnQgV2ViY2FtRWxlbWVudCBmcm9tICcuL1dlYmNhbUVsZW1lbnQnO1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZU5vZGUoYHBhdGhgKTtcbmNvbnN0IGZzID0gcmVxdWlyZU5vZGUoYGZzLWV4dHJhYCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdmVDb2RlIHtcblxuICBjb25zdHJ1Y3RvcigkZWwsIGNvbmZpZywgcmVhZHlDYWxsYmFjaykge1xuICAgIHRoaXMuJGVsID0gJGVsO1xuICAgIHRoaXMuZWwgPSB0aGlzLiRlbFswXTtcblxuICAgIGlmKHRoaXMuJGVsLmF0dHIoYGRhdGEtZW50cnktcGF0aGApKSB7XG4gICAgICB0aGlzLmVudHJ5UGF0aCA9IHBhdGguam9pbihjb25maWcucHJlc2VudGF0aW9uUGF0aCwgdGhpcy4kZWwuYXR0cihgZGF0YS1lbnRyeS1wYXRoYCkpO1xuICAgIH1cbiAgICBpZih0aGlzLiRlbC5hdHRyKGBkYXRhLW91dHB1dC1wYXRoYCkpIHtcbiAgICAgIHRoaXMub3V0cHV0UGF0aCA9IHBhdGguam9pbihjb25maWcucHJlc2VudGF0aW9uUGF0aCwgdGhpcy4kZWwuYXR0cihgZGF0YS1vdXRwdXQtcGF0aGApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYodGhpcy5lbnRyeVBhdGgpIHtcbiAgICAgICAgdGhpcy5vdXRwdXRQYXRoID0gdGhpcy5lbnRyeVBhdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIHAudGhlbigoKSA9PiB7XG4gICAgICBpZih0aGlzLmVudHJ5UGF0aCAmJiB0aGlzLmVudHJ5UGF0aCAhPT0gdGhpcy5vdXRwdXRQYXRoKSB7XG4gICAgICAgIHJldHVybiBmcy5jb3B5KHRoaXMuZW50cnlQYXRoLCB0aGlzLm91dHB1dFBhdGgpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgLy9jcmVhdGUgdGhlIGNvbnNvbGVzXG4gICAgICB0aGlzLmNvbnNvbGVFbGVtZW50cyA9IHt9O1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cImNvbnNvbGVcIl1gKS5lYWNoKCgoaW5kZXgsIGNvbnNvbGVFbCkgPT4gdGhpcy5jcmVhdGVDb25zb2xlRWxlbWVudChjb25zb2xlRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHRoZSB0ZXJtaW5hbHNcbiAgICAgIHRoaXMudGVybWluYWxFbGVtZW50cyA9IHt9O1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cInRlcm1pbmFsXCJdYCkuZWFjaCgoKGluZGV4LCB0ZXJtaW5hbEVsKSA9PiB0aGlzLmNyZWF0ZVRlcm1pbmFsRWxlbWVudCh0ZXJtaW5hbEVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSB0aGUgcHJldmlld3NcbiAgICAgIHRoaXMud2ViUHJldmlld0VsZW1lbnRzID0ge307XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwid2ViLXByZXZpZXdcIl1gKS5lYWNoKCgoaW5kZXgsIHdlYlByZXZpZXdFbCkgPT4gdGhpcy5jcmVhdGVXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHRoZSBjb2RlIGVkaXRvcnNcbiAgICAgIHRoaXMuY29kZUVsZW1lbnRzID0ge307XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwiY29kZVwiXWApLmVhY2goKChpbmRleCwgY29kZUVsKSA9PiB0aGlzLmNyZWF0ZUNvZGVFbGVtZW50KGNvZGVFbCkpKTtcblxuICAgICAgLy9jcmVhdGUgdGhlIHdlYmNhbSBlbGVtZW50c1xuICAgICAgdGhpcy53ZWJjYW1FbGVtZW50cyA9IHt9O1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cIndlYmNhbVwiXWApLmVhY2goKChpbmRleCwgd2ViY2FtRWwpID0+IHRoaXMuY3JlYXRlV2ViY2FtRWxlbWVudCh3ZWJjYW1FbCkpKTtcblxuICAgICAgLy9jcmVhdGUgcnVuIGJ1dHRvbnNcbiAgICAgIHRoaXMucnVuQnV0dG9uRWxzID0gW107XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwicnVuLWJ1dHRvblwiXWApLmVhY2goKChpbmRleCwgcnVuQnV0dG9uRWwpID0+IHRoaXMuY3JlYXRlUnVuQnV0dG9uKHJ1bkJ1dHRvbkVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSBzYXZlIGJ1dHRvbnNcbiAgICAgIHRoaXMuc2F2ZUJ1dHRvbkVscyA9IFtdO1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cInNhdmUtYnV0dG9uXCJdYCkuZWFjaCgoKGluZGV4LCBzYXZlQnV0dG9uRWwpID0+IHRoaXMuY3JlYXRlU2F2ZUJ1dHRvbihzYXZlQnV0dG9uRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHJlbG9hZCBidXR0b25zXG4gICAgICB0aGlzLnJlbG9hZEJ1dHRvbkVscyA9IFtdO1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cInJlbG9hZC1idXR0b25cIl1gKS5lYWNoKCgoaW5kZXgsIHJlbG9hZEJ1dHRvbkVsKSA9PiB0aGlzLmNyZWF0ZVJlbG9hZEJ1dHRvbihyZWxvYWRCdXR0b25FbCkpKTtcblxuICAgICAgLy9jcmVhdGUgcmVsb2FkIGJ1dHRvbnNcbiAgICAgIHRoaXMuZGV2VG9vbHNCdXR0b25FbHMgPSBbXTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJkZXZ0b29scy1idXR0b25cIl1gKS5lYWNoKCgoaW5kZXgsIGRldlRvb2xzQnV0dG9uRWwpID0+IHRoaXMuY3JlYXRlRGV2VG9vbHNCdXR0b24oZGV2VG9vbHNCdXR0b25FbCkpKTtcblxuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4gdGhpcy5zZXRDb2RlRWxlbWVudFZhbHVlc0Zyb21GaWxlcygpKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgIGlmKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzdW1lKCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbihyZWFkeUNhbGxiYWNrKS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbiAgICAvL2Rpc2FibGUga2V5Ym9hcmQgYnViYmxpbmcgdXBcbiAgICAkKHdpbmRvdykub24oYGtleWRvd25gLCBldmVudCA9PiB0aGlzLmtleURvd25IYW5kbGVyKGV2ZW50KSk7XG4gIH1cblxuICBrZXlEb3duSGFuZGxlcihlKSB7XG4gICAgaWYodGhpcy5lbC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJuIGEgcHJldmlvdXNseSBjcmVhdGVkIGNvZGUgZWxlbWVudCwgYmFzZWQgb24gdGhlIGlucHV0XG4gICAqIGlucHV0IGNhbiBiZTpcbiAgICogIC0gaHRtbCBkb20gZWxlbWVudFxuICAgKiAgLSBpZCBvZiBjb2RlIGVsZW1lbnRcbiAgICpcbiAgICogcmV0dXJucyB0aGUgY29kZSBlbGVtZW50IGlmIGZvdW5kLCBvdGhlcndpc2UgcmV0dXJucyBmYWxzZVxuICAgKi9cbiAgZ2V0Q29kZUVsZW1lbnQoaW5wdXQpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KHRoaXMuY29kZUVsZW1lbnRzLCBpbnB1dCk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJuIGEgcHJldmlvdXNseSBjcmVhdGVkIHdlYiBwcmV2aWV3IGVsZW1lbnQsIGJhc2VkIG9uIHRoZSBpbnB1dFxuICAgKiBpbnB1dCBjYW4gYmU6XG4gICAqICAtIGh0bWwgZG9tIGVsZW1lbnRcbiAgICogIC0gaWQgb2YgY29kZSBlbGVtZW50XG4gICAqXG4gICAqIHJldHVybnMgdGhlIHdlYiBwcmV2aWV3IGVsZW1lbnQgaWYgZm91bmQsIG90aGVyd2lzZSByZXR1cm5zIGZhbHNlXG4gICAqL1xuICBnZXRXZWJQcmV2aWV3RWxlbWVudChpbnB1dCkge1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnQodGhpcy53ZWJQcmV2aWV3RWxlbWVudHMsIGlucHV0KTtcbiAgfVxuXG4gIGdldEVsZW1lbnQoZWxlbWVudHNDb2xsZWN0aW9uLCBpbnB1dCkge1xuICAgIGxldCBwcm9wZXJ0eVRvQ2hlY2sgPSBgaWRgO1xuICAgIGlmKGlucHV0Lm5vZGVOYW1lKSB7XG4gICAgICBwcm9wZXJ0eVRvQ2hlY2sgPSBgZWxgO1xuICAgIH1cbiAgICBmb3IoY29uc3Qga2V5IGluIGVsZW1lbnRzQ29sbGVjdGlvbilcbiAgICB7XG4gICAgICBpZihlbGVtZW50c0NvbGxlY3Rpb25ba2V5XVtwcm9wZXJ0eVRvQ2hlY2tdID09PSBpbnB1dCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudHNDb2xsZWN0aW9uW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHNldENvZGVFbGVtZW50VmFsdWVGcm9tRmlsZShjb2RlRWxlbWVudCwgZmlsZVBhdGgpIHtcbiAgICByZXR1cm4gY29kZUVsZW1lbnQucmVhZEZyb21GaWxlKGZpbGVQYXRoKTtcbiAgfVxuXG4gIHNhdmVDb2RlRWxlbWVudFRvRmlsZShjb2RlRWxlbWVudCwgZmlsZVBhdGgpIHtcbiAgICByZXR1cm4gY29kZUVsZW1lbnQuc2F2ZVRvRmlsZShmaWxlUGF0aCk7XG4gIH1cblxuICBnZXRGaWxlUGF0aChmaWxlKSB7XG4gICAgaWYoIWZpbGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYodGhpcy5vdXRwdXRQYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5qb2luKHRoaXMub3V0cHV0UGF0aCwgZmlsZSk7XG4gICAgfVxuICAgIHJldHVybiBmaWxlO1xuICB9XG5cbiAgZ2V0RmlsZVBhdGhGb3JDb2RlRWxlbWVudChjb2RlRWxlbWVudCkge1xuICAgIGlmKCFjb2RlRWxlbWVudC5maWxlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEZpbGVQYXRoKGNvZGVFbGVtZW50LmZpbGUpO1xuICB9XG5cbiAgc2V0Q29kZUVsZW1lbnRWYWx1ZXNGcm9tRmlsZXMoKSB7XG4gICAgY29uc3QgdGFza3MgPSBbXTtcbiAgICBsZXQga2V5O1xuICAgIGxldCBjb2RlRWxlbWVudDtcbiAgICBsZXQgZmlsZVBhdGg7XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICBjb2RlRWxlbWVudCA9IHRoaXMuY29kZUVsZW1lbnRzW2tleV07XG4gICAgICBmaWxlUGF0aCA9IHRoaXMuZ2V0RmlsZVBhdGhGb3JDb2RlRWxlbWVudChjb2RlRWxlbWVudCk7XG4gICAgICBpZihmaWxlUGF0aClcbiAgICAgIHtcbiAgICAgICAgdGFza3MucHVzaCh0aGlzLnNldENvZGVFbGVtZW50VmFsdWVGcm9tRmlsZShjb2RlRWxlbWVudCwgZmlsZVBhdGgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRhc2tzKTtcbiAgfVxuXG4gIGF1dG9TdGFydFdlYnByZXZpZXdFbGVtZW50c1doZW5OZWVkZWQoKSB7XG4gICAgZm9yKGNvbnN0IGtleSBpbiB0aGlzLndlYlByZXZpZXdFbGVtZW50cylcbiAgICB7XG4gICAgICBjb25zdCB3ZWJQcmV2aWV3RWxlbWVudCA9IHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2tleV07XG4gICAgICBpZih3ZWJQcmV2aWV3RWxlbWVudC5hdXRvbG9hZCkge1xuICAgICAgICB0aGlzLnJlbG9hZFdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzYXZlQ29kZUVsZW1lbnRzVG9GaWxlcygpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGxldCBrZXk7XG4gICAgbGV0IGNvZGVFbGVtZW50O1xuICAgIGxldCBmaWxlUGF0aDtcbiAgICBmb3Ioa2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIGNvZGVFbGVtZW50ID0gdGhpcy5jb2RlRWxlbWVudHNba2V5XTtcbiAgICAgIGZpbGVQYXRoID0gdGhpcy5nZXRGaWxlUGF0aEZvckNvZGVFbGVtZW50KGNvZGVFbGVtZW50KTtcbiAgICAgIGlmKGZpbGVQYXRoKVxuICAgICAge1xuICAgICAgICB0YXNrcy5wdXNoKHRoaXMuc2F2ZUNvZGVFbGVtZW50VG9GaWxlKGNvZGVFbGVtZW50LCBmaWxlUGF0aCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGFza3MpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICBsZXQga2V5O1xuICAgIGZvcihrZXkgaW4gdGhpcy5jb25zb2xlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5kZXN0cm95Q29uc29sZUVsZW1lbnQodGhpcy5jb25zb2xlRWxlbWVudHNba2V5XSk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy50ZXJtaW5hbEVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuZGVzdHJveVRlcm1pbmFsRWxlbWVudCh0aGlzLnRlcm1pbmFsRWxlbWVudHNba2V5XSk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5kZXN0cm95V2ViUHJldmlld0VsZW1lbnQodGhpcy53ZWJQcmV2aWV3RWxlbWVudHNba2V5XSk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5kZXN0cm95Q29kZUVsZW1lbnQodGhpcy5jb2RlRWxlbWVudHNba2V5XSk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy53ZWJjYW1FbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmRlc3Ryb3lXZWJjYW1FbGVtZW50KHRoaXMud2ViY2FtRWxlbWVudHNba2V5XSk7XG4gICAgfVxuICAgIHRoaXMucnVuQnV0dG9uRWxzLmZvckVhY2goZWwgPT4gdGhpcy5kZXN0cm95UnVuQnV0dG9uKGVsKSk7XG4gICAgdGhpcy5zYXZlQnV0dG9uRWxzLmZvckVhY2goZWwgPT4gdGhpcy5kZXN0cm95U2F2ZUJ1dHRvbihlbCkpO1xuICAgIHRoaXMucmVsb2FkQnV0dG9uRWxzLmZvckVhY2goZWwgPT4gdGhpcy5kZXN0cm95UmVsb2FkQnV0dG9uKGVsKSk7XG4gICAgdGhpcy5kZXZUb29sc0J1dHRvbkVscy5mb3JFYWNoKGVsID0+IHRoaXMuZGVzdHJveURldlRvb2xzQnV0dG9uKGVsKSk7XG4gICAgLy9UT0RPOiBkZXN0cm95IHRoZSB0bXAgZGlyZWN0b3J5IGZvciB0aGlzIGluc3RhbmNlXG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIGlmKCF0aGlzLmxvYWRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQga2V5O1xuICAgIGZvcihrZXkgaW4gdGhpcy5jb25zb2xlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5jb25zb2xlRWxlbWVudHNba2V5XS5wYXVzZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMudGVybWluYWxFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLnRlcm1pbmFsRWxlbWVudHNba2V5XS5wYXVzZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMud2ViUHJldmlld0VsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2tleV0ucGF1c2UoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmNvZGVFbGVtZW50c1trZXldLnBhdXNlKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy53ZWJjYW1FbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLndlYmNhbUVsZW1lbnRzW2tleV0ucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICAgIGlmKCF0aGlzLmxvYWRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQga2V5O1xuICAgIGZvcihrZXkgaW4gdGhpcy5jb25zb2xlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5jb25zb2xlRWxlbWVudHNba2V5XS5yZXN1bWUoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLnRlcm1pbmFsRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy50ZXJtaW5hbEVsZW1lbnRzW2tleV0ucmVzdW1lKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy53ZWJQcmV2aWV3RWxlbWVudHNba2V5XS5yZXN1bWUoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmNvZGVFbGVtZW50c1trZXldLnJlc3VtZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMud2ViY2FtRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy53ZWJjYW1FbGVtZW50c1trZXldLnJlc3VtZSgpO1xuICAgIH1cbiAgICB0aGlzLmF1dG9TdGFydFdlYnByZXZpZXdFbGVtZW50c1doZW5OZWVkZWQoKTtcbiAgfVxuXG4gIGxheW91dCgpIHtcbiAgICAvL21pZ2h0IGJlIHRyaWdnZXJlZCBhZnRlciBzcGxpdCBwYW5lIHJlc2l6ZSBvciB0YWIgc3dpdGNoXG4gICAgLy9jb2RlbWlycm9yIGluc3RhbmNlcyBuZWVkIHRvIGJlIHVwZGF0ZWRcbiAgICBmb3IoY29uc3Qga2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuY29kZUVsZW1lbnRzW2tleV0ubGF5b3V0KCk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ29uc29sZUVsZW1lbnQoY29uc29sZUVsKSB7XG4gICAgY29uc3QgY29uc29sZUVsZW1lbnQgPSBuZXcgQ29uc29sZUVsZW1lbnQoY29uc29sZUVsKTtcbiAgICB0aGlzLmNvbnNvbGVFbGVtZW50c1tjb25zb2xlRWxlbWVudC5pZF0gPSBjb25zb2xlRWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lDb25zb2xlRWxlbWVudChjb25zb2xlRWxlbWVudCkge1xuICAgIGNvbnNvbGVFbGVtZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGNyZWF0ZVRlcm1pbmFsRWxlbWVudCh0ZXJtaW5hbEVsKSB7XG4gICAgY29uc3QgdGVybWluYWxFbGVtZW50ID0gbmV3IFRlcm1pbmFsRWxlbWVudCh0ZXJtaW5hbEVsKTtcbiAgICB0aGlzLnRlcm1pbmFsRWxlbWVudHNbdGVybWluYWxFbGVtZW50LmlkXSA9IHRlcm1pbmFsRWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lUZXJtaW5hbEVsZW1lbnQodGVybWluYWxFbGVtZW50KSB7XG4gICAgdGVybWluYWxFbGVtZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGNyZWF0ZVdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbCkge1xuICAgIGNvbnN0IHdlYlByZXZpZXdFbGVtZW50ID0gbmV3IFdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbCk7XG4gICAgd2ViUHJldmlld0VsZW1lbnQuJHdyYXBwZXJFbC5vbihgY29uc29sZS1tZXNzYWdlYCwgdGhpcy53ZWJQcmV2aWV3Q29uc29sZU1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcywgd2ViUHJldmlld0VsZW1lbnQpKTtcbiAgICB0aGlzLndlYlByZXZpZXdFbGVtZW50c1t3ZWJQcmV2aWV3RWxlbWVudC5pZF0gPSB3ZWJQcmV2aWV3RWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWxlbWVudCkge1xuICAgIHdlYlByZXZpZXdFbGVtZW50LiR3cmFwcGVyRWwub2ZmKGBjb25zb2xlLW1lc3NhZ2VgKTtcbiAgICB3ZWJQcmV2aWV3RWxlbWVudC5kZXN0cm95KCk7XG4gIH1cblxuICBjcmVhdGVDb2RlRWxlbWVudChjb2RlRWwpIHtcbiAgICBjb25zdCBjb2RlRWxlbWVudCA9IG5ldyBDb2RlRWxlbWVudChjb2RlRWwpO1xuICAgIHRoaXMuY29kZUVsZW1lbnRzW2NvZGVFbGVtZW50LmlkXSA9IGNvZGVFbGVtZW50O1xuICB9XG5cbiAgZGVzdHJveUNvZGVFbGVtZW50KGNvZGVFbGVtZW50KSB7XG4gICAgY29kZUVsZW1lbnQuZGVzdHJveSgpO1xuICB9XG5cbiAgY3JlYXRlV2ViY2FtRWxlbWVudCh3ZWJjYW1FbCkge1xuICAgIGNvbnN0IHdlYmNhbUVsZW1lbnQgPSBuZXcgV2ViY2FtRWxlbWVudCh3ZWJjYW1FbCk7XG4gICAgdGhpcy53ZWJjYW1FbGVtZW50c1t3ZWJjYW1FbGVtZW50LmlkXSA9IHdlYmNhbUVsZW1lbnQ7XG4gIH1cblxuICBkZXN0cm95V2ViY2FtRWxlbWVudCh3ZWJjYW1FbGVtZW50KSB7XG4gICAgd2ViY2FtRWxlbWVudC5kZXN0cm95KCk7XG4gIH1cblxuICBjcmVhdGVSdW5CdXR0b24ocnVuQnV0dG9uRWwpIHtcbiAgICB0aGlzLnJ1bkJ1dHRvbkVscy5wdXNoKHJ1bkJ1dHRvbkVsKTtcbiAgICAkKHJ1bkJ1dHRvbkVsKS5vbihgY2xpY2tgLCBlID0+IHtcbiAgICAgIGlmKHRoaXMud2ViUHJldmlld0VsZW1lbnRzWyQocnVuQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApXSkge1xuICAgICAgICAvL3NhdmUgdGhlIGZpbGVzIGZpcnN0XG4gICAgICAgIHRoaXMuc2F2ZUNvZGVFbGVtZW50c1RvRmlsZXMoKVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvL3VwZGF0ZSB0aGUgd2ViIHByZXZpZXdcbiAgICAgICAgICAgIHRoaXMudXBkYXRlV2ViUHJldmlld0VsZW1lbnQodGhpcy53ZWJQcmV2aWV3RWxlbWVudHNbJChydW5CdXR0b25FbCkuZGF0YShgdGFyZ2V0YCldKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZih0aGlzLmNvbnNvbGVFbGVtZW50c1skKHJ1bkJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKV0pIHtcbiAgICAgICAgY29uc3QgYXBwbGljYXRpb25QYXRoID0gdGhpcy5nZXRGaWxlUGF0aCh0aGlzLmNvbnNvbGVFbGVtZW50c1skKHJ1bkJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKV0uZmlsZSk7XG4gICAgICAgIHRoaXMuY29uc29sZUVsZW1lbnRzWyQocnVuQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApXS5ydW5Ob2RlQXBwKGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICB9XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveVJ1bkJ1dHRvbihydW5CdXR0b25FbCkge1xuICAgICQocnVuQnV0dG9uRWwpLm9mZihgY2xpY2tgKTtcbiAgfVxuXG4gIGNyZWF0ZVNhdmVCdXR0b24oc2F2ZUJ1dHRvbkVsKSB7XG4gICAgdGhpcy5zYXZlQnV0dG9uRWxzLnB1c2goc2F2ZUJ1dHRvbkVsKTtcbiAgICAkKHNhdmVCdXR0b25FbCkub24oYGNsaWNrYCwgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgLy9nZXQgdGhlIHRhcmdldCBlbGVtZW50IGZvciB0aGlzIGJ1dHRvblxuICAgICAgY29uc3QgdGFyZ2V0U3RyaW5nID0gJChzYXZlQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApO1xuICAgICAgaWYodGFyZ2V0U3RyaW5nID09PSBgYWxsYCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYXZlQ29kZUVsZW1lbnRzVG9GaWxlcygpO1xuICAgICAgfVxuICAgICAgY29uc3QgY29kZUVsZW1lbnQgPSB0aGlzLmdldENvZGVFbGVtZW50KHRhcmdldFN0cmluZyk7XG4gICAgICBpZighY29kZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsZVBhdGggPSB0aGlzLmdldEZpbGVQYXRoRm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpO1xuICAgICAgaWYoIWZpbGVQYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvZGVFbGVtZW50LnNhdmVUb0ZpbGUoZmlsZVBhdGgpLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpOyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lTYXZlQnV0dG9uKHNhdmVCdXR0b25FbCkge1xuICAgICQoc2F2ZUJ1dHRvbkVsKS5vZmYoYGNsaWNrYCk7XG4gIH1cblxuICBjcmVhdGVSZWxvYWRCdXR0b24ocmVsb2FkQnV0dG9uRWwpIHtcbiAgICB0aGlzLnJlbG9hZEJ1dHRvbkVscy5wdXNoKHJlbG9hZEJ1dHRvbkVsKTtcbiAgICAkKHJlbG9hZEJ1dHRvbkVsKS5vbihgY2xpY2tgLCBlID0+IHtcbiAgICAgIC8vZ2V0IHRoZSByZWxvYWQgYnV0dG9uIHRhcmdldFxuICAgICAgbGV0IHJlbG9hZFRhcmdldEVsZW1lbnQgPSB0aGlzLmdldENvZGVFbGVtZW50KCQocmVsb2FkQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApKTtcbiAgICAgIGlmKHJlbG9hZFRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5yZWxvYWRDb2RlRWxlbWVudChyZWxvYWRUYXJnZXRFbGVtZW50KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZWxvYWRUYXJnZXRFbGVtZW50ID0gdGhpcy5nZXRXZWJQcmV2aWV3RWxlbWVudCgkKHJlbG9hZEJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKSk7XG4gICAgICBpZihyZWxvYWRUYXJnZXRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMucmVsb2FkV2ViUHJldmlld0VsZW1lbnQocmVsb2FkVGFyZ2V0RWxlbWVudCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gcmVsb2FkIGFsbCBlbGVtZW50c1xuICAgICAgdGhpcy5yZWxvYWRBbGxDb2RlRWxlbWVudHMoKS50aGVuKCgpID0+IHRoaXMucmVsb2FkQWxsV2ViUHJldmlld0VsZW1lbnRzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVsb2FkQWxsQ29kZUVsZW1lbnRzKCkge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgZm9yKGNvbnN0IGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0YXNrcy5wdXNoKHRoaXMucmVsb2FkQ29kZUVsZW1lbnQodGhpcy5jb2RlRWxlbWVudHNba2V5XSkpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGFza3MpO1xuICB9XG5cbiAgcmVsb2FkQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHRoaXMuZ2V0RmlsZVBhdGhGb3JDb2RlRWxlbWVudChjb2RlRWxlbWVudCk7XG4gICAgaWYoIWZpbGVQYXRoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBjb2RlRWxlbWVudC5yZWFkRnJvbUZpbGUoZmlsZVBhdGgpLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxuXG4gIHJlbG9hZEFsbFdlYlByZXZpZXdFbGVtZW50cygpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMpXG4gICAge1xuICAgICAgdGFza3MucHVzaCh0aGlzLnJlbG9hZFdlYlByZXZpZXdFbGVtZW50KHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2tleV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRhc2tzKTtcbiAgfVxuXG4gIHJlbG9hZFdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlV2ViUHJldmlld0VsZW1lbnQod2ViUHJldmlld0VsZW1lbnQpO1xuICB9XG5cbiAgZGVzdHJveVJlbG9hZEJ1dHRvbihyZWxvYWRCdXR0b25FbCkge1xuICAgICQocmVsb2FkQnV0dG9uRWwpLm9mZihgY2xpY2tgKTtcbiAgfVxuXG4gIGNyZWF0ZURldlRvb2xzQnV0dG9uKGRldlRvb2xzQnV0dG9uRWwpIHtcbiAgICB0aGlzLmRldlRvb2xzQnV0dG9uRWxzLnB1c2goZGV2VG9vbHNCdXR0b25FbCk7XG4gICAgJChkZXZUb29sc0J1dHRvbkVsKS5vbihgY2xpY2tgLCBlID0+IHtcbiAgICAgIC8vZ2V0IHRoZSB0YXJnZXQgZWxlbWVudCBmb3IgdGhpcyBidXR0b25cbiAgICAgIGNvbnN0IHdlYlByZXZpZXdFbGVtZW50ID0gdGhpcy5nZXRXZWJQcmV2aWV3RWxlbWVudCgkKGRldlRvb2xzQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApKTtcbiAgICAgIGlmICghd2ViUHJldmlld0VsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgd2ViUHJldmlld0VsZW1lbnQub3BlbkRldlRvb2xzKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveURldlRvb2xzQnV0dG9uKGRldlRvb2xzQnV0dG9uRWwpIHtcbiAgICAkKGRldlRvb2xzQnV0dG9uRWwpLm9mZihgY2xpY2tgKTtcbiAgfVxuXG4gIHdlYlByZXZpZXdDb25zb2xlTWVzc2FnZUhhbmRsZXIod2ViUHJldmlld0VsZW1lbnQsIGpxRXZlbnQsIGV2ZW50KSB7XG4gICAgLy9nZXQgdGhlIGNvbnNvbGUgZWxlbWVudCBmb3IgdGhpcyB3ZWIgcHJldmlld1xuICAgIGNvbnN0IGNvbnNvbGVFbGVtZW50ID0gdGhpcy5nZXRDb25zb2xlRWxlbWVudEZvcldlYlByZXZpZXcod2ViUHJldmlld0VsZW1lbnQpO1xuICAgIGlmKGNvbnNvbGVFbGVtZW50KVxuICAgIHtcbiAgICAgIGNvbnNvbGVFbGVtZW50Lm1lc3NhZ2UoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGdldENvbnNvbGVFbGVtZW50Rm9yV2ViUHJldmlldyh3ZWJQcmV2aWV3RWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLmNvbnNvbGVFbGVtZW50c1t3ZWJQcmV2aWV3RWxlbWVudC5jb25zb2xlXTtcbiAgfVxuXG4gIGdldFdlYlByZXZpZXdFbGVtZW50Rm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHNbY29kZUVsZW1lbnQucHJvY2Vzc29yXTtcbiAgfVxuXG4gIHVwZGF0ZVdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbGVtZW50KSB7XG4gICAgLy9sb2FkIGEgZmlsZSBvciBjb2RlIGJsb2Nrcz9cbiAgICBpZih3ZWJQcmV2aWV3RWxlbWVudC5maWxlKSB7XG4gICAgICBpZih0aGlzLm91dHB1dFBhdGggJiYgd2ViUHJldmlld0VsZW1lbnQubmVlZHNPdXRwdXRQYXRoUHJlZml4KSB7XG4gICAgICAgIHJldHVybiB3ZWJQcmV2aWV3RWxlbWVudC51cGRhdGVVcmwocGF0aC5qb2luKHRoaXMub3V0cHV0UGF0aCwgd2ViUHJldmlld0VsZW1lbnQuZmlsZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdlYlByZXZpZXdFbGVtZW50LnVwZGF0ZVVybCh3ZWJQcmV2aWV3RWxlbWVudC5maWxlKTtcbiAgICB9XG5cbiAgICAvL2dhdGhlciBhbGwgdGhlIGNvZGUgZm9yIHRoaXMgZWxlbWVudFxuICAgIGNvbnN0IGJsb2NrcyA9IFtdO1xuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgY29uc3QgY29kZUVsZW1lbnQgPSB0aGlzLmNvZGVFbGVtZW50c1trZXldO1xuICAgICAgaWYoY29kZUVsZW1lbnQucHJvY2Vzc29yID09PSB3ZWJQcmV2aWV3RWxlbWVudC5pZClcbiAgICAgIHtcbiAgICAgICAgY29uc3QgYmxvY2sgPSB7XG4gICAgICAgICAgbGFuZ3VhZ2U6IGNvZGVFbGVtZW50Lmxhbmd1YWdlLFxuICAgICAgICAgIGNvZGU6IGNvZGVFbGVtZW50LmdldFZhbHVlKClcbiAgICAgICAgfTtcbiAgICAgICAgYmxvY2tzLnB1c2goYmxvY2spO1xuICAgICAgfVxuICAgIH1cbiAgICB3ZWJQcmV2aWV3RWxlbWVudC51cGRhdGVDb2RlKGJsb2Nrcyk7XG4gIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmVhbSBleHRlbmRzIFBoYXNlci5Hcm91cCB7XG4gIGNvbnN0cnVjdG9yKGdhbWUsIHgsIHksIG1heFdpZHRoKSB7XG4gICAgc3VwZXIoZ2FtZSk7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuXG4gICAgdGhpcy5kYXRhID0ge1xuICAgICAgbWF4V2lkdGg6IG1heFdpZHRoLFxuICAgICAgcG9zaXRpb246IDAuNVxuICAgIH07XG4gICAgdGhpcy5iZWFtRW5kTGVmdCA9IHRoaXMuX2NyZWF0ZUJlYW1FbmQoKTtcbiAgICB0aGlzLmJlYW1FbmRMZWZ0LnNjYWxlLnNldFRvKC0xLCAxKTtcbiAgICB0aGlzLmJlYW1MZWZ0ID0gdGhpcy5fY3JlYXRlQmVhbSgpO1xuICAgIHRoaXMuYmVhbUxlZnQuYW5jaG9yLnNldFRvKDEsIDAuNSk7XG5cbiAgICB0aGlzLmJlYW1FbmRSaWdodCA9IHRoaXMuX2NyZWF0ZUJlYW1FbmQoKTtcbiAgICB0aGlzLmJlYW1SaWdodCA9IHRoaXMuX2NyZWF0ZUJlYW0oKTtcbiAgICB0aGlzLmJlYW1SaWdodC5hbmNob3Iuc2V0VG8oMCwgMC41KTtcbiAgfVxuICBfY3JlYXRlQmVhbUVuZCgpIHtcbiAgICBjb25zdCBiZWFtRW5kID0gdGhpcy5hZGQobmV3IFBoYXNlci5TcHJpdGUodGhpcy5nYW1lLCAwLCAwLCBgZHJhZ29uYmFsbC1ncmFwaGljc2AsIGBiZWFtaW5nMS5wbmdgKSk7XG4gICAgYmVhbUVuZC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIGJlYW1FbmQuYW5pbWF0aW9ucy5hZGQoYGJlYW1pbmdgLCBbXG4gICAgICBgYmVhbWluZzEucG5nYCxcbiAgICAgIGBiZWFtaW5nMi5wbmdgLFxuICAgIF0sIDgsIHRydWUsIHRydWUpO1xuICAgIGJlYW1FbmQuYW5pbWF0aW9ucy5wbGF5KGBiZWFtaW5nYCk7XG4gICAgcmV0dXJuIGJlYW1FbmQ7XG4gIH1cbiAgX2NyZWF0ZUJlYW0oKSB7XG4gICAgY29uc3QgYmVhbSA9IHRoaXMuYWRkKG5ldyBQaGFzZXIuVGlsZVNwcml0ZSh0aGlzLmdhbWUsIDAsIDAsIDMyLCAzMiwgYGRyYWdvbmJhbGwtZ3JhcGhpY3NgLCBgYmVhbS5wbmdgKSk7XG4gICAgcmV0dXJuIGJlYW07XG4gIH1cbiAgc2V0IGJlYW1Qb3NpdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuZGF0YS5wb3NpdGlvbiA9IHZhbHVlO1xuICB9XG4gIGdldCBiZWFtUG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5wb3NpdGlvbjtcbiAgfVxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgYmVhbUNlbnRlciA9IHRoaXMuZGF0YS5tYXhXaWR0aCAqIHRoaXMuZGF0YS5wb3NpdGlvbjtcbiAgICB0aGlzLmJlYW1FbmRMZWZ0LnggPSBiZWFtQ2VudGVyIC0gMjA7XG4gICAgdGhpcy5iZWFtRW5kUmlnaHQueCA9IGJlYW1DZW50ZXIgKyAyMDtcbiAgICB0aGlzLmJlYW1MZWZ0LnggPSB0aGlzLmJlYW1FbmRMZWZ0LnggKyAxMDtcbiAgICB0aGlzLmJlYW1SaWdodC54ID0gdGhpcy5iZWFtRW5kUmlnaHQueCAtIDEwO1xuICAgIHRoaXMuYmVhbUxlZnQud2lkdGggPSBiZWFtQ2VudGVyO1xuICAgIHRoaXMuYmVhbVJpZ2h0LndpZHRoID0gdGhpcy5kYXRhLm1heFdpZHRoIC0gYmVhbUNlbnRlcjtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNoYXJhY3RlciBleHRlbmRzIFBoYXNlci5TcHJpdGUge1xuICBjb25zdHJ1Y3RvcihnYW1lLCB4LCB5LCBjaGFyYWN0ZXIpIHtcbiAgICBzdXBlcihnYW1lLCB4LCB5LCBgZHJhZ29uYmFsbC1ncmFwaGljc2AsIGAke2NoYXJhY3Rlcn0tc3RhbmRpbmcxLnBuZ2ApO1xuICAgIHRoaXMuYW5jaG9yLnNldFRvKDAuNSwgMSk7XG4gICAgaWYoY2hhcmFjdGVyID09PSBgZ29oYW5gKSB7XG4gICAgICB0aGlzLnNjYWxlLnNldFRvKC0xLCAxKTtcbiAgICB9XG4gICAgdGhpcy5hbmltYXRpb25zLmFkZChgc3RhbmRgLCBbXG4gICAgICBgJHtjaGFyYWN0ZXJ9LXN0YW5kaW5nMS5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1zdGFuZGluZzIucG5nYCxcbiAgICBdLCA0LCB0cnVlLCB0cnVlKTtcbiAgICB0aGlzLmFuaW1hdGlvbnMuYWRkKGBmYWxsYCwgW1xuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nMS5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nMi5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nMy5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nNC5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nNS5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nNi5wbmdgLFxuICAgICAgYCR7Y2hhcmFjdGVyfS1mYWxsaW5nNy5wbmdgLFxuICAgIF0sIDEwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgdGhpcy5hbmltYXRpb25zLmFkZChga2FtZWhhYCwgW1xuICAgICAgYCR7Y2hhcmFjdGVyfS1rYW1laGExLnBuZ2BcbiAgICBdLCAxMCwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICB0aGlzLnN0YW5kKCk7XG4gIH1cbiAgc3RhbmQoKSB7XG4gICAgdGhpcy5hbmltYXRpb25zLnBsYXkoYHN0YW5kYCk7XG4gIH1cbiAgZmFsbCgpIHtcbiAgICB0aGlzLmFuaW1hdGlvbnMucGxheShgZmFsbGApO1xuICB9XG4gIGthbWVoYSgpIHtcbiAgICB0aGlzLmFuaW1hdGlvbnMucGxheShga2FtZWhhYCk7XG4gIH1cbn1cbiIsImltcG9ydCBCdXR0b24gZnJvbSAnLi4vb2JqZWN0cy9CdXR0b24nO1xuaW1wb3J0IEdhbWVDaGFyYWN0ZXIgZnJvbSAnLi4vb2JqZWN0cy9HYW1lQ2hhcmFjdGVyJztcbmltcG9ydCBCZWFtIGZyb20gJy4uL29iamVjdHMvQmVhbSc7XG5cbmNvbnN0IFNVQlNUQVRFX0lOVFJPID0gYGludHJvYDtcbmNvbnN0IFNVQlNUQVRFX1BMQVkgPSBgcGxheWA7XG5jb25zdCBTVUJTVEFURV9GQUxMSU5HID0gYGZhbGxpbmdgO1xuY29uc3QgU1VCU1RBVEVfRklOSVNIRUQgPSBgZmluaXNoZWRgO1xuXG5jb25zdCBCRUFNX09GRlNFVCA9IDE0MztcbmNvbnN0IE1BWF9IRUFSVFJBVEUgPSAxMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXkgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICBpbml0KCkge1xuICAgIHRoaXMuY3Vyc29ycyA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xuICB9XG4gIGNyZWF0ZSgpIHtcbiAgICB0aGlzLmNyZWF0ZUVudmlyb25tZW50KCk7XG4gICAgdGhpcy5jcmVhdGVQbGF5ZXJzKCk7XG4gICAgdGhpcy5jcmVhdGVCdXR0b25zKCk7XG4gICAgdGhpcy5jcmVhdGVCZWFtKCk7XG5cbiAgICB0aGlzLnNldFN1YlN0YXRlKFNVQlNUQVRFX0lOVFJPKTtcbiAgfVxuICBjcmVhdGVFbnZpcm9ubWVudCgpIHtcbiAgICB0aGlzLmJhY2tncm91bmQgPSB0aGlzLmFkZC5zcHJpdGUodGhpcy53b3JsZC5jZW50ZXJYLCB0aGlzLndvcmxkLmhlaWdodCAtIDExMiwgYGRyYWdvbmJhbGwtZ3JhcGhpY3NgLCBgYmFja2dyb3VuZC5wbmdgKTtcbiAgICB0aGlzLmJhY2tncm91bmQuYW5jaG9yLnNldFRvKDAuNSwgMSk7XG5cbiAgICB0aGlzLmdyb3VuZCA9IHRoaXMuYWRkLnNwcml0ZSh0aGlzLndvcmxkLmNlbnRlclgsIHRoaXMud29ybGQuaGVpZ2h0LCBgZHJhZ29uYmFsbC1ncmFwaGljc2AsIGBmbG9vci5wbmdgKTtcbiAgICB0aGlzLmdyb3VuZC5hbmNob3Iuc2V0VG8oMC41LCAxKTtcbiAgfVxuICBjcmVhdGVQbGF5ZXJzKCkge1xuICAgIHRoaXMuZ29rdSA9IHRoaXMuYWRkLmV4aXN0aW5nKG5ldyBHYW1lQ2hhcmFjdGVyKHRoaXMuZ2FtZSwgODAsIHRoaXMud29ybGQuaGVpZ2h0LCBgZ29rdWApKTtcbiAgICB0aGlzLmdvaGFuID0gdGhpcy5hZGQuZXhpc3RpbmcobmV3IEdhbWVDaGFyYWN0ZXIodGhpcy5nYW1lLCB0aGlzLndvcmxkLndpZHRoIC0gODAsIHRoaXMud29ybGQuaGVpZ2h0LCBgZ29oYW5gKSk7XG4gIH1cbiAgY3JlYXRlQmVhbSgpIHtcbiAgICB0aGlzLmJlYW0gPSB0aGlzLmFkZC5leGlzdGluZyhuZXcgQmVhbSh0aGlzLmdhbWUsIEJFQU1fT0ZGU0VULCB0aGlzLndvcmxkLmNlbnRlclkgKyAyMTAsIHRoaXMud29ybGQud2lkdGggLSBCRUFNX09GRlNFVCAqIDIpKTtcbiAgfVxuICBjcmVhdGVCdXR0b25zKCkge1xuICAgIHRoaXMucGxheUJ1dHRvbiA9IG5ldyBCdXR0b24odGhpcy5nYW1lLCB0aGlzLndvcmxkLmNlbnRlclgsIHRoaXMud29ybGQuY2VudGVyWSwgdGhpcy5wbGF5Q2xpY2tlZCwgdGhpcywgYGJsdWVgLCBgUGxheWApO1xuICAgIHRoaXMucGxheUJ1dHRvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIHRoaXMuYWRkLmV4aXN0aW5nKHRoaXMucGxheUJ1dHRvbik7XG5cbiAgICB0aGlzLnN0b3BCdXR0b24gPSBuZXcgQnV0dG9uKHRoaXMuZ2FtZSwgdGhpcy53b3JsZC5jZW50ZXJYLCB0aGlzLndvcmxkLmNlbnRlclksIHRoaXMuc3RvcENsaWNrZWQsIHRoaXMsIGBibHVlYCwgYFN0b3BgKTtcbiAgICB0aGlzLnN0b3BCdXR0b24uYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICB0aGlzLmFkZC5leGlzdGluZyh0aGlzLnN0b3BCdXR0b24pO1xuICB9XG4gIHVwZGF0ZSgpIHtcbiAgICBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9QTEFZKSB7XG4gICAgICB0aGlzLnVwZGF0ZVBsYXlTdGF0ZSgpO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9GSU5JU0hFRCkge1xuICAgICAgdGhpcy51cGRhdGVGaW5pc2hlZFN0YXRlKCk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZVBsYXlTdGF0ZSgpIHtcbiAgICAvL3VwZGF0ZSBiZWFtUG9zaXRpb24gYWNjb3JkaW5nIHRvIGhlYXJ0IHJhdGVzXG4gICAgaWYodGhpcy5nYW1lLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIxLmhlYXJ0UmF0ZSA+IDAgJiYgdGhpcy5nYW1lLnNwYXJrSGVhcnRSYXRlc1BsdWdpbi5wbGF5ZXIyLmhlYXJ0UmF0ZSA+IDApIHtcbiAgICAgIGNvbnN0IGhlYXJ0UmF0ZURpZmYgPSBNYXRoLm1pbihNQVhfSEVBUlRSQVRFLCB0aGlzLmdhbWUuc3BhcmtIZWFydFJhdGVzUGx1Z2luLnBsYXllcjIuaGVhcnRSYXRlKSAtIE1hdGgubWluKE1BWF9IRUFSVFJBVEUsIHRoaXMuZ2FtZS5zcGFya0hlYXJ0UmF0ZXNQbHVnaW4ucGxheWVyMS5oZWFydFJhdGUpO1xuICAgICAgdGhpcy5iZWFtLmJlYW1Qb3NpdGlvbiA9IHRoaXMuYmVhbS5iZWFtUG9zaXRpb24gKyAoaGVhcnRSYXRlRGlmZiAqIDAuMDAwMik7XG4gICAgfVxuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5iZWFtLmJlYW1Qb3NpdGlvbjtcbiAgICBpZiAocG9zaXRpb24gPCAwLjAxKSB7XG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuZ29oYW47XG4gICAgICB0aGlzLmxvc2VyID0gdGhpcy5nb2t1O1xuICAgICAgdGhpcy5hZGQudHdlZW4odGhpcy5iZWFtKS50byh7eDogLXRoaXMud29ybGQud2lkdGh9LCAzNTAsIFBoYXNlci5FYXNpbmcuTGluZWFyLk5PTkUsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPiAwLjk5KSB7XG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuZ29rdTtcbiAgICAgIHRoaXMubG9zZXIgPSB0aGlzLmdvaGFuO1xuICAgICAgdGhpcy5hZGQudHdlZW4odGhpcy5iZWFtKS50byh7eDogdGhpcy53b3JsZC53aWR0aH0sIDM1MCwgUGhhc2VyLkVhc2luZy5MaW5lYXIuTk9ORSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmKHRoaXMud2lubmVyKSB7XG4gICAgICB0aGlzLndpbm5lci5zdGFuZCgpO1xuICAgICAgdGhpcy5sb3Nlci5mYWxsKCk7XG4gICAgICB0aGlzLnNldFN1YlN0YXRlKFNVQlNUQVRFX0ZBTExJTkcpO1xuICAgICAgdGhpcy50aW1lLmV2ZW50cy5hZGQoNTAwLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3ViU3RhdGUoU1VCU1RBVEVfRklOSVNIRUQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZUZpbmlzaGVkU3RhdGUoKSB7XG4gIH1cbiAgc2V0U3ViU3RhdGUodmFsdWUpIHtcbiAgICB0aGlzLnN1YlN0YXRlID0gdmFsdWU7XG4gICAgdGhpcy5wbGF5QnV0dG9uLnZpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLnN0b3BCdXR0b24udmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuYmVhbS52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5iZWFtLnggPSBCRUFNX09GRlNFVDtcbiAgICBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9QTEFZKSB7XG4gICAgICB0aGlzLnN0b3BCdXR0b24udmlzaWJsZSA9IHRydWU7XG4gICAgICB0aGlzLmJlYW0udmlzaWJsZSA9IHRydWU7XG4gICAgICB0aGlzLndpbm5lciA9IGZhbHNlO1xuICAgICAgdGhpcy5sb3NlciA9IGZhbHNlO1xuICAgICAgdGhpcy5iZWFtLmJlYW1Qb3NpdGlvbiA9IDAuNTtcbiAgICAgIHRoaXMuZ29rdS5rYW1laGEoKTtcbiAgICAgIHRoaXMuZ29oYW4ua2FtZWhhKCk7XG4gICAgfSBlbHNlIGlmKHRoaXMuc3ViU3RhdGUgPT09IFNVQlNUQVRFX0ZBTExJTkcpe1xuICAgICAgdGhpcy5iZWFtLnZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5wbGF5QnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YlN0YXRlID09PSBTVUJTVEFURV9GSU5JU0hFRCl7XG4gICAgICB0aGlzLnBsYXlCdXR0b24udmlzaWJsZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxheUJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMud2lubmVyID0gZmFsc2U7XG4gICAgICB0aGlzLmxvc2VyID0gZmFsc2U7XG4gICAgICB0aGlzLmdva3Uuc3RhbmQoKTtcbiAgICAgIHRoaXMuZ29oYW4uc3RhbmQoKTtcbiAgICB9XG4gIH1cbiAgcGxheUNsaWNrZWQoKSB7XG4gICAgdGhpcy5zZXRTdWJTdGF0ZShTVUJTVEFURV9QTEFZKTtcbiAgfVxuICBzdG9wQ2xpY2tlZCgpIHtcbiAgICB0aGlzLnN0YXRlLnN0YXJ0KGBQbGF5YCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWxvYWQgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xuICBpbml0KCkge1xuICAgIHRoaXMuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICB0aGlzLnN0YWdlLmJhY2tncm91bmRDb2xvciA9IGAjZDg3MDQwYDtcbiAgfVxuICBwcmVsb2FkKCkge1xuICAgIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKGBjb21wb25lbnRzYCwgYGFzc2V0cy9kcmFnb25iYWxsL2NvbXBvbmVudHMucG5nYCwgYGFzc2V0cy9kcmFnb25iYWxsL2NvbXBvbmVudHMuanNvbmApO1xuICAgIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKGBkcmFnb25iYWxsLWdyYXBoaWNzYCwgYGFzc2V0cy9kcmFnb25iYWxsL2RyYWdvbmJhbGwtZ3JhcGhpY3MucG5nYCwgYGFzc2V0cy9kcmFnb25iYWxsL2RyYWdvbmJhbGwtZ3JhcGhpY3MuanNvbmApO1xuICB9XG4gIGNyZWF0ZSgpIHtcbiAgICB0aGlzLnN0YXRlLnN0YXJ0KGBQbGF5YCk7XG4gIH1cbn1cbiIsImltcG9ydCBldmVudHMgZnJvbSAnZXZlbnRzJztcblxuY29uc3QgUE9MQVJIN19IUk1fSEVBUlRfUkFURV9TRVJWSUNFX1VVSUQgPSBgMTgwZGA7XG5jb25zdCBQT0xBUkg3X0hSTV9NRUFTVVJFTUVOVF9DSEFSQUNURVJJU1RJQ19VVUlEID0gYDJhMzdgO1xuY29uc3Qgc2VydmljZVVVSURzID0gW1BPTEFSSDdfSFJNX0hFQVJUX1JBVEVfU0VSVklDRV9VVUlEXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9sYXJINyBleHRlbmRzIGV2ZW50cy5FdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5wb2xhckg3UGVyaXBoZXJhbCA9IGZhbHNlO1xuICAgIHRoaXMuX3N0YXRlQ2hhbmdlSGFuZGxlciA9IHN0YXRlID0+IHRoaXMuc3RhdGVDaGFuZ2VIYW5kbGVyKHN0YXRlKTtcbiAgICB0aGlzLl9kaXNjb3ZlckhhbmRsZXIgPSBwZXJpcGhlcmFsID0+IHRoaXMuZGlzY292ZXJIYW5kbGVyKHBlcmlwaGVyYWwpO1xuXG4gICAgdGhpcy5ub2JsZSA9IHJlcXVpcmVOb2RlKGBub2JsZWApO1xuICAgIHRoaXMubm9ibGUub24oYHN0YXRlQ2hhbmdlYCwgdGhpcy5fc3RhdGVDaGFuZ2VIYW5kbGVyKTtcbiAgICB0aGlzLm5vYmxlLm9uKGBkaXNjb3ZlcmAsIHRoaXMuX2Rpc2NvdmVySGFuZGxlcik7XG4gIH1cblxuICBzdGF0ZUNoYW5nZUhhbmRsZXIoc3RhdGUpIHtcbiAgICBjb25zb2xlLmxvZyhgW1BvbGFySDddIHN0YXRlQ2hhbmdlYCwgc3RhdGUpO1xuICAgIHRoaXMuZW1pdChgc3RhdGVDaGFuZ2VgLCBzdGF0ZSk7XG4gICAgaWYoc3RhdGUgPT09IGBwb3dlcmVkT25gKSB7XG4gICAgICB0aGlzLm5vYmxlLnN0YXJ0U2Nhbm5pbmcoc2VydmljZVVVSURzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2JsZS5zdG9wU2Nhbm5pbmcoKTtcbiAgICB9XG4gIH1cblxuICBkaXNjb3ZlckhhbmRsZXIocGVyaXBoZXJhbCkge1xuICAgIGxldCBmb3VuZFN1aXRhYmxlUGVyaXBoZXJhbCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSBwZXJpcGhlcmFsLmFkdmVydGlzZW1lbnQuc2VydmljZVV1aWRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBpZihwZXJpcGhlcmFsLmFkdmVydGlzZW1lbnQuc2VydmljZVV1aWRzW2ldID09PSBQT0xBUkg3X0hSTV9IRUFSVF9SQVRFX1NFUlZJQ0VfVVVJRCkge1xuICAgICAgICBmb3VuZFN1aXRhYmxlUGVyaXBoZXJhbCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihmb3VuZFN1aXRhYmxlUGVyaXBoZXJhbCkge1xuICAgICAgdGhpcy5vbkZvdW5kU3VpdGFibGVQZXJpcGhlcmFsKHBlcmlwaGVyYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1BvbGFySDddIG5vIHN1aXRhYmxlIHBlcmlwaGVyYWxgKTtcbiAgICB9XG4gIH1cblxuICBvbkZvdW5kU3VpdGFibGVQZXJpcGhlcmFsKHBlcmlwaGVyYWwpIHtcbiAgICBjb25zb2xlLmxvZyhgW1BvbGFySDddYCwgcGVyaXBoZXJhbC5hZHZlcnRpc2VtZW50LmxvY2FsTmFtZSk7XG4gICAgdGhpcy5ub2JsZS5zdG9wU2Nhbm5pbmcoKTtcbiAgICB0aGlzLnBvbGFySDdQZXJpcGhlcmFsID0gcGVyaXBoZXJhbDtcbiAgICB0aGlzLnBvbGFySDdQZXJpcGhlcmFsLmNvbm5lY3QoZXJyb3IgPT4gdGhpcy5vbkNvbm5lY3QoZXJyb3IpKTtcbiAgfVxuXG4gIG9uQ29ubmVjdChlcnJvcikge1xuICAgIGlmKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYFtQb2xhckg3XSBvbiBjb25uZWN0YCk7XG4gICAgdGhpcy5lbWl0KGBjb25uZWN0YCk7XG4gICAgdGhpcy5wb2xhckg3UGVyaXBoZXJhbC5kaXNjb3ZlclNlcnZpY2VzKFtdLCAoZXJyb3IsIHNlcnZpY2VzKSA9PiB0aGlzLm9uUGVyaXBoZXJhbERpc2NvdmVyU2VydmljZXMoZXJyb3IsIHNlcnZpY2VzKSk7XG4gIH1cblxuICBvblBlcmlwaGVyYWxEaXNjb3ZlclNlcnZpY2VzKGVycm9yLCBzZXJ2aWNlcykge1xuICAgIGNvbnNvbGUubG9nKGBbUG9sYXJIN10gb25QZXJpcGhlcmFsRGlzY292ZXJTZXJ2aWNlc2ApO1xuICAgIGZvciAobGV0IGkgPSBzZXJ2aWNlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYoc2VydmljZXNbaV0ubmFtZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhzZXJ2aWNlc1tpXS51dWlkLCBzZXJ2aWNlc1tpXS5uYW1lKTtcbiAgICAgICAgc2VydmljZXNbaV0uZGlzY292ZXJDaGFyYWN0ZXJpc3RpY3MoW10sIChlcnJvciwgY2hhcmFjdGVyaXN0aWNzKSA9PiB0aGlzLm9uUGVyaXBoZXJhbFNlcnZpY2VEaXNjb3ZlckNoYXJhY3RlcmlzdGljcyhlcnJvciwgY2hhcmFjdGVyaXN0aWNzKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25QZXJpcGhlcmFsU2VydmljZURpc2NvdmVyQ2hhcmFjdGVyaXN0aWNzKGVycm9yLCBjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBmb3IgKGxldCBpID0gY2hhcmFjdGVyaXN0aWNzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljc1tpXTtcbiAgICAgIGlmKGNoYXJhY3RlcmlzdGljLnV1aWQgPT09IFBPTEFSSDdfSFJNX01FQVNVUkVNRU5UX0NIQVJBQ1RFUklTVElDX1VVSUQpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIkhSTSBDaGFyYWN0ZXJpc3RpY1wiKTtcbiAgICAgICAgY2hhcmFjdGVyaXN0aWMub24oYHJlYWRgLCAoZGF0YSwgaXNOb3RpZmljYXRpb24pID0+IHRoaXMub25IZWFydFJhdGVSZWFkKGRhdGEsIGlzTm90aWZpY2F0aW9uKSk7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljLm5vdGlmeSh0cnVlLCBlcnJvciA9PiAoZXJyb3IpID8gY29uc29sZS5sb2coZXJyb3IpIDogdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25IZWFydFJhdGVSZWFkKGRhdGEsIGlzTm90aWZpY2F0aW9uKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBpZigoZGF0YVswXSAmIDB4MDEpID09PSAwKSB7XG4gICAgICBjb25zdCBoZWFydFJhdGUgPSBkYXRhWzFdO1xuICAgICAgaWYoaGVhcnRSYXRlKSB7XG4gICAgICAgIHRoaXMuZW1pdChQb2xhckg3LkhFQVJUX1JBVEUsIGhlYXJ0UmF0ZSk7XG5cdFx0XHRcdC8vIHZhciBmaWxlUGF0aCA9IENvbmZpZy5oZWFydFJhdGVGaWxlUGF0aDtcblx0XHRcdFx0Ly8gZnMuYXBwZW5kRmlsZShmaWxlUGF0aCwgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIjpcIiArIGhlYXJ0UmF0ZSArIFwiXFxuXCIsIGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZyhlcnIpO1xuXHRcdFx0XHQvLyB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuUG9sYXJINy5IRUFSVF9SQVRFID0gYGhlYXJ0UmF0ZWA7XG4iLCJyZXF1aXJlKGBlczYtcHJvbWlzZWApLnBvbHlmaWxsKCk7XG5cbmltcG9ydCBQcmVzZW50YXRpb24gZnJvbSAnLi9jbGFzc2VzL1ByZXNlbnRhdGlvbic7XG5pbXBvcnQgU2xpZGVzRm9sZGVyUGFyc2VyIGZyb20gJy4uLy4uL3NlcnZlci9jbGFzc2VzL1NsaWRlc0ZvbGRlclBhcnNlcic7XG5cbigoKSA9PiB7XG5cbiAgY29uc3QgcmVtb3RlID0gcmVxdWlyZU5vZGUoYGVsZWN0cm9uYCkucmVtb3RlO1xuICBjb25zdCBwcmVzZW50YXRpb25QYXRoID0gcmVtb3RlLmdldEdsb2JhbChgX19kaXJuYW1lYCk7XG4gIGNvbnN0IHBhdGggPSByZXF1aXJlTm9kZShgcGF0aGApO1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgICBwcmVzZW50YXRpb25QYXRoOiBwcmVzZW50YXRpb25QYXRoLFxuICAgICAgLy8gbW9iaWxlU2VydmVyVXJsOiAnaHR0cHM6Ly9qc3dvcmtvdXQuaGVyb2t1YXBwLmNvbScsXG4gICAgICBtb2JpbGVTZXJ2ZXJVcmw6IGBodHRwOi8vbG9jYWxob3N0OjUwMDBgLFxuICAgICAgbW9iaWxlU2VydmVyVXNlcm5hbWU6IGB3b3V0ZXIudmVyd2VpcmRlckBnbWFpbC5jb21gLFxuICAgICAgbW9iaWxlU2VydmVyUGFzc3dvcmQ6IGBnZWhlaW1gXG4gICAgfTtcbiAgICBjb25zdCBzbGlkZXNGb2xkZXJQYXJzZXIgPSBuZXcgU2xpZGVzRm9sZGVyUGFyc2VyKCk7XG4gICAgc2xpZGVzRm9sZGVyUGFyc2VyLnBhcnNlKHByZXNlbnRhdGlvblBhdGgsIHBhdGgucmVzb2x2ZShwcmVzZW50YXRpb25QYXRoLCBgc2xpZGVzYCkpXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgbmV3IFByZXNlbnRhdGlvbihkYXRhLCBgcHJlc2VudGF0aW9uYCwgc2V0dGluZ3MpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgaW5pdCgpO1xufSkoKTtcbiIsImxldCByZXF1aXJlTm9kZTtcbmlmKCEodHlwZW9mIHdpbmRvdyAhPT0gYHVuZGVmaW5lZGAgJiYgd2luZG93KSkge1xuICByZXF1aXJlTm9kZSA9IHJlcXVpcmU7XG59IGVsc2Uge1xuICByZXF1aXJlTm9kZSA9IHdpbmRvdy5yZXF1aXJlTm9kZTtcbn1cblxuY29uc3QgZnMgPSByZXF1aXJlTm9kZShgZnMtZXh0cmFgKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlTm9kZShgcGF0aGApO1xuXG5jb25zdCBnZXRGaWxlUHJvcGVydGllcyA9IGZpbGVQYXRoID0+IHtcbiAgbGV0IF9mZCwgX287XG4gIHJldHVybiBmcy5vcGVuKGZpbGVQYXRoLCBgcmApXG4gICAgLnRoZW4oZmQgPT4ge1xuICAgICAgX2ZkID0gZmQ7XG4gICAgICByZXR1cm4gZmQ7XG4gICAgfSlcbiAgICAudGhlbihmZCA9PiBmcy5mc3RhdChmZCkpXG4gICAgLnRoZW4obyA9PiB7XG4gICAgICBfbyA9IG87XG4gICAgICByZXR1cm4gX287XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBmcy5jbG9zZShfZmQpKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGg6IGZpbGVQYXRoLFxuICAgICAgICBpc0RpcmVjdG9yeTogX28uaXNEaXJlY3RvcnkoKSxcbiAgICAgICAgaXNGaWxlOiBfby5pc0ZpbGUoKVxuICAgICAgfTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXNGb2xkZXJQYXJzZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuICBwYXJzZShwcmVzZW50YXRpb25QYXRoLCBzbGlkZXNGb2xkZXJQYXRoKSB7XG4gICAgLy9yZWFkIHRoZSBjb250ZW50cyBvZiB0aGUgc2xpZGVzIGRpcmVjdG9yeVxuICAgIHJldHVybiBmcy5yZWFkZGlyKHNsaWRlc0ZvbGRlclBhdGgpXG4gICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0LmZpbHRlcihuYW1lID0+IG5hbWUuaW5kZXhPZihgLmApID4gMCkpXG4gICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0Lm1hcChuYW1lID0+IHBhdGgucmVzb2x2ZShzbGlkZXNGb2xkZXJQYXRoLCBuYW1lKSkpXG4gICAgICAudGhlbihyZXN1bHQgPT4gUHJvbWlzZS5hbGwocmVzdWx0Lm1hcChmaWxlUGF0aCA9PiBnZXRGaWxlUHJvcGVydGllcyhmaWxlUGF0aCkpKSlcbiAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgc2xpZGVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzbGlkZXNCeU5hbWUgPSB7fTtcbiAgICAgICAgcmVzdWx0LmZvckVhY2gocHJvcHMgPT4ge1xuICAgICAgICAgIGNvbnN0IHNsaWRlID0gdGhpcy5jcmVhdGVTbGlkZU9iamVjdEJhc2VkT25GaWxlUHJvcGVydGllcyhwcm9wcywgcHJlc2VudGF0aW9uUGF0aCwgc2xpZGVzQnlOYW1lKTtcbiAgICAgICAgICBpZighc2xpZGVzQnlOYW1lW3NsaWRlLm5hbWVdKSB7XG4gICAgICAgICAgICBkYXRhLnNsaWRlcy5wdXNoKHNsaWRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2xpZGVzQnlOYW1lW3NsaWRlLm5hbWVdID0gc2xpZGU7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLnNsaWRlcyk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcGFyc2VTbGlkZUJhc2VOYW1lKHNsaWRlQmFzZU5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgICBwYXJzZWQuZXh0ID0gcGF0aC5leHRuYW1lKHNsaWRlQmFzZU5hbWUpO1xuICAgIHBhcnNlZC5uYW1lID0gc2xpZGVCYXNlTmFtZS5zdWJzdHIoMCwgc2xpZGVCYXNlTmFtZS5sZW5ndGggLSBwYXJzZWQuZXh0Lmxlbmd0aCk7XG4gICAgY29uc3Qgc3BsaXR0ZWQgPSBwYXJzZWQubmFtZS5zcGxpdChgLmApO1xuICAgIGNvbnN0IGtleXdvcmRzID0gW2Btb2JpbGVgLCBgZGVza3RvcGAsIGBtdXRlZGAsIGBsb29wYCwgYGNvdmVyYF07XG4gICAga2V5d29yZHMuZm9yRWFjaChrZXl3b3JkID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gc3BsaXR0ZWQuaW5kZXhPZihrZXl3b3JkKTtcbiAgICAgIGlmKGluZGV4ID4gLTEpIHtcbiAgICAgICAgcGFyc2VkW2tleXdvcmRdID0gdHJ1ZTtcbiAgICAgICAgc3BsaXR0ZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwYXJzZWQubmFtZSA9IHNwbGl0dGVkLmpvaW4oYC5gKTtcbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgY3JlYXRlU2xpZGVPYmplY3RCYXNlZE9uRmlsZVByb3BlcnRpZXMoZmlsZVByb3BlcnRpZXMsIHByZXNlbnRhdGlvblBhdGgsIHNsaWRlc0J5TmFtZSkge1xuXG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVNsaWRlQmFzZU5hbWUocGF0aC5iYXNlbmFtZShmaWxlUHJvcGVydGllcy5wYXRoKSk7XG4gICAgbGV0IHVybCA9IHBhdGgucmVsYXRpdmUocHJlc2VudGF0aW9uUGF0aCwgZmlsZVByb3BlcnRpZXMucGF0aCkucmVwbGFjZShgXFxcXGAsIGAvYCk7XG4gICAgaWYocGFyc2VkLmV4dCA9PT0gYC5qcGdgIHx8IHBhcnNlZC5leHQgPT09IGAuanBlZ2AgfHwgcGFyc2VkLmV4dCA9PT0gYC5naWZgIHx8IHBhcnNlZC5leHQgPT09IGAucG5nYCkge1xuICAgICAgdXJsID0gYHNsaWRlcy1idWlsdGluL2ltYWdlLmh0bWw/aW1hZ2U9JHsgIHVybH1gO1xuICAgIH1cbiAgICBpZihwYXJzZWQuZXh0ID09PSBgLm1wNGApIHtcbiAgICAgIHVybCA9IGBzbGlkZXMtYnVpbHRpbi92aWRlby5odG1sP3ZpZGVvPSR7ICB1cmx9YDtcbiAgICB9XG4gICAgaWYoc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXSkge1xuICAgICAgaWYocGFyc2VkLm1vYmlsZSkge1xuICAgICAgICBzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdLm1vYmlsZS51cmwgPSB1cmw7XG4gICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZihwYXJzZWQuZGVza3RvcCkge1xuICAgICAgICBzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdLnByZXNlbnRhdGlvbi51cmwgPSB1cmw7XG4gICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ucHJlc2VudGF0aW9uLmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vc2V0IHRoZSBvbmUgd2hpY2ggaXMgbm90IHNldCBleHBsaWNpdGx5XG4gICAgICAgIGlmKHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLmV4cGxpY2l0KSB7XG4gICAgICAgICAgc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXS5wcmVzZW50YXRpb24udXJsID0gdXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLnVybCA9IHVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogcGFyc2VkLm5hbWUsXG4gICAgICBwcmVzZW50YXRpb246IHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGV4cGxpY2l0OiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG1vYmlsZToge1xuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgZXhwbGljaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IENvbnN0YW50cyA9IHtcbiAgR09fVE9fUFJFVklPVVNfU0xJREU6IGBnb1RvUHJldmlvdXNTbGlkZWAsXG4gIEdPX1RPX05FWFRfU0xJREU6IGBnb1RvTmV4dFNsaWRlYCxcbiAgU0VUX1NMSURFUzogYHNldFNsaWRlc2AsXG4gIFNFVF9DVVJSRU5UX1NMSURFX0lOREVYOiBgc2V0Q3VycmVudFNsaWRlSW5kZXhgLFxuXG4gIE1FU1NBR0U6IGBtZXNzYWdlYCxcbiAgU09DS0VUX1NFTkQ6IGBzb2NrZXRTZW5kYCxcbiAgU09DS0VUX1JFQ0VJVkU6IGBzb2NrZXRSZWNlaXZlYCxcbiAgSk9JTl9TTElERV9ST09NOiBgam9pblNsaWRlUm9vbWAsXG4gIExFQVZFX1NMSURFX1JPT006IGBsZWF2ZVNsaWRlUm9vbWAsXG5cbiAgUk9MRV9QUkVTRU5UQVRJT046IGBwcmVzZW50YXRpb25gLFxuICBST0xFX01PQklMRTogYG1vYmlsZWAsXG5cbiAgU1RBVEVfQUNUSVZFOiBgYWN0aXZlYCxcbiAgU1RBVEVfSU5BQ1RJVkU6IGBpbmFjdGl2ZWAsXG5cbiAgU0VUX1NVQlNUQVRFOiBgc2V0U3Vic3RhdGVgLFxuXG4gIENISUxEX0FQUF9TQVZFX0NPREU6IGBjaGlsZEFwcFNhdmVDb2RlYCxcbiAgQ0hJTERfQVBQX1JVTl9DT0RFOiBgY2hpbGRBcHBSdW5Db2RlYCxcbiAgQ0hJTERfQVBQX1NURE9VVF9EQVRBOiBgY2hpbGRBcHBTdGRvdXREYXRhYCxcbiAgQ0hJTERfQVBQX1NUREVSUl9EQVRBOiBgY2hpbGRBcHBTdGRlcnJEYXRhYCxcblxuICBPUEVOX0NPTU1BTkRfTElORTogYG9wZW5Db21tYW5kTGluZWAsXG4gIE9QRU5fQ0FNRVJBOiBgb3BlbkNhbWVyYWAsXG5cbiAgQkxJTks6IGBibGlua2AsXG5cbiAgSEVBUlRfUkFURV9QT0xBUjogYGhlYXJ0UmF0ZVBvbGFyYCxcblxuICBTRVRfVEVBTTogYHNldFRlYW1gLFxuICBVUERBVEVfTU9USU9OOiBgdXBkYXRlTW90aW9uYCxcblxuICBZT1VfV0lOOiBgeW91V2luYCxcbiAgWU9VX0xPU0U6IGB5b3VMb3NlYCxcblxuICBTSEFLRV9ZT1VSX1BIT05FU19JTlRSTzogYHNoYWtlWW91clBob25lc0ludHJvYCxcbiAgU0hBS0VfWU9VUl9QSE9ORVNfR0FNRTogYHNoYWtlWW91clBob25lc0dhbWVgLFxuICBTSEFLRV9ZT1VSX1BIT05FU19GSU5JU0hFRDogYHNoYWtlWW91clBob25lc0ZpbmlzaGVkYCxcblxuICBTSEFLRV9ZT1VSX1BIT05FU19DTElFTlRfQURERUQ6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRBZGRlZGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9SRU1PVkVEOiBgc2hha2VZb3VyUGhvbmVzQ2xpZW50UmVtb3ZlZGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9MSVNUOiBgc2hha2VZb3VyUGhvbmVzQ2xpZW50TGlzdGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9VUERBVEU6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRVcGRhdGVgLFxuXG4gIEhJR0hFU1RfSEVBUlRSQVRFX0dBTUVfSU5UUk86IGBoaWdoZXN0SGVhcnRyYXRlR2FtZUludHJvYCxcbiAgSElHSEVTVF9IRUFSVFJBVEVfR0FNRV9HQU1FOiBgaGlnaGVzdEhlYXJ0cmF0ZUdhbWVHYW1lYCxcbiAgSElHSEVTVF9IRUFSVFJBVEVfR0FNRV9GSU5JU0hFRDogYGhpZ2hlc3RIZWFydHJhdGVHYW1lRmluaXNoZWRgLFxuXG4gIExPV0VTVF9IRUFSVFJBVEVfR0FNRV9JTlRSTzogYGxvd2VzdEhlYXJ0cmF0ZUdhbWVJbnRyb2AsXG4gIExPV0VTVF9IRUFSVFJBVEVfR0FNRV9HQU1FOiBgbG93ZXN0SGVhcnRyYXRlR2FtZUdhbWVgLFxuICBMT1dFU1RfSEVBUlRSQVRFX0dBTUVfRklOSVNIRUQ6IGBsb3dlc3RIZWFydHJhdGVHYW1lRmluaXNoZWRgLFxuXG4gIFVQREFURV9SRUFDVElPTl9TUEVFRDogYHVwZGF0ZVJlYWN0aW9uU3BlZWRgLFxuXG4gIFJFQUNUX1BIT05FU19JTlRSTzogYHJlYWN0UGhvbmVzSW50cm9gLFxuICBSRUFDVF9QSE9ORVNfR0FNRTogYHJlYWN0UGhvbmVzR2FtZWAsXG4gIFJFQUNUX1BIT05FU19GSU5JU0hFRDogYHJlYWN0UGhvbmVzRmluaXNoZWRgLFxuXG4gIERBTkNFX1BBRF9HQU1FX0lOVFJPOiBgZGFuY2VQYWRHYW1lSW50cm9gLFxuICBEQU5DRV9QQURfR0FNRV9HQU1FOiBgZGFuY2VQYWRHYW1lR2FtZWAsXG4gIERBTkNFX1BBRF9HQU1FX0ZJTklTSEVEOiBgZGFuY2VQYWRHYW1lRmluaXNoZWRgLFxufTtcbiIsImltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLWZldGNoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9iaWxlU2VydmVyQnJpZGdlIHtcblxuICBjb25zdHJ1Y3RvcihwcmVzZW50YXRpb24sIHNldHRpbmdzKSB7XG4gICAgdGhpcy5wcmVzZW50YXRpb24gPSBwcmVzZW50YXRpb247XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuY29ubmVjdCgpO1xuICB9XG5cbiAgY29ubmVjdCgpIHtcbiAgICBjb25zb2xlLmxvZyhgTW9iaWxlU2VydmVyQnJpZGdlLmNvbm5lY3RgKTtcbiAgICAvL2NvbnNvbGUud2FybignTW9iaWxlU2VydmVyQnJpZGdlIGRpc2FibGVkJyk7XG4gICAgLy9yZXR1cm47XG4gICAgLy9wb3N0IHRvIHRoZSBhcGlcbiAgICBmZXRjaChgJHt0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclVybH0vbG9naW5gLCB7XG4gICAgICBtZXRob2Q6IGBQT1NUYCxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0TG9naW5DcmVkZW50aWFscygpKSxcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHsnQ29udGVudC1UeXBlJzogYGFwcGxpY2F0aW9uL2pzb25gfSlcbiAgICB9KVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5sb2dpbkhhbmRsZXIocmVzdWx0KSlcbiAgICAuY2F0Y2goZSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNvbm5lY3QoKSwgMTAwMCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRMb2dpbkNyZWRlbnRpYWxzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlbWFpbDogdGhpcy5zZXR0aW5ncy5tb2JpbGVTZXJ2ZXJVc2VybmFtZSxcbiAgICAgIHBhc3N3b3JkOiB0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclBhc3N3b3JkLFxuICAgIH07XG4gIH1cblxuICBsb2dpbkhhbmRsZXIocmVzdWx0KSB7XG4gICAgdGhpcy50b2tlbiA9IHJlc3VsdC50b2tlbjtcbiAgICB0aGlzLnNvY2tldCA9IGlvKHRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsLCB7XG4gICAgICBxdWVyeTogYHRva2VuPSR7ICB0aGlzLnRva2VufWAsXG4gICAgICByZWNvbm5lY3Rpb246IGZhbHNlLFxuICAgICAgZm9yY2VOZXc6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLnNvY2tldC5vbihgY29ubmVjdGAsIHRoaXMuc29ja2V0Q29ubmVjdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zb2NrZXQub24oYGRpc2Nvbm5lY3RgLCB0aGlzLnNvY2tldERpc2Nvbm5lY3RIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuc29ja2V0Lm9uKGBtZXNzYWdlYCwgdGhpcy5zb2NrZXRNZXNzYWdlSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHNvY2tldENvbm5lY3RIYW5kbGVyKCkge1xuICAgIGNvbnNvbGUubG9nKGBNb2JpbGVTZXJ2ZXJCcmlkZ2Uuc29ja2V0Q29ubmVjdEhhbmRsZXJgKTtcbiAgICB0aGlzLnByZXNlbnRhdGlvbi5tb2JpbGVTZXJ2ZXJCcmlkZ2VDb25uZWN0ZWQoKTtcbiAgfVxuXG4gIHNvY2tldERpc2Nvbm5lY3RIYW5kbGVyKCkge1xuICAgIHRoaXMuY29ubmVjdCgpO1xuICB9XG5cbiAgdHJ5VG9TZW5kKCkge1xuICAgIGlmKHRoaXMuc29ja2V0KSB7XG4gICAgICB0aGlzLnNvY2tldC5lbWl0LmFwcGx5KHRoaXMuc29ja2V0LCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIHNvY2tldE1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnByZXNlbnRhdGlvbi5tb2JpbGVTZXJ2ZXJNZXNzYWdlSGFuZGxlcihtZXNzYWdlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uL0NvbnN0YW50cyc7XG5pbXBvcnQgU2xpZGVCcmlkZ2UgZnJvbSAnLi9TbGlkZUJyaWRnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbnRhdGlvbiB7XG4gIC8qXG4gICAqIGRhdGE6IGpzb24gb2JqZWN0IHdpdGggc2xpZGVzIGFycmF5IHByb3BlcnR5XG4gICAqIHJvbGU6IG1vYmlsZSBvciBwcmVzZW50YXRpb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHJvbGUsIHNldHRpbmdzKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAkKGAjcHJlc2VudGF0aW9uYCkuYXR0cihgZGF0YS1wcmVzZW50YXRpb24tc2V0dGluZ3NgLCBKU09OLnN0cmluZ2lmeShzZXR0aW5ncykpO1xuICAgIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSAtMTtcbiAgICB0aGlzLnNsaWRlSG9sZGVycyA9IFtdO1xuICAgIHRoaXMubnVtU2xpZGVIb2xkZXJzID0gMztcbiAgICB0aGlzLnNsaWRlQnJpZGdlcyA9IFtdO1xuICAgIHRoaXMuc2xpZGVCcmlkZ2VzQnlTbGlkZU5hbWUgPSB7fTtcblxuICAgIHRoaXMuY3JlYXRlU2xpZGVIb2xkZXJzKCk7XG4gICAgdGhpcy5jcmVhdGVTbGlkZUJyaWRnZXModGhpcy5kYXRhKTtcblxuICAgIHRoaXMubW9iaWxlU2VydmVyQnJpZGdlID0gdGhpcy5jcmVhdGVNb2JpbGVTZXJ2ZXJCcmlkZ2UoKTtcbiAgICB0aGlzLnN0YXJ0TGlzdGVuaW5nRm9yTWVzc2FnZXMoKTtcblxuICAgIHRoaXMuc2V0Q3VycmVudFNsaWRlSW5kZXgoMCk7XG4gIH1cblxuICBzdGFydExpc3RlbmluZ0Zvck1lc3NhZ2VzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGBtZXNzYWdlYCwgdGhpcy5zbGlkZU1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgfVxuXG4gIGNyZWF0ZVNsaWRlSG9sZGVycygpIHtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1TbGlkZUhvbGRlcnM7IGkrKykge1xuICAgICAgY29uc3QgJHNsaWRlSG9sZGVyID0gJChgPGRpdiBjbGFzcz1cInNsaWRlLWZyYW1lXCIgLz5gKTtcbiAgICAgIHRoaXMuc2xpZGVIb2xkZXJzLnB1c2goJHNsaWRlSG9sZGVyKTtcbiAgICAgICQoYCNwcmVzZW50YXRpb25gKS5hcHBlbmQoJHNsaWRlSG9sZGVyKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVTbGlkZUJyaWRnZXMoZGF0YSkge1xuICAgIGNvbnN0IG51bVNsaWRlcyA9IGRhdGEuc2xpZGVzLmxlbmd0aDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbnVtU2xpZGVzOyBpKyspIHtcbiAgICAgIGNvbnN0IHNsaWRlQnJpZGdlID0gdGhpcy5jcmVhdGVTbGlkZUJyaWRnZShkYXRhLnNsaWRlc1tpXSk7XG4gICAgICB0aGlzLnNsaWRlQnJpZGdlcy5wdXNoKHNsaWRlQnJpZGdlKTtcbiAgICAgIHRoaXMuc2xpZGVCcmlkZ2VzQnlTbGlkZU5hbWVbc2xpZGVCcmlkZ2UubmFtZV0gPSBzbGlkZUJyaWRnZTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVTbGlkZUJyaWRnZShzbGlkZSkge1xuICAgIHJldHVybiBuZXcgU2xpZGVCcmlkZ2Uoc2xpZGUpO1xuICB9XG5cbiAgc2xpZGVNZXNzYWdlSGFuZGxlcihldmVudCkge1xuICAgIGlmKCFldmVudC5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaChldmVudC5kYXRhLmFjdGlvbikge1xuICAgIGNhc2UgQ29uc3RhbnRzLlNPQ0tFVF9TRU5EOlxuICAgICAgaWYodGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UpIHtcbiAgICAgICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UudHJ5VG9TZW5kKENvbnN0YW50cy5NRVNTQUdFLCBldmVudC5kYXRhLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgbW9iaWxlU2VydmVyQnJpZGdlQ29ubmVjdGVkKCkge1xuICAgIC8vam9pbiB0aGUgcm9vbXMgb2YgdGhlIHNsaWRlSG9sZGVyc1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm51bVNsaWRlSG9sZGVyczsgaSsrKSB7XG4gICAgICB0aGlzLm1vYmlsZVNlcnZlckJyaWRnZS50cnlUb1NlbmQoQ29uc3RhbnRzLkpPSU5fU0xJREVfUk9PTSwgJCh0aGlzLnNsaWRlSG9sZGVyc1tpXSkuYXR0cihgZGF0YS1uYW1lYCkpO1xuICAgIH1cbiAgfVxuXG4gIG1vYmlsZVNlcnZlck1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpIHtcbiAgICBpZihtZXNzYWdlLnRhcmdldC5zbGlkZSkge1xuICAgICAgLy9zbGlkZSBoYXMgdG8gaGFuZGxlIHRoZSBtZXNzYWdlXG4gICAgICBjb25zdCBzbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeU5hbWUobWVzc2FnZS50YXJnZXQuc2xpZGUpO1xuICAgICAgaWYoc2xpZGVCcmlkZ2UpIHtcbiAgICAgICAgc2xpZGVCcmlkZ2UudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuU09DS0VUX1JFQ0VJVkUsXG4gICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9wcmVzZW50YXRpb24gaGFzIHRvIGhhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgdGhpcy5oYW5kbGVNb2JpbGVTZXJ2ZXJNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1vYmlsZVNlcnZlck1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnNvbGUubG9nKGBbc2hhcmVkL1ByZXNlbnRhdGlvbl0gaGFuZGxlTW9iaWxlU2VydmVyTWVzc2FnZWAsIG1lc3NhZ2UpO1xuICB9XG5cbiAgZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KGluZGV4KSB7XG4gICAgaWYoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuc2xpZGVCcmlkZ2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpZGVCcmlkZ2VzW2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0U2xpZGVCcmlkZ2VCeU5hbWUoc2xpZGVOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuc2xpZGVCcmlkZ2VzQnlTbGlkZU5hbWVbc2xpZGVOYW1lXTtcbiAgfVxuXG4gIGdldFNsaWRlSG9sZGVyRm9yU2xpZGUoc2xpZGUsIHNsaWRlc05vdFRvQ2xlYXIpIHtcbiAgICBpZihzbGlkZSkge1xuICAgICAgbGV0ICRzbGlkZUhvbGRlciA9ICQoYC5zbGlkZS1mcmFtZVtkYXRhLW5hbWU9XCIkeyAgc2xpZGUubmFtZSAgfVwiXWApO1xuICAgICAgaWYoJHNsaWRlSG9sZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuICRzbGlkZUhvbGRlclswXTtcbiAgICAgIH1cbiAgICAgIC8vZ2V0IGEgZnJlZSBzbGlkZUhvbGRlclxuICAgICAgY29uc3Qgc2xpZGVOYW1lc05vdFRvQ2xlYXIgPSBbXTtcbiAgICAgICQoc2xpZGVzTm90VG9DbGVhcikuZWFjaChmdW5jdGlvbihpbmRleCwgb2JqKXtcbiAgICAgICAgc2xpZGVOYW1lc05vdFRvQ2xlYXIucHVzaChvYmoubmFtZSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0ICRzbGlkZUhvbGRlcnMgPSAkKGAuc2xpZGUtZnJhbWVgKTtcbiAgICAgIGZvciAobGV0IGkgPSAkc2xpZGVIb2xkZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICRzbGlkZUhvbGRlciA9ICQoJHNsaWRlSG9sZGVyc1tpXSk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSAkc2xpZGVIb2xkZXIuYXR0cihgZGF0YS1uYW1lYCk7XG4gICAgICAgIGlmKCFuYW1lIHx8IHNsaWRlTmFtZXNOb3RUb0NsZWFyLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuICRzbGlkZUhvbGRlclswXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnb1RvUHJldmlvdXNTbGlkZSgpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRTbGlkZUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggLSAxKTtcbiAgfVxuXG4gIGdvVG9OZXh0U2xpZGUoKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50U2xpZGVJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4ICsgMSk7XG4gIH1cblxuICBzZXRDdXJyZW50U2xpZGVJbmRleCh2YWx1ZSkge1xuICAgIHZhbHVlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odmFsdWUsIHRoaXMuc2xpZGVCcmlkZ2VzLmxlbmd0aCAtIDEpKTtcbiAgICBpZih2YWx1ZSAhPT0gdGhpcy5jdXJyZW50U2xpZGVJbmRleCkge1xuICAgICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IHZhbHVlO1xuXG4gICAgICBjb25zdCBjdXJyZW50U2xpZGVCcmlkZ2UgPSB0aGlzLmdldFNsaWRlQnJpZGdlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICAgIGNvbnN0IHByZXZpb3VzU2xpZGVCcmlkZ2UgPSB0aGlzLmdldFNsaWRlQnJpZGdlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4IC0gMSk7XG4gICAgICBjb25zdCBuZXh0U2xpZGVCcmlkZ2UgPSB0aGlzLmdldFNsaWRlQnJpZGdlQnlJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4ICsgMSk7XG5cbiAgICAgIC8vcmVtb3ZlIFwidXNlZFwiIGNsYXNzIGZyb20gc2xpZGUgaG9sZGVyc1xuICAgICAgJChgLnNsaWRlLWZyYW1lYCkucmVtb3ZlQXR0cihgZGF0YS11c2VkYCwgZmFsc2UpO1xuXG4gICAgICBjb25zdCBjdXJyZW50U2xpZGVIb2xkZXIgPSB0aGlzLmdldFNsaWRlSG9sZGVyRm9yU2xpZGUoY3VycmVudFNsaWRlQnJpZGdlLCBbcHJldmlvdXNTbGlkZUJyaWRnZSwgbmV4dFNsaWRlQnJpZGdlXSk7XG4gICAgICB0aGlzLnNldHVwU2xpZGVIb2xkZXIoY3VycmVudFNsaWRlSG9sZGVyLCBjdXJyZW50U2xpZGVCcmlkZ2UsIENvbnN0YW50cy5TVEFURV9BQ1RJVkUsIDApO1xuXG4gICAgICBjb25zdCBwcmV2aW91c1NsaWRlSG9sZGVyID0gdGhpcy5nZXRTbGlkZUhvbGRlckZvclNsaWRlKHByZXZpb3VzU2xpZGVCcmlkZ2UsIFtjdXJyZW50U2xpZGVCcmlkZ2UsIG5leHRTbGlkZUJyaWRnZV0pO1xuICAgICAgdGhpcy5zZXR1cFNsaWRlSG9sZGVyKHByZXZpb3VzU2xpZGVIb2xkZXIsIHByZXZpb3VzU2xpZGVCcmlkZ2UsIENvbnN0YW50cy5TVEFURV9JTkFDVElWRSwgYC0xMDAlYCk7XG5cbiAgICAgIGNvbnN0IG5leHRTbGlkZUhvbGRlciA9IHRoaXMuZ2V0U2xpZGVIb2xkZXJGb3JTbGlkZShuZXh0U2xpZGVCcmlkZ2UsIFtwcmV2aW91c1NsaWRlQnJpZGdlLCBjdXJyZW50U2xpZGVCcmlkZ2VdKTtcbiAgICAgIHRoaXMuc2V0dXBTbGlkZUhvbGRlcihuZXh0U2xpZGVIb2xkZXIsIG5leHRTbGlkZUJyaWRnZSwgQ29uc3RhbnRzLlNUQVRFX0lOQUNUSVZFLCBgMTAwJWApO1xuXG4gICAgICAvL2NsZWFyIGF0dHJpYnV0ZXMgb2YgdW51c2VkIHNsaWRlIGZyYW1lc1xuICAgICAgJChgLnNsaWRlLWZyYW1lYCkuZWFjaChmdW5jdGlvbihpbmRleCwgc2xpZGVIb2xkZXIpe1xuICAgICAgICBpZighJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS11c2VkYCkpIHtcbiAgICAgICAgICAkKHNsaWRlSG9sZGVyKS5yZW1vdmVBdHRyKGBkYXRhLXVzZWRgKS5yZW1vdmVBdHRyKGBkYXRhLW5hbWVgKS5yZW1vdmVBdHRyKGBkYXRhLXNyY2ApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy9hbGwgb3RoZXIgc2xpZGVIb2xkZXIgYnJpZGdlcyBzaG91bGQgYmUgdW5saW5rZWQgZnJvbSB0aGVpciBzbGlkZUhvbGRlclxuICAgICAgdGhpcy5zbGlkZUJyaWRnZXMuZm9yRWFjaChmdW5jdGlvbihzbGlkZUJyaWRnZSl7XG4gICAgICAgIGlmKHNsaWRlQnJpZGdlID09PSBjdXJyZW50U2xpZGVCcmlkZ2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYoc2xpZGVCcmlkZ2UgPT09IHByZXZpb3VzU2xpZGVCcmlkZ2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYoc2xpZGVCcmlkZ2UgPT09IG5leHRTbGlkZUJyaWRnZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzbGlkZUJyaWRnZS5zbGlkZUhvbGRlciA9IG51bGw7XG4gICAgICB9KTtcblxuICAgICAgYmVhbi5maXJlKHRoaXMsIENvbnN0YW50cy5TRVRfQ1VSUkVOVF9TTElERV9JTkRFWCwgW3RoaXMuY3VycmVudFNsaWRlSW5kZXhdKTtcbiAgICB9XG4gIH1cblxuICBzZXR1cFNsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzbGlkZUJyaWRnZSwgc3RhdGUsIGxlZnQpIHtcbiAgICBpZihzbGlkZUhvbGRlcikge1xuICAgICAgbGV0IHNyYyA9IGBzbGlkZXMvJHsgIHNsaWRlQnJpZGdlLm5hbWUgIH0uaHRtbGA7XG4gICAgICBpZihzbGlkZUJyaWRnZS5kYXRhW3RoaXMucm9sZV0gJiYgc2xpZGVCcmlkZ2UuZGF0YVt0aGlzLnJvbGVdLnVybCkge1xuICAgICAgICBzcmMgPSBzbGlkZUJyaWRnZS5kYXRhW3RoaXMucm9sZV0udXJsO1xuICAgICAgfVxuICAgICAgc3JjID0gdGhpcy5wcm9jZXNzU2xpZGVTcmMoc3JjKTtcbiAgICAgIGlmKHNsaWRlQnJpZGdlLmlzQWxyZWFkeUNvcnJlY3RseUF0dGFjaGVkKHNsaWRlSG9sZGVyLCBzcmMpKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coc2xpZGVCcmlkZ2UubmFtZSArICcgYWxyZWFkeSBhdHRhY2hlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzbGlkZUJyaWRnZSwgc3JjKTtcbiAgICAgIH1cbiAgICAgIHNsaWRlQnJpZGdlLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmNzcyhgbGVmdGAsIGxlZnQpO1xuICAgICAgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS11c2VkYCwgMSk7XG4gICAgfVxuICB9XG5cbiAgYXR0YWNoVG9TbGlkZUhvbGRlcihzbGlkZUhvbGRlciwgc2xpZGVCcmlkZ2UsIHNyYykge1xuICAgIC8vbGlzdGVuIGZvciBldmVudHMgb24gdGhpcyBzbGlkZUhvbGRlclxuICAgICQoc2xpZGVIb2xkZXIpLm9mZihgbWVzc2FnZS1mcm9tLXNsaWRlYCk7XG4gICAgJChzbGlkZUhvbGRlcikub24oYG1lc3NhZ2UtZnJvbS1zbGlkZWAsIChldmVudCwgbWVzc2FnZSkgPT4gIHtcbiAgICAgIHRoaXMuc2xpZGVNZXNzYWdlSGFuZGxlcih7ZGF0YTogbWVzc2FnZX0pO1xuICAgIH0pO1xuICAgIC8vbGVhdmUgcHJldmlvdXMgY2hhbm5lbCBvZiB0aGlzIHNsaWRlSG9sZGVyXG4gICAgaWYodGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UpIHtcbiAgICAgIHRoaXMubW9iaWxlU2VydmVyQnJpZGdlLnRyeVRvU2VuZChDb25zdGFudHMuTEVBVkVfU0xJREVfUk9PTSwgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1uYW1lYCkpO1xuICAgIH1cbiAgICAvL2FkZCB0aGUgam9pbiBhcyBhIGNhbGxiYWNrIGZvciB0aGUgb25sb2FkIGV2ZW50XG4gICAgc2xpZGVCcmlkZ2UuYXR0YWNoVG9TbGlkZUhvbGRlcihzbGlkZUhvbGRlciwgc3JjLCB0aGlzLnNsaWRlTG9hZGVkLmJpbmQodGhpcywgc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlLCBzcmMpKTtcbiAgfVxuXG4gIHNsaWRlTG9hZGVkKHNsaWRlSG9sZGVyLCBzbGlkZUJyaWRnZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgLy9qb2luIG5ldyBjaGFubmVsXG4gICAgaWYodGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UpIHtcbiAgICAgIHRoaXMubW9iaWxlU2VydmVyQnJpZGdlLnRyeVRvU2VuZChDb25zdGFudHMuSk9JTl9TTElERV9ST09NLCAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgKSk7XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzc1NsaWRlU3JjKHNyYykge1xuICAgIHJldHVybiBzcmM7XG4gIH1cblxuICBjcmVhdGVNb2JpbGVTZXJ2ZXJCcmlkZ2UoKSB7XG4gICAgLy90byBpbXBsZW1lbnQgaW4gZXh0ZW5kaW5nIGNsYXNzZXNcbiAgfVxufVxuIiwiaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtZmV0Y2gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZUJyaWRnZSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMubmFtZSA9IHRoaXMuZGF0YS5uYW1lO1xuICB9XG5cbiAgaXNBbHJlYWR5Q29ycmVjdGx5QXR0YWNoZWQoc2xpZGVIb2xkZXIsIHNyYykge1xuICAgIHJldHVybiAodGhpcy5zbGlkZUhvbGRlciA9PT0gc2xpZGVIb2xkZXIgJiYgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1uYW1lYCkgPT09IHRoaXMubmFtZSAmJiAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXNyY2ApID09PSBzcmMpO1xuICB9XG5cbiAgYXR0YWNoVG9TbGlkZUhvbGRlcihzbGlkZUhvbGRlciwgc3JjLCBjYikge1xuICAgIHRoaXMuc2xpZGVIb2xkZXIgPSBzbGlkZUhvbGRlcjtcbiAgICAvL25vdGlmeSB0aGUgY29udGVudCBpdCBpcyBiZWluZyBjbGVhcmVkXG4gICAgdGhpcy50cnlUb1Bvc3RNZXNzYWdlKHthY3Rpb246IGBkZXN0cm95YH0pO1xuICAgIC8vY2xlYXIgdGhlIGN1cnJlbnQgY29udGVudFxuICAgIHRoaXMuc2xpZGVIb2xkZXIuaW5uZXJIVE1MID0gYGA7XG4gICAgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1uYW1lYCwgdGhpcy5uYW1lKTtcbiAgICAkKHNsaWRlSG9sZGVyKS5hZGRDbGFzcyhgbG9hZGluZ2ApO1xuXG4gICAgJChzbGlkZUhvbGRlcikub2ZmKGBsb2FkYCk7XG4gICAgJChzbGlkZUhvbGRlcikub24oYGxvYWRgLCAoKSA9PiB7XG4gICAgICB0aGlzLnRyeVRvUG9zdE1lc3NhZ2Uoe1xuICAgICAgICBhY3Rpb246IGBzZXRTdGF0ZWAsXG4gICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlXG4gICAgICB9KTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLm9mZihgbG9hZGApO1xuICAgIH0pO1xuXG4gICAgaWYoc3JjICE9PSAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXNyY2ApKSB7XG4gICAgICAvL2ZldGNoIHRoZSBodG1sXG4gICAgICBmZXRjaChzcmMpXG4gICAgICAgIC50aGVuKHJlc3VsdCA9PiByZXN1bHQudGV4dCgpKVxuICAgICAgICAudGhlbihyZXN1bHQgPT4gJChyZXN1bHQpKVxuICAgICAgICAudGhlbigkcmVzdWx0ID0+IHtcbiAgICAgICAgICAkKHNsaWRlSG9sZGVyKS5odG1sKCRyZXN1bHQuaHRtbCgpKTtcbiAgICAgICAgICAkKHNsaWRlSG9sZGVyKS5yZW1vdmVDbGFzcyhgbG9hZGluZ2ApO1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAkKHNsaWRlSG9sZGVyKS5yZW1vdmVDbGFzcyhgbG9hZGluZ2ApO1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH0pO1xuICAgICAgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1zcmNgLCBzcmMpO1xuICAgIH1cbiAgfVxuXG4gIHRyeVRvUG9zdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmKCF0aGlzLnNsaWRlSG9sZGVyKVxuICAgIHtcbiAgICAgIGNvbnNvbGUubG9nKGAke3RoaXMubmFtZSAgfSBwb3N0IGZhaWxgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy90cmlnZ2VyIHdpdGgganF1ZXJ5XG4gICAgJCh0aGlzLnNsaWRlSG9sZGVyKS50cmlnZ2VyKGBtZXNzYWdlLXRvLXNsaWRlYCwgbWVzc2FnZSk7XG4gIH1cblxuICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnRyeVRvUG9zdE1lc3NhZ2Uoe1xuICAgICAgYWN0aW9uOiBgc2V0U3RhdGVgLFxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGVcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uL0NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRlbnRCYXNle1xuXG4gIGNvbnN0cnVjdG9yKCRzbGlkZUhvbGRlcikge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyID0gJHNsaWRlSG9sZGVyO1xuICAgIHRoaXMuc2xpZGVIb2xkZXIgPSB0aGlzLiRzbGlkZUhvbGRlclswXTtcbiAgICB0aGlzLndpZHRoID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRXaWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuc2xpZGVIb2xkZXIub2Zmc2V0SGVpZ2h0O1xuICAgIHRoaXMucHJldldpZHRoID0gdGhpcy53aWR0aDtcbiAgICB0aGlzLnByZXZIZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICB0aGlzLndpZHRoQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuaGVpZ2h0Q2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2l6ZUNoYW5nZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNyYyA9ICRzbGlkZUhvbGRlci5hdHRyKGBkYXRhLXNyY2ApO1xuICAgIHRoaXMubmFtZSA9ICRzbGlkZUhvbGRlci5hdHRyKGBkYXRhLW5hbWVgKTtcbiAgICB0aGlzLnNldHRpbmdzID0ge307XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSBKU09OLnBhcnNlKCQoYCNwcmVzZW50YXRpb25gKS5hdHRyKGBkYXRhLXByZXNlbnRhdGlvbi1zZXR0aW5nc2ApKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgICB0aGlzLmZwcyA9IDYwO1xuICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSBmYWxzZTtcbiAgICB0aGlzLl9jdXJyZW50VGltZSA9IDA7XG4gICAgdGhpcy5fZGVsdGEgPSAwO1xuICAgIHRoaXMuX2ludGVydmFsID0gZmFsc2U7XG4gICAgdGhpcy5fbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG5cbiAgICB0aGlzLnN0YXJ0TGlzdGVuaW5nRm9yTWVzc2FnZXMoKTtcblxuICAgIHRoaXMuX19kcmF3TG9vcCA9IHRoaXMuX2RyYXdMb29wLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSAxMDAwIC8gdGhpcy5mcHM7XG5cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICRzbGlkZUhvbGRlci50cmlnZ2VyKGBsb2FkYCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGFydExpc3RlbmluZ0Zvck1lc3NhZ2VzKCkge1xuICAgIHRoaXMuX3NsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyID0gdGhpcy5zbGlkZUhvbGRlck1lc3NhZ2VUb1NsaWRlSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLm9uKGBtZXNzYWdlLXRvLXNsaWRlYCwgdGhpcy5fc2xpZGVIb2xkZXJNZXNzYWdlVG9TbGlkZUhhbmRsZXIpO1xuICB9XG5cbiAgc3RvcExpc3RlbmluZ0Zvck1lc3NhZ2VzKCkge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLm9mZihgbWVzc2FnZS10by1zbGlkZWAsIHRoaXMuX3NsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyKTtcbiAgfVxuXG4gIHNsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyKGV2ZW50LCBtZXNzYWdlKSB7XG4gICAgdGhpcy5yZWNlaXZlTWVzc2FnZSh7ZGF0YTogbWVzc2FnZX0pO1xuICB9XG5cbiAgcmVjZWl2ZU1lc3NhZ2UoZXZlbnQpIHtcbiAgICBpZighZXZlbnQuZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2goZXZlbnQuZGF0YS5hY3Rpb24pIHtcbiAgICBjYXNlIGBzZXRTdGF0ZWA6XG4gICAgICB0aGlzLnNldFN0YXRlKGV2ZW50LmRhdGEuc3RhdGUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBgZGVzdHJveWA6XG4gICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLlNPQ0tFVF9SRUNFSVZFOlxuICAgICAgdGhpcy5yZWNlaXZlU29ja2V0TWVzc2FnZShldmVudC5kYXRhLm1lc3NhZ2UpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZShldmVudC5kYXRhKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zdG9wTGlzdGVuaW5nRm9yTWVzc2FnZXMoKTtcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWVJZCk7XG4gIH1cblxuICBwb3N0TWVzc2FnZShkYXRhKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIudHJpZ2dlcihgbWVzc2FnZS1mcm9tLXNsaWRlYCwgZGF0YSk7XG4gIH1cblxuICBoYW5kbGVNZXNzYWdlKGRhdGEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICB9XG5cbiAgcG9zdFNvY2tldE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgYWN0aW9uOiBDb25zdGFudHMuU09DS0VUX1NFTkQsXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgfSk7XG4gIH1cblxuICByZWNlaXZlU29ja2V0TWVzc2FnZShtZXNzYWdlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgfVxuXG4gIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgaWYoc3RhdGUgIT09IHRoaXMuc3RhdGUpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMub25TdGF0ZUNoYW5nZWQoKTtcbiAgICAgIGlmKHRoaXMuc3RhdGUgPT09IENvbnN0YW50cy5TVEFURV9BQ1RJVkUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICB0aGlzLl9kcmF3TG9vcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uU3RhdGVDaGFuZ2VkKCkge1xuICB9XG5cbiAgX2RyYXdMb29wKCkge1xuICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX19kcmF3TG9vcCk7XG4gICAgdGhpcy5fY3VycmVudFRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgIHRoaXMuX2RlbHRhID0gKHRoaXMuX2N1cnJlbnRUaW1lIC0gdGhpcy5fbGFzdFRpbWUpO1xuICAgIGlmKHRoaXMuX2RlbHRhID4gdGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuY3VycmVudEZyYW1lKys7XG4gICAgICB0aGlzLnByZXZXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICB0aGlzLnByZXZIZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgIHRoaXMud2lkdGggPSB0aGlzLnNsaWRlSG9sZGVyLm9mZnNldFdpZHRoO1xuICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLnNsaWRlSG9sZGVyLm9mZnNldEhlaWdodDtcbiAgICAgIHRoaXMud2lkdGhDaGFuZ2VkID0gKHRoaXMud2lkdGggIT09IHRoaXMucHJldldpZHRoKTtcbiAgICAgIHRoaXMuaGVpZ2h0Q2hhbmdlZCA9ICh0aGlzLmhlaWdodCAhPT0gdGhpcy5wcmV2SGVpZ2h0KTtcbiAgICAgIHRoaXMuc2l6ZUNoYW5nZWQgPSAodGhpcy53aWR0aENoYW5nZWQgfHwgdGhpcy5oZWlnaHRDaGFuZ2VkKTtcbiAgICAgIHRoaXMuZHJhd0xvb3AodGhpcy5fZGVsdGEpO1xuICAgICAgdGhpcy5fbGFzdFRpbWUgPSB0aGlzLl9jdXJyZW50VGltZSAtICh0aGlzLl9kZWx0YSAlIHRoaXMuX2ludGVydmFsKTtcbiAgICB9XG4gIH1cblxuICBkcmF3TG9vcChkZWx0YSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcbmltcG9ydCBIZWFydFJhdGVDYW52YXMgZnJvbSAnLi4vSGVhcnRSYXRlQ2FudmFzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVhcnRSYXRlU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMuaGVhcnRSYXRlQ2FudmFzID0gbmV3IEhlYXJ0UmF0ZUNhbnZhcyh0aGlzLnNsaWRlSG9sZGVyLnF1ZXJ5U2VsZWN0b3IoYGNhbnZhc2ApKTtcbiAgICB0aGlzLmhlYXJ0UmF0ZUNhbnZhcy5yZXNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICB9XG5cbiAgcmVjZWl2ZU1lc3NhZ2UoZXZlbnQpIHtcbiAgICBzdXBlci5yZWNlaXZlTWVzc2FnZShldmVudCk7XG4gICAgaWYoZXZlbnQuZGF0YS5hY3Rpb24gPT09IENvbnN0YW50cy5IRUFSVF9SQVRFX1BPTEFSKSB7XG4gICAgICB0aGlzLnVwZGF0ZUhlYXJ0UmF0ZShldmVudC5kYXRhLmhlYXJ0UmF0ZSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlSGVhcnRSYXRlKGhlYXJ0UmF0ZSkge1xuICAgIHRoaXMuaGVhcnRSYXRlQ2FudmFzLnVwZGF0ZUhlYXJ0UmF0ZShoZWFydFJhdGUpO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5oZWFydC1yYXRlLXRleHRgKS50ZXh0KGhlYXJ0UmF0ZSk7XG4gIH1cblxuICBkcmF3TG9vcCgpIHtcbiAgICBpZih0aGlzLnNpemVDaGFuZ2VkKSB7XG4gICAgICB0aGlzLmhlYXJ0UmF0ZUNhbnZhcy5yZXNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIH1cbiAgICB0aGlzLmhlYXJ0UmF0ZUNhbnZhcy50aWNrKCk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcblxuaW1wb3J0IEdhbWUgZnJvbSAnLi9nYW1lL0dhbWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIaWdoZXN0SGVhcnRyYXRlR2FtZVNsaWRlIGV4dGVuZHMgQ29udGVudEJhc2V7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcbiAgICB0aGlzLmdhbWUgPSBuZXcgR2FtZSgkc2xpZGVIb2xkZXJbMF0sIDEyODAsIDY3MCwgUGhhc2VyLkFVVE8sIGBoaWdoZXN0LWhlYXJ0cmF0ZS1nYW1lLWNvbnRhaW5lcmApO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5nYW1lLnBhdXNlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdhbWUucGF1c2VkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZ2FtZS5kZXN0cm95KCk7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZSc7XG5cbmltcG9ydCBMaXZlQ29kZSBmcm9tICcuLi9saXZlLWNvZGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlQ29kZVNsaWRlIGV4dGVuZHMgQ29udGVudEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKCRzbGlkZUhvbGRlciwgY29uZmlnLCByZWFkeUNhbGxiYWNrKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIGNvbnN0IHJlbW90ZSA9IHJlcXVpcmVOb2RlKGBlbGVjdHJvbmApLnJlbW90ZTtcbiAgICBjb25zdCBjb25maWcyID0gey4uLmNvbmZpZywgcHJlc2VudGF0aW9uUGF0aDogcmVtb3RlLmdldEdsb2JhbChgX19kaXJuYW1lYCl9O1xuXG4gICAgLy9maW5kIGxpdmUgY29kZSBlbGVtZW50XG4gICAgdGhpcy5saXZlQ29kZSA9IG5ldyBMaXZlQ29kZSh0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAubGl2ZS1jb2RlYCksIGNvbmZpZzIsIHJlYWR5Q2FsbGJhY2spO1xuICB9XG5cbiAgbGF5b3V0KCkge1xuICAgIHRoaXMubGl2ZUNvZGUubGF5b3V0KCk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB0aGlzLmxpdmVDb2RlLmRlc3Ryb3koKTtcbiAgfVxuXG4gIG9uU3RhdGVDaGFuZ2VkKCkge1xuICAgIGlmKHRoaXMuc3RhdGUgPT09IENvbnN0YW50cy5TVEFURV9BQ1RJVkUpIHtcbiAgICAgIHRoaXMubGl2ZUNvZGUucmVzdW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vc3RvcFxuICAgICAgdGhpcy5saXZlQ29kZS5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5pbXBvcnQgR2FtZSBmcm9tICcuL2dhbWUvR2FtZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvd2VzdEhlYXJ0cmF0ZUdhbWVTbGlkZSBleHRlbmRzIENvbnRlbnRCYXNle1xuXG4gIGNvbnN0cnVjdG9yKCRzbGlkZUhvbGRlcikge1xuICAgIHN1cGVyKCRzbGlkZUhvbGRlcik7XG4gICAgdGhpcy5nYW1lID0gbmV3IEdhbWUoJHNsaWRlSG9sZGVyWzBdLCAxMjgwLCA2NzAsIFBoYXNlci5BVVRPLCBgbG93ZXN0LWhlYXJ0cmF0ZS1nYW1lLWNvbnRhaW5lcmApO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5nYW1lLnBhdXNlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdhbWUucGF1c2VkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZ2FtZS5kZXN0cm95KCk7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlYWN0UGhvbmVzU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMuZ2FtZUR1cmF0aW9uID0gMTE7XG4gICAgdGhpcy5jbGllbnRzTWFwID0ge307XG4gICAgdGhpcy5tdXNpYyA9ICQoYCNtdXNpY2ApWzBdO1xuXG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgI2lwYCkudGV4dCh0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclVybCk7XG5cbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtaW50cm8gLmJ0bmApLm9uKGBjbGlja2AsIHRoaXMuc3RhcnRDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWZpbmlzaGVkIC5idG5gKS5vbihgY2xpY2tgLCB0aGlzLndpbm5lckNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMuc2V0U3Vic3RhdGUoQ29uc3RhbnRzLlJFQUNUX1BIT05FU19JTlRSTyk7XG4gIH1cblxuICBzZXRTdWJzdGF0ZShzdWJzdGF0ZSkge1xuICAgIGlmKHRoaXMuc3Vic3RhdGUgIT09IHN1YnN0YXRlKSB7XG4gICAgICB0aGlzLnN1YnN0YXRlID0gc3Vic3RhdGU7XG4gICAgICAvL3NlbmQgc3Vic3RhdGUgdG8gbW9iaWxlIGNsaWVudHNcbiAgICAgIHRoaXMucG9zdFNvY2tldE1lc3NhZ2Uoe1xuICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICBjbGllbnQ6IGBtb2JpbGVgLFxuICAgICAgICAgIHNsaWRlOiB0aGlzLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLlNFVF9TVUJTVEFURSxcbiAgICAgICAgICBzdWJzdGF0ZTogdGhpcy5zdWJzdGF0ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmKHRoaXMuc3Vic3RhdGUgPT09IENvbnN0YW50cy5SRUFDVF9QSE9ORVNfR0FNRSkge1xuICAgICAgICB0aGlzLnJlc2V0QWxsUmVhY3Rpb25TcGVlZHMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvd0N1cnJlbnRTdGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJlY2VpdmVTb2NrZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZighbWVzc2FnZS5jb250ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IGB1cGRhdGVSb29tTGlzdGApIHtcbiAgICAgIC8vbWVzc2FnZS5jb250ZW50LmlkcyBpcyBhbiBhcnJheSB3aXRoIGlkcyBpbiB0aGlzIHJvb21cbiAgICAgIGNvbnN0IGNsaWVudE1hcElkcyA9IF8ua2V5cyh0aGlzLmNsaWVudHNNYXApO1xuICAgICAgLy93aGljaCBpZHMgYXJlIG5ldz8gKGluIG1lc3NhZ2UuY29udGVudC5pZHMgYnV0IG5vdCBpbiBjbGllbnRzTWFwKVxuICAgICAgY29uc3QgbmV3Q2xpZW50SWRzID0gXy5kaWZmZXJlbmNlKG1lc3NhZ2UuY29udGVudC5pZHMsIGNsaWVudE1hcElkcyk7XG4gICAgICAvL3doaWNoIGlkcyBuZWVkIHRvIGJlIHJlbW92ZWQ/IChpbiBjbGllbnRzTWFwIGJ1dCBub3QgaW4gbWVzc2FnZS5jb250ZW50LmlkcylcbiAgICAgIGNvbnN0IHJlbW92ZUNsaWVudElkcyA9IF8uZGlmZmVyZW5jZShjbGllbnRNYXBJZHMsIG1lc3NhZ2UuY29udGVudC5pZHMpO1xuICAgICAgLy91cGRhdGUgb3VyIG1hcFxuICAgICAgbmV3Q2xpZW50SWRzLmZvckVhY2goZnVuY3Rpb24oaWQpe1xuICAgICAgICB0aGlzLmNsaWVudHNNYXBbaWRdID0ge1xuICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICByZWFjdGlvblNwZWVkOiA5OTk5OTk5OTk5OVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvc3RTb2NrZXRNZXNzYWdlKHtcbiAgICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICAgICAgICBzbGlkZTogdGhpcy5uYW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TRVRfU1VCU1RBVEUsXG4gICAgICAgICAgICBzdWJzdGF0ZTogdGhpcy5zdWJzdGF0ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHJlbW92ZUNsaWVudElkcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgaWYodGhpcy5jbGllbnRzTWFwW2lkXSkge1xuICAgICAgICAgIC8vdGhpcy5jbGllbnRzTWFwW2lkXS4kZGl2LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNsaWVudHNNYXBbaWRdO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICAgIHRoaXMubnVtQ2xpZW50c0NoYW5nZWQoKTtcbiAgICB9IGVsc2UgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gQ29uc3RhbnRzLlVQREFURV9SRUFDVElPTl9TUEVFRCkge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICBpZighbWVzc2FnZS5zZW5kZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy9tZXNzYWdlLnNlbmRlci5pZCBjb250YWlucyB0aGUgb3JpZ2luIGlkXG4gICAgICBpZighdGhpcy5jbGllbnRzTWFwW21lc3NhZ2Uuc2VuZGVyLmlkXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgdXBkYXRlIHJlYWN0aW9uc3BlZWQgdG8gJHsgIG1lc3NhZ2UuY29udGVudC5yZWFjdGlvblNwZWVkfWApO1xuICAgICAgdGhpcy5jbGllbnRzTWFwW21lc3NhZ2Uuc2VuZGVyLmlkXS5yZWFjdGlvblNwZWVkID0gbWVzc2FnZS5jb250ZW50LnJlYWN0aW9uU3BlZWQ7XG4gICAgfVxuICB9XG5cbiAgc3RhcnRDbGlja0hhbmRsZXIoKSB7XG4gICAgdGhpcy5zZXRTdWJzdGF0ZShDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0dBTUUpO1xuICB9XG5cbiAgd2lubmVyQ2xpY2tIYW5kbGVyKCkge1xuICAgIC8vZ2V0IHRoZSBjbGllbnRoYW5kbGVyIHdpdGggdGhlIGxhcmdlc3QgbW90aW9uLCBhbmQgYmxpbmsgaXQncyBzY3JlZW5cbiAgICBsZXQgd2lubmluZ0NsaWVudCA9IGZhbHNlO1xuICAgIGxldCByZWFjdGlvblNwZWVkID0gOTk5OTk5OTk5OTk7XG4gICAgZm9yKGNvbnN0IGlkIGluIHRoaXMuY2xpZW50c01hcCkge1xuICAgICAgaWYoIXRoaXMuY2xpZW50c01hcFtpZF0uc3BlZWRXaW5uZXIgJiYgdGhpcy5jbGllbnRzTWFwW2lkXS5yZWFjdGlvblNwZWVkIDwgcmVhY3Rpb25TcGVlZCkge1xuICAgICAgICB3aW5uaW5nQ2xpZW50ID0gdGhpcy5jbGllbnRzTWFwW2lkXTtcbiAgICAgICAgcmVhY3Rpb25TcGVlZCA9IHdpbm5pbmdDbGllbnQucmVhY3Rpb25TcGVlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYod2lubmluZ0NsaWVudCkge1xuICAgICAgd2lubmluZ0NsaWVudC5zcGVlZFdpbm5lciA9IHRydWU7XG4gICAgICAvL3NlbmQgbWVzc2FnZSB0byB0aGlzIGNsaWVudFxuICAgICAgdGhpcy5wb3N0U29ja2V0TWVzc2FnZSh7XG4gICAgICAgIHRhcmdldDoge1xuICAgICAgICAgIGNsaWVudDogd2lubmluZ0NsaWVudC5pZFxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuQkxJTkssXG4gICAgICAgICAgdGV4dDogYDxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiA1ZW07XCI+U3BlY3RhY3VsYXIsIFlvdSBXaW4hPC9zcGFuPmAsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmVkYFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXNldEFsbFJlYWN0aW9uU3BlZWRzKCkge1xuICAgIGZvcihjb25zdCBpZCBpbiB0aGlzLmNsaWVudHNNYXApIHtcbiAgICAgIHRoaXMuY2xpZW50c01hcFtpZF0ucmVhY3Rpb25TcGVlZCA9IDk5OTk5OTk5OTk5O1xuICAgICAgdGhpcy5jbGllbnRzTWFwW2lkXS5zcGVlZFdpbm5lciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG51bUNsaWVudHNDaGFuZ2VkKCkge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYCNjb25uZWN0aW9ucyBzcGFuYCkudGV4dChfLmtleXModGhpcy5jbGllbnRzTWFwKS5sZW5ndGgpO1xuICB9XG5cbiAgc2hvd0N1cnJlbnRTdGF0ZSgpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGVgKS5yZW1vdmVDbGFzcyhgYWN0aXZlYCk7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnNsaWRlYCkuY3NzKHtcbiAgICAgIGJhY2tncm91bmRJbWFnZTogYG5vbmVgXG4gICAgfSk7XG4gICAgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlJFQUNUX1BIT05FU19HQU1FKSB7XG4gICAgICB0aGlzLm11c2ljLnBsYXkoKTtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1nYW1lIC5jb3VudGRvd25gKS5odG1sKHRoaXMuZ2FtZUR1cmF0aW9uKTtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1nYW1lYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgICAgdGhpcy5jb3VudERvd25UaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNvdW50RG93bkhhbmRsZXIuYmluZCh0aGlzLCB0aGlzLmdhbWVEdXJhdGlvbiAtIDEpLCAxMDAwKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlJFQUNUX1BIT05FU19GSU5JU0hFRCkge1xuICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWZpbmlzaGVkYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc2xpZGVgKS5jc3Moe1xuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiBgbm8tcmVwZWF0YCxcbiAgICAgICAgYmFja2dyb3VuZFNpemU6IGBjb250YWluYCxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBgY2VudGVyIGNlbnRlcmAsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybChhc3NldHMvaXBob25lLWNvbm5lY3Rpb25zLnBuZylgXG4gICAgICB9KTtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1pbnRyb2ApLmFkZENsYXNzKGBhY3RpdmVgKTtcbiAgICB9XG4gIH1cblxuICBjb3VudERvd25IYW5kbGVyKHRpbWVMZWZ0KSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWdhbWUgLmNvdW50ZG93bmApLmh0bWwodGltZUxlZnQpO1xuICAgIGlmKHRpbWVMZWZ0ID4gMCkge1xuICAgICAgdGhpcy5jb3VudERvd25UaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNvdW50RG93bkhhbmRsZXIuYmluZCh0aGlzLCB0aW1lTGVmdCAtIDEpLCAxMDAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdWJzdGF0ZShDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0ZJTklTSEVEKTtcbiAgICB9XG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hha2VZb3VyUGhvbmVzU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMuZ2FtZUR1cmF0aW9uID0gMTM7IC8vZ2FtZSBsYXN0cyAxMyBzZWNvbmRzXG4gICAgdGhpcy5jbGllbnRzTWFwID0ge307XG4gICAgdGhpcy5jbGllbnRzQnlUZWFtID0gW1xuICAgICAgW10sXG4gICAgICBbXVxuICAgIF07XG4gICAgdGhpcy5tb3Rpb25zID0gWzAsIDBdO1xuICAgIHRoaXMubXVzaWMgPSB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAjbXVzaWNgKVswXTtcblxuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYCNpcGApLnRleHQodGhpcy5zZXR0aW5ncy5tb2JpbGVTZXJ2ZXJVcmwpO1xuXG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWludHJvIC5idG5gKS5vbihgY2xpY2tgLCB0aGlzLnN0YXJ0Q2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1maW5pc2hlZCAuYnRuYCkub24oYGNsaWNrYCwgdGhpcy53aW5uZXJDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLnNldFN1YnN0YXRlKENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19JTlRSTyk7XG4gIH1cblxuICBzZXRTdWJzdGF0ZShzdWJzdGF0ZSkge1xuICAgIGlmKHRoaXMuc3Vic3RhdGUgIT09IHN1YnN0YXRlKSB7XG4gICAgICB0aGlzLnN1YnN0YXRlID0gc3Vic3RhdGU7XG4gICAgICAvL3NlbmQgc3Vic3RhdGUgdG8gbW9iaWxlIGNsaWVudHNcbiAgICAgIHRoaXMucG9zdFNvY2tldE1lc3NhZ2Uoe1xuICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICBjbGllbnQ6IGBtb2JpbGVgLFxuICAgICAgICAgIHNsaWRlOiB0aGlzLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLlNFVF9TVUJTVEFURSxcbiAgICAgICAgICBzdWJzdGF0ZTogdGhpcy5zdWJzdGF0ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmKHRoaXMuc3Vic3RhdGUgPT09IENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19HQU1FKSB7XG4gICAgICAgIHRoaXMucmVzZXRNb3Rpb24oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvd0N1cnJlbnRTdGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJlY2VpdmVTb2NrZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZighbWVzc2FnZS5jb250ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IGB1cGRhdGVSb29tTGlzdGApIHtcbiAgICAgIC8vbWVzc2FnZS5jb250ZW50LmlkcyBpcyBhbiBhcnJheSB3aXRoIGlkcyBpbiB0aGlzIHJvb21cbiAgICAgIGNvbnN0IGNsaWVudE1hcElkcyA9IF8ua2V5cyh0aGlzLmNsaWVudHNNYXApO1xuICAgICAgLy93aGljaCBpZHMgYXJlIG5ldz8gKGluIG1lc3NhZ2UuY29udGVudC5pZHMgYnV0IG5vdCBpbiBjbGllbnRzTWFwKVxuICAgICAgY29uc3QgbmV3Q2xpZW50SWRzID0gXy5kaWZmZXJlbmNlKG1lc3NhZ2UuY29udGVudC5pZHMsIGNsaWVudE1hcElkcyk7XG4gICAgICAvL3doaWNoIGlkcyBuZWVkIHRvIGJlIHJlbW92ZWQ/IChpbiBjbGllbnRzTWFwIGJ1dCBub3QgaW4gbWVzc2FnZS5jb250ZW50LmlkcylcbiAgICAgIGNvbnN0IHJlbW92ZUNsaWVudElkcyA9IF8uZGlmZmVyZW5jZShjbGllbnRNYXBJZHMsIG1lc3NhZ2UuY29udGVudC5pZHMpO1xuICAgICAgLy91cGRhdGUgb3VyIG1hcFxuICAgICAgbmV3Q2xpZW50SWRzLmZvckVhY2goZnVuY3Rpb24oaWQpe1xuICAgICAgICBjb25zdCBsZWZ0ID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgY29uc3QgdG9wID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgdGhpcy5jbGllbnRzTWFwW2lkXSA9IHtcbiAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgbW90aW9uOiAwLFxuICAgICAgICAgIHNpemU6IDEwLFxuICAgICAgICAgIHNoYWtlV2lubmVyOiBmYWxzZSxcbiAgICAgICAgICAkZGl2OiAkKGA8ZGl2PmApLmNzcyh7XG4gICAgICAgICAgICBwb3NpdGlvbjogYGFic29sdXRlYCxcbiAgICAgICAgICAgIGxlZnQ6IGAke2xlZnQgKiAxMDB9JWAsXG4gICAgICAgICAgICB0b3A6IGAke3RvcCAqIDEwMH0lYCxcbiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogYGNlbnRlcmAsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGBzY2FsZSgxKWAsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IGA1MCVgLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiYSgkeyAgTWF0aC5yb3VuZChsZWZ0ICogMjU1KSAgfSwkeyAgTWF0aC5yb3VuZCh0b3AgKiAyNTUpICB9LCAwLCAxKWAsXG4gICAgICAgICAgICB3aWR0aDogYDEwcHhgLFxuICAgICAgICAgICAgaGVpZ2h0OiBgMTBweGBcbiAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAkKGAuYmFja2dyb3VuZCAuc3Vic3RhdGUtZ2FtZWApLmFwcGVuZCh0aGlzLmNsaWVudHNNYXBbaWRdLiRkaXYpO1xuICAgICAgICB0aGlzLnBvc3RTb2NrZXRNZXNzYWdlKHtcbiAgICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICAgICAgICBzbGlkZTogdGhpcy5uYW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TRVRfU1VCU1RBVEUsXG4gICAgICAgICAgICBzdWJzdGF0ZTogdGhpcy5zdWJzdGF0ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHJlbW92ZUNsaWVudElkcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgaWYodGhpcy5jbGllbnRzTWFwW2lkXSkge1xuICAgICAgICAgIHRoaXMuY2xpZW50c01hcFtpZF0uJGRpdi5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5jbGllbnRzTWFwW2lkXTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgICB0aGlzLm51bUNsaWVudHNDaGFuZ2VkKCk7XG4gICAgfSBlbHNlIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IENvbnN0YW50cy5VUERBVEVfTU9USU9OKSB7XG4gICAgICBpZighbWVzc2FnZS5zZW5kZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy9tZXNzYWdlLnNlbmRlci5pZCBjb250YWlucyB0aGUgb3JpZ2luIGlkXG4gICAgICBpZighdGhpcy5jbGllbnRzTWFwW21lc3NhZ2Uuc2VuZGVyLmlkXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmNsaWVudHNNYXBbbWVzc2FnZS5zZW5kZXIuaWRdLm1vdGlvbiA9IE1hdGgubWluKDEzMCwgbWVzc2FnZS5jb250ZW50Lm1vdGlvbik7IC8vbGltaXQgbWF4IG1vdGlvbiB0byAxMzBcbiAgICB9XG4gIH1cblxuICBzdGFydENsaWNrSGFuZGxlcigpIHtcbiAgICB0aGlzLnNldFN1YnN0YXRlKENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19HQU1FKTtcbiAgfVxuXG4gIHdpbm5lckNsaWNrSGFuZGxlcigpIHtcbiAgICAvL2dldCB0aGUgY2xpZW50aGFuZGxlciB3aXRoIHRoZSBsYXJnZXN0IG1vdGlvbiwgYW5kIGJsaW5rIGl0J3Mgc2NyZWVuXG4gICAgbGV0IHdpbm5pbmdDbGllbnQgPSBmYWxzZTtcbiAgICBsZXQgbWF4aW11bU1vdGlvbiA9IC0xO1xuICAgIGZvcihjb25zdCBpZCBpbiB0aGlzLmNsaWVudHNNYXApIHtcbiAgICAgIGlmKCF0aGlzLmNsaWVudHNNYXBbaWRdLnNoYWtlV2lubmVyICYmIHRoaXMuY2xpZW50c01hcFtpZF0ubW90aW9uID4gbWF4aW11bU1vdGlvbikge1xuICAgICAgICB3aW5uaW5nQ2xpZW50ID0gdGhpcy5jbGllbnRzTWFwW2lkXTtcbiAgICAgICAgbWF4aW11bU1vdGlvbiA9IHdpbm5pbmdDbGllbnQubW90aW9uO1xuICAgICAgfVxuICAgIH1cbiAgICBpZih3aW5uaW5nQ2xpZW50KSB7XG4gICAgICB3aW5uaW5nQ2xpZW50LnNoYWtlV2lubmVyID0gdHJ1ZTtcbiAgICAgIC8vc2VuZCBtZXNzYWdlIHRvIHRoaXMgY2xpZW50XG4gICAgICB0aGlzLnBvc3RTb2NrZXRNZXNzYWdlKHtcbiAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgY2xpZW50OiB3aW5uaW5nQ2xpZW50LmlkXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICBhY3Rpb246IENvbnN0YW50cy5CTElOSyxcbiAgICAgICAgICB0ZXh0OiBgPHNwYW4gc3R5bGU9XCJmb250LXNpemU6IDVlbTtcIj5TcGVjdGFjdWxhciwgWW91IFdpbiE8L3NwYW4+YCxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGByZWRgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0TW90aW9uKCkge1xuICAgIHRoaXMubW90aW9ucyA9IFswLCAwXTtcbiAgICBmb3IoY29uc3QgaWQgaW4gdGhpcy5jbGllbnRzTWFwKSB7XG4gICAgICB0aGlzLmNsaWVudHNNYXBbaWRdLm1vdGlvbiA9IDA7XG4gICAgICB0aGlzLmNsaWVudHNNYXBbaWRdLnNoYWtlV2lubmVyID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgbnVtQ2xpZW50c0NoYW5nZWQoKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgI2Nvbm5lY3Rpb25zIHNwYW5gKS50ZXh0KF8ua2V5cyh0aGlzLmNsaWVudHNNYXApLmxlbmd0aCk7XG4gIH1cblxuICBzaG93Q3VycmVudFN0YXRlKCkge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZWApLnJlbW92ZUNsYXNzKGBhY3RpdmVgKTtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc2xpZGVgKS5jc3Moe1xuICAgICAgYmFja2dyb3VuZEltYWdlOiBgbm9uZWBcbiAgICB9KTtcbiAgICBpZih0aGlzLnN1YnN0YXRlID09PSBDb25zdGFudHMuU0hBS0VfWU9VUl9QSE9ORVNfR0FNRSkge1xuICAgICAgdGhpcy5tdXNpYy5wbGF5KCk7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZ2FtZSAuY291bnRkb3duYCkuaHRtbCh0aGlzLmdhbWVEdXJhdGlvbik7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZ2FtZWApLmFkZENsYXNzKGBhY3RpdmVgKTtcbiAgICAgIHRoaXMuY291bnREb3duVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5jb3VudERvd25IYW5kbGVyLmJpbmQodGhpcywgdGhpcy5nYW1lRHVyYXRpb24gLSAxKSwgMTAwMCk7XG4gICAgfSBlbHNlIGlmKHRoaXMuc3Vic3RhdGUgPT09IENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19GSU5JU0hFRCkge1xuICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWZpbmlzaGVkYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc2xpZGVgKS5jc3Moe1xuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiBgbm8tcmVwZWF0YCxcbiAgICAgICAgYmFja2dyb3VuZFNpemU6IGBjb250YWluYCxcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBgY2VudGVyIGNlbnRlcmAsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybChhc3NldHMvaXBob25lLWNvbm5lY3Rpb25zLnBuZylgXG4gICAgICB9KTtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1pbnRyb2ApLmFkZENsYXNzKGBhY3RpdmVgKTtcbiAgICB9XG4gIH1cblxuICBjb3VudERvd25IYW5kbGVyKHRpbWVMZWZ0KSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlLWdhbWUgLmNvdW50ZG93bmApLmh0bWwodGltZUxlZnQpO1xuICAgIGlmKHRpbWVMZWZ0ID4gMCkge1xuICAgICAgdGhpcy5jb3VudERvd25UaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNvdW50RG93bkhhbmRsZXIuYmluZCh0aGlzLCB0aW1lTGVmdCAtIDEpLCAxMDAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdWJzdGF0ZShDb25zdGFudHMuU0hBS0VfWU9VUl9QSE9ORVNfRklOSVNIRUQpO1xuICAgIH1cbiAgfVxuXG4gIGRyYXdMb29wKCkge1xuICAgIGlmKHRoaXMuc3Vic3RhdGUgPT09IENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19HQU1FKSB7XG4gICAgICAkLmVhY2godGhpcy5jbGllbnRzTWFwLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gTWF0aC5tYXgoMTAsIHZhbHVlLm1vdGlvbik7XG4gICAgICAgIHZhbHVlLnNpemUgKz0gKHRhcmdldCAtIHZhbHVlLnNpemUpICogMC4yO1xuICAgICAgICB2YWx1ZS4kZGl2LmNzcyh7XG4gICAgICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHt2YWx1ZS5zaXplfSlgXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZSc7XG5cbmNvbnN0IGdldFBhcmFtZXRlckJ5TmFtZSA9ICh1cmwsIG5hbWUpID0+IHtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW10vLCBgXFxcXFtgKS5yZXBsYWNlKC9bXFxdXS8sIGBcXFxcXWApO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFtcXFxcPyZdJHsgIG5hbWUgIH09KFteJiNdKilgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICByZXR1cm4gcmVzdWx0cyA9PSBudWxsID8gYGAgOiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1sxXS5yZXBsYWNlKC9cXCsvZywgYCBgKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWRlb1NsaWRlIGV4dGVuZHMgQ29udGVudEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKCRzbGlkZUhvbGRlcikge1xuICAgIHN1cGVyKCRzbGlkZUhvbGRlcik7XG5cbiAgICB0aGlzLnZpZGVvUGxheWluZyA9IGZhbHNlO1xuICAgIGNvbnN0IHZpZGVvVXJsID0gZ2V0UGFyYW1ldGVyQnlOYW1lKHRoaXMuc3JjLCBgdmlkZW9gKTtcblxuICAgIC8vY2hlY2sgZm9yIGV4dHJhIGNvbmZpZyBpbiB0aGUgZmlsZW5hbWVcbiAgICBsZXQgbG9vcCA9IGZhbHNlO1xuICAgIGxldCBtdXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0IHZpZGVvVXJsU3BsaXR0ZWQgPSB2aWRlb1VybC5zcGxpdChgLmApO1xuICAgIHZpZGVvVXJsU3BsaXR0ZWQuZm9yRWFjaChwYXJ0ID0+IHtcbiAgICAgIGlmKHBhcnQgPT09IGBsb29wYCkge1xuICAgICAgICBsb29wID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmKHBhcnQgPT09IGBtdXRlZGApIHtcbiAgICAgICAgbXV0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlbyA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYHZpZGVvYClbMF07XG4gICAgaWYobG9vcCkge1xuICAgICAgJCh0aGlzLnZpZGVvKS5hdHRyKGBsb29wYCwgYGxvb3BgKTtcbiAgICB9XG4gICAgaWYobXV0ZWQpIHtcbiAgICAgICQodGhpcy52aWRlbykuYXR0cihgbXV0ZWRgLCBgbXV0ZWRgKTtcbiAgICB9XG4gICAgJCh0aGlzLnZpZGVvKS5hdHRyKGBzcmNgLCB2aWRlb1VybCk7XG4gICAgdGhpcy5fY2xpY2tIYW5kbGVyID0gdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAkKHRoaXMudmlkZW8pLm9uKGBjbGlja2AsIHRoaXMuX2NsaWNrSGFuZGxlcik7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAkKHRoaXMudmlkZW8pLm9mZihgY2xpY2tgLCB0aGlzLl9jbGlja0hhbmRsZXIpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5zZXRWaWRlb1BsYXlpbmcodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0VmlkZW9QbGF5aW5nKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBjbGlja0hhbmRsZXIoZXZlbnQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHRoaXMudG9nZ2xlVmlkZW9QbGF5aW5nKCk7XG4gIH1cblxuICBzZXRWaWRlb1BsYXlpbmcodmFsdWUpIHtcbiAgICBpZih2YWx1ZSAhPT0gdGhpcy52aWRlb1BsYXlpbmcpIHtcbiAgICAgIHRoaXMudmlkZW9QbGF5aW5nID0gdmFsdWU7XG4gICAgICBpZih0aGlzLnZpZGVvUGxheWluZykge1xuICAgICAgICB0aGlzLnZpZGVvLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmlkZW8ucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b2dnbGVWaWRlb1BsYXlpbmcoKSB7XG4gICAgdGhpcy5zZXRWaWRlb1BsYXlpbmcoIXRoaXMudmlkZW9QbGF5aW5nKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJ2aWV3U2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMud2Vidmlld011dGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLndlYnZpZXcgPSB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGB3ZWJ2aWV3YClbMF07XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgfVxuXG4gIHJlbG9hZCgpIHtcbiAgICB0aGlzLndlYnZpZXcucmVsb2FkKCk7XG4gIH1cblxuICBvcGVuRGV2VG9vbHMoKSB7XG4gICAgdGhpcy53ZWJ2aWV3Lm9wZW5EZXZUb29scygpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5zZXRXZWJ2aWV3TXV0ZWQoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFdlYnZpZXdNdXRlZCh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBzZXRXZWJ2aWV3TXV0ZWQodmFsdWUpIHtcbiAgICBpZih2YWx1ZSAhPT0gdGhpcy53ZWJ2aWV3TXV0ZWQpIHtcbiAgICAgIHRoaXMud2Vidmlld011dGVkID0gdmFsdWU7XG4gICAgICBpZiAoIXRoaXMud2Vidmlldykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZih0aGlzLndlYnZpZXdNdXRlZCkge1xuICAgICAgICB0aGlzLndlYnZpZXcuc2V0QXVkaW9NdXRlZCh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2Vidmlldy5zZXRBdWRpb011dGVkKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuIl19"}