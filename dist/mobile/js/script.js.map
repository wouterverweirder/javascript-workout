{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/whatwg-fetch/fetch.js","src/mobile/js/classes/Presentation.js","src/mobile/js/script.js","src/shared/js/Constants.js","src/shared/js/classes/ContentBase.js","src/shared/js/classes/MobileServerBridge.js","src/shared/js/classes/Presentation.js","src/shared/js/classes/SlideBridge.js","src/mobile/js/classes/react-phones-slide/index.js","src/mobile/js/classes/shake-your-phones-slide/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7cA;;AACA;;;;AACA;;;;;;;;;;;;IAEqB,Y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","file":"script.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import {Constants} from '../../../shared/js/Constants';\nimport PresentationBase from '../../../shared/js/classes/Presentation';\nimport MobileServerBridge from '../../../shared/js/classes/MobileServerBridge';\n\nexport default class Presentation extends PresentationBase{\n\n  constructor(data, role, settings) {\n    super(data, role, settings);\n    this.$overlay = $(`#overlay`);\n  }\n\n  createMobileServerBridge() {\n    return new MobileServerBridge(this, this.settings);\n  }\n\n  handleMobileServerMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === `setCurrentSlideIndex`) {\n      this.setCurrentSlideIndex(message.content.currentSlideIndex);\n    } else if(message.content.action === Constants.BLINK) {\n      this.blink(message.content.text, message.content.backgroundColor);\n    }\n  }\n\n  setCurrentSlideIndex(index) {\n    super.setCurrentSlideIndex(index);\n    if(this.$overlay) {\n      this.$overlay.removeClass(`active`);\n    }\n    if(this.blinkInterval) {\n      clearInterval(this.blinkInterval);\n    }\n  }\n\n  blink(text, backgroundColor) {\n    //overlay important, blinking text\n    this.$overlay.find(`.content`).html(text);\n    this.$overlay.addClass(`active`);\n    if(this.blinkInterval) {\n      clearInterval(this.blinkInterval);\n    }\n    this.blinkInterval = setInterval(this.blinkToggle.bind(this, backgroundColor), 500);\n  }\n\n  blinkToggle(backgroundColor) {\n    this.$overlay.toggleClass(`blink-on`);\n    if(this.$overlay.hasClass(`blink-on`)) {\n      this.$overlay.css(`background-color`, backgroundColor);\n    } else {\n      this.$overlay.css(`background-color`, ``);\n    }\n  }\n\n}\n","import Presentation from './classes/Presentation';\nimport fetch from 'isomorphic-fetch';\n\n(() => {\n\n  const init = () => {\n    const settings = {\n      presentationPath: `/`,\n      mobileServerUrl: ``\n    };\n    //get slides by xmlhttprequest\n    fetch(`/data.json?t=${  Date.now()}`)\n      .then(data => data.json())\n      .then(data => {\n        new Presentation(data, `mobile`, settings);\n      });\n  };\n\n  init();\n})();\n","export const Constants = {\n  GO_TO_PREVIOUS_SLIDE: `goToPreviousSlide`,\n  GO_TO_NEXT_SLIDE: `goToNextSlide`,\n  SET_SLIDES: `setSlides`,\n  SET_CURRENT_SLIDE_INDEX: `setCurrentSlideIndex`,\n\n  MESSAGE: `message`,\n  SOCKET_SEND: `socketSend`,\n  SOCKET_RECEIVE: `socketReceive`,\n  JOIN_SLIDE_ROOM: `joinSlideRoom`,\n  LEAVE_SLIDE_ROOM: `leaveSlideRoom`,\n\n  ROLE_PRESENTATION: `presentation`,\n  ROLE_MOBILE: `mobile`,\n\n  STATE_ACTIVE: `active`,\n  STATE_INACTIVE: `inactive`,\n\n  SET_SUBSTATE: `setSubstate`,\n\n  CHILD_APP_SAVE_CODE: `childAppSaveCode`,\n  CHILD_APP_RUN_CODE: `childAppRunCode`,\n  CHILD_APP_STDOUT_DATA: `childAppStdoutData`,\n  CHILD_APP_STDERR_DATA: `childAppStderrData`,\n\n  OPEN_COMMAND_LINE: `openCommandLine`,\n  OPEN_CAMERA: `openCamera`,\n\n  BLINK: `blink`,\n\n  HEART_RATE_POLAR: `heartRatePolar`,\n\n  SET_TEAM: `setTeam`,\n  UPDATE_MOTION: `updateMotion`,\n\n  YOU_WIN: `youWin`,\n  YOU_LOSE: `youLose`,\n\n  SHAKE_YOUR_PHONES_INTRO: `shakeYourPhonesIntro`,\n  SHAKE_YOUR_PHONES_GAME: `shakeYourPhonesGame`,\n  SHAKE_YOUR_PHONES_FINISHED: `shakeYourPhonesFinished`,\n\n  SHAKE_YOUR_PHONES_CLIENT_ADDED: `shakeYourPhonesClientAdded`,\n  SHAKE_YOUR_PHONES_CLIENT_REMOVED: `shakeYourPhonesClientRemoved`,\n  SHAKE_YOUR_PHONES_CLIENT_LIST: `shakeYourPhonesClientList`,\n  SHAKE_YOUR_PHONES_CLIENT_UPDATE: `shakeYourPhonesClientUpdate`,\n\n  HIGHEST_HEARTRATE_GAME_INTRO: `highestHeartrateGameIntro`,\n  HIGHEST_HEARTRATE_GAME_GAME: `highestHeartrateGameGame`,\n  HIGHEST_HEARTRATE_GAME_FINISHED: `highestHeartrateGameFinished`,\n\n  LOWEST_HEARTRATE_GAME_INTRO: `lowestHeartrateGameIntro`,\n  LOWEST_HEARTRATE_GAME_GAME: `lowestHeartrateGameGame`,\n  LOWEST_HEARTRATE_GAME_FINISHED: `lowestHeartrateGameFinished`,\n\n  UPDATE_REACTION_SPEED: `updateReactionSpeed`,\n\n  REACT_PHONES_INTRO: `reactPhonesIntro`,\n  REACT_PHONES_GAME: `reactPhonesGame`,\n  REACT_PHONES_FINISHED: `reactPhonesFinished`,\n\n  DANCE_PAD_GAME_INTRO: `dancePadGameIntro`,\n  DANCE_PAD_GAME_GAME: `dancePadGameGame`,\n  DANCE_PAD_GAME_FINISHED: `dancePadGameFinished`,\n};\n","import {Constants} from '../Constants';\n\nexport default class ContentBase{\n\n  constructor($slideHolder) {\n    this.$slideHolder = $slideHolder;\n    this.slideHolder = this.$slideHolder[0];\n    this.width = this.slideHolder.offsetWidth;\n    this.height = this.slideHolder.offsetHeight;\n    this.prevWidth = this.width;\n    this.prevHeight = this.height;\n    this.widthChanged = false;\n    this.heightChanged = false;\n    this.sizeChanged = false;\n    this.src = $slideHolder.attr(`data-src`);\n    this.name = $slideHolder.attr(`data-name`);\n    this.settings = {};\n    try {\n      this.settings = JSON.parse($(`#presentation`).attr(`data-presentation-settings`));\n    } catch (e) {\n      console.error(e);\n    }\n    this.fps = 60;\n    this._animationFrameId = false;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._interval = false;\n    this._lastTime = new Date().getTime();\n    this.currentFrame = 0;\n\n    this.startListeningForMessages();\n\n    this.__drawLoop = this._drawLoop.bind(this);\n    this._interval = 1000 / this.fps;\n\n    window.requestAnimationFrame(() => {\n      $slideHolder.trigger(`load`);\n    });\n  }\n\n  startListeningForMessages() {\n    this._slideHolderMessageToSlideHandler = this.slideHolderMessageToSlideHandler.bind(this);\n    this.$slideHolder.on(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  stopListeningForMessages() {\n    this.$slideHolder.off(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  slideHolderMessageToSlideHandler(event, message) {\n    this.receiveMessage({data: message});\n  }\n\n  receiveMessage(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case `setState`:\n      this.setState(event.data.state);\n      break;\n    case `destroy`:\n      this.destroy();\n      break;\n    case Constants.SOCKET_RECEIVE:\n      this.receiveSocketMessage(event.data.message);\n      break;\n    default:\n      this.handleMessage(event.data);\n      break;\n    }\n  }\n\n  destroy() {\n    this.stopListeningForMessages();\n    window.cancelAnimationFrame(this._animationFrameId);\n  }\n\n  postMessage(data) {\n    this.$slideHolder.trigger(`message-from-slide`, data);\n  }\n\n  handleMessage(data) { // eslint-disable-line no-unused-vars\n  }\n\n  postSocketMessage(message) {\n    this.postMessage({\n      action: Constants.SOCKET_SEND,\n      message: message\n    });\n  }\n\n  receiveSocketMessage(message) { // eslint-disable-line no-unused-vars\n  }\n\n  setState(state) {\n    if(state !== this.state) {\n      this.state = state;\n      this.onStateChanged();\n      if(this.state === Constants.STATE_ACTIVE) {\n        this.currentFrame = 0;\n        this._drawLoop();\n      } else {\n        window.cancelAnimationFrame(this._animationFrameId);\n      }\n    }\n  }\n\n  onStateChanged() {\n  }\n\n  _drawLoop() {\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n    this._currentTime = (new Date()).getTime();\n    this._delta = (this._currentTime - this._lastTime);\n    if(this._delta > this._interval) {\n      this.currentFrame++;\n      this.prevWidth = this.width;\n      this.prevHeight = this.height;\n      this.width = this.slideHolder.offsetWidth;\n      this.height = this.slideHolder.offsetHeight;\n      this.widthChanged = (this.width !== this.prevWidth);\n      this.heightChanged = (this.height !== this.prevHeight);\n      this.sizeChanged = (this.widthChanged || this.heightChanged);\n      this.drawLoop(this._delta);\n      this._lastTime = this._currentTime - (this._delta % this._interval);\n    }\n  }\n\n  drawLoop(delta) { // eslint-disable-line no-unused-vars\n  }\n\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class MobileServerBridge {\n\n  constructor(presentation, settings) {\n    this.presentation = presentation;\n    this.settings = settings;\n    this.connect();\n  }\n\n  connect() {\n    if (!this.settings.mobileServerUrl) {\n      return;\n    }\n    console.log(`MobileServerBridge.connect`);\n    //console.warn('MobileServerBridge disabled');\n    //return;\n    //post to the api\n    fetch(`${this.settings.mobileServerUrl}/login`, {\n      method: `POST`,\n      body: JSON.stringify(this.getLoginCredentials()),\n      headers: new Headers({'Content-Type': `application/json`})\n    })\n    .then(response => response.json())\n    .then(result => this.loginHandler(result))\n    .catch(e => {\n      console.error(e);\n      setTimeout(() => this.connect(), 1000);\n    });\n  }\n\n  getLoginCredentials() {\n    return {\n      email: this.settings.mobileServerUsername,\n      password: this.settings.mobileServerPassword,\n    };\n  }\n\n  loginHandler(result) {\n    this.token = result.token;\n    this.socket = io(this.settings.mobileServerUrl, {\n      query: `token=${  this.token}`,\n      reconnection: false,\n      forceNew: true\n    });\n    this.socket.on(`connect`, this.socketConnectHandler.bind(this));\n    this.socket.on(`disconnect`, this.socketDisconnectHandler.bind(this));\n    this.socket.on(`message`, this.socketMessageHandler.bind(this));\n  }\n\n  socketConnectHandler() {\n    console.log(`MobileServerBridge.socketConnectHandler`);\n    this.presentation.mobileServerBridgeConnected();\n  }\n\n  socketDisconnectHandler() {\n    this.connect();\n  }\n\n  tryToSend() {\n    if(this.socket) {\n      this.socket.emit.apply(this.socket, arguments);\n    }\n  }\n\n  socketMessageHandler(message) {\n    this.presentation.mobileServerMessageHandler(message);\n  }\n}\n","import {Constants} from '../Constants';\nimport SlideBridge from './SlideBridge';\n\nexport default class Presentation {\n  /*\n   * data: json object with slides array property\n   * role: mobile or presentation\n   */\n  constructor(data, role, settings) {\n    this.data = data;\n    this.role = role;\n    this.settings = settings;\n    $(`#presentation`).attr(`data-presentation-settings`, JSON.stringify(settings));\n    this.currentSlideIndex = -1;\n    this.slideHolders = [];\n    this.numSlideHolders = 3;\n    this.slideBridges = [];\n    this.slideBridgesBySlideName = {};\n\n    this.createSlideHolders();\n    this.createSlideBridges(this.data);\n\n    this.mobileServerBridge = this.createMobileServerBridge();\n    this.startListeningForMessages();\n\n    this.setCurrentSlideIndex(0);\n  }\n\n  startListeningForMessages() {\n    window.addEventListener(`message`, this.slideMessageHandler.bind(this), false);\n  }\n\n  createSlideHolders() {\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      const $slideHolder = $(`<div class=\"slide-frame\" />`);\n      this.slideHolders.push($slideHolder);\n      $(`#presentation`).append($slideHolder);\n    }\n  }\n\n  createSlideBridges(data) {\n    const numSlides = data.slides.length;\n    for(let i = 0; i < numSlides; i++) {\n      const slideBridge = this.createSlideBridge(data.slides[i]);\n      this.slideBridges.push(slideBridge);\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\n    }\n  }\n\n  createSlideBridge(slide) {\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.SOCKET_SEND:\n      if(this.mobileServerBridge) {\n        this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n      }\n      break;\n    }\n  }\n\n  mobileServerBridgeConnected() {\n    //join the rooms of the slideHolders\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr(`data-name`));\n    }\n  }\n\n  mobileServerMessageHandler(message) {\n    if(message.target.slide) {\n      //slide has to handle the message\n      const slideBridge = this.getSlideBridgeByName(message.target.slide);\n      if(slideBridge) {\n        slideBridge.tryToPostMessage({\n          action: Constants.SOCKET_RECEIVE,\n          message: message\n        });\n      }\n    } else {\n      //presentation has to handle the message\n      this.handleMobileServerMessage(message);\n    }\n  }\n\n  handleMobileServerMessage(message) {\n    console.log(`[shared/Presentation] handleMobileServerMessage`, message);\n  }\n\n  getSlideBridgeByIndex(index) {\n    if(index >= 0 && index < this.slideBridges.length) {\n      return this.slideBridges[index];\n    }\n    return false;\n  }\n\n  getSlideBridgeByName(slideName) {\n    return this.slideBridgesBySlideName[slideName];\n  }\n\n  getSlideHolderForSlide(slide, slidesNotToClear) {\n    if(slide) {\n      let $slideHolder = $(`.slide-frame[data-name=\"${  slide.name  }\"]`);\n      if($slideHolder.length > 0) {\n        return $slideHolder[0];\n      }\n      //get a free slideHolder\n      const slideNamesNotToClear = [];\n      $(slidesNotToClear).each(function(index, obj){\n        slideNamesNotToClear.push(obj.name);\n      });\n      const $slideHolders = $(`.slide-frame`);\n      for (let i = $slideHolders.length - 1; i >= 0; i--) {\n        $slideHolder = $($slideHolders[i]);\n        const name = $slideHolder.attr(`data-name`);\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\n          return $slideHolder[0];\n        }\n      }\n    }\n    return false;\n  }\n\n  goToPreviousSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\n  }\n\n  goToNextSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\n  }\n\n  setCurrentSlideIndex(value) {\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\n    if(value !== this.currentSlideIndex) {\n      this.currentSlideIndex = value;\n\n      const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n      const previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\n      const nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\n\n      //remove \"used\" class from slide holders\n      $(`.slide-frame`).removeAttr(`data-used`, false);\n\n      const currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\n\n      const previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, `-100%`);\n\n      const nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, `100%`);\n\n      //clear attributes of unused slide frames\n      $(`.slide-frame`).each(function(index, slideHolder){\n        if(!$(slideHolder).attr(`data-used`)) {\n          $(slideHolder).removeAttr(`data-used`).removeAttr(`data-name`).removeAttr(`data-src`);\n        }\n      });\n\n      //all other slideHolder bridges should be unlinked from their slideHolder\n      this.slideBridges.forEach(function(slideBridge){\n        if(slideBridge === currentSlideBridge) {\n          return;\n        }\n        if(slideBridge === previousSlideBridge) {\n          return;\n        }\n        if(slideBridge === nextSlideBridge) {\n          return;\n        }\n        slideBridge.slideHolder = null;\n      });\n\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n    }\n  }\n\n  setupSlideHolder(slideHolder, slideBridge, state, left) {\n    if(slideHolder) {\n      let src = `slides/${  slideBridge.name  }.html`;\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\n        src = slideBridge.data[this.role].url;\n      }\n      src = this.processSlideSrc(src);\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\n        //console.log(slideBridge.name + ' already attached');\n      } else {\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\n      }\n      slideBridge.setState(state);\n      $(slideHolder).css(`left`, left);\n      $(slideHolder).attr(`data-used`, 1);\n    }\n  }\n\n  attachToSlideHolder(slideHolder, slideBridge, src) {\n    //listen for events on this slideHolder\n    $(slideHolder).off(`message-from-slide`);\n    $(slideHolder).on(`message-from-slide`, (event, message) =>  {\n      this.slideMessageHandler({data: message});\n    });\n    //leave previous channel of this slideHolder\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n    //add the join as a callback for the onload event\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\n  }\n\n  slideLoaded(slideHolder, slideBridge) { // eslint-disable-line no-unused-vars\n    //join new channel\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n  }\n\n  processSlideSrc(src) {\n    return src;\n  }\n\n  createMobileServerBridge() {\n    //to implement in extending classes\n  }\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class SlideBridge {\n  constructor(data) {\n    this.data = data;\n    this.name = this.data.name;\n  }\n\n  isAlreadyCorrectlyAttached(slideHolder, src) {\n    return (this.slideHolder === slideHolder && $(slideHolder).attr(`data-name`) === this.name && $(slideHolder).attr(`data-src`) === src);\n  }\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if(src !== $(slideHolder).attr(`data-src`)) {\n      //fetch the html\n      fetch(src)\n        .then(result => result.text())\n        .then(result => $(result))\n        .then($result => {\n          $(slideHolder).html($result.html());\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        })\n        .catch(err => {\n          console.error(err);\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        });\n      $(slideHolder).attr(`data-src`, src);\n    }\n  }\n\n  tryToPostMessage(message) {\n    if(!this.slideHolder)\n    {\n      console.log(`${this.name  } post fail`);\n      return;\n    }\n    //trigger with jquery\n    $(this.slideHolder).trigger(`message-to-slide`, message);\n  }\n\n  setState(state) {\n    this.state = state;\n    this.tryToPostMessage({\n      action: `setState`,\n      state: this.state\n    });\n  }\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class ReactPhonesSlide extends ContentBase{\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.totalReactionSpeed = 0;\n    this.numReactionSpeeds = 0;\n    this.numCorrectAnswers = 1;\n    this.averageReactionSpeed = 9999999;\n    this.visiblePosition = 0;\n    this.targetPosition = 0;\n    this.lastAnswerTime = new Date();\n    this.positions = [];\n\n    this.$game = this.$slideHolder.find(`.game`);\n    this.$slidesContainer = this.$slideHolder.find(`.react-phones-slides-container`);\n    this.$slide1 = this.$slideHolder.find(`.react-phones-slide-1`);\n    this.$slide1text = this.$slideHolder.find(`.react-phones-slide-1 .react-phones-slide-text`);\n    this.$slide2 = this.$slideHolder.find(`.react-phones-slide-2`);\n    this.$slide2text = this.$slideHolder.find(`.react-phones-slide-2 .react-phones-slide-text`);\n\n    this.$slideHolder.find(`.touchbutton`).on(`touchstart`, $.proxy(this.onButtonTouchStart, this));\n    this.$slideHolder.find(`.touchbutton`).on(`touchend`, $.proxy(this.onButtonTouchEnd, this));\n\n    this.$slideHolder.find(`.touchbutton`).on(`mousedown`, $.proxy(this.onButtonTouchStart, this));\n    this.$slideHolder.find(`.touchbutton`).on(`mouseup`, $.proxy(this.onButtonTouchEnd, this));\n\n    this.resetGame();\n  }\n\n  onButtonTouchStart(e) {\n    e.preventDefault();\n    $(e.currentTarget).addClass(`down`);\n    this.selectAnswer($(e.currentTarget).text());\n  }\n\n  onButtonTouchEnd(e) {\n    e.preventDefault();\n    $(e.currentTarget).removeClass(`down`);\n  }\n\n  selectAnswer(answer) {\n    const now = new Date();\n    const time = now.getTime() - this.lastAnswerTime.getTime();\n    this.totalReactionSpeed += time;\n    if(answer.toLowerCase() === this.positions[this.targetPosition].colorString.toLowerCase()) {\n\t\t\t//correct answer\n      this.numCorrectAnswers++;\n    } else {\n\t\t\t//penalty time\n      this.totalReactionSpeed += 1000;\n    }\n    this.numReactionSpeeds++;\n    this.lastAnswerTime = now;\n    this.targetPosition++;\n    this.fillPositionsWhenNeeded();\n\t\t//send to server\n    this.postSocketMessage({\n      target: {\n        client: `presentation`,\n        slide: this.name\n      },\n      content: {\n        action: Constants.UPDATE_REACTION_SPEED,\n        reactionSpeed: this.totalReactionSpeed / this.numCorrectAnswers\n      }\n    });\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find(`.substate`).removeClass(`active`);\n    this.$game.css({\n      'z-index': -1,\n      opacity: 0.3,\n      'pointer-events': `none`\n    });\n    if(this.substate === Constants.REACT_PHONES_GAME) {\n      this.$slideHolder.find(`.substate-game`).addClass(`active`);\n      this.$game.css({\n        'z-index': 10,\n        opacity: 1,\n        'pointer-events': `auto`\n      });\n    } else if(this.substate === Constants.REACT_PHONES_FINISHED) {\n      this.$slideHolder.find(`.substate-finished`).addClass(`active`);\n    } else {\n      this.$slideHolder.find(`.substate-intro`).addClass(`active`);\n    }\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.resetGame();\n    }\n  }\n\n  resetGame() {\n    this.lastAnswerTime = new Date();\n    this.totalReactionSpeed = 0;\n    this.numReactionSpeeds = 0;\n    this.numCorrectAnswers = 1;\n    this.averageReactionSpeed = 9999999;\n    this.visiblePosition = 0;\n    this.targetPosition = 0;\n    this.positions = [];\n    this.fillPositionsWhenNeeded();\n  }\n\n  fillPositionsWhenNeeded() {\n    const numPositionsToAdd = this.numReactionSpeeds + 2 - this.positions.length;\n    for(let i = 0; i < numPositionsToAdd; i++) {\n      const position = {\n        colorString: (Math.random() > 0.5) ? `red` : `blue`,\n        bgcolor: (Math.random() > 0.5) ? `#c6363d` : `#0684AF`\n      };\n      if(position.colorString === `red`) {\n        position.color = `#c6363d`;\n      } else {\n        position.color = `#0684AF`;\n      }\n      this.positions.push(position);\n    }\n  }\n\n  drawLoop() {\n    this.visiblePosition += (this.targetPosition - this.visiblePosition) * 0.1;\n    if(this.visiblePosition % 1 > 0.995) {\n      this.visiblePosition = Math.round(this.visiblePosition);\n    }\n    this.$slidesContainer.css(`left`, `${this.visiblePosition * -100  }%`);\n\n    const flooredVisiblePosition = Math.floor(this.visiblePosition);\n    if(flooredVisiblePosition % 2 === 0) {\n      this.$slide1.css({\n        left: `${flooredVisiblePosition * 100  }%`,\n        'background-color': this.positions[flooredVisiblePosition].bgcolor\n      });\n      this.$slide2.css({\n        left: `${flooredVisiblePosition * 100 + 100  }%`,\n        'background-color': this.positions[flooredVisiblePosition + 1].bgcolor\n      });\n\n      this.$slide1text.text(this.positions[flooredVisiblePosition].colorString);\n      this.$slide2text.text(this.positions[flooredVisiblePosition + 1].colorString);\n    } else {\n      this.$slide2.css({\n        left: `${flooredVisiblePosition * 100  }%`,\n        'background-color': this.positions[flooredVisiblePosition].bgcolor\n      });\n      this.$slide1.css({\n        left: `${flooredVisiblePosition * 100 + 100  }%`,\n        'background-color': this.positions[flooredVisiblePosition + 1].bgcolor\n      });\n\n      this.$slide2text.text(this.positions[flooredVisiblePosition].colorString);\n      this.$slide1text.text(this.positions[flooredVisiblePosition + 1].colorString);\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === Constants.SET_SUBSTATE) {\n      this.setSubstate(message.content.substate);\n    }\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      this.showCurrentState();\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class ShakeYourPhonesSlide extends ContentBase{\n\n  constructor($slideHolder) {\n    super($slideHolder);\n    this.currentMotion = 0;\n    this.motion = 0;\n\n    this.$slideHolder.find(`.slide`).css(`background-color`, `#c6363d`);\n\n    this.$background = this.$slideHolder.find(`.background`);\n    this.$background.css(`top`, `100%`);\n    this.$background.css(`background-color`, `rgba(255, 255, 255, 0.5)`);\n\n    this._motionUpdateHandler = this.motionUpdateHandler.bind(this);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      if (window.DeviceMotionEvent) {\n        window.addEventListener(`devicemotion`, this._motionUpdateHandler, false);\n      } else {\n        this.$slideHolder.find(`.acceleration`).text(`Not supported on your device :-(`);\n      }\n    } else {\n      window.removeEventListener(`devicemotion`, this._motionUpdateHandler);\n    }\n  }\n\n  receiveSocketMessage(message) {\n    if(!message.content) {\n      return;\n    }\n    if(message.content.action === Constants.SET_SUBSTATE) {\n      this.setSubstate(message.content.substate);\n    }\n    // if(message.content.action === Constants.YOU_WIN) {\n    //   this.$slideHolder.find('.substate-finished h1').text('Your Team Won!');\n    // }\n    // if(message.content.action === Constants.YOU_LOSE) {\n    //   this.$slideHolder.find('.substate-finished h1').text('Your Team Lost...');\n    // }\n  }\n\n  setSubstate(substate) {\n    if(this.substate !== substate) {\n      this.substate = substate;\n      this.showCurrentState();\n    }\n  }\n\n  motionUpdateHandler(event) {\n    this.currentMotion = event.interval * (Math.abs(event.acceleration.x) + Math.abs(event.acceleration.y) + Math.abs(event.acceleration.z));\n  }\n\n  drawLoop() {\n    this.motion += this.currentMotion;\n    this.motion *= 0.97;\n    this.$background.css(`top`, `${100 - this.motion  }%`);\n    if(this.currentFrame % 10 === 0) {\n      this.postSocketMessage({\n        target: {\n          client: `presentation`,\n          slide: this.name\n        },\n        content: {\n          action: Constants.UPDATE_MOTION,\n          motion: this.motion\n        }\n      });\n    }\n  }\n\n  showCurrentState() {\n    this.$slideHolder.find(`.substate`).removeClass(`active`);\n    if(this.substate === Constants.SHAKE_YOUR_PHONES_GAME) {\n      this.$slideHolder.find(`.substate-game`).addClass(`active`);\n    } else if(this.substate === Constants.SHAKE_YOUR_PHONES_FINISHED) {\n      this.$slideHolder.find(`.substate-finished`).addClass(`active`);\n    } else {\n      this.$slideHolder.find(`.substate-intro`).addClass(`active`);\n    }\n  }\n\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaXNvbW9ycGhpYy1mZXRjaC9mZXRjaC1ucG0tYnJvd3NlcmlmeS5qcyIsIm5vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJzcmMvbW9iaWxlL2pzL2NsYXNzZXMvUHJlc2VudGF0aW9uLmpzIiwic3JjL21vYmlsZS9qcy9zY3JpcHQuanMiLCJzcmMvc2hhcmVkL2pzL0NvbnN0YW50cy5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZS5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9Nb2JpbGVTZXJ2ZXJCcmlkZ2UuanMiLCJzcmMvc2hhcmVkL2pzL2NsYXNzZXMvUHJlc2VudGF0aW9uLmpzIiwic3JjL3NoYXJlZC9qcy9jbGFzc2VzL1NsaWRlQnJpZGdlLmpzIiwic3JjL21vYmlsZS9qcy9jbGFzc2VzL3JlYWN0LXBob25lcy1zbGlkZS9pbmRleC5qcyIsInNyYy9tb2JpbGUvanMvY2xhc3Nlcy9zaGFrZS15b3VyLXBob25lcy1zbGlkZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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YUFBSyxZQUFMLENBQWtCLElBQWxCLG9CQUEwQyxRQUExQztBQUNEO0FBQ0Y7Ozs7OztrQkFqRmtCLG9CIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIHRoZSB3aGF0d2ctZmV0Y2ggcG9seWZpbGwgaW5zdGFsbHMgdGhlIGZldGNoKCkgZnVuY3Rpb25cbi8vIG9uIHRoZSBnbG9iYWwgb2JqZWN0ICh3aW5kb3cgb3Igc2VsZilcbi8vXG4vLyBSZXR1cm4gdGhhdCBhcyB0aGUgZXhwb3J0IGZvciB1c2UgaW4gV2VicGFjaywgQnJvd3NlcmlmeSBldGMuXG5yZXF1aXJlKCd3aGF0d2ctZmV0Y2gnKTtcbm1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaC5iaW5kKHNlbGYpO1xuIiwiKGZ1bmN0aW9uKHNlbGYpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGlmIChzZWxmLmZldGNoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IEJsb2IoKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcbiAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG4gIH1cblxuICBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlcikge1xuICAgIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAgICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICAgIF1cblxuICAgIHZhciBpc0RhdGFWaWV3ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIERhdGFWaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG9iailcbiAgICB9XG5cbiAgICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPSBBcnJheUJ1ZmZlci5pc1ZpZXcgfHwgZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHZpZXdDbGFzc2VzLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikpID4gLTFcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuICBmdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpdGVyYXRvclxuICB9XG5cbiAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgdGhpcy5tYXAgPSB7fVxuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgICB9LCB0aGlzKVxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShoZWFkZXJzKSkge1xuICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgICB0aGlzLmFwcGVuZChoZWFkZXJbMF0sIGhlYWRlclsxXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gICAgdmFyIG9sZFZhbHVlID0gdGhpcy5tYXBbbmFtZV1cbiAgICB0aGlzLm1hcFtuYW1lXSA9IG9sZFZhbHVlID8gb2xkVmFsdWUrJywnK3ZhbHVlIDogdmFsdWVcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHJldHVybiB0aGlzLmhhcyhuYW1lKSA/IHRoaXMubWFwW25hbWVdIDogbnVsbFxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLm1hcCkge1xuICAgICAgaWYgKHRoaXMubWFwLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpcy5tYXBbbmFtZV0sIG5hbWUsIHRoaXMpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2gobmFtZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkgeyBpdGVtcy5wdXNoKHZhbHVlKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllc1xuICB9XG5cbiAgZnVuY3Rpb24gY29uc3VtZWQoYm9keSkge1xuICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJykpXG4gICAgfVxuICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG4gICAgICB9XG4gICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyQXNUZXh0KGJ1Zikge1xuICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKVxuICAgIHZhciBjaGFycyA9IG5ldyBBcnJheSh2aWV3Lmxlbmd0aClcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgY2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pXG4gICAgfVxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKVxuICB9XG5cbiAgZnVuY3Rpb24gYnVmZmVyQ2xvbmUoYnVmKSB7XG4gICAgaWYgKGJ1Zi5zbGljZSkge1xuICAgICAgcmV0dXJuIGJ1Zi5zbGljZSgwKVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zi5ieXRlTGVuZ3RoKVxuICAgICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSlcbiAgICAgIHJldHVybiB2aWV3LmJ1ZmZlclxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIHN1cHBvcnQuYmxvYiAmJiBpc0RhdGFWaWV3KGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkuYnVmZmVyKVxuICAgICAgICAvLyBJRSAxMC0xMSBjYW4ndCBoYW5kbGUgYSBEYXRhVmlldyBib2R5LlxuICAgICAgICB0aGlzLl9ib2R5SW5pdCA9IG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIChBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSB8fCBpc0FycmF5QnVmZmVyVmlldyhib2R5KSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgQm9keUluaXQgdHlwZScpXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICAgIHJldHVybiBjb25zdW1lZCh0aGlzKSB8fCBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVhZEFycmF5QnVmZmVyQXNUZXh0KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG4gICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxuICB2YXIgbWV0aG9kcyA9IFsnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUE9TVCcsICdQVVQnXVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXG4gICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG4gIH1cblxuICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuXG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgICB9XG4gICAgICB0aGlzLnVybCA9IGlucHV0LnVybFxuICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG4gICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKVxuICAgICAgfVxuICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2RcbiAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGVcbiAgICAgIGlmICghYm9keSAmJiBpbnB1dC5fYm9keUluaXQgIT0gbnVsbCkge1xuICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG4gICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVybCA9IFN0cmluZyhpbnB1dClcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuICB9XG5cbiAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcywgeyBib2R5OiB0aGlzLl9ib2R5SW5pdCB9KVxuICB9XG5cbiAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgYm9keS50cmltKCkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzKSB7XG4gICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBmb3JtXG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUhlYWRlcnMocmF3SGVhZGVycykge1xuICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKVxuICAgIHJhd0hlYWRlcnMuc3BsaXQoL1xccj9cXG4vKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKClcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBoZWFkZXJzXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbiAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIH1cblxuICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuICAgIHRoaXMuc3RhdHVzID0gJ3N0YXR1cycgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzIDogMjAwXG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuICAgIHRoaXMuc3RhdHVzVGV4dCA9ICdzdGF0dXNUZXh0JyBpbiBvcHRpb25zID8gb3B0aW9ucy5zdGF0dXNUZXh0IDogJ09LJ1xuICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG4gIH1cblxuICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH1cblxuICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIHZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH1cblxuICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG4gIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3RcbiAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlXG5cbiAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMudXJsID0gJ3Jlc3BvbnNlVVJMJyBpbiB4aHIgPyB4aHIucmVzcG9uc2VVUkwgOiBvcHRpb25zLmhlYWRlcnMuZ2V0KCdYLVJlcXVlc3QtVVJMJylcbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXG4gICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICB9KVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICAgIH0pXG4gIH1cbiAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBQcmVzZW50YXRpb25CYXNlIGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbic7XG5pbXBvcnQgTW9iaWxlU2VydmVyQnJpZGdlIGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL01vYmlsZVNlcnZlckJyaWRnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbnRhdGlvbiBleHRlbmRzIFByZXNlbnRhdGlvbkJhc2V7XG5cbiAgY29uc3RydWN0b3IoZGF0YSwgcm9sZSwgc2V0dGluZ3MpIHtcbiAgICBzdXBlcihkYXRhLCByb2xlLCBzZXR0aW5ncyk7XG4gICAgdGhpcy4kb3ZlcmxheSA9ICQoYCNvdmVybGF5YCk7XG4gIH1cblxuICBjcmVhdGVNb2JpbGVTZXJ2ZXJCcmlkZ2UoKSB7XG4gICAgcmV0dXJuIG5ldyBNb2JpbGVTZXJ2ZXJCcmlkZ2UodGhpcywgdGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICBoYW5kbGVNb2JpbGVTZXJ2ZXJNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZighbWVzc2FnZS5jb250ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IGBzZXRDdXJyZW50U2xpZGVJbmRleGApIHtcbiAgICAgIHRoaXMuc2V0Q3VycmVudFNsaWRlSW5kZXgobWVzc2FnZS5jb250ZW50LmN1cnJlbnRTbGlkZUluZGV4KTtcbiAgICB9IGVsc2UgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gQ29uc3RhbnRzLkJMSU5LKSB7XG4gICAgICB0aGlzLmJsaW5rKG1lc3NhZ2UuY29udGVudC50ZXh0LCBtZXNzYWdlLmNvbnRlbnQuYmFja2dyb3VuZENvbG9yKTtcbiAgICB9XG4gIH1cblxuICBzZXRDdXJyZW50U2xpZGVJbmRleChpbmRleCkge1xuICAgIHN1cGVyLnNldEN1cnJlbnRTbGlkZUluZGV4KGluZGV4KTtcbiAgICBpZih0aGlzLiRvdmVybGF5KSB7XG4gICAgICB0aGlzLiRvdmVybGF5LnJlbW92ZUNsYXNzKGBhY3RpdmVgKTtcbiAgICB9XG4gICAgaWYodGhpcy5ibGlua0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYmxpbmtJbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgYmxpbmsodGV4dCwgYmFja2dyb3VuZENvbG9yKSB7XG4gICAgLy9vdmVybGF5IGltcG9ydGFudCwgYmxpbmtpbmcgdGV4dFxuICAgIHRoaXMuJG92ZXJsYXkuZmluZChgLmNvbnRlbnRgKS5odG1sKHRleHQpO1xuICAgIHRoaXMuJG92ZXJsYXkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgIGlmKHRoaXMuYmxpbmtJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmJsaW5rSW50ZXJ2YWwpO1xuICAgIH1cbiAgICB0aGlzLmJsaW5rSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmJsaW5rVG9nZ2xlLmJpbmQodGhpcywgYmFja2dyb3VuZENvbG9yKSwgNTAwKTtcbiAgfVxuXG4gIGJsaW5rVG9nZ2xlKGJhY2tncm91bmRDb2xvcikge1xuICAgIHRoaXMuJG92ZXJsYXkudG9nZ2xlQ2xhc3MoYGJsaW5rLW9uYCk7XG4gICAgaWYodGhpcy4kb3ZlcmxheS5oYXNDbGFzcyhgYmxpbmstb25gKSkge1xuICAgICAgdGhpcy4kb3ZlcmxheS5jc3MoYGJhY2tncm91bmQtY29sb3JgLCBiYWNrZ3JvdW5kQ29sb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRvdmVybGF5LmNzcyhgYmFja2dyb3VuZC1jb2xvcmAsIGBgKTtcbiAgICB9XG4gIH1cblxufVxuIiwiaW1wb3J0IFByZXNlbnRhdGlvbiBmcm9tICcuL2NsYXNzZXMvUHJlc2VudGF0aW9uJztcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLWZldGNoJztcblxuKCgpID0+IHtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0ge1xuICAgICAgcHJlc2VudGF0aW9uUGF0aDogYC9gLFxuICAgICAgbW9iaWxlU2VydmVyVXJsOiBgYFxuICAgIH07XG4gICAgLy9nZXQgc2xpZGVzIGJ5IHhtbGh0dHByZXF1ZXN0XG4gICAgZmV0Y2goYC9kYXRhLmpzb24/dD0keyAgRGF0ZS5ub3coKX1gKVxuICAgICAgLnRoZW4oZGF0YSA9PiBkYXRhLmpzb24oKSlcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBuZXcgUHJlc2VudGF0aW9uKGRhdGEsIGBtb2JpbGVgLCBzZXR0aW5ncyk7XG4gICAgICB9KTtcbiAgfTtcblxuICBpbml0KCk7XG59KSgpO1xuIiwiZXhwb3J0IGNvbnN0IENvbnN0YW50cyA9IHtcbiAgR09fVE9fUFJFVklPVVNfU0xJREU6IGBnb1RvUHJldmlvdXNTbGlkZWAsXG4gIEdPX1RPX05FWFRfU0xJREU6IGBnb1RvTmV4dFNsaWRlYCxcbiAgU0VUX1NMSURFUzogYHNldFNsaWRlc2AsXG4gIFNFVF9DVVJSRU5UX1NMSURFX0lOREVYOiBgc2V0Q3VycmVudFNsaWRlSW5kZXhgLFxuXG4gIE1FU1NBR0U6IGBtZXNzYWdlYCxcbiAgU09DS0VUX1NFTkQ6IGBzb2NrZXRTZW5kYCxcbiAgU09DS0VUX1JFQ0VJVkU6IGBzb2NrZXRSZWNlaXZlYCxcbiAgSk9JTl9TTElERV9ST09NOiBgam9pblNsaWRlUm9vbWAsXG4gIExFQVZFX1NMSURFX1JPT006IGBsZWF2ZVNsaWRlUm9vbWAsXG5cbiAgUk9MRV9QUkVTRU5UQVRJT046IGBwcmVzZW50YXRpb25gLFxuICBST0xFX01PQklMRTogYG1vYmlsZWAsXG5cbiAgU1RBVEVfQUNUSVZFOiBgYWN0aXZlYCxcbiAgU1RBVEVfSU5BQ1RJVkU6IGBpbmFjdGl2ZWAsXG5cbiAgU0VUX1NVQlNUQVRFOiBgc2V0U3Vic3RhdGVgLFxuXG4gIENISUxEX0FQUF9TQVZFX0NPREU6IGBjaGlsZEFwcFNhdmVDb2RlYCxcbiAgQ0hJTERfQVBQX1JVTl9DT0RFOiBgY2hpbGRBcHBSdW5Db2RlYCxcbiAgQ0hJTERfQVBQX1NURE9VVF9EQVRBOiBgY2hpbGRBcHBTdGRvdXREYXRhYCxcbiAgQ0hJTERfQVBQX1NUREVSUl9EQVRBOiBgY2hpbGRBcHBTdGRlcnJEYXRhYCxcblxuICBPUEVOX0NPTU1BTkRfTElORTogYG9wZW5Db21tYW5kTGluZWAsXG4gIE9QRU5fQ0FNRVJBOiBgb3BlbkNhbWVyYWAsXG5cbiAgQkxJTks6IGBibGlua2AsXG5cbiAgSEVBUlRfUkFURV9QT0xBUjogYGhlYXJ0UmF0ZVBvbGFyYCxcblxuICBTRVRfVEVBTTogYHNldFRlYW1gLFxuICBVUERBVEVfTU9USU9OOiBgdXBkYXRlTW90aW9uYCxcblxuICBZT1VfV0lOOiBgeW91V2luYCxcbiAgWU9VX0xPU0U6IGB5b3VMb3NlYCxcblxuICBTSEFLRV9ZT1VSX1BIT05FU19JTlRSTzogYHNoYWtlWW91clBob25lc0ludHJvYCxcbiAgU0hBS0VfWU9VUl9QSE9ORVNfR0FNRTogYHNoYWtlWW91clBob25lc0dhbWVgLFxuICBTSEFLRV9ZT1VSX1BIT05FU19GSU5JU0hFRDogYHNoYWtlWW91clBob25lc0ZpbmlzaGVkYCxcblxuICBTSEFLRV9ZT1VSX1BIT05FU19DTElFTlRfQURERUQ6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRBZGRlZGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9SRU1PVkVEOiBgc2hha2VZb3VyUGhvbmVzQ2xpZW50UmVtb3ZlZGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9MSVNUOiBgc2hha2VZb3VyUGhvbmVzQ2xpZW50TGlzdGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9VUERBVEU6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRVcGRhdGVgLFxuXG4gIEhJR0hFU1RfSEVBUlRSQVRFX0dBTUVfSU5UUk86IGBoaWdoZXN0SGVhcnRyYXRlR2FtZUludHJvYCxcbiAgSElHSEVTVF9IRUFSVFJBVEVfR0FNRV9HQU1FOiBgaGlnaGVzdEhlYXJ0cmF0ZUdhbWVHYW1lYCxcbiAgSElHSEVTVF9IRUFSVFJBVEVfR0FNRV9GSU5JU0hFRDogYGhpZ2hlc3RIZWFydHJhdGVHYW1lRmluaXNoZWRgLFxuXG4gIExPV0VTVF9IRUFSVFJBVEVfR0FNRV9JTlRSTzogYGxvd2VzdEhlYXJ0cmF0ZUdhbWVJbnRyb2AsXG4gIExPV0VTVF9IRUFSVFJBVEVfR0FNRV9HQU1FOiBgbG93ZXN0SGVhcnRyYXRlR2FtZUdhbWVgLFxuICBMT1dFU1RfSEVBUlRSQVRFX0dBTUVfRklOSVNIRUQ6IGBsb3dlc3RIZWFydHJhdGVHYW1lRmluaXNoZWRgLFxuXG4gIFVQREFURV9SRUFDVElPTl9TUEVFRDogYHVwZGF0ZVJlYWN0aW9uU3BlZWRgLFxuXG4gIFJFQUNUX1BIT05FU19JTlRSTzogYHJlYWN0UGhvbmVzSW50cm9gLFxuICBSRUFDVF9QSE9ORVNfR0FNRTogYHJlYWN0UGhvbmVzR2FtZWAsXG4gIFJFQUNUX1BIT05FU19GSU5JU0hFRDogYHJlYWN0UGhvbmVzRmluaXNoZWRgLFxuXG4gIERBTkNFX1BBRF9HQU1FX0lOVFJPOiBgZGFuY2VQYWRHYW1lSW50cm9gLFxuICBEQU5DRV9QQURfR0FNRV9HQU1FOiBgZGFuY2VQYWRHYW1lR2FtZWAsXG4gIERBTkNFX1BBRF9HQU1FX0ZJTklTSEVEOiBgZGFuY2VQYWRHYW1lRmluaXNoZWRgLFxufTtcbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi9Db25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZW50QmFzZXtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlciA9ICRzbGlkZUhvbGRlcjtcbiAgICB0aGlzLnNsaWRlSG9sZGVyID0gdGhpcy4kc2xpZGVIb2xkZXJbMF07XG4gICAgdGhpcy53aWR0aCA9IHRoaXMuc2xpZGVIb2xkZXIub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLnNsaWRlSG9sZGVyLm9mZnNldEhlaWdodDtcbiAgICB0aGlzLnByZXZXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgdGhpcy53aWR0aENoYW5nZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhlaWdodENoYW5nZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNpemVDaGFuZ2VkID0gZmFsc2U7XG4gICAgdGhpcy5zcmMgPSAkc2xpZGVIb2xkZXIuYXR0cihgZGF0YS1zcmNgKTtcbiAgICB0aGlzLm5hbWUgPSAkc2xpZGVIb2xkZXIuYXR0cihgZGF0YS1uYW1lYCk7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHt9O1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnNldHRpbmdzID0gSlNPTi5wYXJzZSgkKGAjcHJlc2VudGF0aW9uYCkuYXR0cihgZGF0YS1wcmVzZW50YXRpb24tc2V0dGluZ3NgKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9XG4gICAgdGhpcy5mcHMgPSA2MDtcbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZUlkID0gZmFsc2U7XG4gICAgdGhpcy5fY3VycmVudFRpbWUgPSAwO1xuICAgIHRoaXMuX2RlbHRhID0gMDtcbiAgICB0aGlzLl9pbnRlcnZhbCA9IGZhbHNlO1xuICAgIHRoaXMuX2xhc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuXG4gICAgdGhpcy5zdGFydExpc3RlbmluZ0Zvck1lc3NhZ2VzKCk7XG5cbiAgICB0aGlzLl9fZHJhd0xvb3AgPSB0aGlzLl9kcmF3TG9vcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2ludGVydmFsID0gMTAwMCAvIHRoaXMuZnBzO1xuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAkc2xpZGVIb2xkZXIudHJpZ2dlcihgbG9hZGApO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhcnRMaXN0ZW5pbmdGb3JNZXNzYWdlcygpIHtcbiAgICB0aGlzLl9zbGlkZUhvbGRlck1lc3NhZ2VUb1NsaWRlSGFuZGxlciA9IHRoaXMuc2xpZGVIb2xkZXJNZXNzYWdlVG9TbGlkZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5vbihgbWVzc2FnZS10by1zbGlkZWAsIHRoaXMuX3NsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyKTtcbiAgfVxuXG4gIHN0b3BMaXN0ZW5pbmdGb3JNZXNzYWdlcygpIHtcbiAgICB0aGlzLiRzbGlkZUhvbGRlci5vZmYoYG1lc3NhZ2UtdG8tc2xpZGVgLCB0aGlzLl9zbGlkZUhvbGRlck1lc3NhZ2VUb1NsaWRlSGFuZGxlcik7XG4gIH1cblxuICBzbGlkZUhvbGRlck1lc3NhZ2VUb1NsaWRlSGFuZGxlcihldmVudCwgbWVzc2FnZSkge1xuICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2Uoe2RhdGE6IG1lc3NhZ2V9KTtcbiAgfVxuXG4gIHJlY2VpdmVNZXNzYWdlKGV2ZW50KSB7XG4gICAgaWYoIWV2ZW50LmRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpdGNoKGV2ZW50LmRhdGEuYWN0aW9uKSB7XG4gICAgY2FzZSBgc2V0U3RhdGVgOlxuICAgICAgdGhpcy5zZXRTdGF0ZShldmVudC5kYXRhLnN0YXRlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYGRlc3Ryb3lgOlxuICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIENvbnN0YW50cy5TT0NLRVRfUkVDRUlWRTpcbiAgICAgIHRoaXMucmVjZWl2ZVNvY2tldE1lc3NhZ2UoZXZlbnQuZGF0YS5tZXNzYWdlKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UoZXZlbnQuZGF0YSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuc3RvcExpc3RlbmluZ0Zvck1lc3NhZ2VzKCk7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQpO1xuICB9XG5cbiAgcG9zdE1lc3NhZ2UoZGF0YSkge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLnRyaWdnZXIoYG1lc3NhZ2UtZnJvbS1zbGlkZWAsIGRhdGEpO1xuICB9XG5cbiAgaGFuZGxlTWVzc2FnZShkYXRhKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgfVxuXG4gIHBvc3RTb2NrZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgIGFjdGlvbjogQ29uc3RhbnRzLlNPQ0tFVF9TRU5ELFxuICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgIH0pO1xuICB9XG5cbiAgcmVjZWl2ZVNvY2tldE1lc3NhZ2UobWVzc2FnZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIH1cblxuICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgIGlmKHN0YXRlICE9PSB0aGlzLnN0YXRlKSB7XG4gICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLm9uU3RhdGVDaGFuZ2VkKCk7XG4gICAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5fZHJhd0xvb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgfVxuXG4gIF9kcmF3TG9vcCgpIHtcbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZUlkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9fZHJhd0xvb3ApO1xuICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICB0aGlzLl9kZWx0YSA9ICh0aGlzLl9jdXJyZW50VGltZSAtIHRoaXMuX2xhc3RUaW1lKTtcbiAgICBpZih0aGlzLl9kZWx0YSA+IHRoaXMuX2ludGVydmFsKSB7XG4gICAgICB0aGlzLmN1cnJlbnRGcmFtZSsrO1xuICAgICAgdGhpcy5wcmV2V2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICB0aGlzLndpZHRoID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRXaWR0aDtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRIZWlnaHQ7XG4gICAgICB0aGlzLndpZHRoQ2hhbmdlZCA9ICh0aGlzLndpZHRoICE9PSB0aGlzLnByZXZXaWR0aCk7XG4gICAgICB0aGlzLmhlaWdodENoYW5nZWQgPSAodGhpcy5oZWlnaHQgIT09IHRoaXMucHJldkhlaWdodCk7XG4gICAgICB0aGlzLnNpemVDaGFuZ2VkID0gKHRoaXMud2lkdGhDaGFuZ2VkIHx8IHRoaXMuaGVpZ2h0Q2hhbmdlZCk7XG4gICAgICB0aGlzLmRyYXdMb29wKHRoaXMuX2RlbHRhKTtcbiAgICAgIHRoaXMuX2xhc3RUaW1lID0gdGhpcy5fY3VycmVudFRpbWUgLSAodGhpcy5fZGVsdGEgJSB0aGlzLl9pbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgZHJhd0xvb3AoZGVsdGEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICB9XG5cbn1cbiIsImltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLWZldGNoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9iaWxlU2VydmVyQnJpZGdlIHtcblxuICBjb25zdHJ1Y3RvcihwcmVzZW50YXRpb24sIHNldHRpbmdzKSB7XG4gICAgdGhpcy5wcmVzZW50YXRpb24gPSBwcmVzZW50YXRpb247XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuY29ubmVjdCgpO1xuICB9XG5cbiAgY29ubmVjdCgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGBNb2JpbGVTZXJ2ZXJCcmlkZ2UuY29ubmVjdGApO1xuICAgIC8vY29uc29sZS53YXJuKCdNb2JpbGVTZXJ2ZXJCcmlkZ2UgZGlzYWJsZWQnKTtcbiAgICAvL3JldHVybjtcbiAgICAvL3Bvc3QgdG8gdGhlIGFwaVxuICAgIGZldGNoKGAke3RoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsfS9sb2dpbmAsIHtcbiAgICAgIG1ldGhvZDogYFBPU1RgLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRMb2dpbkNyZWRlbnRpYWxzKCkpLFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeydDb250ZW50LVR5cGUnOiBgYXBwbGljYXRpb24vanNvbmB9KVxuICAgIH0pXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLmxvZ2luSGFuZGxlcihyZXN1bHQpKVxuICAgIC5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY29ubmVjdCgpLCAxMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldExvZ2luQ3JlZGVudGlhbHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVtYWlsOiB0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyUGFzc3dvcmQsXG4gICAgfTtcbiAgfVxuXG4gIGxvZ2luSGFuZGxlcihyZXN1bHQpIHtcbiAgICB0aGlzLnRva2VuID0gcmVzdWx0LnRva2VuO1xuICAgIHRoaXMuc29ja2V0ID0gaW8odGhpcy5zZXR0aW5ncy5tb2JpbGVTZXJ2ZXJVcmwsIHtcbiAgICAgIHF1ZXJ5OiBgdG9rZW49JHsgIHRoaXMudG9rZW59YCxcbiAgICAgIHJlY29ubmVjdGlvbjogZmFsc2UsXG4gICAgICBmb3JjZU5ldzogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuc29ja2V0Lm9uKGBjb25uZWN0YCwgdGhpcy5zb2NrZXRDb25uZWN0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNvY2tldC5vbihgZGlzY29ubmVjdGAsIHRoaXMuc29ja2V0RGlzY29ubmVjdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zb2NrZXQub24oYG1lc3NhZ2VgLCB0aGlzLnNvY2tldE1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc29ja2V0Q29ubmVjdEhhbmRsZXIoKSB7XG4gICAgY29uc29sZS5sb2coYE1vYmlsZVNlcnZlckJyaWRnZS5zb2NrZXRDb25uZWN0SGFuZGxlcmApO1xuICAgIHRoaXMucHJlc2VudGF0aW9uLm1vYmlsZVNlcnZlckJyaWRnZUNvbm5lY3RlZCgpO1xuICB9XG5cbiAgc29ja2V0RGlzY29ubmVjdEhhbmRsZXIoKSB7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cblxuICB0cnlUb1NlbmQoKSB7XG4gICAgaWYodGhpcy5zb2NrZXQpIHtcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQuYXBwbHkodGhpcy5zb2NrZXQsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgc29ja2V0TWVzc2FnZUhhbmRsZXIobWVzc2FnZSkge1xuICAgIHRoaXMucHJlc2VudGF0aW9uLm1vYmlsZVNlcnZlck1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpO1xuICB9XG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vQ29uc3RhbnRzJztcbmltcG9ydCBTbGlkZUJyaWRnZSBmcm9tICcuL1NsaWRlQnJpZGdlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VudGF0aW9uIHtcbiAgLypcbiAgICogZGF0YToganNvbiBvYmplY3Qgd2l0aCBzbGlkZXMgYXJyYXkgcHJvcGVydHlcbiAgICogcm9sZTogbW9iaWxlIG9yIHByZXNlbnRhdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSwgcm9sZSwgc2V0dGluZ3MpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICQoYCNwcmVzZW50YXRpb25gKS5hdHRyKGBkYXRhLXByZXNlbnRhdGlvbi1zZXR0aW5nc2AsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSk7XG4gICAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IC0xO1xuICAgIHRoaXMuc2xpZGVIb2xkZXJzID0gW107XG4gICAgdGhpcy5udW1TbGlkZUhvbGRlcnMgPSAzO1xuICAgIHRoaXMuc2xpZGVCcmlkZ2VzID0gW107XG4gICAgdGhpcy5zbGlkZUJyaWRnZXNCeVNsaWRlTmFtZSA9IHt9O1xuXG4gICAgdGhpcy5jcmVhdGVTbGlkZUhvbGRlcnMoKTtcbiAgICB0aGlzLmNyZWF0ZVNsaWRlQnJpZGdlcyh0aGlzLmRhdGEpO1xuXG4gICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UgPSB0aGlzLmNyZWF0ZU1vYmlsZVNlcnZlckJyaWRnZSgpO1xuICAgIHRoaXMuc3RhcnRMaXN0ZW5pbmdGb3JNZXNzYWdlcygpO1xuXG4gICAgdGhpcy5zZXRDdXJyZW50U2xpZGVJbmRleCgwKTtcbiAgfVxuXG4gIHN0YXJ0TGlzdGVuaW5nRm9yTWVzc2FnZXMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYG1lc3NhZ2VgLCB0aGlzLnNsaWRlTWVzc2FnZUhhbmRsZXIuYmluZCh0aGlzKSwgZmFsc2UpO1xuICB9XG5cbiAgY3JlYXRlU2xpZGVIb2xkZXJzKCkge1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm51bVNsaWRlSG9sZGVyczsgaSsrKSB7XG4gICAgICBjb25zdCAkc2xpZGVIb2xkZXIgPSAkKGA8ZGl2IGNsYXNzPVwic2xpZGUtZnJhbWVcIiAvPmApO1xuICAgICAgdGhpcy5zbGlkZUhvbGRlcnMucHVzaCgkc2xpZGVIb2xkZXIpO1xuICAgICAgJChgI3ByZXNlbnRhdGlvbmApLmFwcGVuZCgkc2xpZGVIb2xkZXIpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNsaWRlQnJpZGdlcyhkYXRhKSB7XG4gICAgY29uc3QgbnVtU2xpZGVzID0gZGF0YS5zbGlkZXMubGVuZ3RoO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1TbGlkZXM7IGkrKykge1xuICAgICAgY29uc3Qgc2xpZGVCcmlkZ2UgPSB0aGlzLmNyZWF0ZVNsaWRlQnJpZGdlKGRhdGEuc2xpZGVzW2ldKTtcbiAgICAgIHRoaXMuc2xpZGVCcmlkZ2VzLnB1c2goc2xpZGVCcmlkZ2UpO1xuICAgICAgdGhpcy5zbGlkZUJyaWRnZXNCeVNsaWRlTmFtZVtzbGlkZUJyaWRnZS5uYW1lXSA9IHNsaWRlQnJpZGdlO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNsaWRlQnJpZGdlKHNsaWRlKSB7XG4gICAgcmV0dXJuIG5ldyBTbGlkZUJyaWRnZShzbGlkZSk7XG4gIH1cblxuICBzbGlkZU1lc3NhZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgaWYoIWV2ZW50LmRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpdGNoKGV2ZW50LmRhdGEuYWN0aW9uKSB7XG4gICAgY2FzZSBDb25zdGFudHMuU09DS0VUX1NFTkQ6XG4gICAgICBpZih0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSkge1xuICAgICAgICB0aGlzLm1vYmlsZVNlcnZlckJyaWRnZS50cnlUb1NlbmQoQ29uc3RhbnRzLk1FU1NBR0UsIGV2ZW50LmRhdGEubWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBtb2JpbGVTZXJ2ZXJCcmlkZ2VDb25uZWN0ZWQoKSB7XG4gICAgLy9qb2luIHRoZSByb29tcyBvZiB0aGUgc2xpZGVIb2xkZXJzXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubnVtU2xpZGVIb2xkZXJzOyBpKyspIHtcbiAgICAgIHRoaXMubW9iaWxlU2VydmVyQnJpZGdlLnRyeVRvU2VuZChDb25zdGFudHMuSk9JTl9TTElERV9ST09NLCAkKHRoaXMuc2xpZGVIb2xkZXJzW2ldKS5hdHRyKGBkYXRhLW5hbWVgKSk7XG4gICAgfVxuICB9XG5cbiAgbW9iaWxlU2VydmVyTWVzc2FnZUhhbmRsZXIobWVzc2FnZSkge1xuICAgIGlmKG1lc3NhZ2UudGFyZ2V0LnNsaWRlKSB7XG4gICAgICAvL3NsaWRlIGhhcyB0byBoYW5kbGUgdGhlIG1lc3NhZ2VcbiAgICAgIGNvbnN0IHNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5TmFtZShtZXNzYWdlLnRhcmdldC5zbGlkZSk7XG4gICAgICBpZihzbGlkZUJyaWRnZSkge1xuICAgICAgICBzbGlkZUJyaWRnZS50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TT0NLRVRfUkVDRUlWRSxcbiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvL3ByZXNlbnRhdGlvbiBoYXMgdG8gaGFuZGxlIHRoZSBtZXNzYWdlXG4gICAgICB0aGlzLmhhbmRsZU1vYmlsZVNlcnZlck1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTW9iaWxlU2VydmVyTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc29sZS5sb2coYFtzaGFyZWQvUHJlc2VudGF0aW9uXSBoYW5kbGVNb2JpbGVTZXJ2ZXJNZXNzYWdlYCwgbWVzc2FnZSk7XG4gIH1cblxuICBnZXRTbGlkZUJyaWRnZUJ5SW5kZXgoaW5kZXgpIHtcbiAgICBpZihpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5zbGlkZUJyaWRnZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zbGlkZUJyaWRnZXNbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRTbGlkZUJyaWRnZUJ5TmFtZShzbGlkZU5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5zbGlkZUJyaWRnZXNCeVNsaWRlTmFtZVtzbGlkZU5hbWVdO1xuICB9XG5cbiAgZ2V0U2xpZGVIb2xkZXJGb3JTbGlkZShzbGlkZSwgc2xpZGVzTm90VG9DbGVhcikge1xuICAgIGlmKHNsaWRlKSB7XG4gICAgICBsZXQgJHNsaWRlSG9sZGVyID0gJChgLnNsaWRlLWZyYW1lW2RhdGEtbmFtZT1cIiR7ICBzbGlkZS5uYW1lICB9XCJdYCk7XG4gICAgICBpZigkc2xpZGVIb2xkZXIubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gJHNsaWRlSG9sZGVyWzBdO1xuICAgICAgfVxuICAgICAgLy9nZXQgYSBmcmVlIHNsaWRlSG9sZGVyXG4gICAgICBjb25zdCBzbGlkZU5hbWVzTm90VG9DbGVhciA9IFtdO1xuICAgICAgJChzbGlkZXNOb3RUb0NsZWFyKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBvYmope1xuICAgICAgICBzbGlkZU5hbWVzTm90VG9DbGVhci5wdXNoKG9iai5uYW1lKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgJHNsaWRlSG9sZGVycyA9ICQoYC5zbGlkZS1mcmFtZWApO1xuICAgICAgZm9yIChsZXQgaSA9ICRzbGlkZUhvbGRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgJHNsaWRlSG9sZGVyID0gJCgkc2xpZGVIb2xkZXJzW2ldKTtcbiAgICAgICAgY29uc3QgbmFtZSA9ICRzbGlkZUhvbGRlci5hdHRyKGBkYXRhLW5hbWVgKTtcbiAgICAgICAgaWYoIW5hbWUgfHwgc2xpZGVOYW1lc05vdFRvQ2xlYXIuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gJHNsaWRlSG9sZGVyWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdvVG9QcmV2aW91c1NsaWRlKCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFNsaWRlSW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCAtIDEpO1xuICB9XG5cbiAgZ29Ub05leHRTbGlkZSgpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRTbGlkZUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggKyAxKTtcbiAgfVxuXG4gIHNldEN1cnJlbnRTbGlkZUluZGV4KHZhbHVlKSB7XG4gICAgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih2YWx1ZSwgdGhpcy5zbGlkZUJyaWRnZXMubGVuZ3RoIC0gMSkpO1xuICAgIGlmKHZhbHVlICE9PSB0aGlzLmN1cnJlbnRTbGlkZUluZGV4KSB7XG4gICAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gdmFsdWU7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xuICAgICAgY29uc3QgcHJldmlvdXNTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggLSAxKTtcbiAgICAgIGNvbnN0IG5leHRTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXggKyAxKTtcblxuICAgICAgLy9yZW1vdmUgXCJ1c2VkXCIgY2xhc3MgZnJvbSBzbGlkZSBob2xkZXJzXG4gICAgICAkKGAuc2xpZGUtZnJhbWVgKS5yZW1vdmVBdHRyKGBkYXRhLXVzZWRgLCBmYWxzZSk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZUhvbGRlciA9IHRoaXMuZ2V0U2xpZGVIb2xkZXJGb3JTbGlkZShjdXJyZW50U2xpZGVCcmlkZ2UsIFtwcmV2aW91c1NsaWRlQnJpZGdlLCBuZXh0U2xpZGVCcmlkZ2VdKTtcbiAgICAgIHRoaXMuc2V0dXBTbGlkZUhvbGRlcihjdXJyZW50U2xpZGVIb2xkZXIsIGN1cnJlbnRTbGlkZUJyaWRnZSwgQ29uc3RhbnRzLlNUQVRFX0FDVElWRSwgMCk7XG5cbiAgICAgIGNvbnN0IHByZXZpb3VzU2xpZGVIb2xkZXIgPSB0aGlzLmdldFNsaWRlSG9sZGVyRm9yU2xpZGUocHJldmlvdXNTbGlkZUJyaWRnZSwgW2N1cnJlbnRTbGlkZUJyaWRnZSwgbmV4dFNsaWRlQnJpZGdlXSk7XG4gICAgICB0aGlzLnNldHVwU2xpZGVIb2xkZXIocHJldmlvdXNTbGlkZUhvbGRlciwgcHJldmlvdXNTbGlkZUJyaWRnZSwgQ29uc3RhbnRzLlNUQVRFX0lOQUNUSVZFLCBgLTEwMCVgKTtcblxuICAgICAgY29uc3QgbmV4dFNsaWRlSG9sZGVyID0gdGhpcy5nZXRTbGlkZUhvbGRlckZvclNsaWRlKG5leHRTbGlkZUJyaWRnZSwgW3ByZXZpb3VzU2xpZGVCcmlkZ2UsIGN1cnJlbnRTbGlkZUJyaWRnZV0pO1xuICAgICAgdGhpcy5zZXR1cFNsaWRlSG9sZGVyKG5leHRTbGlkZUhvbGRlciwgbmV4dFNsaWRlQnJpZGdlLCBDb25zdGFudHMuU1RBVEVfSU5BQ1RJVkUsIGAxMDAlYCk7XG5cbiAgICAgIC8vY2xlYXIgYXR0cmlidXRlcyBvZiB1bnVzZWQgc2xpZGUgZnJhbWVzXG4gICAgICAkKGAuc2xpZGUtZnJhbWVgKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBzbGlkZUhvbGRlcil7XG4gICAgICAgIGlmKCEkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXVzZWRgKSkge1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUF0dHIoYGRhdGEtdXNlZGApLnJlbW92ZUF0dHIoYGRhdGEtbmFtZWApLnJlbW92ZUF0dHIoYGRhdGEtc3JjYCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvL2FsbCBvdGhlciBzbGlkZUhvbGRlciBicmlkZ2VzIHNob3VsZCBiZSB1bmxpbmtlZCBmcm9tIHRoZWlyIHNsaWRlSG9sZGVyXG4gICAgICB0aGlzLnNsaWRlQnJpZGdlcy5mb3JFYWNoKGZ1bmN0aW9uKHNsaWRlQnJpZGdlKXtcbiAgICAgICAgaWYoc2xpZGVCcmlkZ2UgPT09IGN1cnJlbnRTbGlkZUJyaWRnZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihzbGlkZUJyaWRnZSA9PT0gcHJldmlvdXNTbGlkZUJyaWRnZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihzbGlkZUJyaWRnZSA9PT0gbmV4dFNsaWRlQnJpZGdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNsaWRlQnJpZGdlLnNsaWRlSG9sZGVyID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICBiZWFuLmZpcmUodGhpcywgQ29uc3RhbnRzLlNFVF9DVVJSRU5UX1NMSURFX0lOREVYLCBbdGhpcy5jdXJyZW50U2xpZGVJbmRleF0pO1xuICAgIH1cbiAgfVxuXG4gIHNldHVwU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlLCBzdGF0ZSwgbGVmdCkge1xuICAgIGlmKHNsaWRlSG9sZGVyKSB7XG4gICAgICBsZXQgc3JjID0gYHNsaWRlcy8keyAgc2xpZGVCcmlkZ2UubmFtZSAgfS5odG1sYDtcbiAgICAgIGlmKHNsaWRlQnJpZGdlLmRhdGFbdGhpcy5yb2xlXSAmJiBzbGlkZUJyaWRnZS5kYXRhW3RoaXMucm9sZV0udXJsKSB7XG4gICAgICAgIHNyYyA9IHNsaWRlQnJpZGdlLmRhdGFbdGhpcy5yb2xlXS51cmw7XG4gICAgICB9XG4gICAgICBzcmMgPSB0aGlzLnByb2Nlc3NTbGlkZVNyYyhzcmMpO1xuICAgICAgaWYoc2xpZGVCcmlkZ2UuaXNBbHJlYWR5Q29ycmVjdGx5QXR0YWNoZWQoc2xpZGVIb2xkZXIsIHNyYykpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhzbGlkZUJyaWRnZS5uYW1lICsgJyBhbHJlYWR5IGF0dGFjaGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmF0dGFjaFRvU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlLCBzcmMpO1xuICAgICAgfVxuICAgICAgc2xpZGVCcmlkZ2Uuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgJChzbGlkZUhvbGRlcikuY3NzKGBsZWZ0YCwgbGVmdCk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXVzZWRgLCAxKTtcbiAgICB9XG4gIH1cblxuICBhdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzbGlkZUJyaWRnZSwgc3JjKSB7XG4gICAgLy9saXN0ZW4gZm9yIGV2ZW50cyBvbiB0aGlzIHNsaWRlSG9sZGVyXG4gICAgJChzbGlkZUhvbGRlcikub2ZmKGBtZXNzYWdlLWZyb20tc2xpZGVgKTtcbiAgICAkKHNsaWRlSG9sZGVyKS5vbihgbWVzc2FnZS1mcm9tLXNsaWRlYCwgKGV2ZW50LCBtZXNzYWdlKSA9PiAge1xuICAgICAgdGhpcy5zbGlkZU1lc3NhZ2VIYW5kbGVyKHtkYXRhOiBtZXNzYWdlfSk7XG4gICAgfSk7XG4gICAgLy9sZWF2ZSBwcmV2aW91cyBjaGFubmVsIG9mIHRoaXMgc2xpZGVIb2xkZXJcbiAgICBpZih0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSkge1xuICAgICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UudHJ5VG9TZW5kKENvbnN0YW50cy5MRUFWRV9TTElERV9ST09NLCAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgKSk7XG4gICAgfVxuICAgIC8vYWRkIHRoZSBqb2luIGFzIGEgY2FsbGJhY2sgZm9yIHRoZSBvbmxvYWQgZXZlbnRcbiAgICBzbGlkZUJyaWRnZS5hdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzcmMsIHRoaXMuc2xpZGVMb2FkZWQuYmluZCh0aGlzLCBzbGlkZUhvbGRlciwgc2xpZGVCcmlkZ2UsIHNyYykpO1xuICB9XG5cbiAgc2xpZGVMb2FkZWQoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAvL2pvaW4gbmV3IGNoYW5uZWxcbiAgICBpZih0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSkge1xuICAgICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UudHJ5VG9TZW5kKENvbnN0YW50cy5KT0lOX1NMSURFX1JPT00sICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWApKTtcbiAgICB9XG4gIH1cblxuICBwcm9jZXNzU2xpZGVTcmMoc3JjKSB7XG4gICAgcmV0dXJuIHNyYztcbiAgfVxuXG4gIGNyZWF0ZU1vYmlsZVNlcnZlckJyaWRnZSgpIHtcbiAgICAvL3RvIGltcGxlbWVudCBpbiBleHRlbmRpbmcgY2xhc3Nlc1xuICB9XG59XG4iLCJpbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy1mZXRjaCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlQnJpZGdlIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5uYW1lID0gdGhpcy5kYXRhLm5hbWU7XG4gIH1cblxuICBpc0FscmVhZHlDb3JyZWN0bHlBdHRhY2hlZChzbGlkZUhvbGRlciwgc3JjKSB7XG4gICAgcmV0dXJuICh0aGlzLnNsaWRlSG9sZGVyID09PSBzbGlkZUhvbGRlciAmJiAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgKSA9PT0gdGhpcy5uYW1lICYmICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCkgPT09IHNyYyk7XG4gIH1cblxuICBhdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzcmMsIGNiKSB7XG4gICAgdGhpcy5zbGlkZUhvbGRlciA9IHNsaWRlSG9sZGVyO1xuICAgIC8vbm90aWZ5IHRoZSBjb250ZW50IGl0IGlzIGJlaW5nIGNsZWFyZWRcbiAgICB0aGlzLnRyeVRvUG9zdE1lc3NhZ2Uoe2FjdGlvbjogYGRlc3Ryb3lgfSk7XG4gICAgLy9jbGVhciB0aGUgY3VycmVudCBjb250ZW50XG4gICAgdGhpcy5zbGlkZUhvbGRlci5pbm5lckhUTUwgPSBgYDtcbiAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLW5hbWVgLCB0aGlzLm5hbWUpO1xuICAgICQoc2xpZGVIb2xkZXIpLmFkZENsYXNzKGBsb2FkaW5nYCk7XG5cbiAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYGxvYWRgKTtcbiAgICAkKHNsaWRlSG9sZGVyKS5vbihgbG9hZGAsICgpID0+IHtcbiAgICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogYHNldFN0YXRlYCxcbiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGVcbiAgICAgIH0pO1xuICAgICAgJChzbGlkZUhvbGRlcikub2ZmKGBsb2FkYCk7XG4gICAgfSk7XG5cbiAgICBpZihzcmMgIT09ICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCkpIHtcbiAgICAgIC8vZmV0Y2ggdGhlIGh0bWxcbiAgICAgIGZldGNoKHNyYylcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHJlc3VsdC50ZXh0KCkpXG4gICAgICAgIC50aGVuKHJlc3VsdCA9PiAkKHJlc3VsdCkpXG4gICAgICAgIC50aGVuKCRyZXN1bHQgPT4ge1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLmh0bWwoJHJlc3VsdC5odG1sKCkpO1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUNsYXNzKGBsb2FkaW5nYCk7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUNsYXNzKGBsb2FkaW5nYCk7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5hdHRyKGBkYXRhLXNyY2AsIHNyYyk7XG4gICAgfVxuICB9XG5cbiAgdHJ5VG9Qb3N0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgaWYoIXRoaXMuc2xpZGVIb2xkZXIpXG4gICAge1xuICAgICAgY29uc29sZS5sb2coYCR7dGhpcy5uYW1lICB9IHBvc3QgZmFpbGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL3RyaWdnZXIgd2l0aCBqcXVlcnlcbiAgICAkKHRoaXMuc2xpZGVIb2xkZXIpLnRyaWdnZXIoYG1lc3NhZ2UtdG8tc2xpZGVgLCBtZXNzYWdlKTtcbiAgfVxuXG4gIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICBhY3Rpb246IGBzZXRTdGF0ZWAsXG4gICAgICBzdGF0ZTogdGhpcy5zdGF0ZVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWFjdFBob25lc1NsaWRlIGV4dGVuZHMgQ29udGVudEJhc2V7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMudG90YWxSZWFjdGlvblNwZWVkID0gMDtcbiAgICB0aGlzLm51bVJlYWN0aW9uU3BlZWRzID0gMDtcbiAgICB0aGlzLm51bUNvcnJlY3RBbnN3ZXJzID0gMTtcbiAgICB0aGlzLmF2ZXJhZ2VSZWFjdGlvblNwZWVkID0gOTk5OTk5OTtcbiAgICB0aGlzLnZpc2libGVQb3NpdGlvbiA9IDA7XG4gICAgdGhpcy50YXJnZXRQb3NpdGlvbiA9IDA7XG4gICAgdGhpcy5sYXN0QW5zd2VyVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5wb3NpdGlvbnMgPSBbXTtcblxuICAgIHRoaXMuJGdhbWUgPSB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuZ2FtZWApO1xuICAgIHRoaXMuJHNsaWRlc0NvbnRhaW5lciA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5yZWFjdC1waG9uZXMtc2xpZGVzLWNvbnRhaW5lcmApO1xuICAgIHRoaXMuJHNsaWRlMSA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5yZWFjdC1waG9uZXMtc2xpZGUtMWApO1xuICAgIHRoaXMuJHNsaWRlMXRleHQgPSB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAucmVhY3QtcGhvbmVzLXNsaWRlLTEgLnJlYWN0LXBob25lcy1zbGlkZS10ZXh0YCk7XG4gICAgdGhpcy4kc2xpZGUyID0gdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnJlYWN0LXBob25lcy1zbGlkZS0yYCk7XG4gICAgdGhpcy4kc2xpZGUydGV4dCA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5yZWFjdC1waG9uZXMtc2xpZGUtMiAucmVhY3QtcGhvbmVzLXNsaWRlLXRleHRgKTtcblxuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC50b3VjaGJ1dHRvbmApLm9uKGB0b3VjaHN0YXJ0YCwgJC5wcm94eSh0aGlzLm9uQnV0dG9uVG91Y2hTdGFydCwgdGhpcykpO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC50b3VjaGJ1dHRvbmApLm9uKGB0b3VjaGVuZGAsICQucHJveHkodGhpcy5vbkJ1dHRvblRvdWNoRW5kLCB0aGlzKSk7XG5cbiAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAudG91Y2hidXR0b25gKS5vbihgbW91c2Vkb3duYCwgJC5wcm94eSh0aGlzLm9uQnV0dG9uVG91Y2hTdGFydCwgdGhpcykpO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC50b3VjaGJ1dHRvbmApLm9uKGBtb3VzZXVwYCwgJC5wcm94eSh0aGlzLm9uQnV0dG9uVG91Y2hFbmQsIHRoaXMpKTtcblxuICAgIHRoaXMucmVzZXRHYW1lKCk7XG4gIH1cblxuICBvbkJ1dHRvblRvdWNoU3RhcnQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKGUuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoYGRvd25gKTtcbiAgICB0aGlzLnNlbGVjdEFuc3dlcigkKGUuY3VycmVudFRhcmdldCkudGV4dCgpKTtcbiAgfVxuXG4gIG9uQnV0dG9uVG91Y2hFbmQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKGUuY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoYGRvd25gKTtcbiAgfVxuXG4gIHNlbGVjdEFuc3dlcihhbnN3ZXIpIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRpbWUgPSBub3cuZ2V0VGltZSgpIC0gdGhpcy5sYXN0QW5zd2VyVGltZS5nZXRUaW1lKCk7XG4gICAgdGhpcy50b3RhbFJlYWN0aW9uU3BlZWQgKz0gdGltZTtcbiAgICBpZihhbnN3ZXIudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5wb3NpdGlvbnNbdGhpcy50YXJnZXRQb3NpdGlvbl0uY29sb3JTdHJpbmcudG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0Ly9jb3JyZWN0IGFuc3dlclxuICAgICAgdGhpcy5udW1Db3JyZWN0QW5zd2VycysrO1xuICAgIH0gZWxzZSB7XG5cdFx0XHQvL3BlbmFsdHkgdGltZVxuICAgICAgdGhpcy50b3RhbFJlYWN0aW9uU3BlZWQgKz0gMTAwMDtcbiAgICB9XG4gICAgdGhpcy5udW1SZWFjdGlvblNwZWVkcysrO1xuICAgIHRoaXMubGFzdEFuc3dlclRpbWUgPSBub3c7XG4gICAgdGhpcy50YXJnZXRQb3NpdGlvbisrO1xuICAgIHRoaXMuZmlsbFBvc2l0aW9uc1doZW5OZWVkZWQoKTtcblx0XHQvL3NlbmQgdG8gc2VydmVyXG4gICAgdGhpcy5wb3N0U29ja2V0TWVzc2FnZSh7XG4gICAgICB0YXJnZXQ6IHtcbiAgICAgICAgY2xpZW50OiBgcHJlc2VudGF0aW9uYCxcbiAgICAgICAgc2xpZGU6IHRoaXMubmFtZVxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuVVBEQVRFX1JFQUNUSU9OX1NQRUVELFxuICAgICAgICByZWFjdGlvblNwZWVkOiB0aGlzLnRvdGFsUmVhY3Rpb25TcGVlZCAvIHRoaXMubnVtQ29ycmVjdEFuc3dlcnNcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNob3dDdXJyZW50U3RhdGUoKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlYCkucmVtb3ZlQ2xhc3MoYGFjdGl2ZWApO1xuICAgIHRoaXMuJGdhbWUuY3NzKHtcbiAgICAgICd6LWluZGV4JzogLTEsXG4gICAgICBvcGFjaXR5OiAwLjMsXG4gICAgICAncG9pbnRlci1ldmVudHMnOiBgbm9uZWBcbiAgICB9KTtcbiAgICBpZih0aGlzLnN1YnN0YXRlID09PSBDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0dBTUUpIHtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1nYW1lYCkuYWRkQ2xhc3MoYGFjdGl2ZWApO1xuICAgICAgdGhpcy4kZ2FtZS5jc3Moe1xuICAgICAgICAnei1pbmRleCc6IDEwLFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAncG9pbnRlci1ldmVudHMnOiBgYXV0b2BcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZih0aGlzLnN1YnN0YXRlID09PSBDb25zdGFudHMuUkVBQ1RfUEhPTkVTX0ZJTklTSEVEKSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZmluaXNoZWRgKS5hZGRDbGFzcyhgYWN0aXZlYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1pbnRyb2ApLmFkZENsYXNzKGBhY3RpdmVgKTtcbiAgICB9XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICB0aGlzLnJlc2V0R2FtZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0R2FtZSgpIHtcbiAgICB0aGlzLmxhc3RBbnN3ZXJUaW1lID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLnRvdGFsUmVhY3Rpb25TcGVlZCA9IDA7XG4gICAgdGhpcy5udW1SZWFjdGlvblNwZWVkcyA9IDA7XG4gICAgdGhpcy5udW1Db3JyZWN0QW5zd2VycyA9IDE7XG4gICAgdGhpcy5hdmVyYWdlUmVhY3Rpb25TcGVlZCA9IDk5OTk5OTk7XG4gICAgdGhpcy52aXNpYmxlUG9zaXRpb24gPSAwO1xuICAgIHRoaXMudGFyZ2V0UG9zaXRpb24gPSAwO1xuICAgIHRoaXMucG9zaXRpb25zID0gW107XG4gICAgdGhpcy5maWxsUG9zaXRpb25zV2hlbk5lZWRlZCgpO1xuICB9XG5cbiAgZmlsbFBvc2l0aW9uc1doZW5OZWVkZWQoKSB7XG4gICAgY29uc3QgbnVtUG9zaXRpb25zVG9BZGQgPSB0aGlzLm51bVJlYWN0aW9uU3BlZWRzICsgMiAtIHRoaXMucG9zaXRpb25zLmxlbmd0aDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbnVtUG9zaXRpb25zVG9BZGQ7IGkrKykge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSB7XG4gICAgICAgIGNvbG9yU3RyaW5nOiAoTWF0aC5yYW5kb20oKSA+IDAuNSkgPyBgcmVkYCA6IGBibHVlYCxcbiAgICAgICAgYmdjb2xvcjogKE1hdGgucmFuZG9tKCkgPiAwLjUpID8gYCNjNjM2M2RgIDogYCMwNjg0QUZgXG4gICAgICB9O1xuICAgICAgaWYocG9zaXRpb24uY29sb3JTdHJpbmcgPT09IGByZWRgKSB7XG4gICAgICAgIHBvc2l0aW9uLmNvbG9yID0gYCNjNjM2M2RgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zaXRpb24uY29sb3IgPSBgIzA2ODRBRmA7XG4gICAgICB9XG4gICAgICB0aGlzLnBvc2l0aW9ucy5wdXNoKHBvc2l0aW9uKTtcbiAgICB9XG4gIH1cblxuICBkcmF3TG9vcCgpIHtcbiAgICB0aGlzLnZpc2libGVQb3NpdGlvbiArPSAodGhpcy50YXJnZXRQb3NpdGlvbiAtIHRoaXMudmlzaWJsZVBvc2l0aW9uKSAqIDAuMTtcbiAgICBpZih0aGlzLnZpc2libGVQb3NpdGlvbiAlIDEgPiAwLjk5NSkge1xuICAgICAgdGhpcy52aXNpYmxlUG9zaXRpb24gPSBNYXRoLnJvdW5kKHRoaXMudmlzaWJsZVBvc2l0aW9uKTtcbiAgICB9XG4gICAgdGhpcy4kc2xpZGVzQ29udGFpbmVyLmNzcyhgbGVmdGAsIGAke3RoaXMudmlzaWJsZVBvc2l0aW9uICogLTEwMCAgfSVgKTtcblxuICAgIGNvbnN0IGZsb29yZWRWaXNpYmxlUG9zaXRpb24gPSBNYXRoLmZsb29yKHRoaXMudmlzaWJsZVBvc2l0aW9uKTtcbiAgICBpZihmbG9vcmVkVmlzaWJsZVBvc2l0aW9uICUgMiA9PT0gMCkge1xuICAgICAgdGhpcy4kc2xpZGUxLmNzcyh7XG4gICAgICAgIGxlZnQ6IGAke2Zsb29yZWRWaXNpYmxlUG9zaXRpb24gKiAxMDAgIH0lYCxcbiAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiB0aGlzLnBvc2l0aW9uc1tmbG9vcmVkVmlzaWJsZVBvc2l0aW9uXS5iZ2NvbG9yXG4gICAgICB9KTtcbiAgICAgIHRoaXMuJHNsaWRlMi5jc3Moe1xuICAgICAgICBsZWZ0OiBgJHtmbG9vcmVkVmlzaWJsZVBvc2l0aW9uICogMTAwICsgMTAwICB9JWAsXG4gICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5wb3NpdGlvbnNbZmxvb3JlZFZpc2libGVQb3NpdGlvbiArIDFdLmJnY29sb3JcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLiRzbGlkZTF0ZXh0LnRleHQodGhpcy5wb3NpdGlvbnNbZmxvb3JlZFZpc2libGVQb3NpdGlvbl0uY29sb3JTdHJpbmcpO1xuICAgICAgdGhpcy4kc2xpZGUydGV4dC50ZXh0KHRoaXMucG9zaXRpb25zW2Zsb29yZWRWaXNpYmxlUG9zaXRpb24gKyAxXS5jb2xvclN0cmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHNsaWRlMi5jc3Moe1xuICAgICAgICBsZWZ0OiBgJHtmbG9vcmVkVmlzaWJsZVBvc2l0aW9uICogMTAwICB9JWAsXG4gICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5wb3NpdGlvbnNbZmxvb3JlZFZpc2libGVQb3NpdGlvbl0uYmdjb2xvclxuICAgICAgfSk7XG4gICAgICB0aGlzLiRzbGlkZTEuY3NzKHtcbiAgICAgICAgbGVmdDogYCR7Zmxvb3JlZFZpc2libGVQb3NpdGlvbiAqIDEwMCArIDEwMCAgfSVgLFxuICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IHRoaXMucG9zaXRpb25zW2Zsb29yZWRWaXNpYmxlUG9zaXRpb24gKyAxXS5iZ2NvbG9yXG4gICAgICB9KTtcblxuICAgICAgdGhpcy4kc2xpZGUydGV4dC50ZXh0KHRoaXMucG9zaXRpb25zW2Zsb29yZWRWaXNpYmxlUG9zaXRpb25dLmNvbG9yU3RyaW5nKTtcbiAgICAgIHRoaXMuJHNsaWRlMXRleHQudGV4dCh0aGlzLnBvc2l0aW9uc1tmbG9vcmVkVmlzaWJsZVBvc2l0aW9uICsgMV0uY29sb3JTdHJpbmcpO1xuICAgIH1cbiAgfVxuXG4gIHJlY2VpdmVTb2NrZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZighbWVzc2FnZS5jb250ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IENvbnN0YW50cy5TRVRfU1VCU1RBVEUpIHtcbiAgICAgIHRoaXMuc2V0U3Vic3RhdGUobWVzc2FnZS5jb250ZW50LnN1YnN0YXRlKTtcbiAgICB9XG4gIH1cblxuICBzZXRTdWJzdGF0ZShzdWJzdGF0ZSkge1xuICAgIGlmKHRoaXMuc3Vic3RhdGUgIT09IHN1YnN0YXRlKSB7XG4gICAgICB0aGlzLnN1YnN0YXRlID0gc3Vic3RhdGU7XG4gICAgICB0aGlzLnNob3dDdXJyZW50U3RhdGUoKTtcbiAgICB9XG4gIH1cblxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IENvbnRlbnRCYXNlIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9qcy9jbGFzc2VzL0NvbnRlbnRCYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hha2VZb3VyUGhvbmVzU2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZXtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuICAgIHRoaXMuY3VycmVudE1vdGlvbiA9IDA7XG4gICAgdGhpcy5tb3Rpb24gPSAwO1xuXG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnNsaWRlYCkuY3NzKGBiYWNrZ3JvdW5kLWNvbG9yYCwgYCNjNjM2M2RgKTtcblxuICAgIHRoaXMuJGJhY2tncm91bmQgPSB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuYmFja2dyb3VuZGApO1xuICAgIHRoaXMuJGJhY2tncm91bmQuY3NzKGB0b3BgLCBgMTAwJWApO1xuICAgIHRoaXMuJGJhY2tncm91bmQuY3NzKGBiYWNrZ3JvdW5kLWNvbG9yYCwgYHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KWApO1xuXG4gICAgdGhpcy5fbW90aW9uVXBkYXRlSGFuZGxlciA9IHRoaXMubW90aW9uVXBkYXRlSGFuZGxlci5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgaWYgKHdpbmRvdy5EZXZpY2VNb3Rpb25FdmVudCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihgZGV2aWNlbW90aW9uYCwgdGhpcy5fbW90aW9uVXBkYXRlSGFuZGxlciwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLmFjY2VsZXJhdGlvbmApLnRleHQoYE5vdCBzdXBwb3J0ZWQgb24geW91ciBkZXZpY2UgOi0oYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBkZXZpY2Vtb3Rpb25gLCB0aGlzLl9tb3Rpb25VcGRhdGVIYW5kbGVyKTtcbiAgICB9XG4gIH1cblxuICByZWNlaXZlU29ja2V0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgaWYoIW1lc3NhZ2UuY29udGVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZihtZXNzYWdlLmNvbnRlbnQuYWN0aW9uID09PSBDb25zdGFudHMuU0VUX1NVQlNUQVRFKSB7XG4gICAgICB0aGlzLnNldFN1YnN0YXRlKG1lc3NhZ2UuY29udGVudC5zdWJzdGF0ZSk7XG4gICAgfVxuICAgIC8vIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IENvbnN0YW50cy5ZT1VfV0lOKSB7XG4gICAgLy8gICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKCcuc3Vic3RhdGUtZmluaXNoZWQgaDEnKS50ZXh0KCdZb3VyIFRlYW0gV29uIScpO1xuICAgIC8vIH1cbiAgICAvLyBpZihtZXNzYWdlLmNvbnRlbnQuYWN0aW9uID09PSBDb25zdGFudHMuWU9VX0xPU0UpIHtcbiAgICAvLyAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoJy5zdWJzdGF0ZS1maW5pc2hlZCBoMScpLnRleHQoJ1lvdXIgVGVhbSBMb3N0Li4uJyk7XG4gICAgLy8gfVxuICB9XG5cbiAgc2V0U3Vic3RhdGUoc3Vic3RhdGUpIHtcbiAgICBpZih0aGlzLnN1YnN0YXRlICE9PSBzdWJzdGF0ZSkge1xuICAgICAgdGhpcy5zdWJzdGF0ZSA9IHN1YnN0YXRlO1xuICAgICAgdGhpcy5zaG93Q3VycmVudFN0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgbW90aW9uVXBkYXRlSGFuZGxlcihldmVudCkge1xuICAgIHRoaXMuY3VycmVudE1vdGlvbiA9IGV2ZW50LmludGVydmFsICogKE1hdGguYWJzKGV2ZW50LmFjY2VsZXJhdGlvbi54KSArIE1hdGguYWJzKGV2ZW50LmFjY2VsZXJhdGlvbi55KSArIE1hdGguYWJzKGV2ZW50LmFjY2VsZXJhdGlvbi56KSk7XG4gIH1cblxuICBkcmF3TG9vcCgpIHtcbiAgICB0aGlzLm1vdGlvbiArPSB0aGlzLmN1cnJlbnRNb3Rpb247XG4gICAgdGhpcy5tb3Rpb24gKj0gMC45NztcbiAgICB0aGlzLiRiYWNrZ3JvdW5kLmNzcyhgdG9wYCwgYCR7MTAwIC0gdGhpcy5tb3Rpb24gIH0lYCk7XG4gICAgaWYodGhpcy5jdXJyZW50RnJhbWUgJSAxMCA9PT0gMCkge1xuICAgICAgdGhpcy5wb3N0U29ja2V0TWVzc2FnZSh7XG4gICAgICAgIHRhcmdldDoge1xuICAgICAgICAgIGNsaWVudDogYHByZXNlbnRhdGlvbmAsXG4gICAgICAgICAgc2xpZGU6IHRoaXMubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgYWN0aW9uOiBDb25zdGFudHMuVVBEQVRFX01PVElPTixcbiAgICAgICAgICBtb3Rpb246IHRoaXMubW90aW9uXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNob3dDdXJyZW50U3RhdGUoKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIuZmluZChgLnN1YnN0YXRlYCkucmVtb3ZlQ2xhc3MoYGFjdGl2ZWApO1xuICAgIGlmKHRoaXMuc3Vic3RhdGUgPT09IENvbnN0YW50cy5TSEFLRV9ZT1VSX1BIT05FU19HQU1FKSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZ2FtZWApLmFkZENsYXNzKGBhY3RpdmVgKTtcbiAgICB9IGVsc2UgaWYodGhpcy5zdWJzdGF0ZSA9PT0gQ29uc3RhbnRzLlNIQUtFX1lPVVJfUEhPTkVTX0ZJTklTSEVEKSB7XG4gICAgICB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAuc3Vic3RhdGUtZmluaXNoZWRgKS5hZGRDbGFzcyhgYWN0aXZlYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYC5zdWJzdGF0ZS1pbnRyb2ApLmFkZENsYXNzKGBhY3RpdmVgKTtcbiAgICB9XG4gIH1cblxufVxuIl19"}